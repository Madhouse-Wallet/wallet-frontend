var q=Object.defineProperty;var J=(e,r,i)=>r in e?q(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i;var U=(e,r,i)=>J(e,typeof r!="symbol"?r+"":r,i);import{M as R,j as L,g as Z,k as G,K as Q,i as W,N as X,B as T}from"./@1inch-8aFH8gck.js";import{as as Y}from"./@safe-global-CsTz-vid.js";import{g0 as P}from"./index-rJtv6IUT.js";import"./web3-CuCGfqCq.js";import"./@sentry-C02iiIsL.js";import"./@uniswap-j9167AqE.js";var A=R.Buffer;function ee(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var t=0;t<e.length;t++){var o=e.charAt(t),n=o.charCodeAt(0);if(r[n]!==255)throw new TypeError(o+" is ambiguous");r[n]=t}var a=e.length,f=e.charAt(0),l=Math.log(a)/Math.log(256),w=Math.log(256)/Math.log(a);function C(d){if((Array.isArray(d)||d instanceof Uint8Array)&&(d=A.from(d)),!A.isBuffer(d))throw new TypeError("Expected Buffer");if(d.length===0)return"";for(var h=0,E=0,u=0,y=d.length;u!==y&&d[u]===0;)u++,h++;for(var K=(y-u)*w+1>>>0,p=new Uint8Array(K);u!==y;){for(var b=d[u],I=0,v=K-1;(b!==0||I<E)&&v!==-1;v--,I++)b+=256*p[v]>>>0,p[v]=b%a>>>0,b=b/a>>>0;if(b!==0)throw new Error("Non-zero carry");E=I,u++}for(var m=K-E;m!==K&&p[m]===0;)m++;for(var _=f.repeat(h);m<K;++m)_+=e.charAt(p[m]);return _}function N(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return A.alloc(0);for(var h=0,E=0,u=0;d[h]===f;)E++,h++;for(var y=(d.length-h)*l+1>>>0,K=new Uint8Array(y);d[h];){var p=r[d.charCodeAt(h)];if(p===255)return;for(var b=0,I=y-1;(p!==0||b<u)&&I!==-1;I--,b++)p+=a*K[I]>>>0,K[I]=p%256>>>0,p=p/256>>>0;if(p!==0)throw new Error("Non-zero carry");u=b,h++}for(var v=y-u;v!==y&&K[v]===0;)v++;var m=A.allocUnsafe(E+(y-v));m.fill(0,0,E);for(var _=E;v!==y;)m[_++]=K[v++];return m}function $(d){var h=N(d);if(h)return h;throw new Error("Non-base"+a+" character")}return{encode:C,decodeUnsafe:N,decode:$}}var re=ee,te=re,ie="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",ne=te(ie),O=ne,ae=R.Buffer,oe=function(e){function r(n){var a=e(n);return O.encode(ae.concat([n,a],n.length+4))}function i(n){var a=n.slice(0,-4),f=n.slice(-4),l=e(a);if(!(f[0]^l[0]|f[1]^l[1]|f[2]^l[2]|f[3]^l[3]))return a}function t(n){var a=O.decodeUnsafe(n);if(a)return i(a)}function o(n){var a=O.decode(n),f=i(a);if(!f)throw new Error("Invalid checksum");return f}return{encode:r,decode:o,decodeUnsafe:t}},k=L,se=oe;function de(e){var r=k("sha256").update(e).digest();return k("sha256").update(r).digest()}var ce=se(de),g=G(),c=R.Buffer,B=Q(),M=ce,fe=X,x=W,he=c.from("Bitcoin seed","utf8"),D=2147483648,pe=78,F={private:76066276,public:76067358};function s(e){this.versions=e||F,this.depth=0,this.index=0,this._privateKey=null,this._publicKey=null,this.chainCode=null,this._fingerprint=0,this.parentFingerprint=0}Object.defineProperty(s.prototype,"fingerprint",{get:function(){return this._fingerprint}});Object.defineProperty(s.prototype,"identifier",{get:function(){return this._identifier}});Object.defineProperty(s.prototype,"pubKeyHash",{get:function(){return this.identifier}});Object.defineProperty(s.prototype,"privateKey",{get:function(){return this._privateKey},set:function(e){g.equal(e.length,32,"Private key must be 32 bytes."),g(x.privateKeyVerify(e)===!0,"Invalid private key"),this._privateKey=e,this._publicKey=c.from(x.publicKeyCreate(e,!0)),this._identifier=z(this.publicKey),this._fingerprint=this._identifier.slice(0,4).readUInt32BE(0)}});function H(e,r){e._publicKey=c.from(r),e._identifier=z(r),e._fingerprint=e._identifier.slice(0,4).readUInt32BE(0),e._privateKey=null}Object.defineProperty(s.prototype,"publicKey",{get:function(){return this._publicKey},set:function(e){g(e.length===33||e.length===65,"Public key must be 33 or 65 bytes."),g(x.publicKeyVerify(e)===!0,"Invalid public key");const r=e.length===65?x.publicKeyConvert(e,!0):e;H(this,r)}});Object.defineProperty(s.prototype,"privateExtendedKey",{get:function(){return this._privateKey?M.encode(j(this,this.versions.private,c.concat([c.alloc(1,0),this.privateKey]))):null}});Object.defineProperty(s.prototype,"publicExtendedKey",{get:function(){return M.encode(j(this,this.versions.public,this.publicKey))}});s.prototype.derive=function(e){if(e==="m"||e==="M"||e==="m'"||e==="M'")return this;var r=e.split("/"),i=this;return r.forEach(function(t,o){if(o===0){g(/^[mM]{1}/.test(t),'Path must start with "m" or "M"');return}var n=t.length>1&&t[t.length-1]==="'",a=parseInt(t,10);g(a<D,"Invalid index"),n&&(a+=D),i=i.deriveChild(a)}),i};s.prototype.deriveChild=function(e){var r=e>=D,i=c.allocUnsafe(4);i.writeUInt32BE(e,0);var t;if(r){g(this.privateKey,"Could not derive hardened child key");var o=this.privateKey,n=c.alloc(1,0);o=c.concat([n,o]),t=c.concat([o,i])}else t=c.concat([this.publicKey,i]);var a=B.createHmac("sha512",this.chainCode).update(t).digest(),f=a.slice(0,32),l=a.slice(32),w=new s(this.versions);if(this.privateKey)try{w.privateKey=c.from(x.privateKeyTweakAdd(c.from(this.privateKey),f))}catch{return this.deriveChild(e+1)}else try{w.publicKey=c.from(x.publicKeyTweakAdd(c.from(this.publicKey),f,!0))}catch{return this.deriveChild(e+1)}return w.chainCode=l,w.depth=this.depth+1,w.parentFingerprint=this.fingerprint,w.index=e,w};s.prototype.sign=function(e){return c.from(x.ecdsaSign(Uint8Array.from(e),Uint8Array.from(this.privateKey)).signature)};s.prototype.verify=function(e,r){return x.ecdsaVerify(Uint8Array.from(r),Uint8Array.from(e),Uint8Array.from(this.publicKey))};s.prototype.wipePrivateData=function(){return this._privateKey&&B.randomBytes(this._privateKey.length).copy(this._privateKey),this._privateKey=null,this};s.prototype.toJSON=function(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}};s.fromMasterSeed=function(e,r){var i=B.createHmac("sha512",he).update(e).digest(),t=i.slice(0,32),o=i.slice(32),n=new s(r);return n.chainCode=o,n.privateKey=t,n};s.fromExtendedKey=function(e,r,i){r=r||F,i=i||!1;var t=new s(r),o=M.decode(e),n=o.readUInt32BE(0);g(n===r.private||n===r.public,"Version mismatch: does not match private or public"),t.depth=o.readUInt8(4),t.parentFingerprint=o.readUInt32BE(5),t.index=o.readUInt32BE(9),t.chainCode=o.slice(13,45);var a=o.slice(45);return a.readUInt8(0)===0?(g(n===r.private,"Version mismatch: version does not match private"),t.privateKey=a.slice(1)):(g(n===r.public,"Version mismatch: version does not match public"),i?H(t,a):t.publicKey=a),t};s.fromJSON=function(e){return s.fromExtendedKey(e.xpriv)};function j(e,r,i){var t=c.allocUnsafe(pe);t.writeUInt32BE(r,0),t.writeUInt8(e.depth,4);var o=e.depth?e.parentFingerprint:0;return t.writeUInt32BE(o,5),t.writeUInt32BE(e.index,9),e.chainCode.copy(t,13),i.copy(t,45),t}function z(e){var r=B.createHash("sha256").update(e).digest();return new fe().update(r).digest()}s.HARDENED_OFFSET=D;var ue=s;const ve=Z(ue);async function Ue(e,r=0,i=100){const t=await ye(e);return t?Ke(t,r,i).map(n=>n.address):null}class le{constructor(r,i=0,t=100){U(this,"parentDerivedKeyInfo");U(this,"offset");U(this,"limit");U(this,"index");this.parentDerivedKeyInfo=r,this.offset=i,this.limit=t,this.index=0}next(){const r=this.parentDerivedKeyInfo.baseDerivationPath,i=this.offset+this.index,t=`m/${r}/${i}`,o=`m/${i}`,n=this.parentDerivedKeyInfo.hdKey.derive(o),f={address:V(n),hdKey:n,baseDerivationPath:r,derivationPath:t},l=this.index===this.limit;return this.index++,{done:l,value:f}}[Symbol.iterator](){return this}}const S=new Map;async function ye(e){if(S.has(e))return S.get(e)||null;const r=await e.getPublicKey({path:P});if(!r.success)return null;const i=r.payload,t=new ve;t.publicKey=new T(i.publicKey,"hex"),t.chainCode=new T(i.chainCode,"hex");const o=V(t),n={hdKey:t,address:o,derivationPath:P,baseDerivationPath:P.slice(2)};return S.set(e,n),n}function Ke(e,r,i){const t=[],o=new le(e,r,i);for(const n of o)t.push(n);return t}function V(e){const i=e.publicKey;return"0x"+Y.publicToAddress(i,!0).toString("hex").toLowerCase()}export{Ue as getAccountsList};
