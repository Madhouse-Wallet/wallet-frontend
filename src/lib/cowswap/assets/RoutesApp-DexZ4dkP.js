const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Balances-DAK0Ms1l.js","./index-BDmtnLF2.js","./@1inch-8aFH8gck.js","./web3-CuCGfqCq.js","./@sentry-C02iiIsL.js","./@safe-global-CsTz-vid.js","./@uniswap-j9167AqE.js","./index-BkMpxk-P.css","./index-CzQ2E3wO.js","./Governance-MQda5gEm.js","./constants-DqA7korj.js","./Delegate-CfN2UID-.js","./index-B7nSgaSJ.js","./index-CPsYZhZD.js","./index-CTU2WJfD.css","./index-DW03tDzx.js","./index-Dg-7T66f.js"])))=>i.map(i=>d[i]);
var Bc=Object.defineProperty;var zc=(e,t,n)=>t in e?Bc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var xa=(e,t,n)=>zc(e,typeof t!="symbol"?t+"":t,n);import{g as Hc,u as $c,P as N,j as r,E as we,S as Gc,a as _i,c as lt,f as Ii,h as at,i as Si,k as Yc,l as ya,m as U,t as Ei,n as Re,o as k,p as Be,q as qc,r as H,s as Vc,v as so,w as va,x as Xc,O as Kc,y as Ri,z as Qc,A as Zc,T as B,H as Ft,B as Jc,C as He,D as eu,F as yt,G as te,I as $e,J as tu,K as nu,L as ru,M as ji,N as ou,Q as Vn,R as au,U as iu,V as su,W as lu,X as vr,Y as cu,Z as Pi,$ as uu,a0 as ki,a1 as du,a2 as pu,a3 as fu,a4 as lo,a5 as mu,a6 as hu,a7 as gu,a8 as xu,a9 as ae,aa as yu,ab as vu,ac as Le,ad as Tu,ae as co,af as Li,ag as K,ah as uo,ai as Ni,aj as nt,ak as q,al as po,am as wu,an as sn,ao as bu,ap as Cu,aq as Au,ar as Ou,as as _u,at as En,au as Tr,av as Ta,aw as wa,ax as ba,ay as ln,az as Iu,aA as Su,aB as Ca,aC as fo,aD as Eu,aE as Ru,aF as ju,aG as Di,aH as Pu,aI as ku,aJ as cn,aK as Ot,aL as Mi,aM as Aa,aN as Oa,aO as _a,aP as We,aQ as Fi,aR as Lu,aS as wr,aT as w,aU as Nu,aV as Du,aW as Ue,aX as Rn,aY as Mu,aZ as Fu,a_ as Uu,a$ as L,b0 as x,b1 as Wu,b2 as Ui,b3 as mo,b4 as Bu,b5 as ho,b6 as go,b7 as zu,b8 as Hu,b9 as Ut,ba as $u,bb as W,_ as et,bc as Gu,bd as de,be as Lr,bf as xo,bg as Wi,bh as yo,bi as Yu,bj as Bi,bk as ct,bl as Xn,bm as Kn,bn as vo,bo as X,bp as qu,bq as zi,br as Vu,bs as Hi,bt as $i,bu as jn,bv as Wt,bw as Gi,bx as Yi,by as qi,bz as Vi,bA as Bt,bB as Xu,bC as Ku,bD as Xi,bE as Ia,bF as Qu,bG as Zu,bH as Ju,bI as j,bJ as ed,bK as td,bL as nd,bM as rd,bN as Ki,bO as Qn,bP as Zn,bQ as Qi,bR as To,bS as be,bT as Jn,bU as Zi,bV as wo,bW as it,bX as od,bY as ad,bZ as Xe,b_ as _t,b$ as Q,c0 as Ji,c1 as bo,c2 as vt,c3 as st,c4 as id,c5 as sd,c6 as ld,c7 as un,c8 as Nr,c9 as Co,ca as es,cb as er,cc as ue,cd as Jt,ce as cd,cf as ts,cg as tr,ch as ns,ci as rs,cj as ud,ck as Pn,cl as Ao,cm as Tn,cn as os,co as Oo,cp as as,cq as is,cr as dd,cs as _o,ct as ss,cu as Dr,cv as dn,cw as ls,cx as cs,cy as rt,cz as us,cA as Mr,cB as Io,cC as So,cD as ds,cE as ps,cF as fs,cG as pd,cH as ms,cI as hs,cJ as fd,cK as Fr,cL as gs,cM as xs,cN as md,cO as ys,cP as nr,cQ as tn,cR as vs,cS as pn,cT as Tt,cU as $t,cV as fn,cW as Ts,cX as ws,cY as Eo,cZ as Ee,c_ as wt,c$ as hd,d0 as gd,d1 as xd,d2 as bs,d3 as yd,d4 as Cs,d5 as As,d6 as Ro,d7 as vd,d8 as Os,d9 as _s,da as Td,db as wd,dc as Sa,dd as br,de as Is,df as jo,dg as Ss,dh as bd,di as Po,dj as Es,dk as Cd,dl as Ad,dm as Od,dn as _d,dp as Id,dq as ko,dr as Rs,ds as Sd,dt as js,du as Ps,dv as ks,dw as ee,dx as Ed,dy as Lo,dz as Ls,dA as Ns,dB as Rd,dC as jd,dD as Pd,dE as Ds,dF as rr,dG as kd,dH as Ld,dI as Nd,dJ as Ms,dK as or,dL as Dd,dM as No,dN as Fs,dO as Us,dP as ar,dQ as Ws,dR as Md,dS as Bs,dT as mn,dU as Nt,dV as zs,dW as Fd,dX as Ud,dY as Wd,dZ as Do,d_ as Bd,d$ as zd,e0 as Hd,e1 as $d,e2 as Gd,e3 as Yd,e4 as qd,e5 as Vd,e6 as Xd,e7 as Kd,e8 as Qd,e9 as Zd,ea as Jd,eb as ep,ec as Hs,ed as tp,ee as np,ef as rp,eg as $s,eh as Gs,ei as Mo,ej as op,ek as ap,el as ip,em as sp,en as lp,eo as cp,ep as up,eq as dp,er as pp,es as fp,et as mp,eu as hp,ev as gp,ew as Ys,ex as xp,ey as yp,ez as vp,eA as Fo,eB as Tp,eC as wp,eD as bp,eE as Cp,eF as kn,eG as Ap,eH as Op,eI as _p,eJ as Ip,eK as Sp,eL as Ep,eM as Rp,eN as jp,eO as Pp,eP as kp,eQ as Lp,eR as Np,eS as Dp,eT as Mp,eU as Fp,eV as qs,eW as Up,eX as Uo,eY as Wp,eZ as Wo,e_ as Bp,e$ as zp,f0 as Vs,f1 as ut,f2 as Hp,f3 as $p,f4 as Xs,f5 as Gp,f6 as Yp,f7 as qp,f8 as Vp,f9 as Xp,fa as le,fb as Kp,fc as Qp,fd as Ks,fe as Ln,ff as Qs,fg as Zs,fh as Js,fi as Zp,fj as el,fk as Bo,fl as Jp,fm as ef,fn as tf,fo as zo,fp as Ho,fq as tl,fr as nf,fs as nl,ft as nn,fu as rf,fv as of,fw as af,fx as sf,fy as lf,fz as cf,fA as uf,fB as df,fC as bt,fD as pf,fE as ff,fF as mf,fG as hf,fH as gf,fI as xf,fJ as yf,fK as Nn,fL as vf,fM as Tf,fN as wf,fO as bf,fP as Cf,fQ as Af,fR as Of,fS as _f,fT as If,fU as oe,fV as Sf,fW as Ef,fX as Rf,fY as jf,fZ as Pf,f_ as Et,f$ as kf}from"./index-BDmtnLF2.js";import{r as f,R as Y}from"./@sentry-C02iiIsL.js";import{C as ne,P as zt,i as Lf,F as Dn,J as Mn,a as Dt}from"./@uniswap-j9167AqE.js";import{L as Nf,V as rl,g as ol,a9 as al,U as kt,B as Df,S as il,D as Mf,P as Ff,ar as Uf}from"./@safe-global-CsTz-vid.js";import{g as $o,B as Wf}from"./@1inch-8aFH8gck.js";import{r as Bf}from"./index-CzQ2E3wO.js";function Ke(e,t){return e&&t?e.equalTo(t):e===t}function Ea(e){return e&&/^\.\d+|\d+\.?\d*$/.test(e)?e:null}function zf(e,t){localStorage.setItem(e,JSON.stringify(t))}function Hf(e){const t=localStorage.getItem(e);return t?JSON.parse(t):null}var Cr=[60,60,24,7,365/7/12,12];function $f(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(parseInt(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(e))}function Gf(e,t){var n=e<0?1:0;e=Math.abs(e);for(var o=e,a=0;e>=Cr[a]&&a<Cr.length;a++)e/=Cr[a];return e=Math.floor(e),a*=2,e>(a===0?9:1)&&(a+=1),t(e,a,o)[n].replace("%s",e.toString())}function Yf(e,t){var n=new Date;return(+n-+$f(e))/1e3}var Ur=function(e,t,n){var o=Yf(e);return Gf(o,Hc(t))};function _n(e,t=1e3){const[n,o]=f.useState("");return f.useEffect(()=>{if(e)o(Ur(e));else{o("");return}const a=setInterval(()=>{o(Ur(e))},t);return()=>clearInterval(a)},[e,t]),n}const sl=e=>{const[t,n]=f.useState(Date.now());return $c(()=>{n(Date.now())},e),t};function Wr(){return Wr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Wr.apply(this,arguments)}function qf(e,t){if(e==null)return{};var n=Vf(e,t),o,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)o=i[a],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function Vf(e,t){if(e==null)return{};var n={},o=Object.keys(e),a,i;for(i=0;i<o.length;i++)a=o[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}var Go=f.forwardRef(function(e,t){var n=e.color,o=n===void 0?"currentColor":n,a=e.size,i=a===void 0?24:a,s=qf(e,["color","size"]);return Y.createElement("svg",Wr({ref:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:o,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),Y.createElement("polyline",{points:"15 18 9 12 15 6"}))});Go.propTypes={color:N.string,size:N.oneOfType([N.string,N.number])};Go.displayName="ChevronLeft";function Br(){return Br=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Br.apply(this,arguments)}function Xf(e,t){if(e==null)return{};var n=Kf(e,t),o,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)o=i[a],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function Kf(e,t){if(e==null)return{};var n={},o=Object.keys(e),a,i;for(i=0;i<o.length;i++)a=o[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}var Yo=f.forwardRef(function(e,t){var n=e.color,o=n===void 0?"currentColor":n,a=e.size,i=a===void 0?24:a,s=Xf(e,["color","size"]);return Y.createElement("svg",Br({ref:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:o,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),Y.createElement("polyline",{points:"9 18 15 12 9 6"}))});Yo.propTypes={color:N.string,size:N.oneOfType([N.string,N.number])};Yo.displayName="ChevronRight";function zr(){return zr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},zr.apply(this,arguments)}function Qf(e,t){if(e==null)return{};var n=Zf(e,t),o,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)o=i[a],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function Zf(e,t){if(e==null)return{};var n={},o=Object.keys(e),a,i;for(i=0;i<o.length;i++)a=o[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}var ir=f.forwardRef(function(e,t){var n=e.color,o=n===void 0?"currentColor":n,a=e.size,i=a===void 0?24:a,s=Qf(e,["color","size"]);return Y.createElement("svg",zr({ref:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:o,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),Y.createElement("circle",{cx:"12",cy:"12",r:"10"}),Y.createElement("polyline",{points:"12 6 12 12 16 14"}))});ir.propTypes={color:N.string,size:N.oneOfType([N.string,N.number])};ir.displayName="Clock";function Hr(){return Hr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Hr.apply(this,arguments)}function Jf(e,t){if(e==null)return{};var n=em(e,t),o,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)o=i[a],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function em(e,t){if(e==null)return{};var n={},o=Object.keys(e),a,i;for(i=0;i<o.length;i++)a=o[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}var qo=f.forwardRef(function(e,t){var n=e.color,o=n===void 0?"currentColor":n,a=e.size,i=a===void 0?24:a,s=Jf(e,["color","size"]);return Y.createElement("svg",Hr({ref:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:o,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),Y.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),Y.createElement("polyline",{points:"14 2 14 8 20 8"}),Y.createElement("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),Y.createElement("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),Y.createElement("polyline",{points:"10 9 9 9 8 9"}))});qo.propTypes={color:N.string,size:N.oneOfType([N.string,N.number])};qo.displayName="FileText";function $r(){return $r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},$r.apply(this,arguments)}function tm(e,t){if(e==null)return{};var n=nm(e,t),o,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)o=i[a],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function nm(e,t){if(e==null)return{};var n={},o=Object.keys(e),a,i;for(i=0;i<o.length;i++)a=o[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}var Vo=f.forwardRef(function(e,t){var n=e.color,o=n===void 0?"currentColor":n,a=e.size,i=a===void 0?24:a,s=tm(e,["color","size"]);return Y.createElement("svg",$r({ref:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:o,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),Y.createElement("circle",{cx:"12",cy:"12",r:"1"}),Y.createElement("circle",{cx:"12",cy:"5",r:"1"}),Y.createElement("circle",{cx:"12",cy:"19",r:"1"}))});Vo.propTypes={color:N.string,size:N.oneOfType([N.string,N.number])};Vo.displayName="MoreVertical";function Gr(){return Gr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Gr.apply(this,arguments)}function rm(e,t){if(e==null)return{};var n=om(e,t),o,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)o=i[a],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function om(e,t){if(e==null)return{};var n={},o=Object.keys(e),a,i;for(i=0;i<o.length;i++)a=o[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}var Xo=f.forwardRef(function(e,t){var n=e.color,o=n===void 0?"currentColor":n,a=e.size,i=a===void 0?24:a,s=rm(e,["color","size"]);return Y.createElement("svg",Gr({ref:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:o,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),Y.createElement("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"}))});Xo.propTypes={color:N.string,size:N.oneOfType([N.string,N.number])};Xo.displayName="Zap";function am(){return r.jsx(we,{href:Gc,children:"CoW Swap Safe App↗"})}const Ar=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"nonces",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"}];class ll{static createInterface(){return new Nf(Ar)}static connect(t,n){return new rl(t,Ar,n)}}xa(ll,"abi",Ar);function im(){const e=sm(),t=_i(),[n,o]=f.useState(void 0);return f.useEffect(()=>{if(!e){o(void 0);return}t(e).then(o)},[t,e]),n}function sm(){const e=lt(),{inputCurrency:t,tradeType:n}=e||{},o=Ii(t,n),a=at(t),i=t==null?void 0:t.name;return f.useMemo(()=>{if(!(!a||!Si(o)))return{inputToken:{address:a,name:i},permitInfo:o}},[a,i,o])}function lm(e){const t=Yc(),n=t==null?void 0:t.appCode;return f.useMemo(()=>e?n?{appCode:n,widget:{appCode:e,environment:ya}}:{appCode:e,environment:ya}:null,[e,n])}function sr({amount:e,partiallyFillable:t,fastQuote:n}){const o=U(Ei);f.useEffect(()=>{o({amount:e||null,fastQuote:n,partiallyFillable:t})},[o,e,t,n])}function cm(){const{quote:e}=Re(),{amount:t}=k(Ei),n=e==null?void 0:e.quoteResults.quoteResponse.quote.feeAmount,o=f.useMemo(()=>!t||!n?null:ne.fromRawAmount(t==null?void 0:t.currency,n),[t,n]);return Be(o).value}function um(){return k(qc)}const Ra=[];function dm(){const{chainId:e}=H(),t=Vc(),n=um(),{data:o=Ra}=so(["prod-orders",t,e],()=>!e||!t||!va?Ra:Xc(t,{chainId:e,env:"prod"}),{refreshInterval:Kc});return f.useMemo(()=>va?o:n,[n,o])}function pm(e,t,n){var i;const[o,a]=f.useState(!1);return f.useEffect(()=>{!e||!t||!n||Ri({tokenContract:e,spender:t,amountToApprove:n,isBundle:!0}).then(s=>{a(!!s)})},[e==null?void 0:e.address,(i=n==null?void 0:n.quotient)==null?void 0:i.toString(),t]),o}function Pt({title:e,tooltip:t,value:n,toggle:o,disabled:a=!1}){return r.jsxs(Qc,{disabled:a,children:[r.jsxs(Zc,{children:[r.jsx(B,{id:"pDgeaz",values:{title:e}}),r.jsx(Ft,{text:r.jsx(B,{id:"ZDJ+6I",values:{tooltip:t}})})]}),r.jsx(Jc,{isActive:n,toggle:o})]})}function fm(){const e=lt(),t=He(),n=eu(),o=Re(),a=!!o.error,i=o.isLoading&&o.hasParamsChanged,{beforeNetworkCosts:s,isSell:l}=t||{},c=l?s==null?void 0:s.buyAmount:s==null?void 0:s.sellAmount,u=e==null?void 0:e.orderKind;return yt(()=>{if(!c||i)return;n({[l?"outputCurrencyAmount":"inputCurrencyAmount"]:te.serializeFractionToJSON(c)})},[c,n,l,i]),f.useEffect(()=>{if(!a&&!i||!u)return;const p=$e(u)?"outputCurrencyAmount":"inputCurrencyAmount";n({[p]:null})},[i,a,n,u]),null}const mm={};function hm(){return ur(mm),null}function cl(){const{orderKind:e,inputCurrencyAmount:t,outputCurrencyAmount:n,slippage:o}=tu(),a=nu(),i=ru(),l=ji();return ou(),sr({amount:$e(e)?t:n,partiallyFillable:l,fastQuote:!0}),r.jsxs(r.Fragment,{children:[r.jsx(km,{deadlineState:i}),r.jsx(hm,{}),r.jsx(fm,{}),o&&r.jsx(lr,{orderClass:"market",slippageBips:Vn(o),isSmartSlippage:a})]})}function gm(){const e=im(),t=Pm();return t===void 0?void 0:t===!1?e:null}function xm(){const e=lt(),t=ji(),n=au(),o=t?n.preHooks:null,a=t?n.postHooks:null,i=iu(),s=gm(),l=f.useRef(void 0),c=!!e,u=su(),p=lu(),[m,h]=f.useState(void 0);return f.useEffect(()=>{const T=(o||[]).map(b=>vr(b.hook,"hookStore")),d=(a||[]).map(b=>vr(b.hook,"hookStore"));m&&T.push(m);const g=cu({preInteractionHooks:T,postInteractionHooks:d}),v=JSON.stringify(l.current)!==JSON.stringify(g);(!c||u===void 0)&&!v||(g&&!p?(i(g),l.current=g):(i(void 0),l.current=void 0))},[i,c,u,p,o,a,t,m]),f.useEffect(()=>{s===void 0&&!u||h(s&&!u?vr(s,"permit"):void 0)},[s,u]),null}function ym({appCodeWithWidgetMetadata:e,chainId:t,slippageBips:n,isSmartSlippage:o,orderClass:a,utm:i,typedHooks:s,volumeFee:l,replacedOrderUid:c}){const u=U(Pi),p=f.useRef(Promise.resolve());f.useEffect(()=>{if(!e){u(null);return}const{appCode:m,environment:h,widget:T}=e,d={chainId:t,slippageBips:n,isSmartSlippage:o,appCode:m,environment:h,orderClass:a,utm:i,typedHooks:s,partnerFee:l,widget:T,replacedOrderUid:c},g=async()=>{try{const{doc:v,fullAppData:y,appDataKeccak256:b}=await uu(d);u({doc:v,fullAppData:y,appDataKeccak256:b,env:vm(a)})}catch(v){console.error("[useAppData] failed to build appData, falling back to default",d,v),u(ki())}};p.current=p.current.finally(g)},[e,t,u,n,a,i,s,l,c,o])}function vm(e){if(e==="twap")return"prod"}const lr=Y.memo(({slippageBips:e,isSmartSlippage:t,orderClass:n})=>{const{chainId:o}=H(),a=du(),i=pu(),s=fu(),l=lm(a),c=lo(),u=mu();return o?r.jsx(Tm,{appCodeWithWidgetMetadata:l,chainId:o,slippageBips:e,isSmartSlippage:t,orderClass:n,utm:i,typedHooks:s,volumeFee:c,replacedOrderUid:u}):null}),Tm=Y.memo(e=>(xm(),ym(e),null));function Ko({id:e,handleUnlock:t,buttonText:n,orderType:o,buttonLink:a,items:i,title:s,subtitle:l}){return r.jsxs(hu,{children:[r.jsxs(gu,{children:[r.jsx("h3",{children:s}),r.jsx("strong",{children:l})]}),i&&r.jsx(xu,{children:i.map(({isNew:c,content:u},p)=>r.jsxs("li",{"data-is-new":c||null,children:[r.jsx("span",{children:r.jsx(ae,{src:yu})})," ",u]},p))}),r.jsxs(vu,{children:[a&&r.jsxs("span",{children:["Learn more about ",r.jsxs(we,{href:a,children:[o," orders ↗"]})]}),r.jsx(Le,{id:`unlock-${e}-btn`,onClick:t,children:n})]})]})}function cr(){return k(Tu)}function wm(){const e=U(co),t=cr();return f.useMemo(()=>[t.deadline,n=>e({deadline:n})],[t.deadline,e])}function bm(){const e=U(co),t=cr();return f.useMemo(()=>[t.showRecipient,n=>e({showRecipient:n})],[t.showRecipient,e])}function Cm(){const e=U(co),t=cr();return f.useMemo(()=>[t.isUnlocked,n=>e({isUnlocked:n})],[t.isUnlocked,e])}function ul(){const e=Li();return f.useCallback((t,n)=>{e({[t===K.INPUT?"inputCurrencyAmount":"outputCurrencyAmount"]:te.serializeFractionToJSON(n)})},[e])}function Am(){const{inputCurrency:e,outputCurrency:t,orderKind:n}=uo(),o=Li(),a=Ni(),i=ul(),s=f.useCallback((p,m)=>{const h=p===K.INPUT?e:t;if(!h)return;const T=nt(m,h);i(p,T)},[i,e,t]),l=f.useMemo(()=>({orderKind:$e(n)?q.OrderKind.BUY:q.OrderKind.SELL}),[n]),c=po(l),u=f.useCallback(p=>o({recipient:p}),[o]);return f.useMemo(()=>({onUserInput:s,onSwitchTokens:c,onChangeRecipient:u,onCurrencySelection:a}),[s,c,u,a])}function Om(){return r.jsx(r.Fragment,{children:r.jsx(wu,{})})}const _m=[{content:"Maximize your yield on existing LP positions"},{content:"Seamlessly swap your tokens into CoW AMM pools"},{content:"Earn higher returns with reduced impermanent loss"},{content:"Leverage advanced strategies for optimal growth"}],Gt={id:"yield-widget",title:"Unlock Enhanced Yield Features",subtitle:"Boooost your current LP positions with CoW AMM’s pools.",orderType:"yield",buttonText:"Start boooosting your yield!"};function Im(){const{chainId:e,account:t}=H(),{showRecipient:n}=cr(),o=wm(),a=bm(),[i,s]=Cm(),{isLoading:l}=Re(),c=sn(),u=Am(),p=He(),m=bu(),h=Cu(),T=Au(),{inputCurrency:d,outputCurrency:g,inputCurrencyAmount:v,outputCurrencyAmount:y,inputCurrencyBalance:b,outputCurrencyBalance:C,inputCurrencyFiatAmount:A,outputCurrencyFiatAmount:I,recipient:E}=uo(),_=Ou(_u({deadline:o[0]}),u),O=f.useMemo(()=>!m||!d?null:m[En(d).toLowerCase()],[d,m]),S=f.useMemo(()=>!m||!g?null:m[En(g).toLowerCase()],[g,m]),R=!!(g&&g instanceof Tr),P=O==null?void 0:O.info.apy,D=S==null?void 0:S.info.apy,M=d instanceof Tr&&g instanceof Tr&&d.tokens.every(fe=>g.tokens.includes(fe)),$={field:K.INPUT,currency:d,amount:v,isIndependent:!0,balance:b,fiatAmount:A,receiveAmountInfo:null,topContent:d&&r.jsx(Ta,{chainId:e,sellToken:d,children:r.jsx(wa,{apy:P,isSuperior:!!(M&&d.lpTokenProvider===ba.COW_AMM&&(!(P&&D)||P>D))})})},Z={field:K.OUTPUT,currency:g,amount:y,isIndependent:!1,balance:C,fiatAmount:I,receiveAmountInfo:p,topContent:g?r.jsx(Ta,{chainId:e,sellToken:g,oppositeToken:d,children:r.jsx(wa,{apy:D,isSuperior:!!(M&&g.lpTokenProvider===ba.COW_AMM&&(!(P&&D)||D>P))})}):null},ie={amount:$.amount,fiatAmount:$.fiatAmount,balance:$.balance,label:"Sell amount"},pe={amount:Z.amount,fiatAmount:Z.fiatAmount,balance:Z.balance,label:"Receive (before fees)"},re=ln($.amount,Z.amount),Me={topContent:h?r.jsx(Ca,{token:T==null?void 0:T.target.token,apyDiff:T==null?void 0:T.apyDiff}):t?null:r.jsx(Ca,{token:void 0,apyDiff:void 0}),selectTokenWidget:r.jsx(Di,{displayLpTokenLists:!0}),settingsWidget:r.jsx(ju,{recipientToggleState:a,deadlineState:o}),bottomContent:f.useCallback(fe=>r.jsxs(r.Fragment,{children:[r.jsx(Iu,{isTradePriceUpdating:l,rateInfoParams:re,deadline:o[0]}),r.jsx(Om,{}),fe,r.jsx(Su,{isOutputLpToken:R,isTradeContextReady:_.contextIsReady})]}),[_.contextIsReady,l,re,o,R]),lockScreen:i?void 0:r.jsx(Ko,{id:Gt.id,items:_m,handleUnlock:()=>s(!0),title:Gt.title,subtitle:Gt.subtitle,orderType:Gt.orderType,buttonText:Gt.buttonText})},z={compactView:!0,enableSmartSlippage:!0,displayTokenName:!0,isMarketOrderWidget:!0,recipient:E,showRecipient:n,isTradePriceUpdating:l,priceImpact:c,customSelectTokenButton:Eu};return r.jsx(fo,{disableOutput:!0,slots:Me,actions:u,params:z,inputCurrencyInfo:$,outputCurrencyInfo:Z,confirmModal:r.jsx(Ru,{doTrade:_.callback,recipient:E,priceImpact:c,inputCurrencyInfo:ie,outputCurrencyInfo:pe})})}function Sm(){const e=lt(),t=He(),{beforeNetworkCosts:n}=t||{},o=ul(),a=e==null?void 0:e.inputCurrency,i=e==null?void 0:e.outputCurrency;return f.useLayoutEffect(()=>{!i||!a||!(n!=null&&n.buyAmount)||o(K.OUTPUT,n.buyAmount)},[n,a,i,o]),f.useEffect(()=>{i&&o(K.OUTPUT,ne.fromRawAmount(i,0))},[e==null?void 0:e.inputCurrencyAmount,e==null?void 0:e.inputCurrency,o,i]),null}const Em={onlySell:!0};function Rm(){return ur(Em),null}function jm(){const{inputCurrencyAmount:e}=uo();return Pu(),sr({amount:e,partiallyFillable:!1,fastQuote:!0}),r.jsxs(r.Fragment,{children:[r.jsx(Rm,{}),r.jsx(Sm,{}),r.jsx(lr,{orderClass:"market",slippageBips:Vn(ku)})]})}function ur({onAmountsUpdate:e,onlySell:t}){const n=cn(),{search:o,pathname:a}=Ot(),i=f.useMemo(()=>new URLSearchParams(o),[o]),{updateState:s}=Mi(),l=lt(),{inputCurrency:c,outputCurrency:u,inputCurrencyAmount:p,outputCurrencyAmount:m}=l||{},h=f.useRef(!1);h.current=!!(p||m);const T=f.useCallback(()=>{if(!o)return;const d=new URLSearchParams(o);d.delete(Aa),d.delete(Oa),d.delete(_a),n({pathname:a,search:d.toString()},{replace:!0})},[n,a,o]);yt(()=>{const d=i.get(_a),g=Ea(i.get(Oa)),v=Ea(i.get(Aa)),y={},b=c&&g&&+g>=0,C=u&&v&&+v>=0,A=b?nt(g,c):null,I=C?nt(v,u):null,E=!We(A),_=!We(I);_&&(y.outputCurrencyAmount=te.serializeFractionToJSON(I)),E&&(y.inputCurrencyAmount=te.serializeFractionToJSON(A)),t?(y.outputCurrencyAmount=null,y.orderKind=q.OrderKind.SELL):d?y.orderKind=d:(E||_)&&(y.orderKind=!E&&_?q.OrderKind.BUY:q.OrderKind.SELL),!h.current&&!y.inputCurrencyAmount&&c&&(y.inputCurrencyAmount=te.serializeFractionToJSON(nt("1",c))),Object.keys(y).length>0&&((c||u)&&setTimeout(T),s==null||s(y),A&&I&&(e==null||e({inputAmount:A,outputAmount:I})))},[i,c,u,t])}function Pm(){const e=He(),{chainId:t,account:n}=H(),o=e==null?void 0:e.afterSlippage.sellAmount,a=q.COW_PROTOCOL_VAULT_RELAYER_ADDRESS[t],{enoughAllowance:i}=Fi({account:n,amount:o,checkAllowanceAddress:a});return i}const dl="UserDeadlineSettings";function km({deadlineState:e}){const[t,n]=e,o=Lu();f.useEffect(()=>{const{ethFlow:i}=Yr()||{};i&&o&&n(i)},[]);const a=f.useRef(!1);return f.useEffect(()=>{if(o){const{regular:i,ethFlow:s}=Yr()||{};if(a.current=!0,t>=wr)ja({regular:i||t,ethFlow:t});else{const l=s&&s>wr?s:wr;n(l),ja({regular:t,ethFlow:l})}}else a.current&&(Lm(n),a.current=!1)},[o,n,t]),null}function ja(e){zf(dl,e)}function Yr(){return Hf(dl)}function Lm(e){const{regular:t}=Yr()||{};t&&e(t)}const Nm=w.div.withConfig({displayName:"FlashingLoading__LoadingWrapper",componentId:"sc-st4d8g-0"})(["display:flex;flex-flow:column wrap;align-items:center;justify-content:center;position:fixed;background:",";z-index:99;top:0;left:0;width:100vw;height:100vh;backdrop-filter:blur(3px);> svg{animation:pulse 1s infinite ease-in-out;transform-style:preserve-3d;backface-visibility:visible;}> svg > g{fill:currentColor;}> span{display:block;text-transform:uppercase;font-size:10px;font-weight:500;letter-spacing:2px;margin:5px auto 0;color:inherit;}@keyframes pulse{0%{transform:scale(1);}20%{transform:scale(1.05);}30%{transform:scale(1);}40%{transform:scale(1.05);}50%{transform:scale(1);}100%{transform:scale(1);}}"],({theme:e})=>Ue(e.bg2,.8)),Qo=()=>r.jsxs(Nm,{children:[r.jsx(Nu,{variant:Du.CowSwap,height:100,logoIconOnly:!0}),r.jsx("span",{children:"Loading..."})]});function Pa(){return r.jsx(qr,{path:"/swap"})}function qr({path:e}){return r.jsx(Rn,{to:e})}function Dm(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var pl=f,Mm=Dm(pl);function ka(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fm(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Um=!!(typeof window<"u"&&window.document&&window.document.createElement);function Wm(e,t,n){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof t!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof n<"u"&&typeof n!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function o(a){return a.displayName||a.name||"Component"}return function(i){if(typeof i!="function")throw new Error("Expected WrappedComponent to be a React component.");var s=[],l;function c(){l=e(s.map(function(p){return p.props})),u.canUseDOM?t(l):n&&(l=n(l))}var u=function(p){Fm(m,p);function m(){return p.apply(this,arguments)||this}m.peek=function(){return l},m.rewind=function(){if(m.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var d=l;return l=void 0,s=[],d};var h=m.prototype;return h.UNSAFE_componentWillMount=function(){s.push(this),c()},h.componentDidUpdate=function(){c()},h.componentWillUnmount=function(){var d=s.indexOf(this);s.splice(d,1),c()},h.render=function(){return Mm.createElement(i,this.props)},m}(pl.PureComponent);return ka(u,"displayName","SideEffect("+o(i)+")"),ka(u,"canUseDOM",Um),u}}var Bm=Wm;const zm=$o(Bm);var ht={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},F={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(F).map(function(e){return F[e]});var V={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},Fn={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},rn={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},Hm=Object.keys(Fn).reduce(function(e,t){return e[Fn[t]]=t,e},{}),$m=[F.NOSCRIPT,F.SCRIPT,F.STYLE],Ne="data-react-helmet",Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ym=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},qm=function(){function e(t,n){for(var o=0;o<n.length;o++){var a=n[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Vm=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},La=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},Xm=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},Vr=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},Km=function(t){var n=Lt(t,F.TITLE),o=Lt(t,rn.TITLE_TEMPLATE);if(o&&n)return o.replace(/%s/g,function(){return Array.isArray(n)?n.join(""):n});var a=Lt(t,rn.DEFAULT_TITLE);return n||a||void 0},Qm=function(t){return Lt(t,rn.ON_CHANGE_CLIENT_STATE)||function(){}},Or=function(t,n){return n.filter(function(o){return typeof o[t]<"u"}).map(function(o){return o[t]}).reduce(function(o,a){return ye({},o,a)},{})},Zm=function(t,n){return n.filter(function(o){return typeof o[F.BASE]<"u"}).map(function(o){return o[F.BASE]}).reverse().reduce(function(o,a){if(!o.length)for(var i=Object.keys(a),s=0;s<i.length;s++){var l=i[s],c=l.toLowerCase();if(t.indexOf(c)!==-1&&a[c])return o.concat(a)}return o},[])},Yt=function(t,n,o){var a={};return o.filter(function(i){return Array.isArray(i[t])?!0:(typeof i[t]<"u"&&nh("Helmet: "+t+' should be of type "Array". Instead found type "'+Gm(i[t])+'"'),!1)}).map(function(i){return i[t]}).reverse().reduce(function(i,s){var l={};s.filter(function(h){for(var T=void 0,d=Object.keys(h),g=0;g<d.length;g++){var v=d[g],y=v.toLowerCase();n.indexOf(y)!==-1&&!(T===V.REL&&h[T].toLowerCase()==="canonical")&&!(y===V.REL&&h[y].toLowerCase()==="stylesheet")&&(T=y),n.indexOf(v)!==-1&&(v===V.INNER_HTML||v===V.CSS_TEXT||v===V.ITEM_PROP)&&(T=v)}if(!T||!h[T])return!1;var b=h[T].toLowerCase();return a[T]||(a[T]={}),l[T]||(l[T]={}),a[T][b]?!1:(l[T][b]=!0,!0)}).reverse().forEach(function(h){return i.push(h)});for(var c=Object.keys(l),u=0;u<c.length;u++){var p=c[u],m=Fu({},a[p],l[p]);a[p]=m}return i},[]).reverse()},Lt=function(t,n){for(var o=t.length-1;o>=0;o--){var a=t[o];if(a.hasOwnProperty(n))return a[n]}return null},Jm=function(t){return{baseTag:Zm([V.HREF,V.TARGET],t),bodyAttributes:Or(ht.BODY,t),defer:Lt(t,rn.DEFER),encode:Lt(t,rn.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Or(ht.HTML,t),linkTags:Yt(F.LINK,[V.REL,V.HREF],t),metaTags:Yt(F.META,[V.NAME,V.CHARSET,V.HTTPEQUIV,V.PROPERTY,V.ITEM_PROP],t),noscriptTags:Yt(F.NOSCRIPT,[V.INNER_HTML],t),onChangeClientState:Qm(t),scriptTags:Yt(F.SCRIPT,[V.SRC,V.INNER_HTML],t),styleTags:Yt(F.STYLE,[V.CSS_TEXT],t),title:Km(t),titleAttributes:Or(ht.TITLE,t)}},Xr=function(){var e=Date.now();return function(t){var n=Date.now();n-e>16?(e=n,t(n)):setTimeout(function(){Xr(t)},0)}}(),Na=function(t){return clearTimeout(t)},eh=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Xr:ol.requestAnimationFrame||Xr,th=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||Na:ol.cancelAnimationFrame||Na,nh=function(t){return console&&typeof console.warn=="function"&&console.warn(t)},qt=null,rh=function(t){qt&&th(qt),t.defer?qt=eh(function(){Da(t,function(){qt=null})}):(Da(t),qt=null)},Da=function(t,n){var o=t.baseTag,a=t.bodyAttributes,i=t.htmlAttributes,s=t.linkTags,l=t.metaTags,c=t.noscriptTags,u=t.onChangeClientState,p=t.scriptTags,m=t.styleTags,h=t.title,T=t.titleAttributes;Kr(F.BODY,a),Kr(F.HTML,i),oh(h,T);var d={baseTag:Rt(F.BASE,o),linkTags:Rt(F.LINK,s),metaTags:Rt(F.META,l),noscriptTags:Rt(F.NOSCRIPT,c),scriptTags:Rt(F.SCRIPT,p),styleTags:Rt(F.STYLE,m)},g={},v={};Object.keys(d).forEach(function(y){var b=d[y],C=b.newTags,A=b.oldTags;C.length&&(g[y]=C),A.length&&(v[y]=d[y].oldTags)}),n&&n(),u(t,g,v)},fl=function(t){return Array.isArray(t)?t.join(""):t},oh=function(t,n){typeof t<"u"&&document.title!==t&&(document.title=fl(t)),Kr(F.TITLE,n)},Kr=function(t,n){var o=document.getElementsByTagName(t)[0];if(o){for(var a=o.getAttribute(Ne),i=a?a.split(","):[],s=[].concat(i),l=Object.keys(n),c=0;c<l.length;c++){var u=l[c],p=n[u]||"";o.getAttribute(u)!==p&&o.setAttribute(u,p),i.indexOf(u)===-1&&i.push(u);var m=s.indexOf(u);m!==-1&&s.splice(m,1)}for(var h=s.length-1;h>=0;h--)o.removeAttribute(s[h]);i.length===s.length?o.removeAttribute(Ne):o.getAttribute(Ne)!==l.join(",")&&o.setAttribute(Ne,l.join(","))}},Rt=function(t,n){var o=document.head||document.querySelector(F.HEAD),a=o.querySelectorAll(t+"["+Ne+"]"),i=Array.prototype.slice.call(a),s=[],l=void 0;return n&&n.length&&n.forEach(function(c){var u=document.createElement(t);for(var p in c)if(c.hasOwnProperty(p))if(p===V.INNER_HTML)u.innerHTML=c.innerHTML;else if(p===V.CSS_TEXT)u.styleSheet?u.styleSheet.cssText=c.cssText:u.appendChild(document.createTextNode(c.cssText));else{var m=typeof c[p]>"u"?"":c[p];u.setAttribute(p,m)}u.setAttribute(Ne,"true"),i.some(function(h,T){return l=T,u.isEqualNode(h)})?i.splice(l,1):s.push(u)}),i.forEach(function(c){return c.parentNode.removeChild(c)}),s.forEach(function(c){return o.appendChild(c)}),{oldTags:i,newTags:s}},ml=function(t){return Object.keys(t).reduce(function(n,o){var a=typeof t[o]<"u"?o+'="'+t[o]+'"':""+o;return n?n+" "+a:a},"")},ah=function(t,n,o,a){var i=ml(o),s=fl(n);return i?"<"+t+" "+Ne+'="true" '+i+">"+Vr(s,a)+"</"+t+">":"<"+t+" "+Ne+'="true">'+Vr(s,a)+"</"+t+">"},ih=function(t,n,o){return n.reduce(function(a,i){var s=Object.keys(i).filter(function(u){return!(u===V.INNER_HTML||u===V.CSS_TEXT)}).reduce(function(u,p){var m=typeof i[p]>"u"?p:p+'="'+Vr(i[p],o)+'"';return u?u+" "+m:m},""),l=i.innerHTML||i.cssText||"",c=$m.indexOf(t)===-1;return a+"<"+t+" "+Ne+'="true" '+s+(c?"/>":">"+l+"</"+t+">")},"")},hl=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(o,a){return o[Fn[a]||a]=t[a],o},n)},sh=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(o,a){return o[Hm[a]||a]=t[a],o},n)},lh=function(t,n,o){var a,i=(a={key:n},a[Ne]=!0,a),s=hl(o,i);return[Y.createElement(F.TITLE,s,n)]},ch=function(t,n){return n.map(function(o,a){var i,s=(i={key:a},i[Ne]=!0,i);return Object.keys(o).forEach(function(l){var c=Fn[l]||l;if(c===V.INNER_HTML||c===V.CSS_TEXT){var u=o.innerHTML||o.cssText;s.dangerouslySetInnerHTML={__html:u}}else s[c]=o[l]}),Y.createElement(t,s)})},qe=function(t,n,o){switch(t){case F.TITLE:return{toComponent:function(){return lh(t,n.title,n.titleAttributes)},toString:function(){return ah(t,n.title,n.titleAttributes,o)}};case ht.BODY:case ht.HTML:return{toComponent:function(){return hl(n)},toString:function(){return ml(n)}};default:return{toComponent:function(){return ch(t,n)},toString:function(){return ih(t,n,o)}}}},gl=function(t){var n=t.baseTag,o=t.bodyAttributes,a=t.encode,i=t.htmlAttributes,s=t.linkTags,l=t.metaTags,c=t.noscriptTags,u=t.scriptTags,p=t.styleTags,m=t.title,h=m===void 0?"":m,T=t.titleAttributes;return{base:qe(F.BASE,n,a),bodyAttributes:qe(ht.BODY,o,a),htmlAttributes:qe(ht.HTML,i,a),link:qe(F.LINK,s,a),meta:qe(F.META,l,a),noscript:qe(F.NOSCRIPT,c,a),script:qe(F.SCRIPT,u,a),style:qe(F.STYLE,p,a),title:qe(F.TITLE,{title:h,titleAttributes:T},a)}},uh=function(t){var n,o;return o=n=function(a){Vm(i,a);function i(){return Ym(this,i),Xm(this,a.apply(this,arguments))}return i.prototype.shouldComponentUpdate=function(l){return!Mu(this.props,l)},i.prototype.mapNestedChildrenToProps=function(l,c){if(!c)return null;switch(l.type){case F.SCRIPT:case F.NOSCRIPT:return{innerHTML:c};case F.STYLE:return{cssText:c}}throw new Error("<"+l.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},i.prototype.flattenArrayTypeChildren=function(l){var c,u=l.child,p=l.arrayTypeChildren,m=l.newChildProps,h=l.nestedChildren;return ye({},p,(c={},c[u.type]=[].concat(p[u.type]||[],[ye({},m,this.mapNestedChildrenToProps(u,h))]),c))},i.prototype.mapObjectTypeChildren=function(l){var c,u,p=l.child,m=l.newProps,h=l.newChildProps,T=l.nestedChildren;switch(p.type){case F.TITLE:return ye({},m,(c={},c[p.type]=T,c.titleAttributes=ye({},h),c));case F.BODY:return ye({},m,{bodyAttributes:ye({},h)});case F.HTML:return ye({},m,{htmlAttributes:ye({},h)})}return ye({},m,(u={},u[p.type]=ye({},h),u))},i.prototype.mapArrayTypeChildrenToProps=function(l,c){var u=ye({},c);return Object.keys(l).forEach(function(p){var m;u=ye({},u,(m={},m[p]=l[p],m))}),u},i.prototype.warnOnInvalidChildren=function(l,c){return!0},i.prototype.mapChildrenToProps=function(l,c){var u=this,p={};return Y.Children.forEach(l,function(m){if(!(!m||!m.props)){var h=m.props,T=h.children,d=La(h,["children"]),g=sh(d);switch(u.warnOnInvalidChildren(m,T),m.type){case F.LINK:case F.META:case F.NOSCRIPT:case F.SCRIPT:case F.STYLE:p=u.flattenArrayTypeChildren({child:m,arrayTypeChildren:p,newChildProps:g,nestedChildren:T});break;default:c=u.mapObjectTypeChildren({child:m,newProps:c,newChildProps:g,nestedChildren:T});break}}}),c=this.mapArrayTypeChildrenToProps(p,c),c},i.prototype.render=function(){var l=this.props,c=l.children,u=La(l,["children"]),p=ye({},u);return c&&(p=this.mapChildrenToProps(c,p)),Y.createElement(t,p)},qm(i,null,[{key:"canUseDOM",set:function(l){t.canUseDOM=l}}]),i}(Y.Component),n.propTypes={base:N.object,bodyAttributes:N.object,children:N.oneOfType([N.arrayOf(N.node),N.node]),defaultTitle:N.string,defer:N.bool,encodeSpecialCharacters:N.bool,htmlAttributes:N.object,link:N.arrayOf(N.object),meta:N.arrayOf(N.object),noscript:N.arrayOf(N.object),onChangeClientState:N.func,script:N.arrayOf(N.object),style:N.arrayOf(N.object),title:N.string,titleAttributes:N.object,titleTemplate:N.string},n.defaultProps={defer:!0,encodeSpecialCharacters:!0},n.peek=t.peek,n.rewind=function(){var a=t.rewind();return a||(a=gl({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),a},o},dh=function(){return null},ph=zm(Jm,rh,gl)(dh),Qr=uh(ph);Qr.renderStatic=Qr.rewind;function Ht({title:e}){return r.jsxs(Qr,{defer:!1,children:[r.jsx("meta",{charSet:"utf-8"}),r.jsxs("title",{children:[e?`${e} - `:"",Uu]})]})}function fh({longList:e,children:t,className:n}){return r.jsx(mh,{longList:e,className:n,children:r.jsx("div",{children:t})})}const mh=w.div.withConfig({displayName:"SideMenu__Wrapper",componentId:"sc-j13hbk-0"})(["display:flex;flex-flow:column wrap;font-size:16px;font-weight:500;line-height:1;margin:0;color:inherit;height:max-content;position:sticky;top:0;width:100%;padding:84px 0 0;","{padding:0;margin:0;position:relative;}> div{height:90vh;overflow-y:auto;margin-right:5px;",";","{height:auto;}}> div > ul{display:flex;flex-flow:column wrap;list-style:none;margin:0;padding:0;font-size:inherit;","{background:var(",");border-radius:16px;padding:12px;margin:0 0 24px;}> li{width:100%;> a{margin:4px 0;padding:12px;border-radius:6px;width:100%;text-decoration:none;color:inherit;opacity:0.65;transition:opacity var(",") ease-in-out;display:block;","{margin:0;}&:hover,&.active{opacity:1;}&.active{font-weight:600;","{background:var(",");border-radius:16px;}}}}}"],({longList:e})=>(e?L.upToMedium:L.upToSmall)(),({theme:e})=>e.colorScrollbar,({longList:e})=>(e?L.upToMedium:L.upToSmall)(),({longList:e})=>(e?L.upToMedium:L.upToSmall)(),x.COLOR_TEXT_OPACITY_10,x.ANIMATION_DURATION,({longList:e})=>(e?L.upToMedium:L.upToSmall)(),({longList:e})=>(e?L.upToMedium:L.upToSmall)(),x.COLOR_TEXT_OPACITY_10);function hh(){return r.jsx(fh,{longList:!0,children:r.jsx("ul",{children:Wu.map(({title:e,url:t})=>r.jsx("li",{children:r.jsx(Ui,{end:!0,to:t,className:({isActive:n})=>n?"active":void 0,children:e})},t))})})}const KC=w.div.withConfig({displayName:"styled__MenuWrapper",componentId:"sc-1ehann6-0"})(["position:relative;"]),QC=w.button.withConfig({displayName:"styled__MenuButton",componentId:"sc-1ehann6-1"})(["background:none;outline:none;border:none;cursor:pointer;color:inherit;background:var(",");height:44px;border-radius:21px;padding:0 16px;display:flex;align-items:center;font-size:16px;white-space:nowrap;"],x.COLOR_PAPER),ZC=w(mo).withConfig({displayName:"styled__StyledChevronDown",componentId:"sc-1ehann6-2"})(["margin-left:5px;font-size:16px;"]),JC=w.div.withConfig({displayName:"styled__Menu",componentId:"sc-1ehann6-3"})(["border-radius:16px;background:var(",");box-shadow:0 12px 18px var(",");display:flex;flex-direction:column;position:absolute;left:0;bottom:0;transform:translateY(105%);max-width:400px;min-width:250px;z-index:99;padding:12px;"],x.COLOR_PAPER,x.COLOR_PAPER_DARKEST),eA=w.div.withConfig({displayName:"styled__MenuItem",componentId:"sc-1ehann6-4"})(["transition:background 0.2s ease-in;background:",";color:",";justify-content:space-between;border-radius:8px;padding:0.4rem 0.8rem;cursor:pointer;display:flex;&:hover{background:var(",");}:not(:last-child){margin-bottom:5px;}"],({active:e})=>e?`var(${x.COLOR_PAPER_DARKER})`:"transparent",({active:e})=>e?`var(${x.COLOR_TEXT})`:`var(${x.COLOR_TEXT_OPACITY_70})`,x.COLOR_PAPER_DARKER),gh=w.div.withConfig({displayName:"styled__Wrapper",componentId:"sc-1ehann6-5"})(["display:grid;grid-template-columns:120px minmax(auto,1140px);grid-template-rows:max-content;margin:0;width:100%;max-width:100%;justify-content:center;","{display:flex;flex-flow:column wrap;}"],L.upToMedium()),xh=w.div.withConfig({displayName:"styled__AccountPageWrapper",componentId:"sc-1ehann6-6"})(["width:100%;max-width:100%;border:none;background:none;padding:0;margin:0;"]),tA=w.div.withConfig({displayName:"styled__AccountHeading",componentId:"sc-1ehann6-7"})(["display:flex;flex-flow:row wrap;align-items:center;padding:0 0 20px;gap:12px;"]),nA=w.button.withConfig({displayName:"styled__RemoveTokens",componentId:"sc-1ehann6-8"})(["background:none;border:none;color:var(",");cursor:pointer;&:hover{text-decoration:underline;}"],x.COLOR_TEXT),rA=w.div.withConfig({displayName:"styled__LeftSection",componentId:"sc-1ehann6-9"})(["display:flex;"]),oA=w.div.withConfig({displayName:"styled__ClearSearchInput",componentId:"sc-1ehann6-10"})(["position:absolute;right:10px;cursor:pointer;top:0;bottom:0;margin:auto;display:flex;align-items:center;"]),aA=w.div.withConfig({displayName:"styled__Overview",componentId:"sc-1ehann6-11"})(["background:var(",");color:inherit;border-radius:16px;gap:16px;margin:0;padding:0;z-index:2;position:relative;overflow:hidden;","{display:flex;flex-flow:column wrap;}"],x.COLOR_PAPER,L.upToMedium()),iA=w(Bu).withConfig({displayName:"styled__SearchInputFormatter",componentId:"sc-1ehann6-12"})(["width:100%;flex:1 1 fit-content;position:relative;color:inherit;> input{border:none;transition:background var(",") ease-in-out;background:var(",");color:inherit;}> input::placeholder{font-size:16px;color:inherit;opacity:0.5;}"],x.ANIMATION_DURATION,x.COLOR_PAPER),sA=w.input.withConfig({displayName:"styled__TokenSearchInput",componentId:"sc-1ehann6-13"})(["margin:0;font-size:14px;max-width:280px;width:100%;align-self:flex-end;box-shadow:none;background:var(",");border:1px solid var(",");border-radius:21px;transition:background var(",") ease-in-out,max-width var(",") ease-in-out;appearance:none;height:44px;padding:0 16px;outline:0;&:focus{max-width:500px;background:var(",");outline:0;","{width:100%;}}&::placeholder{font-size:14px !important;color:inherit;opacity:0.5;transition:opacity var(",") ease-in-out;}&:focus::placeholder{color:inherit;opacity:1;}","{max-width:100%;}","{font-size:12px !important;&::placeholder{font-size:12px !important;}}"],x.COLOR_PAPER_DARKER,x.COLOR_BORDER,x.ANIMATION_DURATION,x.ANIMATION_DURATION,x.COLOR_PAPER,L.upToMedium(),x.ANIMATION_DURATION,L.upToMedium(),L.upToSmall()),yh=f.lazy(()=>et(()=>import("./Balances-DAK0Ms1l.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),vh=f.lazy(()=>et(()=>import("./Governance-MQda5gEm.js"),__vite__mapDeps([9,1,2,3,4,5,6,7,10]),import.meta.url)),Th=f.lazy(()=>et(()=>import("./Delegate-CfN2UID-.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,10]),import.meta.url));function wh(e){switch(e){case W.ACCOUNT:return["account-overview","Account overview"];case W.ACCOUNT_GOVERNANCE:return["account-governance","Governance"];case W.ACCOUNT_TOKENS:return["account-tokens","Tokens overview"];default:return[]}}const bh=()=>r.jsx(r.Fragment,{children:r.jsxs(Hu,{children:[r.jsx(Ht,{title:Ut.ACCOUNT_OVERVIEW}),r.jsxs($u,{children:[r.jsx(yh,{}),r.jsx(vh,{}),r.jsx(Th,{})]})]})});function Ch(){const{pathname:e}=Ot(),[t,n]=wh(e);return r.jsxs(gh,{children:[r.jsx(hh,{}),r.jsx(f.Suspense,{fallback:r.jsx(Qo,{}),children:r.jsx(xh,{children:r.jsxs(ho,{children:[r.jsx(go,{id:t,children:n}),r.jsx(zu,{})]})})})]})}function xl(e){return Gu(([t,n])=>{e.sendEvent({category:de.TRADE,action:`Change ${t} amount`,value:n})},1e3)}function It(){return k(xo)}function Ah(e){const t=k(Lr),n=U(xo),o=Wi(Lr,!1),a=t.isUnlocked;f.useEffect(()=>{n({...o,isUnlocked:a,slippage:e,tradeType:yo.ADVANCED_ORDERS})},[o,a,n,e])}const Oh={outputCurrencyAmount:null};function _h(){const{inputCurrency:e}=It(),t=Yu(),n=Bi(),o=ct(),a=f.useMemo(()=>xl(o),[o]),i=Xn(),s=f.useCallback((p,m)=>{t(p,m)},[t]),l=f.useCallback((p,m)=>{a([p,Number(m)]),n({amount:{isTyped:!0,value:m},currency:e,field:p})},[e,n,a]),c=f.useCallback(p=>{i({recipient:p})},[i]),u=po(Oh);return f.useMemo(()=>({onCurrencySelection:s,onUserInput:l,onChangeRecipient:c,onSwitchTokens:u}),[s,l,c,u])}const Ih={showRecipient:!1},Un=Kn("advanced-orders-settings-atom:v0",Ih,vo()),Sh=X(null,(e,t,n)=>{t(Un,()=>({...e(Un),...n}))}),Eh=18e5,yl=qu,vl={title:"7 Days",value:6048e5},gt=[{title:"5 Minutes",value:3e5},{title:"30 Minutes",value:18e5},{title:"1 Hour",value:36e5},{title:"1 Day",value:864e5},{title:"3 Days",value:2592e5},vl,{title:"1 Month",value:2592e6},{title:"1 Year (max)",value:yl}];function Tl(e){if(!e||gt.find(n=>n===e||n.value===e))return gt;const t=typeof e=="number"?Rh(e):e;return[...gt,t].sort((n,o)=>n.value-o.value)}function Rh(e){return{title:Ur(Date.now()+e,void 0).replace(/in /,""),value:e}}const jh=X(void 0),Ph=X(void 0),dr=zi(jh,Ph),wl={showRecipient:!1,partialFillsEnabled:!0,deadlineMilliseconds:vl.value,customDeadlineTimestamp:null,limitPricePosition:"bottom",limitPriceLocked:!0,ordersTableOnLeft:!1,isUsdValuesMode:!1},bl=Kn("limit-orders-settings-atom:v3",wl,vo()),kh=X(null,Al(bl)),Cl=X(wl),Lh=X(null,Al(Cl)),je=zi(bl,Cl),hn=X(null,Vu(kh,Lh));function Al(e){return(t,n,o)=>{n(e,()=>{const a=t(e);return o.partialFillsEnabled!==a.partialFillsEnabled&&n(dr,void 0),{...a,...o}})}}function Nh({state:e,onStateChanged:t}){const{showRecipient:n}=e,o=k(je),a=U(hn);return r.jsxs(Hi,{children:[r.jsx($i,{children:"Advanced Order Settings"}),r.jsx(Pt,{title:"Custom Recipient",tooltip:"Allows you to choose a destination address for the swap other than the connected one.",value:n,toggle:()=>t({showRecipient:!n})}),r.jsx(Pt,{title:jn.LEFT_ALIGNED.title,tooltip:jn.LEFT_ALIGNED.tooltip,value:o.ordersTableOnLeft,toggle:()=>a({ordersTableOnLeft:!o.ordersTableOnLeft})})]})}const Dh=w.div.withConfig({displayName:"AdvancedOrdersSettings__MenuWrapper",componentId:"sc-11obms8-0"})(["[data-reach-menu-popover]{position:absolute;width:100%;left:0;top:0;}"]);function Mh(){const e=k(Un),t=U(Sh),n=Xn(),o=f.useCallback(a=>{t(a),a.showRecipient===!1&&n({recipient:void 0,recipientAddress:void 0})},[t,n]);return r.jsx(Dh,{children:r.jsxs(Wt,{children:[r.jsx(Gi,{children:r.jsx(Yi,{})}),r.jsx(qi,{portal:!1,children:r.jsx(Vi,{children:r.jsx(Bt,{disabled:!0,onSelect:()=>{},children:r.jsx(Nh,{state:e,onStateChanged:o})})})})]})})}const Fh=[{content:"Get the Time-Weighted Average Price by splitting your large order into parts"},{content:"Customize your order size, expiration, and number of parts"},{content:"Receive surplus of your order"},{content:"Reduce your slippage by breaking big orders into smaller ones"}],Vt={title:"Unlock the Power of TWAP Orders",subtitle:"Begin with TWAP Today!",orderType:"TWAP",buttonText:"Unlock TWAP orders (BETA)",buttonLink:Xu};function Uh({children:e,updaters:t,params:n,confirmContent:o,mapCurrencyInfo:a}){const{disablePriceImpact:i}=n,{inputCurrency:s,outputCurrency:l,inputCurrencyAmount:c,outputCurrencyAmount:u,inputCurrencyBalance:p,outputCurrencyBalance:m,inputCurrencyFiatAmount:h,outputCurrencyFiatAmount:T,recipient:d,orderKind:g,isUnlocked:v}=It(),y=_h(),{isLoading:b}=Re(),{showRecipient:C}=k(Un),A=sn(),I=He(),E=Xn(),_=$e(g),O={field:K.INPUT,currency:s,amount:c,isIndependent:_,receiveAmountInfo:null,balance:p,fiatAmount:h},S={field:K.OUTPUT,currency:l,amount:u,isIndependent:!_,receiveAmountInfo:I,balance:m,fiatAmount:T},R={settingsWidget:r.jsx(Mh,{}),bottomContent(D){return e(D)},updaters:t,lockScreen:v?void 0:r.jsx(Ko,{id:"advanced-orders",items:Fh,buttonLink:Vt.buttonLink,title:Vt.title,subtitle:Vt.subtitle,orderType:Vt.orderType,buttonText:Vt.buttonText,handleUnlock:()=>E({isUnlocked:!0})})},P={recipient:d,compactView:!0,showRecipient:C,isTradePriceUpdating:b,priceImpact:A,disablePriceImpact:i};return r.jsx(fo,{id:"advanced-orders-page",disableOutput:!0,slots:R,actions:y,params:P,inputCurrencyInfo:a?a(O):O,outputCurrencyInfo:a?a(S):S,confirmModal:o})}function Wh({slippage:e}){return Ah(e),null}const Bh={onlySell:!0};function zh(){return ur(Bh),null}const Qe={id:"all",title:"All orders",count:0},Zr={id:"unfillable",title:"Unfillable",count:0},Hh={id:"signing",title:"Signing",count:0},en={id:"open",title:"Open",count:0},ft={id:"history",title:"Orders history",count:0},Ol=[Qe,Zr,Hh,en,ft],Ze=10,_l="tab",Il="page",$h=w.div.withConfig({displayName:"CloseIcon__IconX",componentId:"sc-1nmliga-0"})(["cursor:pointer;opacity:0.7;transition:opacity var(",") ease-in-out;margin:0;> svg{width:var(",");height:var(",");color:var(",");}&:hover{opacity:1;}"],x.ANIMATION_DURATION,x.ICON_SIZE_NORMAL,x.ICON_SIZE_NORMAL,x.ICON_COLOR_NORMAL);function Gh({onClick:e,className:t}){return r.jsx($h,{onClick:e,className:t,children:r.jsx(ae,{src:Ku})})}const Yh=/"orderClass":\s*"twap"/;function qh(e){return!Xi(e)||Yh.test((e==null?void 0:e.fullAppData)||"")}var Ct;(function(e){e.LIMIT="limit",e.ADVANCED="advanced"})(Ct||(Ct={}));const Vh=ll.createInterface();function Xh(e,t){var n;if(!t.fullAppData)return null;try{const o=q.COW_PROTOCOL_VAULT_RELAYER_ADDRESS[e].toLowerCase(),i=(n=JSON.parse(t.fullAppData).metadata.hooks)==null?void 0:n.pre;if(!i)return null;const s=i.map(l=>{try{return Vh.decodeFunctionData("permit",l.callData)}catch{return null}}).find(l=>{var c,u,p;return l&&((c=l.spender)==null?void 0:c.toLowerCase())===o&&((u=l.owner)==null?void 0:u.toLowerCase())===t.owner.toLowerCase()&&((p=l.deadline)==null?void 0:p.toNumber())>Date.now()/1e3});return(s==null?void 0:s.value)||null}catch{return null}}const Kh=new zt(5,1e4);function xt(e,t,n){const o=n.executionData.filledAmount.gt(0),a=ne.fromRawAmount(n.inputToken,n.sellAmount),i=ne.fromRawAmount(n.outputToken,n.buyAmount),s=Xh(e,n)||void 0,l={chainId:e,inputCurrencyAmount:a,outputCurrencyAmount:i,activeRateFiatAmount:null,invertedActiveRateFiatAmount:null},{balances:c,allowances:u}=t,p=c[n.inputToken.address.toLowerCase()],m=u[n.inputToken.address.toLowerCase()],{hasEnoughBalance:h,hasEnoughAllowance:T}=Qh({partiallyFillable:n.partiallyFillable,sellAmount:a,balance:p,allowance:o?m:Zh(m,s)});return{chainId:e,sellAmount:a,buyAmount:i,rateInfoParams:l,hasEnoughBalance:h,hasEnoughAllowance:T}}function Qh(e){const{allowance:t,balance:n,partiallyFillable:o,sellAmount:a}=e,i=o?a.multiply(Kh):a,s=Ia(i,n),l=Ia(i,t);return{hasEnoughBalance:s,hasEnoughAllowance:l}}function Zh(e,t){return e?t?e.gt(t)?e:t:e:t}const Jh=(e,t)=>e.creationTime.getTime()-t.creationTime.getTime();function eg(e){const t=new Map,n=e.reduce((a,i)=>{var u,p;const s=Qu(i),l=(u=i.composableCowInfo)==null?void 0:u.id,c=(p=i.composableCowInfo)==null?void 0:p.parentId;if(l){const m=t.get(l);m?m.parent=s:t.set(l,{parent:s,children:[]})}else c?(t.has(c)||t.set(c,{parent:null,children:[]}),t.get(c).children.push(s)):a.push(s);return a},[]),o=Array.from(t.entries()).reduce((a,[,i])=>(i.parent&&a.push({parent:i.parent,children:i.children.sort(Jh)}),a),[]);return[...n,...o]}const Wn=e=>!("children"in e),ot=e=>Wn(e)?e:e.parent;function Sl(e){return e.map(ot)}const tg=(e,t)=>{const n=ot(e).creationTime;return ot(t).creationTime.getTime()-n.getTime()},ng=100;function rg(e,t,n,o){const a=Zu(),i=f.useMemo(()=>eg(e).sort(tg),[e]);return f.useMemo(()=>i.slice(0,ng).reduce((s,l)=>{const c=Wn(l)?l:l.parent,u=t===Ct.ADVANCED&&Xi(c),p=t===Ct.LIMIT&&qh(c);if(u||p)return s;s.all.push(l);const m=Ju.includes(c.status),h=c.status===j.PRESIGNATURE_PENDING,T=xt(n,o,c);let d=T.hasEnoughBalance===!1||T.hasEnoughAllowance===!1;if(!Wn(l)&&l.children){const g=l.children.some(v=>{const y=xt(n,o,v);return v.status!==j.FULFILLED&&(v.status===j.SCHEDULED||v.status===j.PENDING)&&(y.hasEnoughBalance===!1||y.hasEnoughAllowance===!1)});d=d||g}return m&&c.isUnfillable!==d&&a({chainId:n,id:c.id,isUnfillable:d}),h&&s.signing.push(l),m&&d&&!h&&s.unfillable.push(l),m&&!h&&s.pending.push(l),!m&&!h&&s.history.push(l),s},{pending:[],history:[],unfillable:[],signing:[],all:[]}),[i,n,o,t,a])}function og(){const[e,t]=f.useState(void 0),n=f.useMemo(()=>e?ne.fromRawAmount(e,al.toString()):void 0,[e]),o=ed(n);return yt(()=>{n&&o&&(o(),t(void 0))},[n,o]),t}function Zo({pathname:e,search:t},{tabId:n,pageNumber:o}){const a=new URLSearchParams(t);return n&&a.set(_l,n),o&&a.set(Il,o.toString()),{pathname:e,search:a.toString()}}const ag=Ol.map(e=>e.id);function El(e){const t=new URLSearchParams(e),n=t.get(_l)||"",o=ag.includes(n)?n:void 0,a=t.get(Il)||void 0,i=a&&/^\d+$/.test(a)?+a:void 0;return{tabId:o,pageNumber:i}}function ig(e,t,n){const o=Ot(),a=cn();f.useLayoutEffect(()=>{const i=Math.ceil(e/Ze),s=El(o.search),l=i>0&&n>i||n<1||n!==s.pageNumber,c=t!==s.tabId;(l||c)&&a(Zo(o,{pageNumber:l?1:void 0,tabId:c?t:void 0}),{replace:!0})},[a,o,t,n,e])}const Ma=""+new URL("meditating-cow-v2-B48gkGkh.svg",import.meta.url).href,sg=""+new URL("wallet-plus-3-dsHsgB.svg",import.meta.url).href;w.div.withConfig({displayName:"styled__SettingsContainer",componentId:"sc-1g7qvxp-0"})(["display:flex;align-items:center;gap:8px;margin-right:16px;"]);const Rl=w.div.withConfig({displayName:"styled__TableHeader",componentId:"sc-1g7qvxp-1"})(["--header-height:26px;--row-height:41px;--checkboxSize:16px;--checkBoxBorderRadius:3px;display:grid;gap:14px;grid-template-columns:",";grid-template-rows:minmax(var(--header-height),1fr);align-items:center;border:none;padding:5px 12px;background:var(",");border-top:none;border-right:none;border-left:none;border-image:initial;border-bottom:1px solid var(--cow-color-text-opacity-10);width:fit-content;min-width:100%;","{--checkboxSize:24px;}"],({isHistoryTab:e,isRowSelectable:t,isTwapTable:n})=>{const o=t?"var(--checkboxSize)":"";return n?e?`minmax(200px, 2.5fr)
                repeat(4, minmax(110px, 1fr))
                minmax(106px,112px)
                minmax(120px, 1fr)
                minmax(106px, 0.8fr)
                24px`:`${o} minmax(160px,2fr) minmax(120px,1fr) minmax(140px,1fr) minmax(120px,1fr) minmax(120px,1fr) minmax(106px,112px) minmax(120px,1fr) minmax(106px, 0.8fr) 24px`:e?`minmax(200px, 2.5fr)
              repeat(4, minmax(110px, 1fr))
              minmax(106px,112px)
              minmax(106px, 0.8fr)
              24px`:`${o} minmax(160px,2fr) minmax(120px,1fr) minmax(140px,1fr) minmax(120px,1fr) minmax(120px,1fr) minmax(106px,112px) minmax(106px, 0.8fr) 24px`},x.COLOR_PAPER_DARKER,L.upToSmall()),lg=w(Rl).withConfig({displayName:"styled__TableRow",componentId:"sc-1g7qvxp-2"})(["grid-template-rows:minmax(var(--row-height),1fr);background:",";transition:background var(",") ease-in-out;display:grid;&:hover{background:",";}> div:first-child{margin-left:",";&::before{display:",";color:inherit;content:'↳';text-decoration:none !important;opacity:0.6;}}"],({isChildOrder:e,isExpanded:t})=>t&&!e?`var(${x.COLOR_INFO_BG})`:e?`var(${x.COLOR_PAPER_DARKER})`:"transparent",x.ANIMATION_DURATION,({isExpanded:e,isChildOrder:t})=>e&&!t?`var(${x.COLOR_INFO_BG})`:`var(${x.COLOR_PAPER_DARKER})`,({isChildOrder:e})=>e?"5px":"",({isChildOrder:e})=>e?"inline-block":"none"),on=w.span.withConfig({displayName:"styled__CheckboxCheckmark",componentId:"sc-1g7qvxp-3"})(["display:flex;align-items:center;justify-content:center;position:absolute;background:transparent;width:100%;height:100%;height:var(--checkboxSize);width:var(--checkboxSize);top:-1px;bottom:0;&::after{content:'';position:absolute;display:none;left:0;right:0;top:0;bottom:0;margin:auto;width:31%;height:66%;border:solid var(",");border-width:0 2px 2px 0;transform:rotate(45deg);transition:border-color var(",") ease-in-out;","{border-width:0 3px 3px 0;}}"],x.COLOR_BUTTON_TEXT,x.ANIMATION_DURATION,L.upToSmall()),Jo=w.input.withConfig({displayName:"styled__TableRowCheckbox",componentId:"sc-1g7qvxp-4"})(["width:var(--checkboxSize);height:var(--checkboxSize);background:transparent;border:2px solid var(",");border-radius:var(--checkBoxBorderRadius);transition:background var(",") ease-in-out,opacity var(",") ease-in-out,border-color var(",") ease-in-out;appearance:none;margin:0;outline:0;opacity:0.5;z-index:5;&:checked{border-color:var(",");background:var(",");opacity:1;z-index:6;}&:checked + ","::after{display:block;z-index:6;}&:indeterminate{background:var(",");border-color:var(",");z-index:6;}&:indeterminate + ","::after{display:block;border:solid var(",");border-width:2px 0 0 0;top:calc(50% + 3px);transform:none;z-index:6;","{top:calc(50% + 4px);}}&:disabled{cursor:not-allowed;opacity:0.1;background:var(",");z-index:6;}"],x.COLOR_TEXT,x.ANIMATION_DURATION,x.ANIMATION_DURATION,x.ANIMATION_DURATION,x.COLOR_PRIMARY,x.COLOR_PRIMARY,on,x.COLOR_PRIMARY,x.COLOR_PRIMARY,on,x.COLOR_BUTTON_TEXT,L.upToSmall(),x.COLOR_TEXT),jl=w.label.withConfig({displayName:"styled__TableRowCheckboxWrapper",componentId:"sc-1g7qvxp-5"})(["width:var(--checkboxSize);height:var(--checkboxSize);display:flex;align-items:center;justify-content:center;position:relative;cursor:pointer;&:hover > ",":not(:checked):not([disabled]){background:var(",");border-color:var(",");opacity:0.5;z-index:6;+ ","::after{display:block;border-color:var(",");z-index:6;}}"],Jo,x.COLOR_PRIMARY,x.COLOR_PRIMARY,on,x.COLOR_BUTTON_TEXT);function Pl(e){const t=ne.fromRawAmount(e.inputToken,e.feeAmount.toString());return ne.fromRawAmount(e.inputToken,e.sellAmount.toString()).add(t)}const cg=w(Qn).withConfig({displayName:"OrderContextMenu__ContextMenuButton",componentId:"sc-1ngu9kz-0"})(["background:none;border:0;outline:none;cursor:pointer;border-radius:8px;padding:0;margin:0;display:flex;height:24px;color:inherit;opacity:0.5;transition:opacity var(",") ease-in-out;&:hover{opacity:1;}> svg{height:100%;width:auto;color:currentColor;}&:hover{outline:currentColor;}"],x.ANIMATION_DURATION),ug=w(Zn).withConfig({displayName:"OrderContextMenu__ContextMenuList",componentId:"sc-1ngu9kz-1"})(["background:var(",");border:1px solid var(",");border-radius:12px;overflow:hidden;position:relative;outline:none;min-width:240px;margin:10px 0;padding:16px;z-index:100;"],x.COLOR_PAPER_DARKER,x.COLOR_TEXT_OPACITY_10),In=w(Bt).withConfig({displayName:"OrderContextMenu__ContextMenuItem",componentId:"sc-1ngu9kz-2"})(["padding:12px;border-radius:6px;margin:0;cursor:pointer;display:flex;gap:10px;align-items:center;font-size:15px;font-weight:500;color:",";background:transparent;transition:background var(",") ease-in-out;&:hover{background:var(",");}"],({$red:e})=>e?`var(${x.COLOR_DANGER})`:`var(${x.COLOR_TEXT})`,x.ANIMATION_DURATION,x.COLOR_PAPER),dg=w(In).withConfig({displayName:"OrderContextMenu__ContextMenuLink",componentId:"sc-1ngu9kz-3"})([""]);function pg({openReceipt:e,activityUrl:t,showCancellationModal:n,alternativeOrderModalContext:o}){return r.jsxs(Wt,{children:[r.jsx(cg,{children:r.jsx(Vo,{})}),r.jsxs(ug,{children:[r.jsxs(In,{onSelect:e,children:[r.jsx(qo,{size:16}),r.jsx("span",{children:"Order receipt"})]}),t&&r.jsxs(dg,{as:"a",href:t,target:"_blank",children:[r.jsx(td,{size:16}),r.jsx("span",{children:"View on explorer"})]}),o&&r.jsxs(In,{onSelect:o.showAlternativeOrderModal,children:[o.isEdit?r.jsx(nd,{size:16}):r.jsx(rd,{size:16}),r.jsxs("span",{children:[o.isEdit?"Edit":"Recreate"," order"]})]}),n&&r.jsxs(In,{$red:!0,onSelect:n,children:[r.jsx(Ki,{size:16}),r.jsx("span",{children:"Cancel order"})]})]})]})}const kl=w.button.withConfig({displayName:"styled__WarningIndicator",componentId:"sc-1r2g0ch-0"})(["--height:28px;margin:0;background:",";color:var(",");line-height:0;border:0;padding:0;width:auto;height:var(--height);border-radius:0 9px 9px 0;svg{cursor:help;color:inherit;}svg > path{fill:currentColor;stroke:none;}"],({hasBackground:e=!0})=>e?`var(${x.COLOR_DANGER_BG})`:"transparent",x.COLOR_DANGER),ea=w.div.withConfig({displayName:"styled__WarningContent",componentId:"sc-1r2g0ch-1"})(["max-width:270px;padding:10px;h3,p{margin:0;line-height:1.2;}h3{margin-bottom:8px;}"]),fg=w(Ft).withConfig({displayName:"styled__StyledQuestionHelper",componentId:"sc-1r2g0ch-2"})(["margin:0;"]),Ll=w.div.withConfig({displayName:"styled__WarningParagraph",componentId:"sc-1r2g0ch-3"})(["margin-bottom:20px;:last-child{margin-bottom:0;}"]),Nl=w.div.withConfig({displayName:"styled__WarningActionBox",componentId:"sc-1r2g0ch-4"})(["margin-top:15px;"]),mg=w.div.withConfig({displayName:"styled__StatusBox",componentId:"sc-1r2g0ch-5"})(["display:flex;align-items:center;width:100%;"]),Ie=w.div.withConfig({displayName:"styled__CellElement",componentId:"sc-1r2g0ch-6"})(["padding:0;font-size:12px;font-weight:500;gap:5px;height:100%;display:flex;flex-flow:row nowrap;align-items:",";text-align:left;cursor:",";> b{font-weight:500;width:100%;text-align:left;&[title]{cursor:help;}}> span[title]{cursor:help;}"," ","{font-weight:500;font-size:12px;white-space:normal;word-break:break-all;}"],({doubleRow:e})=>e?"flex-start":"center",({clickable:e})=>e?"pointer":"",({doubleRow:e})=>e&&`
    flex-flow: column wrap;
    justify-content: center;
    gap: 2px;

    > i {
      opacity: 0.7;

      &[title] {
        cursor: help;
      }
    }
  `,Qi),wn=w(Ie).withConfig({displayName:"styled__PriceElement",componentId:"sc-1r2g0ch-7"})(["cursor:pointer;"]),hg=w.div.withConfig({displayName:"styled__CurrencyLogoPair",componentId:"sc-1r2g0ch-8"})(["display:flex;cursor:",";> div,> svg{border:2px solid var(",");}> div:last-child,> svg:last-child{margin:0 0 0 -14px;}"],({clickable:e})=>e?"pointer":"initial",x.COLOR_PAPER),gg=w.div.withConfig({displayName:"styled__CurrencyCell",componentId:"sc-1r2g0ch-9"})(["display:flex;flex-flow:row;align-items:center;gap:6px;font-size:12px;font-weight:500;cursor:",";&:hover{span{text-decoration:",";}}"],({clickable:e})=>e?"pointer":"",({clickable:e})=>e?"underline":""),xg=w.div.withConfig({displayName:"styled__CurrencyAmountWrapper",componentId:"sc-1r2g0ch-10"})(["display:flex;cursor:",";flex-flow:column wrap;gap:2px;"],({clickable:e})=>e?"pointer":"initial"),yg=w.div.withConfig({displayName:"styled__ProgressBarWrapper",componentId:"sc-1r2g0ch-11"})(["flex:1;align-items:center;flex-flow:row nowrap;gap:8px;padding:0;font-size:12px;font-weight:500;height:100%;width:100%;max-width:190px;display:flex;text-align:left;background:transparent;justify-content:flex-start;"]),Dl=w.div.withConfig({displayName:"styled__ProgressBar",componentId:"sc-1r2g0ch-12"})(["position:relative;margin:0;height:5px;width:100%;background:var(",");border-radius:6px;&::before{content:'';position:absolute;height:100%;width:","%;background:var(",");border-radius:5px;}"],x.COLOR_TEXT_OPACITY_10,({value:e})=>e,x.COLOR_SUCCESS),vg=w.div.withConfig({displayName:"styled__FilledPercentageContainer",componentId:"sc-1r2g0ch-13"})(["display:grid;grid-template-columns:50px 36px;gap:4px;align-items:center;width:100%;"]),Jr=w.div.withConfig({displayName:"styled__ExecuteCellWrapper",componentId:"sc-1r2g0ch-14"})(["width:100%;display:flex;align-items:center;gap:4px;"]),Tg=w.div.withConfig({displayName:"styled__ExecuteInformationTooltip",componentId:"sc-1r2g0ch-15"})(["display:flex;flex-flow:row wrap;padding:0;margin:0;"]),Ml=w.div.withConfig({displayName:"styled__ExecuteInformationTooltipWarning",componentId:"sc-1r2g0ch-16"})(["font-weight:500;margin-top:12px;"]),Fl=w.div.withConfig({displayName:"styled__CancelledDisplay",componentId:"sc-1r2g0ch-17"})(["display:flex;align-items:center;gap:4px;color:var(",");font-weight:500;font-size:12px;"],x.COLOR_DANGER),Ul=w.div.withConfig({displayName:"styled__ExpiredDisplay",componentId:"sc-1r2g0ch-18"})(["display:flex;align-items:center;gap:4px;color:var(",");"],x.COLOR_ALERT_TEXT),eo=w.div.withConfig({displayName:"styled__FilledDisplay",componentId:"sc-1r2g0ch-19"})(["display:flex;align-items:center;gap:4px;color:var(",");"],x.COLOR_SUCCESS),wg=w.div.withConfig({displayName:"styled__PendingExecutionDisplay",componentId:"sc-1r2g0ch-20"})(["display:flex;align-items:center;gap:4px;color:var(",");font-weight:500;font-size:12px;"],x.COLOR_TEXT),bg=w.div.withConfig({displayName:"styled__SigningDisplay",componentId:"sc-1r2g0ch-21"})(["display:flex;align-items:center;gap:4px;cursor:help;color:var(",");> svg{width:14px;height:14px;fill:currentColor;}svg > path{fill:currentColor;}"],x.COLOR_ALERT_TEXT);function Cg({symbol:e,isScheduled:t}){return r.jsxs(Ll,{children:[r.jsx("h3",{children:"Insufficient token balance"}),r.jsxs("p",{children:["Insufficient"," ",r.jsx("strong",{children:r.jsx(be,{token:{symbol:e}})})," ","balance detected.",r.jsx("br",{}),r.jsx("br",{}),t?r.jsxs(r.Fragment,{children:["If the balance remains insufficient at creation time, this order portion will not be created. Add more"," ",r.jsx("strong",{children:r.jsx(be,{token:{symbol:e}})})," ","before that time."]}):r.jsxs(r.Fragment,{children:["The order remains open. Execution requires sufficient"," ",r.jsx("strong",{children:r.jsx(be,{token:{symbol:e}})})," ","balance."]})]})]})}function Ag({symbol:e,isScheduled:t,approve:n}){return r.jsxs(Ll,{children:[r.jsx("h3",{children:"Insufficient token allowance"}),r.jsx("p",{children:t?r.jsxs(r.Fragment,{children:["Insufficient allowance granted for"," ",r.jsx("strong",{children:r.jsx(be,{token:{symbol:e}})}),". If allowance remains insufficient at creation time, this portion will not be created. Approve the"," ",r.jsx("strong",{children:r.jsx(be,{token:{symbol:e}})})," ","token before creation."]}):r.jsxs(r.Fragment,{children:["The order remains open. Execution requires adequate allowance for"," ",r.jsx("strong",{children:r.jsx(be,{token:{symbol:e}})}),". Approve the token to proceed."]})}),r.jsx(Nl,{children:r.jsx(Jn,{onClick:n,children:"Set approval"})})]})}function Wl({children:e,hasEnoughBalance:t,hasEnoughAllowance:n,inputTokenSymbol:o,isOrderScheduled:a,onApprove:i}){const s=!n,l=r.jsxs(ea,{children:[!t&&r.jsx(Cg,{symbol:o,isScheduled:a}),s&&r.jsx(Ag,{approve:i,symbol:o,isScheduled:a})]});return r.jsxs(kl,{hasBackground:!1,children:[r.jsx(fg,{text:l,placement:"bottom",bgColor:`var(${x.COLOR_DANGER_BG})`,color:`var(${x.COLOR_DANGER_TEXT})`,Icon:r.jsx(ae,{src:To,description:"warning",width:"14",height:"14"})}),e]})}function Og(e,t){var o;const{activityId:n}=t.executionData;if(!Zi(t)&&!((o=t.composableCowInfo)!=null&&o.isVirtualPart)&&t.status!==j.SCHEDULED)return e&&n?wo(e,"transaction",n):void 0}function Fa(e){return!!(it(e)&&e.status!==j.EXPIRED||Zi(e)&&(e.status===j.FULFILLED||e.status===j.CANCELLED||e.executionData.fullyFilled||e.status===j.EXPIRED))}function Bl(e){const t=Math.abs(e);return t<=od?`var(${x.COLOR_SUCCESS})`:t<=ad?`var(${x.COLOR_PRIMARY})`:"inherit"}const _g=new Dn(1);function zl({referencePrice:e,targetPrice:t,isInverted:n}){return!t||!e||(Ig(e,t),e.equalTo(Xe)||e.lessThan(Xe)||t.lessThan(Xe)||t.equalTo(Xe))?null:Ua(n?{referencePrice:e.invert(),targetPrice:t.invert()}:{referencePrice:e,targetPrice:t})}function Ua({referencePrice:e,targetPrice:t}){const n=t.divide(e).subtract(_g),o=new zt(n.numerator,n.denominator),a=te.fromPrice(t).subtract(te.fromPrice(e)),i=te.adjustDecimalsAtoms(a,0,e.quoteCurrency.decimals),s=ne.fromFractionalAmount(e.quoteCurrency,i.numerator,i.denominator);return{percentage:o,amount:s}}function Ig(e,t){Lf(e.baseCurrency.equals(t.baseCurrency)&&e.quoteCurrency.equals(t.quoteCurrency))}function Sg(e,t,n){return _t(()=>zl({referencePrice:t,targetPrice:e,isInverted:n}),[e,t,n])}const Eg=w.div.withConfig({displayName:"CurrencyAmountItem__AmountItem",componentId:"sc-2u0nbz-0"})(["display:flex;align-items:center;gap:6px;white-space:nowrap;","{white-space:normal;}> div{display:flex;align-items:center;}> span{white-space:normal;word-break:break-all;max-width:150px;display:inline;}> span > span{color:var(",");}"],L.upToSmall(),x.COLOR_TEXT_OPACITY_70);function Wa({amount:e}){return r.jsx(Eg,{title:e.toExact()+" "+e.currency.symbol,children:r.jsx(Q,{amount:e,tokenSymbol:e.currency})})}const Rg=""+new URL("hand-C0S5WKlu.svg",import.meta.url).href,Ba=new Dn(-1),jg=w.span.withConfig({displayName:"EstimatedExecutionPrice__EstimatedExecutionPriceWrapper",componentId:"sc-vg4lot-0"})(["display:flex;width:100%;align-items:center;justify-content:space-between;color:",";cursor:",";","{color:inherit;}> div > div,> span{display:flex;align-items:center;}"],({$hasWarning:e,theme:t})=>e?id(t.alert,t.darkMode?0:.15):"inherit",({$showPointerCursor:e})=>e?"pointer":"default",sd),Pg=w.span.withConfig({displayName:"EstimatedExecutionPrice__UnfillableLabel",componentId:"sc-vg4lot-1"})(["width:auto;color:var(",");position:relative;display:flex;align-items:center;font-size:inherit;font-weight:500;line-height:1.1;flex-flow:row wrap;justify-content:flex-start;gap:3px;svg{width:14px;height:14px;fill:currentColor;}svg > path{fill:currentColor;stroke:none;}"],x.COLOR_DANGER),kg=w.span.withConfig({displayName:"EstimatedExecutionPrice__WarningContent",componentId:"sc-vg4lot-2"})(["display:flex;align-items:center;gap:3px;cursor:help;"]),Lg=w.button.withConfig({displayName:"EstimatedExecutionPrice__ApprovalLink",componentId:"sc-vg4lot-3"})(["background:none;border:none;padding:0;margin:0;cursor:pointer;font-size:inherit;color:inherit;text-decoration:underline;color:var(",");font-weight:500;&:hover{opacity:1;}"],x.COLOR_PRIMARY),Ng=w.div.withConfig({displayName:"EstimatedExecutionPrice__ApproveLoaderWrapper",componentId:"sc-vg4lot-4"})(["text-align:center;width:100%;"]);function ta(e){const{amount:t,tokenSymbol:n,isInverted:o,isUnfillable:a,canShowWarning:i,percentageDifference:s,amountDifference:l,percentageFee:c,marketPrice:u,executesAtPrice:p,amountFee:m,warningText:h,onApprove:T,...d}=e,[g,v]=f.useState(!0),y=T&&(()=>{T(),v(!0)}),b=o?s==null?void 0:s.multiply(Ba):s,C=l!=null&&l.lessThan(Xe)?l.multiply(Ba):l,A=i&&(c==null?void 0:c.greaterThan(Ji)),I=b==null?void 0:b.lessThan(Xe),E=o?!I:I,_=Math.abs(Number((b==null?void 0:b.toFixed(4))??0))<=bo,O=r.jsx(r.Fragment,{children:r.jsx(Q,{amount:t,tokenSymbol:n,clickable:!0,...d})});f.useEffect(()=>{if(!g)return;const R=setTimeout(()=>{v(!1)},3e3);return()=>clearTimeout(R)},[g]);const S=r.jsx(Pg,{children:(h==="Insufficient allowance"||h==="Insufficient balance")&&r.jsxs(r.Fragment,{children:[r.jsx(vt,{content:r.jsxs(ea,{children:[r.jsx("h3",{children:h}),r.jsx("p",{children:h==="Insufficient allowance"?"The order remains open. Execution requires adequate allowance. Approve the token to proceed.":"The order remains open. Execution requires sufficient balance."}),h==="Insufficient allowance"&&y&&r.jsx(Nl,{children:g?r.jsx(Ng,{children:r.jsx(st,{})}):r.jsx(Jn,{onClick:y,children:"Set approval"})})]}),bgColor:`var(${x.COLOR_DANGER_BG})`,color:`var(${x.COLOR_DANGER_TEXT})`,children:r.jsxs(kg,{children:[r.jsx(ae,{src:Rg}),h]})}),h==="Insufficient allowance"&&y&&(g?r.jsx(st,{}):r.jsx(Lg,{onClick:y,children:"Set approval"}))]})});return r.jsxs(jg,{$hasWarning:!!A,$showPointerCursor:!a,children:[a?r.jsx("div",{children:S}):C?r.jsx(vt,{wrapInContainer:!0,content:r.jsx(Tg,{children:I&&_?r.jsx(r.Fragment,{children:"The fill price of this order is close or at the market price and is expected to fill soon"}):r.jsxs(r.Fragment,{children:["Current market price is ",r.jsx("b",{children:r.jsx(Q,{amount:u,...d,round:!1,tokenSymbol:u==null?void 0:u.quoteCurrency})}),"and needs to go ",E?"down 📉":"up 📈"," by ",r.jsx("b",{children:r.jsx(Q,{...d,amount:C,round:!1})})," ",r.jsxs("span",{children:["(",r.jsxs("i",{children:[b==null?void 0:b.toFixed(2),"%"]}),")"]}),"to execute your order at ",r.jsx("b",{children:r.jsx(Q,{amount:p,...d,round:!1,tokenSymbol:p==null?void 0:p.quoteCurrency})}),".",r.jsx(Ml,{children:"This price is taken from external sources and may not accurately reflect the current on-chain price."})]})}),placement:"top",children:O}):r.jsx("span",{children:O}),A&&!I&&r.jsx(Dg,{feePercentage:c,feeAmount:m})]})}function Dg(e){const{feePercentage:t,feeAmount:n}=e;return!t||!n?null:r.jsx(kl,{hasBackground:!1,children:r.jsx(vt,{wrapInContainer:!0,placement:"bottom",bgColor:`var(${x.COLOR_ALERT_BG})`,color:`var(${x.COLOR_ALERT_TEXT})`,content:r.jsxs(ea,{children:[r.jsx("h3",{children:"Order unlikely to execute"}),"For this order, network costs would be ",r.jsxs("b",{children:[t==null?void 0:t.toFixed(2),"%"]})," ",r.jsx("b",{children:r.jsxs("i",{children:["(",r.jsx(Q,{amount:n,round:!1,tokenSymbol:n.currency}),")"]})})," ","of your sell amount! Therefore, your order is unlikely to execute."]}),children:r.jsx(ae,{src:ld,description:"Alert",width:"14",height:"13"})})})}function Hl({reference:e,value:t}){if(!t||!e||e.equalTo(Xe))return;const n=t.divide(e);return new zt(n.numerator,n.denominator)}function Mg({inputCurrencyAmount:e},t){const{feeAmount:n}=t||{};return _t(()=>Hl({value:n,reference:e}),[n,e])}function $l({childOrders:e,orderStatus:t,children:n}){return e?e.every(c=>c.status===j.CANCELLED)?r.jsxs(r.Fragment,{children:[r.jsx("b",{children:r.jsxs(Fl,{children:[r.jsx(un,{size:14,strokeWidth:2.5}),"Order cancelled"]})}),r.jsx("i",{})]}):e.some(c=>c.status===j.SCHEDULED)?r.jsxs(r.Fragment,{children:[r.jsx("b",{children:"-"}),r.jsx("i",{})]}):e.every(c=>c.status===j.FULFILLED&&Number(c.executionData.filledPercentDisplay)>=99.99)?r.jsxs(r.Fragment,{children:[r.jsx("b",{children:r.jsxs(eo,{children:[r.jsx(Nr,{size:14,strokeWidth:3.5}),"Order filled"]})}),r.jsx("i",{})]}):e.some(c=>c.status===j.FULFILLED&&Number(c.executionData.filledPercentDisplay)>0)?r.jsxs(r.Fragment,{children:[r.jsx("b",{children:r.jsxs(eo,{children:[r.jsx(Nr,{size:14,strokeWidth:3.5}),"Order partially filled"]})}),r.jsx("i",{})]}):e.every(c=>c.status===j.EXPIRED)||t===j.EXPIRED?r.jsxs(r.Fragment,{children:[r.jsx("b",{children:r.jsxs(Ul,{children:[r.jsx(ir,{size:14,strokeWidth:2.5}),"Order expired"]})}),r.jsx("i",{})]}):n:null}function Fg({order:e,isInverted:t,isSafeWallet:n,isTwapTable:o,isChild:a,isUnfillable:i,estimatedPriceWarning:s,childOrders:l,estimatedExecutionPrice:c,priceDiffs:u,rateInfoParams:p,prices:m,spotPrice:h,warningText:T,withWarning:d,onApprove:g}){const{filledPercentDisplay:v}=e.executionData,y=t?c==null?void 0:c.invert():c,b=t?h==null?void 0:h.invert():h,{feeAmount:C}=m||{},A=Mg(p,m);return e.status===j.PRESIGNATURE_PENDING?r.jsx(Jr,{children:r.jsx(vt,{wrapInContainer:!0,content:r.jsxs("div",{children:["This order needs to be signed and executed with your ",n?"Safe":"Smart contract"," wallet"]}),children:r.jsxs(bg,{children:[r.jsx(ae,{src:Co,description:"signing"}),"Please sign order"]})})}):o&&!a&&l?s||r.jsx(Ie,{doubleRow:!0,children:r.jsx($l,{orderStatus:e.status,childOrders:l,children:"-"})}):it(e)?Number(v)>0?r.jsxs(eo,{children:[r.jsx(Nr,{size:14,strokeWidth:3.5}),"Order ",Number(v)<100?"partially ":"","filled"]}):e.status===j.CANCELLED?r.jsxs(Fl,{children:[r.jsx(un,{size:14,strokeWidth:2.5}),"Order cancelled"]}):e.status===j.EXPIRED?r.jsxs(Ul,{children:[r.jsx(ir,{size:14,strokeWidth:2.5}),"Order expired"]}):i?"":"-":c&&!c.equalTo(Xe)?r.jsx(Jr,{children:!i&&(u!=null&&u.percentage)&&Math.abs(Number(u.percentage.toFixed(4)))<=bo?r.jsx(vt,{wrapInContainer:!0,content:r.jsxs("div",{children:["The fill price of this order is close or at the market price (",r.jsxs("b",{children:["fills at"," ",r.jsx(Q,{amount:y,tokenSymbol:y==null?void 0:y.quoteCurrency})]}),", ",u.percentage.toFixed(2),"% from market) and is expected to"," ",es(v)?"":"partially"," fill soon.",r.jsx(Ml,{children:"This price is taken from external sources and may not accurately reflect the current on-chain price."})]}),children:r.jsxs(wg,{children:[r.jsx(Xo,{size:14,strokeWidth:2.5}),"Pending execution"]})}):r.jsx(ta,{amount:y,tokenSymbol:y==null?void 0:y.quoteCurrency,opacitySymbol:!0,isInverted:t,percentageDifference:u==null?void 0:u.percentage,amountDifference:u==null?void 0:u.amount,percentageFee:A,marketPrice:b,executesAtPrice:y,amountFee:C,canShowWarning:er(e)!==ue.SWAP&&!i,isUnfillable:d,warningText:T,onApprove:g})}):"-"}function Ug({childOrders:e,estimatedExecutionPrice:t,spotPrice:n,isInverted:o,isUnfillable:a}){const i=e.find(p=>p.status===j.SCHEDULED&&!it(p));if(!i)return null;const s=i.executionData.executedPrice||t,l=s?zl({referencePrice:n,targetPrice:s,isInverted:!1}):null;let c;i.status===j.CANCELLED||i.isUnfillable?c="":!s||i.status===j.CREATING?c="-":c=r.jsx(Q,{amount:o?s.invert():s,tokenSymbol:s==null?void 0:s.quoteCurrency,opacitySymbol:!0});const u=l!=null&&l.percentage?`${l.percentage.toFixed(2)}%`:"-";return r.jsxs(r.Fragment,{children:[r.jsx("b",{children:c}),r.jsx("i",{style:{color:!a&&(l!=null&&l.percentage)?Bl(Number(l.percentage.toFixed(4))):"inherit"},children:u})]})}function Wg({isTwapTable:e,isChild:t,childOrders:n,estimatedPriceWarning:o,estimatedExecutionPrice:a,spotPrice:i,order:s,isInverted:l,isUnfillable:c,withWarning:u,warningText:p,onApprove:m,priceDiffs:h,orderFillsAt:T}){if(e&&!t&&n)return o||r.jsx(Ie,{doubleRow:!0,children:r.jsx($l,{orderStatus:s.status,childOrders:n,children:r.jsx(Ug,{childOrders:n,isInverted:l,isUnfillable:c,estimatedExecutionPrice:a,spotPrice:i})})});if(u||c)return r.jsx(Jr,{children:r.jsx(ta,{amount:void 0,tokenSymbol:void 0,isInverted:l,isUnfillable:!0,canShowWarning:!0,warningText:p,onApprove:m})});const d=it(s)||s.status===j.CANCELLED||c||h!=null&&h.percentage&&Math.abs(Number(h.percentage.toFixed(4)))<=bo?"":h!=null&&h.percentage?`${h==null?void 0:h.percentage.toFixed(2)}%`:"-";return r.jsxs(Ie,{doubleRow:!0,children:[r.jsx("b",{children:T}),r.jsx("i",{style:{color:!c&&(h!=null&&h.percentage)?Bl(Number(h.percentage.toFixed(4))):"inherit"},children:d})]})}function Bg({withWarning:e,order:t,isTwapTable:n,isChild:o,childOrders:a,spotPrice:i,isInverted:s}){const l=s?i==null?void 0:i.invert():i;return e||t.status===j.CREATING||t.status===j.PRESIGNATURE_PENDING||it(t)||n&&!o&&a&&a.every(c=>it(c))||i===null?"-":i?r.jsx(Q,{amount:l,tokenSymbol:l==null?void 0:l.quoteCurrency,opacitySymbol:!0,clickable:!0,noTitle:!0}):r.jsx(st,{size:"14px",style:{margin:"0 0 -2px 7px"}})}const bn={[j.PENDING]:"Open",[j.PRESIGNATURE_PENDING]:"Signing",[j.FULFILLED]:"Filled",[j.EXPIRED]:"Expired",[j.CANCELLED]:"Cancelled",[j.CREATING]:"Creating",[j.FAILED]:"Failed",[j.SCHEDULED]:"Scheduled"};function zg(e){return e.executionData.fullyFilled||e.status===j.FULFILLED?{title:bn[j.FULFILLED],color:`var(${x.COLOR_SUCCESS_TEXT})`,background:`var(${x.COLOR_SUCCESS_BG})`}:it(e)?e.executionData.partiallyFilled?{title:"Partially Filled",color:`var(${x.COLOR_SUCCESS_TEXT})`,background:`var(${x.COLOR_SUCCESS_BG})`}:{title:bn[e.status],color:e.status===j.EXPIRED?`var(${x.COLOR_ALERT_TEXT})`:`var(${x.COLOR_DANGER_TEXT})`,background:e.status===j.EXPIRED?`var(${x.COLOR_ALERT_BG})`:`var(${x.COLOR_DANGER_BG})`}:e.isCancelling?{title:"Cancelling...",color:`var(${x.COLOR_DANGER_TEXT})`,background:`var(${x.COLOR_DANGER_BG})`}:e.status===j.PRESIGNATURE_PENDING?{title:bn[j.PRESIGNATURE_PENDING],color:`var(${x.COLOR_ALERT_TEXT})`,background:`var(${x.COLOR_ALERT_BG})`}:e.isUnfillable?{title:"Unfillable",color:`var(${x.COLOR_DANGER_TEXT})`,background:`var(${x.COLOR_DANGER_BG})`}:{title:bn[e.status],color:e.status===j.PENDING?`var(${x.COLOR_TEXT})`:`var(${x.COLOR_TEXT})`,background:e.status===j.PENDING?`var(${x.COLOR_TEXT_OPACITY_10})`:`var(${x.COLOR_TEXT_OPACITY_10})`}}const Hg=cd`
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
`,$g=w.div.withConfig({displayName:"OrderStatusBox__Wrapper",componentId:"sc-1m3ze2z-0"})(["--height:26px;--statusColor:",";--statusBackground:",";display:flex;align-items:center;justify-content:center;color:var(--statusColor);padding:0 10px;position:relative;z-index:2;font-size:12px;font-weight:600;height:var(--height);width:",";cursor:",";&::before{content:'';position:absolute;height:100%;width:100%;display:block;left:0;top:0;background:var(--statusBackground);z-index:1;border-radius:16px;}",""],({color:e})=>e,({background:e})=>e,({widthAuto:e})=>e?"auto":"100%",({clickable:e})=>e?"pointer":"",({isCancelling:e,isSigning:t})=>(e||t)&&Jt`
      overflow: hidden;
      border-radius: 16px;

      &::after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.3) 50%, transparent 100%);
        animation: ${Hg} 1.5s infinite;
        z-index: 2;
        border-radius: 16px;
      }
    `),Gg=w.div.withConfig({displayName:"OrderStatusBox__StatusContent",componentId:"sc-1m3ze2z-1"})(["display:flex;align-items:center;gap:4px;position:relative;z-index:2;white-space:nowrap;svg{width:14px;height:14px;fill:currentColor;}svg > path{fill:currentColor;}"]);function na({order:e,widthAuto:t,withWarning:n,onClick:o,WarningTooltip:a}){const{title:i,color:s,background:l}=zg(e),c=r.jsxs(Gg,{children:[n&&a,e.status===j.PRESIGNATURE_PENDING&&r.jsx(ae,{src:Co,description:"signing"}),i]});return r.jsx($g,{color:s,background:l,widthAuto:t,withWarning:n,clickable:!!o,onClick:o,isCancelling:e.isCancelling&&!e.executionData.fullyFilled,isSigning:e.status===j.PRESIGNATURE_PENDING,children:c})}function Yg(e){const{order:t,isInverted:n,withAllowanceWarning:o,approveOrderToken:a}=e,i=qg(e);return i!=null&&i.params?r.jsx(ta,{amount:void 0,tokenSymbol:void 0,isInverted:n,isUnfillable:!0,canShowWarning:!0,warningText:i.params.hasEnoughAllowance===!1?"Insufficient allowance":i.params.hasEnoughBalance===!1?"Insufficient balance":"Unfillable",onApprove:i.params.hasEnoughAllowance===!1?()=>a(i.order.inputToken):o?()=>a(t.inputToken):void 0}):null}const qg=({isChild:e,childOrders:t,isTwapTable:n,chainId:o,balancesAndAllowances:a})=>{if(!n||e||!t)return null;for(const i of t)if(i.status!==j.FULFILLED&&(i.status===j.SCHEDULED||i.status===j.PENDING)){const s=xt(o,a,i);if((s==null?void 0:s.hasEnoughBalance)===!1||(s==null?void 0:s.hasEnoughAllowance)===!1)return{order:i,params:s}}return null},_r=3e3;function to({order:e,isRateInverted:t,isHistoryTab:n,isRowSelectable:o,isRowSelected:a,isChild:i,isExpanded:s,orderActions:l,orderParams:c,onClick:u,prices:p,spotPrice:m,children:h,childOrders:T,isTwapTable:d,chainId:g,balancesAndAllowances:v}){const{buyAmount:y,rateInfoParams:b,hasEnoughAllowance:C,hasEnoughBalance:A}=c,{creationTime:I,expirationTime:E,status:_}=e,{filledPercentDisplay:O,executedPrice:S}=e.executionData,{inputCurrencyAmount:R,outputCurrencyAmount:P}=b,{feeAmount:D}=p||{},M=_t(()=>m&&D&&ts(e,m,D.quotient.toString()),[m,D,e]),$=tr(),Z=f.useMemo(()=>l.getShowCancellationModal(e),[l,e]),ie=f.useMemo(()=>l.getAlternativeOrderModalContext(e),[e,l]),pe=C===!1,re=(A===!1||pe)&&_!==j.PRESIGNATURE_PENDING&&(_===j.PENDING||_===j.SCHEDULED),Me=e.status===j.SCHEDULED,z=Me&&Date.now()>I.getTime(),fe=_n(E,_r),Ce=_n(I,_r),Ae=_n(e.fulfillmentTime?new Date(e.fulfillmentTime):void 0,_r),Ye=g?Og(g,e):void 0,J=f.useState(()=>{const yr=ns(g,R,P);return at(yr)===at(R==null?void 0:R.currency)}),[se,Fe]=J,me=f.useCallback(()=>Fe(yr=>!yr),[Fe]);f.useEffect(()=>{me()},[t,me]);const he=se?S==null?void 0:S.invert():S,Oe=Sg(M,m,se),dt=he!==void 0&&(he==null?void 0:he.equalTo(Xe)),pa=!es(O)&&(dt||re),Wc=e.inputToken.symbol||"",fa=A===!1?"Insufficient balance":C===!1?"Insufficient allowance":"Unfillable",ma=pe?()=>l.approveOrderToken(e.inputToken):void 0,ha=re?r.jsx(Yg,{order:e,approveOrderToken:l.approveOrderToken,isInverted:se,balancesAndAllowances:v,chainId:g,withAllowanceWarning:pe,isChild:i,childOrders:T,isTwapTable:d}):void 0,ga=r.jsx(Fg,{order:e,withWarning:re,warningText:fa,onApprove:ma,isInverted:se,isUnfillable:pa,estimatedExecutionPrice:M,spotPrice:m,estimatedPriceWarning:ha,prices:p,priceDiffs:Oe,childOrders:T,isTwapTable:d,isChild:i,isSafeWallet:$,rateInfoParams:b});return r.jsxs(lg,{"data-id":e.id,isChildOrder:i,isHistoryTab:n,isRowSelectable:o,isTwapTable:d,isExpanded:s,children:[o&&!n&&r.jsxs(jl,{children:[r.jsx(Jo,{type:"checkbox",checked:a,disabled:rs(e.inputToken)||!ud(e),onChange:()=>l.toggleOrderForCancellation(e)}),r.jsx(on,{})]}),r.jsxs(gg,{children:[r.jsxs(hg,{clickable:!0,onClick:u,children:[r.jsx(Pn,{token:e.inputToken,size:28}),r.jsx(Pn,{token:y.currency,size:28})]}),r.jsxs(xg,{clickable:!0,onClick:u,children:[r.jsx(Wa,{amount:Pl(e)}),r.jsx(Wa,{amount:y})]})]}),r.jsx(wn,{children:r.jsx(Ao,{prependSymbol:!1,isInvertedState:J,noLabel:!0,doNotUseSmartQuote:!0,isInverted:se,rateInfoParams:b,opacitySymbol:!0})}),n?r.jsxs(r.Fragment,{children:[r.jsx(wn,{onClick:me,children:he?r.jsx(Q,{amount:he,tokenSymbol:he==null?void 0:he.quoteCurrency,opacitySymbol:!0,clickable:!0,noTitle:!0}):"-"}),r.jsx(Ie,{children:e.status===j.FULFILLED&&Ae?r.jsx("span",{title:e.fulfillmentTime?Tn(new Date(e.fulfillmentTime)):void 0,children:Ae}):"-"}),r.jsx(Ie,{children:r.jsx("span",{title:I?Tn(I):void 0,children:Ce})})]}):r.jsxs(r.Fragment,{children:[r.jsx(wn,{onClick:me,children:e.status===j.PRESIGNATURE_PENDING?ga:r.jsx(Wg,{order:e,withWarning:re,warningText:fa,onApprove:ma,isInverted:se,isUnfillable:pa,estimatedExecutionPrice:M,spotPrice:m,estimatedPriceWarning:ha,priceDiffs:Oe,childOrders:T,isTwapTable:d,isChild:i,orderFillsAt:ga})}),r.jsx(wn,{onClick:me,children:r.jsx(Bg,{order:e,withWarning:re,childOrders:T,isTwapTable:d,spotPrice:m,isChild:i,isInverted:se})}),r.jsxs(Ie,{doubleRow:!0,children:[r.jsx("b",{title:E&&!Fa(e)?Tn(E):void 0,children:Fa(e)?"-":fe}),r.jsx("i",{title:I&&!z?Tn(I):void 0,children:z?"Creating...":Ce})]})]}),r.jsx(Ie,{doubleRow:!0,clickable:!0,onClick:u,children:r.jsxs(vg,{children:[r.jsx(Dl,{value:O}),r.jsx("b",{children:r.jsx(os,{percent:O})})]})}),!h&&r.jsx(Ie,{children:r.jsx(mg,{children:r.jsx(na,{order:e,withWarning:re,onClick:u,WarningTooltip:r.jsx(Wl,{hasEnoughBalance:A??!1,hasEnoughAllowance:C??!1,inputTokenSymbol:Wc,isOrderScheduled:Me,onApprove:()=>l.approveOrderToken(e.inputToken)})})})}),h,d&&i&&r.jsx(Ie,{}),d&&e.status===j.PRESIGNATURE_PENDING&&r.jsx(Ie,{}),r.jsx(Ie,{children:r.jsx(pg,{activityUrl:Ye,openReceipt:u,showCancellationModal:Z,alternativeOrderModalContext:ie})})]})}const Vg=w.div.withConfig({displayName:"styled__PaginationBox",componentId:"sc-156tdui-0"})(["width:100%;display:flex;overflow-x:auto;text-align:center;margin:20px auto 0;justify-content:center;font-size:14px;font-weight:500;","{justify-content:flex-start;}"],L.upToSmall()),ra=Jt`
  background: ${({theme:e,$active:t})=>t?Ue(e.info,.9):"transparent"};
  color: ${({$active:e})=>e?`var(${x.COLOR_TEXT})`:`var(${x.COLOR_TEXT_OPACITY_25})`};
  border: 0;
  outline: 0;
  padding: 5px 6px;
  border-radius: 4px;
  width: 34px;
  margin: 0 5px;
  cursor: pointer;
  transition: background var(${x.ANIMATION_DURATION}) ease-in-out, color var(${x.ANIMATION_DURATION}) ease-in-out;
  text-decoration: none;

  &:hover {
    background: var(${x.COLOR_PAPER});
    color: inherit;
  }
`,Xg=w(Oo).withConfig({displayName:"styled__PageButtonLink",componentId:"sc-156tdui-1"})(["",""],ra),Sn=w.div.withConfig({displayName:"styled__PageButton",componentId:"sc-156tdui-2"})(["",""],ra),za=w(Sn).withConfig({displayName:"styled__BlankButton",componentId:"sc-156tdui-3"})(["cursor:default;&:hover{background:transparent !important;color:var(",") !important;}"],x.COLOR_TEXT_OPACITY_25),Ha=w.button.withConfig({displayName:"styled__ArrowButton",componentId:"sc-156tdui-4"})(["",";width:30px;height:30px;text-align:center;margin:0 5px;padding:0;line-height:0;border:1px solid var(",");"],ra,x.COLOR_TEXT_OPACITY_25),Cn=14;function Gl({pageSize:e,totalCount:t,currentPage:n,getPageUrl:o,onPageChange:a,className:i}){const s=Math.ceil(t/e),l=f.useMemo(()=>[...new Array(s)].map((v,y)=>y),[s]),c=Math.ceil(Cn/2),u=n>c?n-c:0,p=s>Cn,m=n<=c,h=n>s-c,T=Math.min(u,s-Cn),d=Math.min(Cn+u,s),g=f.useCallback(v=>{if(a){a(v);return}if(o){o(v);return}},[a,o]);return r.jsxs(Vg,{className:i,children:[p&&r.jsxs(r.Fragment,{children:[r.jsx(Ha,{onClick:()=>g(Math.max(n-1,1)),children:r.jsx(Go,{size:20})}),!m&&r.jsxs(r.Fragment,{children:[r.jsx(Sn,{onClick:()=>g(1),children:"1"}),r.jsx(za,{children:"..."})]})]}),l.slice(T,d).map(v=>{const y=v+1;return a?r.jsx(Sn,{$active:y===n,onClick:()=>a(y),children:y},y):o?r.jsx(Xg,{$active:y===n,to:o(y),children:y},y):null}),p&&r.jsxs(r.Fragment,{children:[!h&&r.jsxs(r.Fragment,{children:[r.jsx(za,{children:"..."}),r.jsx(Sn,{onClick:()=>g(s),children:s})]}),r.jsx(Ha,{onClick:()=>g(Math.min(n+1,s)),children:r.jsx(Yo,{size:20})})]})]})}const Kg=w.div.withConfig({displayName:"styled__ToggleExpandButton",componentId:"sc-12s1f2b-0"})(["display:flex;align-items:center;justify-content:space-between;border-radius:9px;width:100%;height:28px;background:linear-gradient(90deg,transparent 0%,"," 100%);background-size:200% 100%;background-position:100% 0;border:1px solid ",";padding:0 6px 0 10px;cursor:pointer;transition:background 0.5s ease-in-out;&:hover{animation:gradientMove 3s linear infinite;}@keyframes gradientMove{0%{background-position:100% 0;}50%{background-position:0 0;}100%{background-position:100% 0;}}@keyframes changeOpacity{0%{background:linear-gradient(90deg,transparent 0%,"," 100%);}50%{background:linear-gradient(90deg,transparent 0%,"," 100%);}100%{background:linear-gradient(90deg,transparent 0%,"," 100%);}}> i{font-style:normal;font-size:12px;font-weight:600;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}> button{--size:17px;display:flex;align-items:center;justify-content:center;background:transparent;border:0;padding:0;margin:0 0 0 6px;cursor:pointer;outline:none;color:inherit;transition:color 0.2s ease-out;position:relative;height:var(--height);transition:all 0.3s;width:var(--size);height:var(--size);min-width:var(--size);min-height:var(--size);line-height:1;background:transparent;border:1px solid ",";border-radius:6px;user-select:none;}> button::before,> button::after{content:'';transform:rotate(0);top:7px;inset-inline-end:3px;inset-inline-start:3px;height:1px;position:absolute;background:currentcolor;transition:transform 0.5s ease-in-out;}> button::after{transform:",";}"],({theme:e})=>Ue(e.paper,.7),({theme:e})=>Ue(e.text,.8),({theme:e})=>e.paper,({theme:e})=>Ue(e.paper,.1),({theme:e})=>Ue(e.paper,.5),({theme:e})=>Ue(e.text,.8),({isCollapsed:e})=>e?"rotate(90deg)":"rotate(0deg)");function Qg({parent:e,childrenLength:t,isCollapsed:n,onToggle:o,onClick:a,childOrders:i,approveOrderToken:s}){const l=i.find(p=>{var m;return((m=p.orderParams)==null?void 0:m.hasEnoughAllowance)===!1&&(p.order.status===j.PENDING||p.order.status===j.SCHEDULED)}),c=i.find(p=>{var m;return((m=p.orderParams)==null?void 0:m.hasEnoughBalance)===!1&&(p.order.status===j.PENDING||p.order.status===j.SCHEDULED)}),u=l||c;return r.jsxs(r.Fragment,{children:[r.jsx(na,{order:e,onClick:a,withWarning:!!u,WarningTooltip:u?r.jsx(Wl,{hasEnoughBalance:!c,hasEnoughAllowance:!l,inputTokenSymbol:u.order.inputToken.symbol||"",isOrderScheduled:u.order.status===j.SCHEDULED,onApprove:()=>s(u.order.inputToken)}):null}),r.jsxs(Kg,{onClick:o,isCollapsed:n,children:[t&&r.jsxs("i",{children:[t," part",t>1&&"s"]}),r.jsx("button",{})]})]})}const Zg=w.div.withConfig({displayName:"TableGroup__GroupBox",componentId:"sc-14ukjhx-0"})([""]),Jg=w(Gl).withConfig({displayName:"TableGroup__Pagination",componentId:"sc-14ukjhx-1"})(["background:",";margin:0;padding:10px 0;"],({theme:e})=>Ue(e.text,.91));function ex(e){const{item:t,prices:n,spotPrice:o,isRateInverted:a,isHistoryTab:i,isRowSelectable:s,isRowSelected:l,orderActions:c,chainId:u,balancesAndAllowances:p,isTwapTable:m}=e,{parent:h,children:T}=t,[d,g]=f.useState(!0),[v,y]=f.useState(1),b=T.length,C=v*Ze,A=T.slice(C-Ze,C),I=h.status===j.PRESIGNATURE_PENDING,E={isRowSelectable:s,isHistoryTab:i,spotPrice:o,prices:n,isRateInverted:a,orderActions:c,isTwapTable:m,chainId:u,balancesAndAllowances:p},_=T.map(O=>({order:O,orderParams:xt(u,p,O)}));return r.jsxs(Zg,{children:[f.createElement(to,{...E,key:h.id,isRowSelected:l,order:h,orderParams:xt(u,p,h),onClick:()=>c.selectReceiptOrder(h),isExpanded:!d,childOrders:T},I?void 0:r.jsx(Qg,{approveOrderToken:c.approveOrderToken,parent:h,childrenLength:b,isCollapsed:d,onToggle:()=>g(O=>!O),onClick:()=>c.selectReceiptOrder(h),childOrders:_})),!d&&r.jsxs("div",{children:[A.map(O=>f.createElement(to,{...E,key:O.id,isChild:!0,isRowSelected:!1,order:O,orderParams:xt(u,p,O),onClick:()=>c.selectReceiptOrder(O)})),b>Ze&&r.jsx(Jg,{pageSize:Ze,totalCount:b,currentPage:v,onPageChange:y})]})]})}const Yl=w.div.withConfig({displayName:"tableHeaders__HeaderElement",componentId:"sc-1m68uet-0"})(["display:flex;flex-direction:column;gap:3px;i{font-style:normal;opacity:0.7;font-size:0.85em;}"]),$a={CHECKBOX:{id:"checkbox",content:null,order:1},TRADE:{id:"trade",content:r.jsx(B,{id:"egwZ20"}),order:2}},tx=[{id:"limitPrice",content:r.jsx(B,{id:"qdtMn2"}),showInHistory:!1,order:3},{id:"fillsAtWithDistance",content:r.jsxs(Yl,{doubleRow:!0,children:[r.jsx(B,{id:"cPGyZ+"}),r.jsx("i",{children:r.jsx(B,{id:"y4wzmZ"})})]}),showInHistory:!1,doubleRow:!0,order:4},{id:"marketPrice",content:r.jsx(B,{id:"CJskgb"}),showInHistory:!1,order:5}],nx=[{id:"limitPrice",content:r.jsx(B,{id:"qdtMn2"}),showInHistory:!0,order:6},{id:"expiration",content:r.jsxs(Yl,{doubleRow:!0,children:[r.jsx(B,{id:"LxRNPw"}),r.jsx("i",{children:r.jsx(B,{id:"kKOaeo"})})]}),showInHistory:!1,doubleRow:!0,order:7},{id:"executionPrice",content:r.jsx(B,{id:"jtxlvb"}),showInHistory:!0,order:8},{id:"executionTime",content:r.jsx(B,{id:"ZBRgS8"}),showInHistory:!0,order:9},{id:"creationTime",content:r.jsx(B,{id:"Rcrmym"}),showInHistory:!0,order:10},{id:"filled",content:r.jsx(B,{id:"zZmf1N"}),order:11},{id:"status",content:r.jsx(B,{id:"uAQUqI"}),order:12},{id:"actions",content:null,order:13}],rx=()=>[$a.CHECKBOX,$a.TRADE,...tx,...nx].sort((e,t)=>e.order-t.order);function oa(){const e=Ot();return f.useCallback(t=>Zo(e,t),[e])}const ox=w.div.withConfig({displayName:"OrdersTable__TableBox",componentId:"sc-181i662-0"})(["display:flex;flex-flow:column wrap;border:none;padding:0;position:relative;background:var(",");width:100%;"],x.COLOR_PAPER),ax=w.div.withConfig({displayName:"OrdersTable__TableInner",componentId:"sc-181i662-1"})(["display:block;width:inherit;height:inherit;padding:0;overflow-y:hidden;overflow-x:auto;",";"],({theme:e})=>e.colorScrollbar),Ga=w.div.withConfig({displayName:"OrdersTable__HeaderElement",componentId:"sc-181i662-2"})(["height:100%;padding:0;font-size:12px;line-height:1.1;font-weight:500;display:flex;align-items:",";> span{display:flex;flex-flow:row wrap;align-items:center;}",""],({doubleRow:e})=>e?"flex-start":"center",({doubleRow:e})=>e&&`
    flex-flow: column wrap;
    justify-content: center;
    gap: 2px;

    > i {
      opacity: 0.7;
    }
  `),ix=w.div.withConfig({displayName:"OrdersTable__Rows",componentId:"sc-181i662-3"})(["display:block;",";","{display:flex;flex-flow:column wrap;}"],({theme:e})=>e.colorScrollbar,L.upToLargeAlt());function sx({currentTab:e,selectedOrders:t,allowsOffchainSigning:n,chainId:o,orders:a,pendingOrdersPrices:i,balancesAndAllowances:s,getSpotPrice:l,orderActions:c,currentPageNumber:u,isTwapTable:p}){const m=oa(),h=f.useRef(null),T=u*Ze,d=a.slice(T-Ze,T),g=f.useCallback(()=>{document.body.dispatchEvent(new Event("mousedown",{bubbles:!0}))},[]),v=n,y=f.useMemo(()=>t?t.reduce((_,O)=>(_[O.id]=!0,_),{}):{},[t]),b=f.useMemo(()=>d.filter(_=>as(ot(_))),[d]),C=f.useMemo(()=>b.length?b.every(_=>y[ot(_).id]):!1,[b,y]),A=f.useCallback(_=>m({pageNumber:_}),[m]);f.useEffect(()=>{const _=h.current;_&&(_.indeterminate=!!t.length&&!C,_.checked=C)},[C,t.length]);const I=f.useMemo(()=>rx(),[]),E=f.useMemo(()=>{const _=e===ft.id;return I.filter(O=>O.showInHistory===void 0?!0:O.showInHistory===_)},[I,e]);return r.jsxs(r.Fragment,{children:[r.jsx(ox,{children:r.jsxs(ax,{onScroll:g,children:[r.jsx(Rl,{isHistoryTab:e===ft.id,isRowSelectable:v,isTwapTable:p,children:E.map(_=>_.id==="checkbox"&&(!v||e===ft.id)?null:_.id==="checkbox"?r.jsx(Ga,{children:r.jsxs(jl,{children:[r.jsx(Jo,{ref:h,disabled:b.length===0,type:"checkbox",onChange:O=>c.toggleOrdersForCancellation(O.target.checked?Sl(d):[])}),r.jsx(on,{})]})},_.id):r.jsxs(Ga,{doubleRow:_.doubleRow,children:[_.content,_.extraComponent]},_.id))}),r.jsx(ix,{children:d.map(_=>{const{inputToken:O,outputToken:S}=ot(_),R=l({chainId:o,sellTokenAddress:O.address,buyTokenAddress:S.address});if(Wn(_)){const P=_;return r.jsx(to,{isRowSelectable:v,isRowSelected:!!y[P.id],isHistoryTab:e===ft.id,order:P,spotPrice:R,prices:i[P.id],isRateInverted:!1,orderParams:xt(o,s,P),onClick:()=>c.selectReceiptOrder(P),orderActions:c,isTwapTable:p,chainId:o,balancesAndAllowances:s},P.id)}else return r.jsx(ex,{item:_,chainId:o,balancesAndAllowances:s,isRowSelectable:v,isRowSelected:!!y[_.parent.id],isHistoryTab:e===ft.id,spotPrice:R,prices:i[_.parent.id],isRateInverted:!1,orderActions:c,isTwapTable:p},_.parent.id)})})]})}),a.length>Ze&&r.jsx(Gl,{getPageUrl:A,pageSize:Ze,totalCount:a.length,currentPage:u})]})}const lx=w.div.withConfig({displayName:"OrdersTableContainerstyled__Wrapper",componentId:"sc-vyumee-0"})(["display:flex;flex-flow:column wrap;gap:16px;width:100%;"]),Ya=w.div.withConfig({displayName:"OrdersTableContainerstyled__Content",componentId:"sc-vyumee-1"})(["display:flex;flex-flow:column wrap;align-items:center;justify-content:center;color:inherit;min-height:490px;padding:0;> span{--size:130px;width:var(--size);height:var(--size);border-radius:var(--size);overflow:hidden;display:flex;align-items:center;justify-content:center;position:relative;margin:0 0 16px;color:inherit;transform:rotate(0);transition:transform 5s cubic-bezier(0.68,-0.55,0.27,1.55);&::before{content:'';position:absolute;top:0;left:0;background:var(",");width:var(--size);height:var(--size);border-radius:var(--size);z-index:-1;}&:hover{transform:rotate(360deg);}> img,> svg{max-width:100%;max-height:100%;width:100%;height:100%;object-fit:contain;display:inline;}> svg{padding:28px;fill:currentColor;opacity:0.5;}}> h3{font-size:26px;line-height:1.2;font-weight:500;margin:0 auto 16px;text-align:center;}> p{font-size:15px;line-height:1.4;margin:0 auto 21px;font-weight:400;text-align:center;color:inherit;}"],x.COLOR_PAPER_DARKER),cx=w.img.withConfig({displayName:"OrdersTableContainerstyled__MeditatingCowImg",componentId:"sc-vyumee-2"})(["padding:16px;"]),ux=w.div.withConfig({displayName:"OrdersTableContainerstyled__TopContainer",componentId:"sc-vyumee-3"})(["display:flex;align-items:center;justify-content:space-between;width:100%;gap:3px;","{display:block;text-align:center;> h2{margin-bottom:15px !important;}}> h2{font-size:24px;margin:0;}"],L.upToMedium()),dx=w.div.withConfig({displayName:"OrdersTableContainerstyled__TabsContainer",componentId:"sc-vyumee-4"})(["display:flex;align-items:center;justify-content:space-between;width:100%;","{flex-direction:column;align-items:end;gap:10px;}"],L.upToMedium()),px=w(we).withConfig({displayName:"OrdersTableContainerstyled__ExternalLinkStyled",componentId:"sc-vyumee-5"})(["text-decoration:underline;"]),fx=w.span.withConfig({displayName:"OrdersTableContainerstyled__ExternalArrow",componentId:"sc-vyumee-6"})(["display:inline-block;&::after{content:' ↗';display:inline-block;padding:0 0 0 1px;font-weight:bold;font-size:11px;}"]),mx=w.div.withConfig({displayName:"OrdersTableContainerstyled__RightContainer",componentId:"sc-vyumee-7"})(["display:flex;flex-flow:row wrap;","{width:100%;gap:10px;flex-flow:column-reverse wrap;}"],L.upToMedium()),hx=w.div.withConfig({displayName:"OrdersTabs__Tabs",componentId:"sc-1nuehq5-0"})(["display:flex;flex-flow:row wrap;gap:4px;margin:0;","{display:none;}"],L.upToMedium()),gx=w.div.withConfig({displayName:"OrdersTabs__SelectContainer",componentId:"sc-1nuehq5-1"})(["display:none;width:100%;margin:0;position:relative;","{display:block;}&::after{content:'';position:absolute;right:16px;top:50%;width:8px;height:8px;border-right:2px solid var(",");border-bottom:2px solid var(",");transform:translateY(-70%) rotate(45deg);pointer-events:none;transition:border-color var(",") ease-in-out;}&:hover::after{border-color:var(",");}"],L.upToMedium(),x.COLOR_TEXT_OPACITY_50,x.COLOR_TEXT_OPACITY_50,x.ANIMATION_DURATION,x.COLOR_TEXT),xx=w.select.withConfig({displayName:"OrdersTabs__Select",componentId:"sc-1nuehq5-2"})(["width:100%;padding:10px 40px 10px 10px;border-radius:14px;border:1px solid var(",");background:var(",");color:inherit;font-size:13px;font-weight:400;cursor:pointer;outline:none;appearance:none;text-align:left;transition:border-color var(",") ease-in-out;&:hover,&:focus{border-color:var(",");}option{padding:10px;background:var(",");color:inherit;}"],x.COLOR_TEXT_OPACITY_10,x.COLOR_PAPER,x.ANIMATION_DURATION,x.COLOR_TEXT_OPACITY_50,x.COLOR_PAPER),yx=w(Oo).withConfig({displayName:"OrdersTabs__TabButton",componentId:"sc-1nuehq5-3"})(["display:inline-flex;align-items:center;gap:4px;background:",";color:",";font-weight:",";border-radius:14px;text-decoration:none;font-size:13px;padding:10px;border:0;outline:none;cursor:",";transition:background var(",") ease-in-out,color var(",") ease-in-out;pointer-events:",";","{text-align:center;}&:hover{background:",";color:",";}> svg{width:14px;height:14px;fill:currentColor;}> svg > path{fill:currentColor;}"],({active:e,$isUnfillable:t,$isSigning:n,$isDisabled:o})=>o?"transparent":e==="true"?t?`var(${x.COLOR_DANGER_BG})`:n?`var(${x.COLOR_ALERT_BG})`:`var(${x.COLOR_TEXT_OPACITY_10})`:"transparent",({active:e,$isUnfillable:t,$isSigning:n,$isDisabled:o})=>o?`var(${x.COLOR_TEXT_OPACITY_50})`:t?`var(${x.COLOR_DANGER})`:n?`var(${x.COLOR_ALERT_TEXT})`:e==="true"?`var(${x.COLOR_TEXT_PAPER})`:"inherit",({active:e})=>e==="true"?"600":"400",({$isDisabled:e})=>e?"default":"pointer",x.ANIMATION_DURATION,x.ANIMATION_DURATION,({$isDisabled:e})=>e?"none":"auto",L.upToMedium(),({$isDisabled:e,$isUnfillable:t})=>e?"transparent":t?`var(${x.COLOR_DANGER_BG})`:`var(${x.COLOR_TEXT_OPACITY_10})`,({$isDisabled:e,$isUnfillable:t})=>e?`var(${x.COLOR_TEXT_OPACITY_50})`:t?`var(${x.COLOR_DANGER})`:"inherit");function vx({tabs:e,isWalletConnected:t=!0}){const n=oa(),o=cn(),a=Math.max(e.findIndex(s=>s.isActive),0),i=s=>{const l=s.target.value;o(n({tabId:l,pageNumber:1}))};return r.jsxs(r.Fragment,{children:[r.jsx(gx,{children:r.jsx(xx,{value:e[a].id,onChange:i,children:e.map((s,l)=>{const c=s.id==="unfillable",u=s.id==="signing";return r.jsxs("option",{value:s.id,children:[c&&"⚠️ ",u&&"⏳ ",s.title," ",t&&`(${s.count})`]},l)})})}),r.jsx(hx,{children:e.map((s,l)=>{const c=s.id==="unfillable",u=s.id==="signing";return r.jsxs(yx,{active:(l===a).toString(),$isUnfillable:c,$isSigning:u,$isDisabled:!t,to:n({tabId:s.id,pageNumber:1}),children:[c&&r.jsx(ae,{src:To,description:"warning"}),u&&r.jsx(ae,{src:Co,description:"signing"}),r.jsx(B,{id:"J/hVSQ",values:{0:s.title}})," ",t&&r.jsxs("span",{children:["(",s.count,")"]})]},l)})})]})}function Tx({chainId:e,orders:t,tabs:n,isWalletConnected:o,isSafeViaWc:a,displayOrdersOnlyForSafeApp:i,selectedOrders:s,allowsOffchainSigning:l,balancesAndAllowances:c,orderActions:u,currentPageNumber:p,pendingOrdersPrices:m,getSpotPrice:h,children:T,orderType:d,pendingActivities:g,injectedWidgetParams:v,searchTerm:y,isTwapTable:b}){const C=f.useMemo(()=>{const I=n.find(E=>E.isActive);return(I==null?void 0:I.id)||Qe.id},[n]),A=()=>{var E;const I=(E=v.images)==null?void 0:E.emptyOrders;return o?t.length===0?r.jsxs(Ya,{children:[r.jsx("span",{children:I?r.jsx("img",{src:I||Ma,alt:"There are no orders"}):r.jsx(cx,{src:Ma,alt:"Cow meditating ..."})}),r.jsx("h3",{children:r.jsx(B,{id:"J/hVSQ",values:{0:y?"No matching orders found":C===Qe.id?"No orders":C===Zr.id?"No unfillable orders":C===en.id?"No open orders":"No order history"}})}),r.jsx("p",{children:i&&a?r.jsx(B,{id:"zGBbV3",values:{0:C===ft.id?"orders history":"your orders"},components:{0:r.jsx(am,{})}}):y?r.jsx(B,{id:"xWx2Ok"}):r.jsxs(r.Fragment,{children:[r.jsx(B,{id:"kP+nMw",values:{0:C===Zr.id?"unfillable":C===en.id?"open":""}})," ",(C===en.id||C===Qe.id)&&r.jsxs(r.Fragment,{children:[r.jsx("br",{}),r.jsx(B,{id:"G/ycRP"})," ",d===Ct.LIMIT?r.jsxs(px,{href:"https://cow.fi/learn/limit-orders-explained",children:[r.jsx(B,{id:"zwWKhA"}),r.jsx(fx,{})]}):null]})]})})]}):r.jsx(sx,{currentTab:C,isTwapTable:b,chainId:e,orders:t,selectedOrders:s,allowsOffchainSigning:l,balancesAndAllowances:c,orderActions:u,currentPageNumber:p,pendingOrdersPrices:m,getSpotPrice:h}):r.jsxs(Ya,{children:[r.jsx("span",{children:r.jsx(ae,{src:sg,description:"connect wallet"})}),r.jsx("h3",{children:r.jsx(B,{id:"GdzYJ9"})}),!is&&r.jsxs(r.Fragment,{children:[r.jsx("p",{children:r.jsx(B,{id:"KVHoE0",values:{orderType:d},components:{0:r.jsx("br",{})}})}),r.jsx(dd,{pendingActivities:g})]})]})};return r.jsxs(lx,{children:[r.jsx(ux,{children:r.jsxs(dx,{children:[r.jsx(vx,{tabs:n,isWalletConnected:o}),T&&r.jsx(mx,{children:T})]})}),A()]})}function wx(){const e=U(_o),t=ss(Dr.MULTIPLE_CANCELLATION);return f.useCallback(n=>{e(n),t()},[t,e])}const bx=w.div.withConfig({displayName:"MultipleCancellationMenu__Wrapper",componentId:"sc-1lronfx-0"})(["display:flex;flex-flow:row wrap;align-items:center;justify-content:space-between;gap:6px;margin:0 0 0 ",";","{width:100%;justify-content:flex-end;margin:10px auto 5px;}"],({hasSelectedItems:e})=>e?"":"auto",L.upToSmall()),Cx=w.button.withConfig({displayName:"MultipleCancellationMenu__ActionButton",componentId:"sc-1lronfx-1"})(["display:inline-flex;background:var(",");color:var(",");font-weight:600;text-decoration:none;font-size:13px;padding:7px 12px;margin:0;gap:5px;border:0;outline:none;cursor:pointer;transition:background var(",") ease-in-out,color var(",") ease-in-out;border-radius:24px;vertical-align:center;&:hover:not([disabled]){background:var(",");}&[disabled]{background:transparent;outline:1px solid var(",");}"],x.COLOR_DANGER_BG,x.COLOR_DANGER_TEXT,x.ANIMATION_DURATION,x.ANIMATION_DURATION,x.COLOR_DANGER_BG,x.COLOR_PAPER_DARKER),ql=w.button.withConfig({displayName:"MultipleCancellationMenu__TextButton",componentId:"sc-1lronfx-2"})(["display:inline-block;color:var(",");font-size:12px;font-weight:500;padding:5px;cursor:pointer;background:none;outline:none;border:none;text-decoration:underline;&:hover{text-decoration:none;}"],x.COLOR_TEXT_OPACITY_70),Ax=w(ql).withConfig({displayName:"MultipleCancellationMenu__CancelAllButton",componentId:"sc-1lronfx-3"})(["text-decoration:none;&:hover{color:",";text-decoration:underline;}"],({theme:e})=>e.danger);function Ox({pendingOrders:e}){const{allowsOffchainSigning:t}=dn(),n=k(ls),o=U(_o),a=wx(),i=n.length||0,s=f.useCallback(()=>{a(e)},[a,e]),l=f.useCallback(()=>{a(n)},[n,a]),c=f.useCallback(()=>{o([])},[o]);return f.useEffect(()=>{c()},[]),e.filter(as).length===0||!t?null:r.jsx(bx,{hasSelectedItems:!!i,children:i?r.jsxs(r.Fragment,{children:[r.jsxs(Cx,{onClick:l,children:[r.jsx(Ki,{size:14})," Cancel ",i," selected"]}),r.jsx(ql,{onClick:c,children:"Clear selection"})]}):r.jsx(Ax,{onClick:s,children:"Cancel all"})})}const _x=w.span.withConfig({displayName:"styled__Suffix",componentId:"sc-1rawt1p-0"})(["margin:0 0 0 3px;opacity:0.7;font-weight:600;"]),no=w.div.withConfig({displayName:"styled__ArrowsWrapper",componentId:"sc-1rawt1p-1"})(["display:flex;align-items:center;justify-content:center;position:relative;inset-block-start:0;inset-inline-end:0;background:transparent;color:inherit;border-radius:6px;display:flex;flex-flow:column wrap;align-items:stretch;width:28px;gap:3px;margin:0 -16px 0 0;user-select:all;> span,> span > span{display:flex;flex-flow:column wrap;align-items:center;justify-content:center;height:100%;color:inherit;}> span{overflow:hidden;cursor:pointer;opacity:0.5;transition:opacity var(",") ease-in-out,color var(",") ease-in-out;display:flex;align-items:center;justify-content:center;flex:auto;height:50%;&:hover{opacity:1;> span > svg > path{fill:currentColor;}}}> span > span > svg{display:flex;--size:12px;width:var(--size);height:var(--size);border-radius:var(--size);object-fit:contain;cursor:pointer;color:currentColor;}> span > span > svg > path{fill:currentColor;}> span:first-child > span > svg{transform:rotate(180deg);}"],x.ANIMATION_DURATION,x.ANIMATION_DURATION),Ix=w.span.withConfig({displayName:"styled__InputWrapper",componentId:"sc-1rawt1p-2"})(["position:relative;display:flex;align-items:center;&:hover ","{opacity:1;}",""],no,({upDownArrowsLeftAlign:e})=>e&&`
    ${no} {
      order: -1;
      margin: 0;
    }
  `),Bn=w(cs).withConfig({displayName:"styled__NumericalInput",componentId:"sc-1rawt1p-3"})(["color:",";display:flex;align-items:center;background:none;flex:1;width:auto;height:100%;font-size:22px;font-weight:500;","{font-size:20px;}"],({color:e})=>e==="red"?`var(${x.COLOR_DANGER})`:e==="yellow"?`var(${x.COLOR_WARNING})`:"inherit",L.upToSmall()),aa=w.span.withConfig({displayName:"styled__TradeWidgetFieldLabel",componentId:"sc-16zn5wm-0"})(["color:inherit;display:flex;align-items:center;font-size:13px;font-weight:500;padding:0;flex:0 1 auto;flex:1;opacity:0.7;transition:opacity var(",") ease-in-out;&:hover{opacity:1;}"],x.ANIMATION_DURATION),Mt=w.div.withConfig({displayName:"styled__Content",componentId:"sc-16zn5wm-1"})(["display:flex;align-items:center;font-weight:500;position:relative;"]),Sx=w.div.withConfig({displayName:"styled__ErrorText",componentId:"sc-16zn5wm-2"})(["color:",";font-size:12px;margin-top:5px;"],({theme:e,type:t})=>t==="error"?e.error:t==="warning"?"#FF8F00":e.text1),zn=w.div.withConfig({displayName:"styled__TradeWidgetFieldBox",componentId:"sc-16zn5wm-3"})(["--minHeight:45px;background:",";border:1px solid ",";border-radius:16px;min-height:var(--minHeight);font-size:18px;padding:10px 16px;padding:",";display:flex;justify-content:space-between;align-items:center;flex-flow:row wrap;flex:1;gap:3px;width:100%;","{gap:0;}"," ","{padding:",";}","{padding:0;flex:0 1 auto;color:inherit;","{max-width:200px;appearance:textfield;}"," > em{font-style:normal;flex:1 1 100%;height:100%;display:flex;align-items:center;justify-content:flex-end;padding:0 12px 0 0;}> span{background:",";","}}"],({hasPrefix:e})=>e?"transparent":`var(${x.COLOR_PAPER_DARKER})`,({hasPrefix:e})=>e?`var(${x.COLOR_PAPER_DARKER})`:"transparent",({hasPrefix:e})=>e?"0":"10px 16px",L.upToSmall(),({hasPrefix:e})=>e&&Jt`
      display: grid;
      grid-template-columns: max-content auto;
      grid-template-rows: max-content;

      ${L.upToSmall()} {
        display: flex;
        flex-flow: column wrap;
      }
    `,aa,({hasPrefix:e})=>e?"10px 16px":"initial",Mt,Bn,({hasPrefix:e})=>e&&Jt`
        flex: 1 1 auto;
        justify-content: center;
        display: flex;
        padding: 0;
        height: var(--minHeight);

        ${L.upToSmall()} {
          border-top: 1px solid var(${x.COLOR_PAPER_DARKER});
          width: 100%;
        }
      `,({hasPrefix:e})=>e?`var(${x.COLOR_PAPER_DARKER})`:"transparent",({hasPrefix:e})=>e&&Jt`
          margin: auto;
          height: 100%;
          display: flex;
          padding: 0 10px 0 0;
          flex: 0 1 auto;
          border-radius: 0 15px 15px 0;
          align-items: center;

          ${L.upToSmall()} {
            border-radius: 0 0 15px 0;
            width: 136px;
          }

          > ${Bn} {
            font-size: 18px;
            width: 56px;
          }
        `);function pr(e){const{className:t,children:n,label:o,tooltip:a,error:i,hasPrefix:s}=e,l=rt(a,e);return r.jsxs(zn,{className:t,hasPrefix:s,children:[r.jsxs(aa,{children:[r.jsx(B,{id:"w9dLMW",values:{label:o}}),a&&r.jsx(Ft,{text:l})]}),r.jsx(Mt,{children:n}),i&&r.jsx(Sx,{type:i.type,children:i.text})]})}function Ex({onClickUp:e,onClickDown:t}){return r.jsxs(no,{children:[r.jsx("span",{role:"button","aria-label":"Increase Value","aria-disabled":"false",onClick:e,children:r.jsx("span",{role:"img","aria-label":"up",children:r.jsx(ae,{src:Mr})})}),r.jsx("span",{role:"button","aria-label":"Decrease Value","aria-disabled":"false",onClick:t,children:r.jsx("span",{role:"img","aria-label":"down",children:r.jsx(ae,{src:Mr})})})]})}function Hn(e){const{value:t,suffix:n,onUserInput:o,placeholder:a="0",decimalsPlaces:i=0,min:s,max:l,step:c=1,prefixComponent:u,showUpDownArrows:p=!1,upDownArrowsLeftAlign:m=!1}=e,h=l===void 0?1e5:l,[T,d]=f.useState(t===null?"":t.toString()),[g,v]=f.useState(!1),y=f.useCallback(I=>{const E=I.includes("."),[_,O]=(I||"").split("."),S=i&&E?`.${O.slice(0,i)}`:"",R=_+S,P=R?parseFloat(R):null;if(P&&h!==null&&P>h){d(h.toString()),o(h);return}if(s!==void 0&&(!P||P<s)){d(s.toString()),o(s);return}d(R),t!==P&&o(P)},[o,t,s,h,i]);f.useEffect(()=>{g||y(t!==null?t.toString():"")},[t,y,g]);const b=f.useCallback(()=>{y(Rx(T,c,s))},[T,s,c,y]),C=f.useCallback(()=>{y(jx(T,c,s))},[T,s,c,y]),A=f.useCallback(I=>{I.key==="ArrowUp"?b():I.key==="ArrowDown"&&C()},[C,b]);return r.jsx(pr,{...e,hasPrefix:!!u,children:r.jsxs(r.Fragment,{children:[u,r.jsxs(Ix,{showUpDownArrows:p,upDownArrowsLeftAlign:m,children:[r.jsx(Bn,{placeholder:a,value:T,onBlur:I=>{y(I.target.value),v(!1)},onFocus:()=>v(!0),onUserInput:d,onKeyDown:A,min:s,max:h||void 0,step:c}),p&&r.jsx(Ex,{onClickUp:b,onClickDown:C}),n&&r.jsx(_x,{children:n})]})]})})}function Rx(e,t,n){const o=new us(e);return o.isNaN()?(n==null?void 0:n.toString())||t.toString():o.plus(t).toString()}function jx(e,t,n){const o=new us(e);return o.isNaN()?(n==null?void 0:n.toString())||t.toString():o.minus(t).toString()}const Px=w(pr).withConfig({displayName:"TradeTextBox__StyledTradeWidgetField",componentId:"sc-a9a73u-0"})(["background-color:var(",");border:1px solid var(",");display:flex;flex-flow:column wrap;align-items:flex-start;"],x.COLOR_PAPER,x.COLOR_PAPER_DARKER);function kx(e){return r.jsx(Px,{...e})}function Lx(e){return e!==void 0&&e>Io}function Nx(e){return e!==void 0&&e<So}function Dx(e,t){if(!t)return!1;const n=ds[t];return!!n&&!!e&&e.lessThan(n)}var Te;(function(e){e.LOADING_SAFE_INFO="LOADING_SAFE_INFO",e.TX_BUNDLING_NOT_SUPPORTED="TX_BUNDLING_NOT_SUPPORTED",e.SELL_AMOUNT_TOO_SMALL="SELL_AMOUNT_TOO_SMALL",e.PART_TIME_INTERVAL_TOO_SHORT="PART_TIME_INTERVAL_TOO_SHORT",e.PART_TIME_INTERVAL_TOO_LONG="PART_TIME_INTERVAL_TOO_LONG"})(Te||(Te={}));function Mx(e){const{twapOrder:t,isTxBundlingSupported:n,verification:o,sellAmountPartFiat:a,chainId:i,partTime:s}=e;return n===!1?"TX_BUNDLING_NOT_SUPPORTED":o===null||n===null?"LOADING_SAFE_INFO":!We(t==null?void 0:t.buyAmount)&&Dx(a,i)?"SELL_AMOUNT_TOO_SMALL":Nx(s)?"PART_TIME_INTERVAL_TOO_SHORT":Lx(s)?"PART_TIME_INTERVAL_TOO_LONG":null}const Ir=w.div.withConfig({displayName:"styled__Row",componentId:"sc-nlzmst-0"})(["display:flex;gap:10px;width:100%;","{flex-direction:column;grid-gap:6px;}","{opacity:0.5;transition:opacity var(",") ease-in-out;&:hover{opacity:1;}}"],L.upToSmall(),ps,x.ANIMATION_DURATION),Fx=w(Ao).attrs({rightAlign:!0}).withConfig({displayName:"styled__StyledRateInfo",componentId:"sc-nlzmst-1"})(["padding:10px;gap:4px;font-size:13px;display:grid;grid-template-columns:max-content auto;grid-template-rows:max-content;","{text-align:right;}"],Qi),Ux=w(fs).withConfig({displayName:"styled__ExecutionPriceStyled",componentId:"sc-nlzmst-2"})(["font-size:16px;"]),Wx=""+new URL("protection-D-Z13D3-.svg",import.meta.url).href;var Bx=Bf();const Zt=$o(Bx),[ro,qa,Va,zx]=[Zt("1d"),Zt("1h"),Zt("1m"),Zt("1s")],oo=ro*365,Xa=oo/12;function Vl(e){return(e.hours*60+e.minutes)*60}function Je(e,t=!1){const n=Zt(`${e*1e3}ms`),o=Math.floor(n/oo),a=Math.floor(n%oo/Xa),i=Math.floor(n%Xa/ro),s=Math.floor(n%ro/qa),l=Math.floor(n%qa/Va),c=Math.floor(n%Va/zx);return[[o,t?" years":"y"],[a,t?" months":"mo"],[i,t?" days":"d"],[s,t?" hours":"h"],[l,t?" minutes":"m"],[c,t?" seconds":"s"]].filter(([u])=>!!u).map(([u,p])=>`${u}${p}`).join(" ")}const Hx=w.div.withConfig({displayName:"tooltips__IconImage",componentId:"sc-1c38enu-0"})(["display:flex;align-items:center;justify-content:center;> svg{fill:currentColor;margin:0 3px 0 0;}"]),ke={numberOfParts:{label:"No. of parts",tooltip:"Your TWAP order will be split into this many parts, which will execute one by one."},totalDuration:{label:"Total duration",tooltip:({parts:e,partDuration:t})=>r.jsxs(r.Fragment,{children:['The "Total duration" is the duration it takes to execute all parts of your TWAP order.',r.jsx("br",{}),r.jsx("br",{}),"For instance, your order consists of ",r.jsxs("b",{children:[e," parts"]})," placed every"," ",r.jsx("b",{children:Je(t)}),", the total time to complete the order is"," ",r.jsx("b",{children:Je(e*t)}),". Each limit order remains open for"," ",r.jsx("b",{children:Je(t)})," until the next part becomes active."]})},partDuration:{label:"Part duration",tooltip:r.jsxs(r.Fragment,{children:['The "Part duration" refers to the duration between each part of your TWAP order.',r.jsx("br",{}),r.jsx("br",{}),"Choosing a shorter time allows for faster execution of each part, potentially reducing price fluctuations. Striking the right balance is crucial for optimal execution."]})},slippage:{label:r.jsxs(r.Fragment,{children:[r.jsx(Hx,{children:r.jsx(ae,{src:Wx,width:"16",height:"16",title:"Price protection"})})," ","Price protection"]}),tooltip:r.jsx(r.Fragment,{children:"Your TWAP order won't execute and is protected if the market price dips more than your set price protection."})},price:{label:"Rate"},sellAmount:{label:"Sell per part",tooltip:"Estimated amount that will be sold in each part of the order."},buyAmount:{label:"Buy per part",tooltip:"Estimated amount that you will receive from each part of the order."}},$x={sellAmount:ke.sellAmount,buyAmount:ke.buyAmount};async function Xl(e){const{safeAddress:t,provider:n}=e;return new rl(t,pd,n)}var an;(function(e){e.HAS_EXTENSIBLE_FALLBACK="HAS_EXTENSIBLE_FALLBACK",e.HAS_DOMAIN_VERIFIER="HAS_DOMAIN_VERIFIER",e.HAS_NOTHING="HAS_NOTHING"})(an||(an={}));async function Kl(e){const{chainId:t,safeAddress:n,settlementContract:o}=e,a=ms[t],i=await o.callStatic.domainSeparator(),s=await Xl(e);try{return(await s.callStatic.domainVerifiers(n,i)).toLowerCase()===a.toLowerCase()?"HAS_DOMAIN_VERIFIER":"HAS_EXTENSIBLE_FALLBACK"}catch(l){return console.log("FALLBACK HANDLER CHECKED, error: ",l),"HAS_NOTHING"}}const{atom:Gx,updateAtom:Ql}=hs(Kn("fallbackHandlerVerification:v2",{}));function gn(){const{account:e}=H(),t=k(Gx);return e&&(t[e.toLowerCase()]||t[e])||null}function xn(){const e=gn();return e!==null&&e!==an.HAS_DOMAIN_VERIFIER}function Yx(){const e=gn();return e!==null&&e===an.HAS_DOMAIN_VERIFIER}const Zl={hours:0,minutes:0},qx={isCustomDeadline:!1,deadline:fd.value,customDeadline:Zl,numberOfPartsValue:Fr,slippageValue:null,isFallbackHandlerSetupAccepted:!1},ve=Kn("twap-orders-settings-atom:v1",qx,vo()),Jl=X(null,(e,t,n)=>{t(ve,()=>({...e(ve),...n}))}),Vx=X(e=>{const{slippageValue:t}=e(ve);return t!=null?new zt(Math.round(t*100),1e4):gs});function ec(e,t){if(!e||!t)return null;const{isSell:n,quotePrice:o,costs:a,beforeNetworkCosts:i,afterNetworkCosts:s,afterPartnerFees:l,afterSlippage:c}=e,u=p=>p.multiply(t);return{isSell:n,quotePrice:o,costs:{networkFee:{amountInSellCurrency:u(a.networkFee.amountInSellCurrency),amountInBuyCurrency:u(a.networkFee.amountInBuyCurrency)},partnerFee:{amount:u(a.partnerFee.amount),bps:a.partnerFee.bps}},beforeNetworkCosts:{sellAmount:u(i.sellAmount),buyAmount:u(i.buyAmount)},afterNetworkCosts:{sellAmount:u(s.sellAmount),buyAmount:u(s.buyAmount)},afterPartnerFees:{sellAmount:u(l.sellAmount),buyAmount:u(l.buyAmount)},afterSlippage:{sellAmount:u(c.sellAmount),buyAmount:u(c.buyAmount)}}}const tc=X(e=>{const{numberOfPartsValue:t}=e(ve),n=e(xs);return ec(n,t)}),nc=X(e=>{const{isCustomDeadline:t,customDeadline:n,deadline:o}=e(ve);return t?Vl(n):o/1e3}),ia=X(e=>{const{numberOfPartsValue:t}=e(ve),n=e(nc);return Math.ceil(n/t)}),fr=X(e=>{const t=e(Pi),{account:n}=e(md),{numberOfPartsValue:o}=e(ve),a=e(ia),i=e(tc),{inputCurrencyAmount:s,recipient:l,recipientAddress:c}=e(xo);if(!s||!i)return null;const{sellAmount:u,buyAmount:p}=i.afterSlippage;return{sellAmount:u,buyAmount:p,receiver:c||l||n||"",numOfParts:o,startTime:0,timeInterval:a,span:0,appData:(t==null?void 0:t.appDataKeccak256)||ki().appDataKeccak256}});function sa(){const{chainId:e}=H(),t=k(fr),n=He(),{sellAmount:o}=(n==null?void 0:n.afterPartnerFees)||{},a=Be(o).value,i=k(ia),s=gn(),l=ys();return Mx({isTxBundlingSupported:l,verification:s,twapOrder:t,sellAmountPartFiat:a,chainId:e,partTime:i})}function yn(){return k(Vx)}const Xx=w(Zn).withConfig({displayName:"TradeSelect__StyledMenuList",componentId:"sc-ny47r0-0"})(["background:var(",");box-shadow:var(",");color:inherit;margin:15px 0 0 0;padding:16px;border-radius:20px;outline:none;list-style:none;position:relative;z-index:2;min-width:120px;display:flex;flex-flow:column wrap;gap:10px;transition:background var(",") ease-in-out;"],x.COLOR_PAPER_DARKER,x.BOX_SHADOW,x.ANIMATION_DURATION),Kx=w(Qn).withConfig({displayName:"TradeSelect__StyledMenuButton",componentId:"sc-ny47r0-1"})(["color:inherit;background:none;border:0;outline:none;padding:0;margin:0;font-size:18px;display:flex;align-items:center;flex-flow:row wrap;cursor:pointer;width:100%;justify-content:space-between;"]),Qx=w(Bt).withConfig({displayName:"TradeSelect__StyledMenuItem",componentId:"sc-ny47r0-2"})(["cursor:pointer;font-size:16px;color:inherit;opacity:0.7;transition:opacity var(",") ease-in-out;&:hover{opacity:1;}&:not(:last-child){margin:0 0 10px;}"],x.ANIMATION_DURATION);function Zx(e){const{activeLabel:t,items:n,onSelect:o,className:a}=e;return r.jsx(pr,{...e,children:r.jsx("div",{children:r.jsxs(Wt,{children:[r.jsxs(Kx,{className:a,children:[t," ",r.jsx(mo,{size:20})]}),r.jsx(Xx,{children:n.map(i=>r.jsx(Qx,{onSelect:()=>o(i),children:i.label},i.label))})]})})})}const Jx=w.div.withConfig({displayName:"styled__ModalWrapper",componentId:"sc-1ihwoor-0"})(["display:flex;flex-flow:column wrap;height:100%;width:100%;padding:16px;min-height:150px;"]),ey=w.div.withConfig({displayName:"styled__ModalHeader",componentId:"sc-1ihwoor-1"})(["display:flex;width:100%;justify-content:space-between;padding:0 0 16px;color:inherit;> h3{font-size:21px;margin:0;}"]),ty=w.div.withConfig({displayName:"styled__ModalFooter",componentId:"sc-1ihwoor-2"})(["display:flex;width:100%;justify-content:space-between;padding:15px 0 0;gap:10px;color:inherit;> button{border-radius:12px;}"]),ny=w.div.withConfig({displayName:"styled__ModalContent",componentId:"sc-1ihwoor-3"})(["display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:max-content;width:100%;grid-gap:6px;","{grid-template-columns:repeat(1,1fr);}> ","{flex-flow:row nowrap;}> "," ","{width:100%;}"],L.upToSmall(),zn,zn,Bn),ry=w(un).withConfig({displayName:"styled__CloseIcon",componentId:"sc-1ihwoor-4"})(["height:28px;width:28px;opacity:0.6;transition:opacity var(",") ease-in-out;&:hover{cursor:pointer;opacity:1;}> line{stroke:var(",");}"],x.ANIMATION_DURATION,x.COLOR_TEXT),oy=w(Jn).withConfig({displayName:"styled__CancelButton",componentId:"sc-1ihwoor-5"})(["background:transparent;color:inherit;border:1px solid var(",");:hover{background:var(",");color:inherit;}"],x.COLOR_PAPER_DARKER,x.COLOR_PAPER_DARKER);w.div.withConfig({displayName:"styled__ErrorText",componentId:"sc-1ihwoor-6"})(["color:",";font-size:14px;margin-top:10px;"],({theme:e})=>e.error);function ay(e){const{isOpen:t,onDismiss:n,customDeadline:o,selectCustomDeadline:a}=e,{hours:i=0,minutes:s=0}=o,l=ct(),[c,u]=f.useState(i),[p,m]=f.useState(s);f.useEffect(()=>u(i),[i,t]),f.useEffect(()=>m(s),[s,t]);const h=f.useCallback(y=>u(y?Math.round(y):0),[]),T=f.useCallback(y=>m(y?Math.round(y):0),[]),d=!c&&!p,g=()=>{l.sendEvent({category:de.TWAP,action:"Apply custom deadline",label:`${c}h ${p}m`}),n(),a({hours:c,minutes:p})},v=f.useCallback(()=>{u(i||0),m(s||0),n()},[i,s,n]);return r.jsx(nr,{isOpen:t,onDismiss:v,children:r.jsxs(Jx,{children:[r.jsxs(ey,{children:[r.jsx("h3",{children:r.jsx(B,{id:"Wta4UJ"})}),r.jsx(ry,{onClick:v,"data-click-event":tn({category:de.TWAP,action:"Close custom deadline selector"})})]}),r.jsxs(ny,{children:[r.jsx(Hn,{label:"Hours",onUserInput:h,value:c,showUpDownArrows:!0,min:0,max:null}),r.jsx(Hn,{label:"Minutes",onUserInput:T,value:p,showUpDownArrows:!0,min:0,max:null})]}),r.jsxs(ty,{children:[r.jsx(oy,{onClick:v,"data-click-event":tn({category:de.TWAP,action:"Cancel custom deadline selection"}),children:r.jsx(B,{id:"dEgA5A"})}),r.jsx(Le,{disabled:d,onClick:g,children:r.jsx(B,{id:"DB8zMK"})})]})]})})}const Ka={label:"Custom",value:"CUSTOM_ITEM_VALUE"},iy=w(Zx).withConfig({displayName:"DeadlineSelector__StyledTradeSelect",componentId:"sc-144pnuf-0"})(["font-weight:500;color:inherit;> svg{color:inherit;stroke:currentColor;opacity:0.7;transition:opacity var(",") ease-in-out;}&:hover > svg{opacity:1;}","{width:100%;color:inherit;}"," > div{width:100%;}"],x.ANIMATION_DURATION,Mt,Mt),sy=w(pr).withConfig({displayName:"DeadlineSelector__StyledTradeField",componentId:"sc-144pnuf-1"})(["","{width:100%;color:inherit;}"," > div{width:100%;}"],Mt,Mt);function ly(e){const{items:t,deadline:{deadline:n,customDeadline:o,isCustomDeadline:a},isDeadlineDisabled:i,label:s,tooltip:l,setDeadline:c}=e,[u,p]=f.useState(!1),m=f.useMemo(()=>[...t,Ka],[t]),h=f.useCallback(d=>{d===Ka?p(!0):c({isCustomDeadline:!1,deadline:d.value,customDeadline:Zl})},[p,c]),T=f.useMemo(()=>{var d;return a?Je(Vl(o)):((d=t.find(g=>g.value===n))==null?void 0:d.label)||""},[t,n,o,a]);return r.jsxs(r.Fragment,{children:[i?r.jsx(sy,{label:s,tooltip:rt(l),children:r.jsx("div",{children:T})}):r.jsx(iy,{label:s,tooltip:rt(l),items:m,activeLabel:T,onSelect:h}),r.jsx(ay,{selectCustomDeadline:d=>c({isCustomDeadline:!0,customDeadline:d,deadline:0}),customDeadline:o,onDismiss:()=>p(!1),isOpen:u})]})}function cy(){const{isFallbackHandlerSetupAccepted:e}=k(ve),t=vs();return xn()?e:t}const uy=[Tt.ApproveAndSwap,Tt.ApproveRequired];function rc(){const{account:e}=H(),t=pn();return f.useMemo(()=>({canTrade:!t||uy.includes(t),walletIsNotConnected:!e}),[t,e])}const dy={[Te.LOADING_SAFE_INFO]:()=>r.jsx(Le,{disabled:!0,buttonSize:$t.BIG,children:"Loading..."}),[Te.TX_BUNDLING_NOT_SUPPORTED]:()=>r.jsx(Le,{disabled:!0,buttonSize:$t.BIG,children:"Unsupported wallet"}),[Te.SELL_AMOUNT_TOO_SMALL]:()=>r.jsx(Le,{disabled:!0,buttonSize:$t.BIG,children:"Sell amount too small"}),[Te.PART_TIME_INTERVAL_TOO_SHORT]:()=>r.jsx(Le,{disabled:!0,buttonSize:$t.BIG,children:"Interval time too short"}),[Te.PART_TIME_INTERVAL_TOO_LONG]:()=>r.jsx(Le,{disabled:!0,buttonSize:$t.BIG,children:"Interval time too long"})};function py(e){return dy[e.state](e.context)}function fy({localFormValidation:e,primaryFormValidation:t,fallbackHandlerIsNotSet:n}){const o=fn(),{walletIsNotConnected:a}=rc(),i=ct(),s=f.useCallback((m,h)=>{i.sendEvent({category:de.TWAP,action:"Conversion",label:`${m}|${h?"no-handler":"handler-set"}`})},[i]),l=f.useCallback(()=>{o.onOpen(),s("initiated",n)},[o,s,n]),c=cy(),u={confirmTrade:l},p=Ts("TWAP order",l);return p?e&&!a?r.jsx(py,{state:e,context:u}):r.jsx(ws,{confirmText:"Review TWAP order",validation:t,context:p,isDisabled:!c}):null}const my=w.div.withConfig({displayName:"styled__Wrapper",componentId:"sc-1rbjopd-0"})(["display:flex;grid-gap:8px;","{flex-direction:column;grid-gap:6px;}"],L.upToSmall()),hy=w(zn).withConfig({displayName:"styled__Part",componentId:"sc-1rbjopd-1"})(["background-color:transparent;border:1px solid var(",");align-content:flex-start;"],x.COLOR_PAPER_DARKER),gy=w(aa).withConfig({displayName:"styled__Label",componentId:"sc-1rbjopd-2"})(["","{opacity:0.5;transition:opacity var(",") ease-in-out;&:hover{opacity:1;}}"],ps,x.ANIMATION_DURATION),xy=w(Q).withConfig({displayName:"styled__Amount",componentId:"sc-1rbjopd-3"})(["display:flex;flex-flow:row wrap;font-size:18px;font-weight:500;padding:2px 0;width:100%;overflow:hidden;text-overflow:ellipsis;gap:5px;> div:first-child{margin:0 5px 0 0;}","{font-size:18px;padding:5px 0;}"],L.upToSmall()),yy=w(Eo).withConfig({displayName:"styled__Fiat",componentId:"sc-1rbjopd-4"})(["color:inherit;font-size:13px;opacity:0.7;transition:opacity var(",") ease-in-out;&:hover{opacity:1;}"],x.ANIMATION_DURATION);function Qa(e){const{amount:t,usdAmount:n,label:o,tooltip:a,children:i}=e;return r.jsxs(hy,{children:[r.jsxs(gy,{children:[r.jsx(B,{id:"w9dLMW",values:{label:o}}),r.jsx(Ft,{text:a})]}),r.jsx(xy,{amount:t,tokenSymbol:t==null?void 0:t.currency}),r.jsx(yy,{amount:n}),i]})}function vy(){const{sellAmount:{label:e,tooltip:t},buyAmount:{label:n,tooltip:o}}=$x,{numberOfPartsValue:a}=k(ve),i=He(),{sellAmount:s,buyAmount:l}=(i==null?void 0:i.afterPartnerFees)||{},c=Be(s).value,u=Be(l).value;return r.jsxs(my,{children:[r.jsx(Qa,{label:r.jsxs(r.Fragment,{children:[e," (1/",a,")"]}),tooltip:rt(t),amount:s,usdAmount:c}),r.jsx(Qa,{label:r.jsxs(r.Fragment,{children:[n," (1/",a,")"]}),tooltip:rt(o),amount:l,usdAmount:u})]})}const Za=w.div.withConfig({displayName:"FallbackHandlerWarning__Wrapper",componentId:"sc-5sjcmt-0"})(["display:flex;flex-flow:column wrap;align-items:center;justify-content:center;"]),oc=w.div.withConfig({displayName:"FallbackHandlerWarning__CheckboxWrapper",componentId:"sc-5sjcmt-1"})(["display:flex;align-items:center;justify-content:center;width:100%;font-weight:bold;text-align:left;"]),Ty=w(oc).withConfig({displayName:"FallbackHandlerWarning__WarningCheckboxWrapper",componentId:"sc-5sjcmt-2"})(["width:100%;margin:0 auto;border:1px solid;border-radius:16px;padding:20px;font-weight:500;display:flex;align-items:center;justify-content:center;"]),wy=w.label.withConfig({displayName:"FallbackHandlerWarning__WarningCheckbox",componentId:"sc-5sjcmt-3"})(["display:flex;gap:10px;cursor:pointer;align-items:center;justify-content:center;width:100%;> input{--size:21px;width:var(--size);height:var(--size);}"]),by=w(Ee).withConfig({displayName:"FallbackHandlerWarning__InlineBannerWithCheckbox",componentId:"sc-5sjcmt-4"})([""]);function Cy({isFallbackHandlerSetupAccepted:e,toggleFallbackHandlerSetupFlag:t}){const n=r.jsxs(wy,{children:[r.jsx("input",{type:"checkbox",checked:e,onChange:o=>t(o.currentTarget.checked),"data-click-event":tn({category:de.TWAP,action:"Modify safe handler checkbox",label:e?"enabled":"disabled"})}),r.jsx("span",{children:"Make the modification when placing order"})]});return e?r.jsx(Za,{children:r.jsx(Ee,{hideIcon:!0,bannerType:wt.Info,children:r.jsx(oc,{children:n})})}):r.jsx(Za,{children:r.jsxs(by,{bannerType:wt.Alert,children:[r.jsx("strong",{children:"Your Safe needs a modification"}),r.jsx("p",{children:"TWAP orders require a one-time update to your Safe to enable automated execution of scheduled transactions."}),r.jsx(we,{href:hd,children:"Learn more"}),r.jsx(Ty,{children:n})]})})}function Ay(){const e=Je(So,!0);return r.jsxs(Ee,{children:[r.jsx("strong",{children:"Insufficient time between parts"}),r.jsxs("p",{children:["A minimum of ",r.jsx("strong",{children:e})," between parts is required. Decrease the number of parts or increase the total duration."]})]})}function Oy({chainId:e}){const t=ds[e];return r.jsxs(Ee,{children:[r.jsx("strong",{children:"Minimum sell size"}),r.jsxs("p",{children:["The sell amount per part of your TWAP order should be at least"," ",r.jsxs("b",{children:["$",r.jsx(Q,{amount:t,hideTokenSymbol:!0})]}),". Decrease the number of parts or increase the total sell amount."]})]})}function _y({isSafeViaWc:e,chainId:t,account:n}){return e&&n?r.jsxs(Ee,{bannerType:wt.Info,children:[r.jsx("strong",{children:"Use Safe web app"}),r.jsxs("p",{children:["Use the ",r.jsx(we,{href:gd(t,n),children:"Safe app"})," for advanced trading."]})]}):r.jsxs(Ee,{bannerType:wt.Alert,iconSize:32,children:[r.jsx("strong",{children:"Unsupported wallet detected"}),r.jsxs("p",{children:["TWAP orders currently require a Safe with a special fallback handler. Have one? Switch to it! Need setup?"," ",r.jsx(we,{href:xd,children:"Click here"}),". Future updates may extend wallet support!"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Note:"})," If you are using a Safe but still see this message, ensure your Safe is deployed!"]})]})}function Iy(){const e=Je(Io,!0);return r.jsxs(Ee,{children:[r.jsx("strong",{children:"Too much time between parts"}),r.jsxs("p",{children:["A maximum of ",r.jsx("strong",{children:e})," between parts is required. Increase the number of parts or decrease the total duration."]})]})}function Sy(){return r.jsxs(Ee,{children:[r.jsx("strong",{children:"Attention"}),r.jsx("p",{children:"Since prices can change significantly over time, we suggest increasing your price protection for orders with long deadlines."})]})}const Ey=w(Ui).withConfig({displayName:"SwapPriceDifferenceWarning__StyledNavLink",componentId:"sc-1uaxuo9-0"})(["color:inherit;display:inline;text-decoration:underline;&:hover{text-decoration:none;}"]),Ry=.5;function jy({tradeUrlParams:e,swapAmountDifference:t,feeFiatAmount:n}){const{amount:o,percent:a}=t,i=o.greaterThan(0),s=+a.toSignificant(2)<Ry;if(!i&&!n||i&&s)return null;const l=bs(e,W.SWAP,!0),c=r.jsx(Ey,{to:l,children:"SWAP order"});return r.jsx(Ee,{bannerType:wt.Savings,children:i?r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Maximizing Your Gains! "}),r.jsxs("p",{children:["You could gain an extra"," ",r.jsx("b",{children:r.jsx(Q,{amount:o,tokenSymbol:o.currency})})," ","compared to using a ",c]})]}):r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Trade Smart, Save More!"}),r.jsxs("p",{children:["Considering current network costs (",r.jsx("b",{children:r.jsx(Eo,{amount:n})})," ","per chunk), you could save more by reducing the number of parts or switch to a ",c,"."]})]})})}const ac=X(null),Py=X(e=>{var c;const t=e(ac),n=(c=e(xs))==null?void 0:c.afterSlippage.buyAmount,{numberOfPartsValue:o}=e(ve);if(!n||We(n))return null;const a=t==null?void 0:t.quote.buyAmount;if(!a||!o)return null;const i=ne.fromRawAmount(n.currency,a),s=n.multiply(o),l=s.subtract(i);return{amount:l,percent:new zt(l.quotient,s.quotient)}}),ky=864e5/1e3,Ly=6048e5/1e3,Ny=2592e6/1e3;function Dy(e,t){const n=+t.toFixed(2);return e<=ky?n<10:e<Ly?n<20:e<Ny?n<30:n<50}function ic({localFormValidation:e,isConfirmationModal:t}){const{isFallbackHandlerSetupAccepted:n}=k(ve),o=U(Jl),a=yn(),i=k(nc),s=k(Py),l=pn(),{chainId:c,account:u}=H(),p=xn(),m=cm(),{canTrade:h,walletIsNotConnected:T}=rc(),d=yd(),g=Cs(),v=f.useCallback(A=>{o({isFallbackHandlerSetupAccepted:A})},[o]),y=!t&&h,b=y&&p;if(T)return null;const C=s?r.jsx(jy,{tradeUrlParams:d,feeFiatAmount:m,swapAmountDifference:s}):null;return r.jsx(r.Fragment,{children:e===Te.TX_BUNDLING_NOT_SUPPORTED?r.jsx(_y,{isSafeViaWc:g,chainId:c,account:u}):l===Tt.SellNativeToken?r.jsx(As,{}):e===Te.SELL_AMOUNT_TOO_SMALL?r.jsx(Oy,{chainId:c}):e===Te.PART_TIME_INTERVAL_TOO_SHORT?r.jsx(Ay,{}):e===Te.PART_TIME_INTERVAL_TOO_LONG?r.jsx(Iy,{}):b?r.jsxs(r.Fragment,{children:[n&&C,r.jsx(Cy,{isFallbackHandlerSetupAccepted:n,toggleFallbackHandlerSetupFlag:v})]}):r.jsxs(r.Fragment,{children:[y&&Dy(i,a)&&r.jsx(Sy,{}),C]})})}function My({tradeWarnings:e}){const{account:t}=H(),{numberOfPartsValue:n,deadline:o,customDeadline:a,isCustomDeadline:i}=k(ve),{inputCurrencyAmount:s,outputCurrencyAmount:l}=It(),{updateState:c}=Mi(),u=Re(),p=xn(),m=Yx(),h=gn(),T=yn(),d=k(ia),g=U(Jl),v=sa(),y=pn(),b=Ro(),C=ln(s,l),A=He(),I=vd(A==null?void 0:A.afterSlippage.sellAmount,A==null?void 0:A.afterSlippage.buyAmount),E=Os(_s.ADVANCED),_=ct();f.useEffect(()=>{if(E){const $=Math.floor(So/60)*2,Z=Math.floor(Io/60)*n;let ie=E;E<$?ie=$:E>Z&&(ie=Z),g({customDeadline:{hours:0,minutes:ie},isCustomDeadline:!0})}},[E,g,n]);const O=!!E,S={deadline:o,customDeadline:a,isCustomDeadline:i};f.useEffect(()=>{g({isFallbackHandlerSetupAccepted:!1}),_.sendEvent({category:de.TWAP,action:"Open Advanced Orders Tab"})},[g,_]),f.useEffect(()=>{t&&h&&(v===Te.TX_BUNDLING_NOT_SUPPORTED?_.sendEvent({category:de.TWAP,action:"non-compatible"}):p?_.sendEvent({category:de.TWAP,action:"safe-that-could-be-converted"}):m&&_.sendEvent({category:de.TWAP,action:"compatible"}))},[t,p,m,v,h,_]),f.useLayoutEffect(()=>{u.hasParamsChanged&&(c==null||c({outputCurrencyAmount:null}))},[u.hasParamsChanged,c]);const R=f.useState(!1),[P]=R,{onSlippageInput:D,onNumOfPartsInput:M}=f.useMemo(()=>({onSlippageInput:$=>g({slippageValue:$}),onNumOfPartsInput:$=>{g({numberOfPartsValue:$||Fr}),c==null||c({outputCurrencyAmount:null})}}),[g,c]);return r.jsxs(r.Fragment,{children:[!b&&r.jsx(Ir,{children:r.jsx(Fx,{label:ke.price.label,rateInfoParams:C,isInvertedState:R})}),r.jsx(Hn,{value:+T.toFixed(2),onUserInput:D,decimalsPlaces:2,placeholder:gs.toFixed(1),min:0,max:Td,label:ke.slippage.label,tooltip:rt(ke.slippage.tooltip),showUpDownArrows:!0,upDownArrowsLeftAlign:!0,prefixComponent:r.jsx("em",{children:I?r.jsx(Ux,{executionPrice:I,isInverted:P,hideFiat:!0,hideSeparator:!0}):"0"}),suffix:"%",step:.1}),r.jsx(Ir,{children:r.jsx(Hn,{value:n,onUserInput:M,min:Fr,label:ke.numberOfParts.label,tooltip:rt(ke.numberOfParts.tooltip),showUpDownArrows:!0})}),r.jsxs(Ir,{children:[r.jsx(ly,{deadline:S,isDeadlineDisabled:O,items:wd,setDeadline:g,label:ke.totalDuration.label,tooltip:rt(ke.totalDuration.tooltip,{parts:n,partDuration:d})}),r.jsx(kx,{label:ke.partDuration.label,tooltip:ke.partDuration.tooltip,children:r.jsx(r.Fragment,{children:Je(d)})})]}),r.jsx(vy,{}),e,r.jsx(ic,{localFormValidation:v}),r.jsx(fy,{fallbackHandlerIsNotSet:p,localFormValidation:v,primaryFormValidation:y})]})}const Fy=w.div.withConfig({displayName:"TwapConfirmDetails__Wrapper",componentId:"sc-a8ed2c-0"})(["display:flex;flex-flow:column wrap;gap:7px;padding:0 6px 6px;font-size:13px;> b{display:block;margin:0 0 3px;","{margin:0 0 10px;}}"],L.upToSmall()),Uy=w.div.withConfig({displayName:"TwapConfirmDetails__TWAPSplitTitle",componentId:"sc-a8ed2c-1"})(["display:flex;width:100%;align-items:center;gap:3px;","{margin:0 0 10px;}"],L.upToSmall()),Wy=Y.memo(function(t){const{partDuration:n,totalDuration:o,numOfParts:a}=t,i=` part (1/${a})`,s=" amount per"+i,l=n?Je(n,!0):"",c=o?Je(o,!0):"",u=He(),{sellAmount:p,buyAmount:m}=(u==null?void 0:u.afterSlippage)||{},h=Be(p).value,T=Be(m).value;return r.jsxs(Fy,{children:[r.jsxs(Uy,{children:["TWAP order split in ",r.jsxs("b",{children:[a," equal parts"]})]}),r.jsx(Sa,{amount:p,fiatAmount:h,tooltip:"This is the amount that will be sold in each part of the TWAP order.",label:"Sell"+s,withTimelineDot:!0}),r.jsx(Sa,{amount:m,fiatAmount:T,tooltip:"This is the estimated amount you will receive for each part of the TWAP order.",label:"Buy"+s,isAmountAccurate:!1,withTimelineDot:!0}),r.jsx(br,{tooltip:"The first part of your TWAP order will become active as soon as you confirm the order below.",label:"Start time first"+i,withArrow:!1,children:"Now"}),r.jsx(br,{tooltip:"The time each part of your TWAP order will remain active.",label:"Part duration",withArrow:!1,children:l}),r.jsx(br,{tooltip:"The time before your total TWAP order ends.",label:"Total duration",withArrow:!1,children:c})]})});function sc(){const e=cn(),t=oa();return f.useCallback(()=>{e(t({tabId:Qe.id,pageNumber:1}))},[t,e])}function mr(){const{account:e}=H(),{contract:t,chainId:n}=Is(),o=jo();return f.useMemo(()=>!e||!t||!o?null:{settlementContract:t,provider:o,chainId:n,safeAddress:e},[e,t,o,n])}function By(e){const{contract:t,chainId:n}=Ss(),o=bd(e),{contract:a,chainId:i}=Po(e==null?void 0:e.currency.address),s=Es(),l=pm(a,s,e),c=n?Cd[n]:null;return f.useMemo(()=>!t||!a||!s||!c||n!==i?null:{composableCowContract:t,erc20Contract:a,needsApproval:o,needsZeroApproval:l,spender:s,currentBlockFactoryAddress:c,chainId:n},[t,a,s,c,o,l,n,i])}function zy(e,t,n){const{composableCowContract:o,needsApproval:a,needsZeroApproval:i,erc20Contract:s,spender:l,currentBlockFactoryAddress:c}=n,{sellAmount:u}=e,p=u.currency.address,m=al.toString(),h=[],T={to:o.address,data:o.interface.encodeFunctionData("createWithContext",[t,c,"0x",!0]),value:"0",operation:0};if(h.push(T),!a)return h;const d={to:p,data:s.interface.encodeFunctionData("approve",[l,m]),value:"0",operation:0};if(h.unshift(d),!i)return h;const g={to:u.currency.address,data:s.interface.encodeFunctionData("approve",[l,"0"]),value:"0",operation:0};return h.unshift(g),h}async function lc(e){const{chainId:t,safeAddress:n,settlementContract:o}=e,a=await o.callStatic.domainSeparator(),i=await Xl(e),s=ms[t],l=Ad[t],c={to:n,data:i.interface.encodeFunctionData("setFallbackHandler",[l]),value:"0",operation:0},u={to:n,data:i.interface.encodeFunctionData("setDomainVerifier",[a,s]),value:"0",operation:0};return[c,u]}function cc(e){const t=e.buyAmount.currency,n=te.amountToAtLeastOneWei(e.buyAmount.divide(e.numOfParts));return{sellToken:e.sellAmount.currency.address,buyToken:En(t),receiver:e.receiver,partSellAmount:e.sellAmount.divide(e.numOfParts).quotient.toString(),minPartLimit:n.quotient.toString(),t0:e.startTime,n:e.numOfParts,t:e.timeInterval,span:e.span,appData:e.appData}}function Hy(e,t){const n=cc(t);return{handler:Od[e],salt:Df(Wf.from(Date.now().toString(16),"hex"),32),staticInput:kt.encode([_d],[n])}}const $y="tuple(address handler, bytes32 salt, bytes staticInput)";function uc(e){return il(kt.encode([$y],[e]))}const Gy="Something went wrong creating your order";function Yy(e){if(e&&e.message&&e.message.includes("INVALID_ARGUMENT")){const t=e.message.match(/argument="([^"]+)"/),n=t!=null&&t.length?t[1]:"";if(n)return`Invalid argument "${n}" provided`}}function qy(e){return Yy(e)||e.message||Gy}function Vy(){const{chainId:e,account:t}=H(),n=k(fr),o=U(Id),a=sc(),{inputCurrencyAmount:i,outputCurrencyAmount:s}=It(),l=ko(),c=Rs(),u=By(i),p=mr(),m=Xn(),h=fn(),T=Sd(),{priceImpact:d}=sn(),{confirmPriceImpactWithoutFee:g}=js(),v=ct(),y=Ps(),b=f.useCallback((A,I)=>{const E={category:de.TWAP,action:"Place Order",label:`${ue.TWAP}|${I}`};v.sendEvent(E)},[v]),C=f.useCallback((A,I)=>{const E={category:de.TWAP,action:"Conversion",label:`${A}|${I?"no-handler":"handler-set"}`};v.sendEvent(E)},[v]);return f.useCallback(async A=>{if(!e||!t||e!==(u==null?void 0:u.chainId)||!i||!s||!u||!p||!l||!n||!await g(d))return;const E={inputAmount:i,outputAmount:s},_=ue.TWAP,O={account:t,recipient:n.receiver,recipientAddress:n.receiver,marketLabel:[i.currency.symbol,s.currency.symbol].join(","),orderType:_};try{const S=Hy(e,n),R=uc(S);h.onSign(E),y.placeAdvancedOrder(O),C("posted",A);const P=A?await lc(p):[];T({chainId:e,orderId:R,appData:l});const D=zy(n,S,u),M=await c([...P,...D]),$={order:cc(n),status:ee.WaitSigning,chainId:e,safeAddress:t,submissionDate:new Date().toISOString(),id:R,executionInfo:{confirmedPartsCount:0,info:ks}};o($),Ed().play(),Lo({chainId:e,id:R,orderCreationHash:M,kind:q.OrderKind.SELL,receiver:n.receiver,inputAmount:n.sellAmount,outputAmount:n.buyAmount,owner:t,uiOrderType:_}),b("Place Order",`${_}|${O.marketLabel}`),m({recipient:null,recipientAddress:null}),h.onSuccess(M),y.sign(O),C("signed",A),a()}catch(S){console.error("[useCreateTwapOrder] error",S);const R=qy(S);h.onError(R),y.error(S,R,O),C("rejected",A)}},[e,t,i,s,u,p,c,l,n,g,d,h,o,T,m,b,C,y,a])}const Ja="TWAP",Xy={priceLabel:"Rate",slippageLabel:"Price protection",slippageTooltip:r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"Since TWAP orders consist of multiple parts, prices are expected to fluctuate. However, to protect you against bad prices, CoW Swap will not execute your TWAP if the price dips below this percentage."}),r.jsx("p",{children:"This percentage only applies to dips; if prices are better than this percentage, CoW Swap will still execute your order."})]}),limitPriceLabel:"Limit price (incl. costs)",limitPriceTooltip:r.jsxs(r.Fragment,{children:["If CoW Swap cannot get this price or better (taking into account fees and price protection tolerance), your TWAP will not execute. CoW Swap will ",r.jsx("strong",{children:"always"})," improve on this price if possible."]}),minReceivedLabel:"Minimum receive",minReceivedTooltip:"This is the minimum amount that you will receive across your entire TWAP order, assuming all parts of the order execute."};function Ky(){const{account:e}=H(),{ensName:t,allowsOffchainSigning:n}=dn(),{inputCurrencyAmount:o,inputCurrencyFiatAmount:a,inputCurrencyBalance:i,outputCurrencyAmount:s,outputCurrencyFiatAmount:l,outputCurrencyBalance:c,recipient:u}=It(),p=k(fr),m=k(tc),h=yn(),T=sa(),d=fn(),g=Vy(),v=!!T,y=sn(),b=xn(),C={amount:o,fiatAmount:a,balance:i,label:"Sell amount"},A={amount:s,fiatAmount:l,balance:c,label:"Receive (before fees)"},I=ln(C.amount,A.amount),{timeInterval:E,numOfParts:_}=p||{},O=E,S=E&&_?E*_:void 0;return r.jsx(Ls,{title:Ja,children:r.jsx(Ns,{title:Ja,account:e,ensName:t,inputCurrencyInfo:C,outputCurrencyInfo:A,onConfirm:()=>g(b),onDismiss:d.onDismiss,isConfirmDisabled:v,priceImpact:y,buttonText:"Place TWAP order",refreshInterval:Rd,recipient:u,children:R=>r.jsxs(r.Fragment,{children:[m&&_&&r.jsx(jd,{rateInfoParams:I,receiveAmountInfo:m,slippage:h,recipient:u,account:e,labelsAndTooltips:{...Xy,networkCostsSuffix:n?null:r.jsx(Pd,{}),networkCostsTooltipSuffix:n?null:r.jsxs(r.Fragment,{children:[r.jsx("br",{}),r.jsx("br",{}),"Because you are using a smart contract wallet, you will pay a separate gas cost for signing the order placement on-chain."]})}}),r.jsx(Ds,{}),r.jsx(Wy,{startTime:p==null?void 0:p.startTime,numOfParts:_,partDuration:O,totalDuration:S}),R,r.jsx(ic,{localFormValidation:T,isConfirmationModal:!0})]})})})}function dc(e){const t=k(rr);return f.useMemo(()=>e&&t[e]||null,[e,t])}function Qy(e,t){const n=new Date((e.order.validTo-t.order.t)*1e3),o=t.status===ee.Cancelling;return{...e.order,creationDate:n.toISOString(),class:q.OrderClass.LIMIT,status:Zy(t),owner:t.safeAddress.toLowerCase(),uid:e.uid,signingScheme:q.SigningScheme.EIP1271,signature:"",appData:t.order.appData,totalFee:"0",feeAmount:"0",executedSellAmount:"0",executedSellAmountBeforeFees:"0",executedBuyAmount:"0",executedFeeAmount:"0",invalidated:o}}function Zy(e){return e.status===ee.Fulfilled?q.OrderStatus.FULFILLED:e.status===ee.Expired?q.OrderStatus.EXPIRED:e.status===ee.Cancelled?q.OrderStatus.CANCELLED:q.OrderStatus.OPEN}function Jy(e,t){if(!t.executedDate)return!1;const n=new Date(t.executedDate),o=Math.ceil(n.getTime()/1e3)+t.order.t*t.order.n;return e.order.validTo+1>=o}function ev(e,t,n){const o=kd(e,0),a=Ld(e);return t.status===ee.Fulfilled?j.FULFILLED:Nd(e)?j.FULFILLED:t.status===ee.Cancelled?o&&!a?j.EXPIRED:j.CANCELLED:a?j.CANCELLED:t.status===ee.Expired?j.EXPIRED:o?j.EXPIRED:n?j.SCHEDULED:j.PENDING}function pc(e,t,n,o,a){const i=e.isCancelling||o.status===ee.Cancelling,s=ev(t,o,n),l=a[t.sellToken.toLowerCase()],c=a[t.buyToken.toLowerCase()];if(!l||!c)return null;const u={...t,id:t.uid,composableCowInfo:{isVirtualPart:n,isTheLastPart:Jy(e,o),parentId:o.id},sellAmountBeforeFee:t.sellAmount,inputToken:l,outputToken:c,creationTime:t.creationDate,summary:"",status:s,apiAdditionalInfo:t,isCancelling:i},p=Ms({orderFromStore:u,orderFromApi:t});return u.summary=p||"",u}const tv=5e3;function nv(e){const t=k(rr),n=k(or),o=sl(tv);return f.useMemo(()=>o?e?rv(n,t,e):[]:[],[n,t,e,o])}function rv(e,t,n){return e.reduce((o,a)=>{if(a.isCreatedInOrderBook)return o;const i=!0,s=t[a.twapOrderId];if(!s)return o;const l=Qy(a,s),c=pc(a,l,i,s,n);return c&&o.push(c),o},[])}const ov={[ee.Cancelled]:j.CANCELLED,[ee.Expired]:j.EXPIRED,[ee.Pending]:j.PENDING,[ee.WaitSigning]:j.PRESIGNATURE_PENDING,[ee.Fulfilled]:j.FULFILLED,[ee.Cancelling]:j.PENDING};function av(e,t){const n=Dd(e),o=ov[e.status],a=t[n.sellToken.toLowerCase()],i=t[n.buyToken.toLowerCase()];if(!a||!i)return null;const s={...n,id:n.uid,composableCowInfo:{id:e.id},sellAmountBeforeFee:n.sellAmount,inputToken:a,outputToken:i,creationTime:n.creationDate,summary:"",status:o,apiAdditionalInfo:n,isCancelling:e.status===ee.Cancelling},l=Ms({orderFromStore:s,orderFromApi:n});return s.summary=l||"",s}const iv=5e3;function sv(e){const{account:t,chainId:n}=H(),o=k(No),a=sl(iv),i=t==null?void 0:t.toLowerCase();return f.useMemo(()=>a?e?o.reduce((s,l)=>{if(l.chainId!==n||l.safeAddress.toLowerCase()!==i)return s;const c=av(l,e);return c&&s.push(c),s},[]):[]:[],[o,i,n,e,a])}function lv(){const e=k(No),t=k(or),n=Fs(),o=f.useMemo(()=>Us([...e,...t]),[e,t]);return ar(()=>n(o),[n,o])}function cv(){const{chainId:e,account:t}=H(),n=lv(),o=sv(n),a=nv(n),i=ys(),s=Ws(e,t,ue.TWAP),l=f.useMemo(()=>s.filter(c=>{var u;return((u=c.composableCowInfo)==null?void 0:u.isVirtualPart)===!1}),[s]);return f.useMemo(()=>i?o.concat(a).concat(l):[],[o,a,l,i])}function uv(e){const t=k(or),n=f.useMemo(()=>{var o;return(o=t.find(({uid:a})=>a===e))==null?void 0:o.twapOrderId},[e,t]);return dc(n)}function dv(){const e=k(fr),t=e==null?void 0:e.numOfParts;return f.useCallback(n=>({...n,receiveAmountInfo:ec(n.receiveAmountInfo,t)}),[t])}function pv(){const e=Md(),t=mr(),n=Bs();return async()=>{if(!e||!t)return;const o=await lc(t),{safeTxHash:a}=await e.txs.send({txs:o});return n({hash:a,summary:"Setup TWAP fallback handler"}),a}}const fv=w(Ee).withConfig({displayName:"SetupFallbackHandlerWarning__Banner",componentId:"sc-1epj31j-0"})(["position:relative;font-size:15px;> span{gap:20px;}> span > span{gap:20px;}&::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:var(",");z-index:-1;border-radius:inherit;}&::after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:inherit;z-index:-1;border-radius:inherit;}"],x.COLOR_PAPER),mv=w(Le).withConfig({displayName:"SetupFallbackHandlerWarning__ActionButton",componentId:"sc-1epj31j-1"})(["display:inline-block;width:100%;font-size:16px;padding:16px 24px;min-height:auto;"]),hv=X(null);function gv(){const[e,t]=mn(hv),[n,o]=f.useState(!1),[a,i]=f.useState(!1),{account:s}=H(),l=pv(),c=xv(e),p=Nt(c)===!0&&c===!1,m=U(Ql),h=mr(),T=async()=>{const g=await l();g&&t(g)},d=f.useCallback(()=>!h||!s?Promise.resolve():(o(!0),Kl(h).then(g=>{m({[s.toLowerCase()]:g})}).finally(()=>{o(!1)})),[h,s,m]);return f.useEffect(()=>{p&&(t(null),d())},[p,t,d]),f.useEffect(()=>{if(n)return;const g=setTimeout(()=>{d().finally(()=>{i(!0)})},500);return()=>clearTimeout(g)},[d,n]),a?r.jsx("div",{children:r.jsx(fv,{bannerType:wt.Danger,backDropBlur:!0,orientation:zs.Vertical,iconSize:46,noWrapContent:!0,padding:"20px",children:r.jsxs("span",{children:[r.jsx("p",{children:"Your Safe fallback handler was changed after TWAP orders were placed. All open TWAP orders are not getting created because of that. Please, update the fallback handler in order to make the orders work again."}),r.jsx(mv,{disabled:c,onClick:T,children:c?r.jsx(st,{}):"Update fallback handler"})]})})}):null}function xv(e){const t=Fd();return e?Object.keys(t).some(n=>{const o=t[n];return!o||o.receipt||o.replacementType||o.errorMessage?!1:o.hash===e}):!1}const yv=!1;function vv(){const{chainId:e}=H(),t=tr(),n=dm(),o=Fs(),a=k(or),i=k(rr),s=U(Ud),l=Wd(),c=f.useMemo(()=>a.reduce((p,m)=>(p[m.uid]=m,p),{}),[a]),u=ar(async()=>{const p=n.reduce((h,T)=>{const d=c[T.uid],g=i[d==null?void 0:d.twapOrderId];return g&&h.push({item:d,parent:g,order:T}),h},[]),m=await o(Us(p));return p.map(({item:h,parent:T,order:d})=>pc(h,d,yv,T,m)).filter(Do)},[n,c,o,i],[]);return f.useEffect(()=>{if(!u.length)return;const p=u.reduce((m,h)=>(m[h.id]={isCreatedInOrderBook:!0},m),{});s(p),l({orders:u,chainId:e,isSafeWallet:t})},[e,u,l,s,t]),null}const Tv=6e5,ei="fallbackHandlerUpdateTime";function wv(){const{account:e}=H(),t=U(Ql),o=gn()!==an.HAS_DOMAIN_VERIFIER,a=localStorage.getItem(ei),i=!a||Date.now()-+a>Tv,s=mr(),l=ar(()=>s&&(o||i)?Kl(s):null,[o,i,s],null);return f.useEffect(()=>{!e||l===null||(t({[e.toLowerCase()]:l}),localStorage.setItem(ei,Date.now().toString()))},[l,t,e]),null}const bv=zd(Hd);function Cv(){var c;const{inputCurrencyAmount:e}=It(),{quote:t,error:n,isLoading:o}=Re(),a=(e==null?void 0:e.quotient.toString())||null,i=t==null?void 0:t.quoteResults.quoteResponse.quote.buyAmount,s=(c=Bd(a))==null?void 0:c.quoteParams,l=U(ac);return f.useEffect(()=>{n||o||!i||!s||bv(s).then(u=>{const{cancelled:p,data:m}=u;p||l(m)})},[i,o,n,s,l]),null}async function Av(e,t,n){const{computeOrderUid:o}=await et(async()=>{const{computeOrderUid:i}=await import("./index-BDmtnLF2.js").then(s=>s.h6);return{computeOrderUid:i}},__vite__mapDeps([1,2,3,4,5,6,7]),import.meta.url),a=await q.OrderSigningUtils.getDomain(e);return o(a,n,t)}function Ov(){const{chainId:e,account:t}=H(),n=k(No),o=U($d);return f.useEffect(()=>{if(!e||!t)return;const a=t.toLowerCase(),i=n.map(s=>_v(s,a,e));Promise.all(i).then(s=>{const l=s.reduce((c,u)=>({...c,...u}),{});o(l)})},[e,t,n,o]),null}async function _v(e,t,n){const o=e.id,a=[...new Array(e.order.n)].map((s,l)=>Iv(e,l)).filter(Do),i=await Promise.all(a.map(s=>Av(n,t,s)));return{[o]:i.map((s,l)=>({uid:s,index:l,twapOrderId:o,chainId:n,safeAddress:t,isCreatedInOrderBook:!1,isCancelling:!1,order:a[l]}))}}function Iv(e,t){var a;const n=(a=e.safeTxParams)==null?void 0:a.executionDate;if(!n)return null;const o=new Date(n);return{sellToken:e.order.sellToken,buyToken:e.order.buyToken,receiver:e.order.receiver,sellAmount:e.order.partSellAmount,buyAmount:e.order.minPartLimit,validTo:Sv({part:t,startTime:Math.ceil(o.getTime()/1e3),span:e.order.span,frequency:e.order.t}),appData:e.order.appData,feeAmount:"0",kind:"sell",partiallyFillable:!1,sellTokenBalance:"erc20",buyTokenBalance:"erc20"}}function Sv({part:e,startTime:t,frequency:n,span:o}){return o===0?t+(e+1)*n-1:t+e*n+o-1}function Ev(){const e=lt(),{quote:t,isLoading:n}=Re(),{numberOfPartsValue:o}=k(ve),a=Nt(o),i=Bi(),s=He(),l=e==null?void 0:e.outputCurrency,c=s==null?void 0:s.beforeNetworkCosts.buyAmount,u=f.useMemo(()=>{const p=o!==a;return!c||!o||n||p?null:c.multiply(o).quotient.toString()},[n,o,c,a]);return f.useMemo(()=>{!l||!t||!u||i({amount:{isTyped:!1,value:u},currency:l,field:K.OUTPUT})},[l,t,i,u]),null}function Rv(){const{inputCurrencyAmount:e}=It(),{numberOfPartsValue:t}=k(ve),n=e==null?void 0:e.divide(t);return sr({amount:n}),null}const jv="0d0d9800",Pv=10,kv=100;async function fc(e,t,n,o,a=[]){const i=await Lv(e,t,o),s=(i==null?void 0:i.results)||[],l=Nv(e,n,s);return a.push(l),a.length>=Pv||!(i!=null&&i.next)?a.flat():fc(e,t,n,i.next,a)}async function Lv(e,t,n){if(n)try{const o=await fetch(n).then(a=>a.json());return await Gd(kv),o}catch(o){return console.error("Error fetching Safe transactions",{safeAddress:e,nextUrl:n},o),{results:[],count:0}}return t.getAllTransactions(e)}function Nv(e,t,n){return n.map(o=>{if(!o.data||!Dv(o))return null;const a=o.data.indexOf(jv);if(a<0)return null;const i="0x"+o.data.substring(a),s=Mv(e,t,i);if(!s)return null;const l=Fv(o);return{conditionalOrderParams:s,safeTxParams:l}}).filter(Do)}function Dv(e){return!!e.data&&!!e.submissionDate}function Mv(e,t,n){try{const o=t.interface.decodeFunctionData("createWithContext",n),{params:a}=o;return{handler:a.handler,salt:a.salt,staticInput:a.staticInput}}catch{return null}}function Fv(e){const{isExecuted:t,submissionDate:n,executionDate:o,nonce:a,confirmationsRequired:i,confirmations:s,safeTxHash:l}=e;return{isExecuted:t,submissionDate:n,executionDate:o,confirmationsRequired:i,confirmations:(s==null?void 0:s.length)||0,safeTxHash:l,nonce:a}}const Uv=15e3;function Wv({safeAddress:e,composableCowContract:t}){const n=Yd(),[o,a]=f.useState([]);return f.useEffect(()=>{if(!n)return;const i=()=>{fc(e,n,t).then(a)},s=setInterval(i,Uv);return i(),()=>clearInterval(s)},[e,n,t]),o}const Bv={},zv={},Hv={refreshInterval:3e4};function $v(e,t,n){const o=f.useMemo(()=>n.map(({id:s})=>[e,s]),[e,n]),{data:a,isLoading:i}=qd(t,"singleOrders",o,zv,Hv);return f.useMemo(()=>n.length===0?Bv:i||!a||a.length!==n.length?null:n.reduce((s,l,c)=>{var u;return s[l.id]=(u=a[c])==null?void 0:u[0],s},{}),[n,a,i])}function Gv(e){const{chainId:t}=H(),n=k(Vd),{sets:o,ids:a}=f.useMemo(()=>Object.keys(n).reduce((l,c)=>{const{sets:u,ids:p}=l,m=(n[c]||[]).map(h=>h.uid);return u[c]=new Set(m),p.push(...m),l},{sets:{},ids:[]}),[n]),i=Xd({chainId:t,ids:a}),s=f.useMemo(()=>i?Object.values(i):[],[i]);return f.useMemo(()=>e.reduce((l,c)=>{const u=c.id,p=o[u];if((p==null?void 0:p.size)>0){const m=s.filter(v=>p.has(v.id)),h=Sr(m,"executedBuyAmount").toString(),T=Sr(m,"executedSellAmount").toString(),d=Sr(m,"executedFeeAmount").toString(),g=Yv(c,m);l[u]={info:{executedSellAmount:T,executedFeeAmount:d,executedBuyAmount:h},confirmedPartsCount:g}}else l[u]={info:ks,confirmedPartsCount:0};return l},{}),[e,o,s])}function Sr(e,t){return e.reduce((n,o)=>{var a;return n+BigInt(((a=o.apiAdditionalInfo)==null?void 0:a[t])||"0")},BigInt(0))}function Yv(e,t){const{executionDate:n}=e.safeData.safeTxParams,{t:o,n:a}=e.orderStruct;if(!n)return 0;const i=Math.ceil(Date.now()/1e3),s=Math.ceil(new Date(n).getTime()/1e3),l=i-s,c=Math.floor(l/o),p=t.filter(h=>it(h)).reduce((h,{validTo:T})=>T>h?T:h,0);if(!p)return c;const m=Math.ceil((p-s)/o);return Math.min(Math.max(m,c),a)}function qv(e,t){return t===(BigInt(e.partSellAmount)*BigInt(e.n)).toString()}function Vv(e,t,n,o,{confirmedPartsCount:a,info:i}){const s=qv(e,i.executedSellAmount),l=o===!1,c=a===e.n||mc(e,n);return s?ee.Fulfilled:l?ee.Cancelled:c?ee.Expired:t?ee.Pending:ee.WaitSigning}function mc(e,t){if(!t)return!1;const n=Math.ceil(t.getTime()/1e3),{n:o,t:a}=e,i=n+a*o;return Math.ceil(Date.now()/1e3)>i}const Xv=[{name:"sellToken",type:"address"},{name:"buyToken",type:"address"},{name:"receiver",type:"address"},{name:"partSellAmount",type:"uint256"},{name:"minPartLimit",type:"uint256"},{name:"t0",type:"uint256"},{name:"n",type:"uint256"},{name:"t",type:"uint256"},{name:"span",type:"uint256"},{name:"appData",type:"bytes32"}];function hc(e){const t=kt.decode(Xv,e);return{sellToken:t.sellToken,buyToken:t.buyToken,receiver:t.receiver,partSellAmount:t.partSellAmount.toHexString(),minPartLimit:t.minPartLimit.toHexString(),t0:t.t0.toNumber(),n:t.n.toNumber(),t:t.t.toNumber(),span:t.span.toNumber(),appData:t.appData}}function Kv(e,t,n,o,a){return n.reduce((i,{safeData:s,id:l})=>(i[l]=Qv(e,t,s,l,o[l],a[l]),i),{})}function Qv(e,t,n,o,a,i){const{conditionalOrderParams:s,safeTxParams:l}=n,{isExecuted:c,submissionDate:u,executionDate:p}=l,m=p?new Date(p):null,h=hc(s.staticInput),T=Vv(h,c,m,a,i);return{order:h,status:T,chainId:e,safeAddress:t,id:o,submissionDate:u,executedDate:p||void 0,safeTxParams:l,executionInfo:i}}function Zv(e){const{safeAddress:t,chainId:n,composableCowContract:o}=e,a=k(rr),i=U(Kd),s=U(Qd),l=Zd(),c=Wv(e),u=l==null?void 0:l.nonce,p=f.useRef(a);p.current=a;const m=f.useMemo(()=>Jv(c),[c]),h=Gv(m),T=f.useRef(h);T.current=h;const d=f.useMemo(()=>m.filter(y=>tT(y,p.current[y.id])),[m]),g=$v(t,o,d),v=f.useMemo(()=>u?m.filter(y=>{const{nonce:b,isExecuted:C}=y.safeData.safeTxParams;return!C&&b<u}).map(y=>y.id):[],[u,m]);return f.useEffect(()=>{if(!g)return;const y=Kv(n,t,m,g,T.current);v.forEach(b=>{delete y[b]}),i(y),s(v)},[n,t,m,g,i,v,s]),null}function Jv(e){const t=e.reduce((n,o)=>{try{const a=uc(o.conditionalOrderParams),i=n[a];if(i!=null&&i.safeData.safeTxParams.isExecuted)return n;const s={id:a,orderStruct:hc(o.conditionalOrderParams.staticInput),safeData:o};n[a]=s}catch{}return n},{});return Object.values(t)}const eT=6e4;function tT(e,t){const{isExecuted:n,confirmations:o,executionDate:a}=e.safeData.safeTxParams,i=a?new Date(a):null;return mc(e.orderStruct,i)||!(n&&o>0)||!i||Date.now()-i.getTime()<eT?!1:t?Jd.includes(t.status):!0}function nT(){const{account:e}=H(),t=tr(),{contract:n,chainId:o}=Ss(),a=yn(),i=!!(t&&e&&n);return r.jsxs(r.Fragment,{children:[r.jsx(vv,{}),r.jsx(Rv,{}),r.jsx(lr,{orderClass:"twap",slippageBips:Vn(a)}),r.jsx(Ev,{}),i&&r.jsxs(r.Fragment,{children:[r.jsx(Cv,{}),r.jsx(wv,{}),r.jsx(Ov,{}),r.jsx(Zv,{composableCowContract:n,safeAddress:e,chainId:o})]})]})}const ti=e=>Mn.equal(e,Mn.BigInt(0));function ni({buyAmount:e,sellAmount:t,inputToken:n,outputToken:o}){return!e||!t||!n||!o||ti(e)||ti(t)?null:new Dt(n,o,t.toString(),e.toString())}const ao=X({order:null}),gc=X(null,(e,t,n)=>{t(ao,()=>({...e(ao),...n}))});function xc(){const e=U(gc);return f.useCallback(()=>e({order:null}),[e])}function rT(){const e=U(gc);return f.useCallback(t=>e({order:t}),[e])}function oT(){const{order:e}=k(ao);return e}function aT(e){const t=yc();return f.useMemo(()=>t(e),[t,e])}function yc(){const e=ep();return f.useCallback(t=>iT(t,e),[e])}function iT(e,t){const n=e&&Hs(e);return!e||tp(e)||er(e)!==ue.LIMIT||n===null||n&&(!np(e)||!0)?null:{showAlternativeOrderModal:()=>t(e,n),isEdit:n}}const sT=w.div.withConfig({displayName:"styled__Wrapper",componentId:"sc-qdfv03-0"})(["background:var(",");width:100%;margin:0 0 14px;overflow-y:auto;",";","{overflow-y:auto;overflow-x:auto;padding:0;max-height:100vh;margin:0;}"],x.COLOR_PAPER,({theme:e})=>e.colorScrollbar,L.upToSmall()),lT=w.div.withConfig({displayName:"styled__Header",componentId:"sc-qdfv03-1"})(["display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:0 16px 16px;background:var(",");position:sticky;top:0;left:0;width:100%;padding:16px;z-index:20;> div{display:flex;align-items:center;gap:10px;}"],x.COLOR_PAPER),cT=w.h3.withConfig({displayName:"styled__Title",componentId:"sc-qdfv03-2"})(["font-size:16px;margin:0;"]),uT=w(rp).withConfig({displayName:"styled__Body",componentId:"sc-qdfv03-3"})(["box-sizing:border-box;max-height:80vh;padding:0 10px;","{max-height:100%;}"],L.upToSmall()),dT=w.div.withConfig({displayName:"styled__FieldsWrapper",componentId:"sc-qdfv03-4"})(["display:flex;flex-flow:column wrap;width:100%;gap:2px;","{padding:0 0 54px;}"],L.upToSmall()),pT=w.div.withConfig({displayName:"styled__InfoBannerWrapper",componentId:"sc-qdfv03-5"})(["margin:12px;"]),ge=w.div.withConfig({displayName:"styled__Field",componentId:"sc-qdfv03-6"})(["display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center;padding:12px 16px;background:var(",");width:100%;font-size:13px;&:first-child{border-radius:16px 16px 0 0;}&:last-child{border-radius:0 0 16px 16px;}> div{display:flex;justify-content:center;gap:4px;}> div > a{display:flex;margin:auto 0;}"],x.COLOR_PAPER_DARKER),fT=w.div.withConfig({displayName:"styled__CurrencyField",componentId:"sc-qdfv03-7"})(["display:flex;flex-flow:row wrap;flex-direction:column;align-items:flex-start;padding:16px;background:var(",");width:100%;border-radius:16px;margin:0 0 10px;gap:10px;> b{font-size:13px;font-weight:600;}> div{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%;& .open-currency-select-button{","{width:auto;}}}"],x.COLOR_PAPER_DARKER,L.upToSmall()),mT=w.span.withConfig({displayName:"styled__CurrencyValue",componentId:"sc-qdfv03-8"})(["font-size:26px;font-weight:600;"]),hT=w.span.withConfig({displayName:"styled__LabelText",componentId:"sc-qdfv03-9"})(["opacity:0.8;"]),gT=w.div.withConfig({displayName:"styled__Label",componentId:"sc-qdfv03-10"})(["display:flex;gap:4px;align-items:center;> div > div{padding:0 !important;}"]),ze=w.div.withConfig({displayName:"styled__Value",componentId:"sc-qdfv03-11"})(["flex:1;display:flex;flex-direction:column;align-items:flex-end;gap:12px 6px;padding:0 0 0 12px;text-align:right;line-height:1.4;font-weight:500;"]),$n=w.div.withConfig({displayName:"styled__InlineWrapper",componentId:"sc-qdfv03-12"})(["display:flex;flex-flow:row wrap;align-items:center;justify-content:flex-end;gap:6px;width:100%;"]),xT=w.span.withConfig({displayName:"styled__Surplus",componentId:"sc-qdfv03-13"})(["color:",";"],({theme:e})=>e.success),yT=w.div.withConfig({displayName:"styled__RateValue",componentId:"sc-qdfv03-14"})([""]),vT=w.span.withConfig({displayName:"styled__OrderTypeValue",componentId:"sc-qdfv03-15"})(["&:first-letter{text-transform:uppercase;}"]),TT=w.button.withConfig({displayName:"styled__LightButton",componentId:"sc-qdfv03-16"})(["font-size:12px;font-weight:600;border:1px solid transparent;padding:6px 14px;border-radius:var(",");background-color:var(",");transition:border var(",") ease-in-out,background-color var(",") ease-in-out;cursor:pointer;color:inherit;&:hover{border:1px solid var(",");background-color:transparent;}"],x.BORDER_RADIUS_NORMAL,x.COLOR_PAPER_DARKER,x.ANIMATION_DURATION,x.ANIMATION_DURATION,x.COLOR_PAPER_DARKER);function ri({label:e,token:t,amount:n}){return r.jsxs(fT,{title:n==null?void 0:n.toExact(),children:[r.jsx("b",{children:e}),r.jsxs("div",{children:[r.jsx($s,{readonlyMode:!0,loading:!1,currency:t}),r.jsx(mT,{children:r.jsx(Q,{amount:n})})]})]})}function At(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function xe(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Ge(e){xe(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Gs(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function wT(e,t){xe(2,arguments);var n=Ge(e).getTime(),o=At(t);return new Date(n+o)}var bT={};function hr(){return bT}function CT(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function AT(e){return xe(1,arguments),e instanceof Date||Gs(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function OT(e){if(xe(1,arguments),!AT(e)&&typeof e!="number")return!1;var t=Ge(e);return!isNaN(Number(t))}function _T(e,t){xe(2,arguments);var n=At(t);return wT(e,-n)}var IT=864e5;function ST(e){xe(1,arguments);var t=Ge(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var o=t.getTime(),a=n-o;return Math.floor(a/IT)+1}function Gn(e){xe(1,arguments);var t=1,n=Ge(e),o=n.getUTCDay(),a=(o<t?7:0)+o-t;return n.setUTCDate(n.getUTCDate()-a),n.setUTCHours(0,0,0,0),n}function vc(e){xe(1,arguments);var t=Ge(e),n=t.getUTCFullYear(),o=new Date(0);o.setUTCFullYear(n+1,0,4),o.setUTCHours(0,0,0,0);var a=Gn(o),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var s=Gn(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}function ET(e){xe(1,arguments);var t=vc(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var o=Gn(n);return o}var RT=6048e5;function jT(e){xe(1,arguments);var t=Ge(e),n=Gn(t).getTime()-ET(t).getTime();return Math.round(n/RT)+1}function Yn(e,t){var n,o,a,i,s,l,c,u;xe(1,arguments);var p=hr(),m=At((n=(o=(a=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(s=t.locale)===null||s===void 0||(l=s.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:p.weekStartsOn)!==null&&o!==void 0?o:(c=p.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Ge(e),T=h.getUTCDay(),d=(T<m?7:0)+T-m;return h.setUTCDate(h.getUTCDate()-d),h.setUTCHours(0,0,0,0),h}function Tc(e,t){var n,o,a,i,s,l,c,u;xe(1,arguments);var p=Ge(e),m=p.getUTCFullYear(),h=hr(),T=At((n=(o=(a=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(s=t.locale)===null||s===void 0||(l=s.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:h.firstWeekContainsDate)!==null&&o!==void 0?o:(c=h.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(T>=1&&T<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var d=new Date(0);d.setUTCFullYear(m+1,0,T),d.setUTCHours(0,0,0,0);var g=Yn(d,t),v=new Date(0);v.setUTCFullYear(m,0,T),v.setUTCHours(0,0,0,0);var y=Yn(v,t);return p.getTime()>=g.getTime()?m+1:p.getTime()>=y.getTime()?m:m-1}function PT(e,t){var n,o,a,i,s,l,c,u;xe(1,arguments);var p=hr(),m=At((n=(o=(a=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(s=t.locale)===null||s===void 0||(l=s.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:p.firstWeekContainsDate)!==null&&o!==void 0?o:(c=p.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),h=Tc(e,t),T=new Date(0);T.setUTCFullYear(h,0,m),T.setUTCHours(0,0,0,0);var d=Yn(T,t);return d}var kT=6048e5;function LT(e,t){xe(1,arguments);var n=Ge(e),o=Yn(n,t).getTime()-PT(n,t).getTime();return Math.round(o/kT)+1}function G(e,t){for(var n=e<0?"-":"",o=Math.abs(e).toString();o.length<t;)o="0"+o;return n+o}var tt={y:function(t,n){var o=t.getUTCFullYear(),a=o>0?o:1-o;return G(n==="yy"?a%100:a,n.length)},M:function(t,n){var o=t.getUTCMonth();return n==="M"?String(o+1):G(o+1,2)},d:function(t,n){return G(t.getUTCDate(),n.length)},a:function(t,n){var o=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return o.toUpperCase();case"aaa":return o;case"aaaaa":return o[0];case"aaaa":default:return o==="am"?"a.m.":"p.m."}},h:function(t,n){return G(t.getUTCHours()%12||12,n.length)},H:function(t,n){return G(t.getUTCHours(),n.length)},m:function(t,n){return G(t.getUTCMinutes(),n.length)},s:function(t,n){return G(t.getUTCSeconds(),n.length)},S:function(t,n){var o=n.length,a=t.getUTCMilliseconds(),i=Math.floor(a*Math.pow(10,o-3));return G(i,n.length)}},jt={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},NT={G:function(t,n,o){var a=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return o.era(a,{width:"abbreviated"});case"GGGGG":return o.era(a,{width:"narrow"});case"GGGG":default:return o.era(a,{width:"wide"})}},y:function(t,n,o){if(n==="yo"){var a=t.getUTCFullYear(),i=a>0?a:1-a;return o.ordinalNumber(i,{unit:"year"})}return tt.y(t,n)},Y:function(t,n,o,a){var i=Tc(t,a),s=i>0?i:1-i;if(n==="YY"){var l=s%100;return G(l,2)}return n==="Yo"?o.ordinalNumber(s,{unit:"year"}):G(s,n.length)},R:function(t,n){var o=vc(t);return G(o,n.length)},u:function(t,n){var o=t.getUTCFullYear();return G(o,n.length)},Q:function(t,n,o){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(a);case"QQ":return G(a,2);case"Qo":return o.ordinalNumber(a,{unit:"quarter"});case"QQQ":return o.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return o.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,n,o){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(a);case"qq":return G(a,2);case"qo":return o.ordinalNumber(a,{unit:"quarter"});case"qqq":return o.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return o.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,n,o){var a=t.getUTCMonth();switch(n){case"M":case"MM":return tt.M(t,n);case"Mo":return o.ordinalNumber(a+1,{unit:"month"});case"MMM":return o.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return o.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(a,{width:"wide",context:"formatting"})}},L:function(t,n,o){var a=t.getUTCMonth();switch(n){case"L":return String(a+1);case"LL":return G(a+1,2);case"Lo":return o.ordinalNumber(a+1,{unit:"month"});case"LLL":return o.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return o.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(a,{width:"wide",context:"standalone"})}},w:function(t,n,o,a){var i=LT(t,a);return n==="wo"?o.ordinalNumber(i,{unit:"week"}):G(i,n.length)},I:function(t,n,o){var a=jT(t);return n==="Io"?o.ordinalNumber(a,{unit:"week"}):G(a,n.length)},d:function(t,n,o){return n==="do"?o.ordinalNumber(t.getUTCDate(),{unit:"date"}):tt.d(t,n)},D:function(t,n,o){var a=ST(t);return n==="Do"?o.ordinalNumber(a,{unit:"dayOfYear"}):G(a,n.length)},E:function(t,n,o){var a=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return o.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return o.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(a,{width:"short",context:"formatting"});case"EEEE":default:return o.day(a,{width:"wide",context:"formatting"})}},e:function(t,n,o,a){var i=t.getUTCDay(),s=(i-a.weekStartsOn+8)%7||7;switch(n){case"e":return String(s);case"ee":return G(s,2);case"eo":return o.ordinalNumber(s,{unit:"day"});case"eee":return o.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return o.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(i,{width:"short",context:"formatting"});case"eeee":default:return o.day(i,{width:"wide",context:"formatting"})}},c:function(t,n,o,a){var i=t.getUTCDay(),s=(i-a.weekStartsOn+8)%7||7;switch(n){case"c":return String(s);case"cc":return G(s,n.length);case"co":return o.ordinalNumber(s,{unit:"day"});case"ccc":return o.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return o.day(i,{width:"narrow",context:"standalone"});case"cccccc":return o.day(i,{width:"short",context:"standalone"});case"cccc":default:return o.day(i,{width:"wide",context:"standalone"})}},i:function(t,n,o){var a=t.getUTCDay(),i=a===0?7:a;switch(n){case"i":return String(i);case"ii":return G(i,n.length);case"io":return o.ordinalNumber(i,{unit:"day"});case"iii":return o.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return o.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return o.day(a,{width:"short",context:"formatting"});case"iiii":default:return o.day(a,{width:"wide",context:"formatting"})}},a:function(t,n,o){var a=t.getUTCHours(),i=a/12>=1?"pm":"am";switch(n){case"a":case"aa":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,n,o){var a=t.getUTCHours(),i;switch(a===12?i=jt.noon:a===0?i=jt.midnight:i=a/12>=1?"pm":"am",n){case"b":case"bb":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,n,o){var a=t.getUTCHours(),i;switch(a>=17?i=jt.evening:a>=12?i=jt.afternoon:a>=4?i=jt.morning:i=jt.night,n){case"B":case"BB":case"BBB":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,n,o){if(n==="ho"){var a=t.getUTCHours()%12;return a===0&&(a=12),o.ordinalNumber(a,{unit:"hour"})}return tt.h(t,n)},H:function(t,n,o){return n==="Ho"?o.ordinalNumber(t.getUTCHours(),{unit:"hour"}):tt.H(t,n)},K:function(t,n,o){var a=t.getUTCHours()%12;return n==="Ko"?o.ordinalNumber(a,{unit:"hour"}):G(a,n.length)},k:function(t,n,o){var a=t.getUTCHours();return a===0&&(a=24),n==="ko"?o.ordinalNumber(a,{unit:"hour"}):G(a,n.length)},m:function(t,n,o){return n==="mo"?o.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):tt.m(t,n)},s:function(t,n,o){return n==="so"?o.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):tt.s(t,n)},S:function(t,n){return tt.S(t,n)},X:function(t,n,o,a){var i=a._originalDate||t,s=i.getTimezoneOffset();if(s===0)return"Z";switch(n){case"X":return ai(s);case"XXXX":case"XX":return pt(s);case"XXXXX":case"XXX":default:return pt(s,":")}},x:function(t,n,o,a){var i=a._originalDate||t,s=i.getTimezoneOffset();switch(n){case"x":return ai(s);case"xxxx":case"xx":return pt(s);case"xxxxx":case"xxx":default:return pt(s,":")}},O:function(t,n,o,a){var i=a._originalDate||t,s=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+oi(s,":");case"OOOO":default:return"GMT"+pt(s,":")}},z:function(t,n,o,a){var i=a._originalDate||t,s=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+oi(s,":");case"zzzz":default:return"GMT"+pt(s,":")}},t:function(t,n,o,a){var i=a._originalDate||t,s=Math.floor(i.getTime()/1e3);return G(s,n.length)},T:function(t,n,o,a){var i=a._originalDate||t,s=i.getTime();return G(s,n.length)}};function oi(e,t){var n=e>0?"-":"+",o=Math.abs(e),a=Math.floor(o/60),i=o%60;if(i===0)return n+String(a);var s=t;return n+String(a)+s+G(i,2)}function ai(e,t){if(e%60===0){var n=e>0?"-":"+";return n+G(Math.abs(e)/60,2)}return pt(e,t)}function pt(e,t){var n=t||"",o=e>0?"-":"+",a=Math.abs(e),i=G(Math.floor(a/60),2),s=G(a%60,2);return o+i+n+s}var ii=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},wc=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},DT=function(t,n){var o=t.match(/(P+)(p+)?/)||[],a=o[1],i=o[2];if(!i)return ii(t,n);var s;switch(a){case"P":s=n.dateTime({width:"short"});break;case"PP":s=n.dateTime({width:"medium"});break;case"PPP":s=n.dateTime({width:"long"});break;case"PPPP":default:s=n.dateTime({width:"full"});break}return s.replace("{{date}}",ii(a,n)).replace("{{time}}",wc(i,n))},MT={p:wc,P:DT},FT=["D","DD"],UT=["YY","YYYY"];function WT(e){return FT.indexOf(e)!==-1}function BT(e){return UT.indexOf(e)!==-1}function si(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var zT={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},HT=function(t,n,o){var a,i=zT[t];return typeof i=="string"?a=i:n===1?a=i.one:a=i.other.replace("{{count}}",n.toString()),o!=null&&o.addSuffix?o.comparison&&o.comparison>0?"in "+a:a+" ago":a};function Er(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,o=e.formats[n]||e.formats[e.defaultWidth];return o}}var $T={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},GT={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},YT={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},qT={date:Er({formats:$T,defaultWidth:"full"}),time:Er({formats:GT,defaultWidth:"full"}),dateTime:Er({formats:YT,defaultWidth:"full"})},VT={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},XT=function(t,n,o,a){return VT[t]};function Xt(e){return function(t,n){var o=n!=null&&n.context?String(n.context):"standalone",a;if(o==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,s=n!=null&&n.width?String(n.width):i;a=e.formattingValues[s]||e.formattingValues[i]}else{var l=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return a[u]}}var KT={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},QT={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ZT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},JT={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ew={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},tw={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},nw=function(t,n){var o=Number(t),a=o%100;if(a>20||a<10)switch(a%10){case 1:return o+"st";case 2:return o+"nd";case 3:return o+"rd"}return o+"th"},rw={ordinalNumber:nw,era:Xt({values:KT,defaultWidth:"wide"}),quarter:Xt({values:QT,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Xt({values:ZT,defaultWidth:"wide"}),day:Xt({values:JT,defaultWidth:"wide"}),dayPeriod:Xt({values:ew,defaultWidth:"wide",formattingValues:tw,defaultFormattingWidth:"wide"})};function Kt(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=n.width,a=o&&e.matchPatterns[o]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var s=i[0],l=o&&e.parsePatterns[o]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?aw(l,function(m){return m.test(s)}):ow(l,function(m){return m.test(s)}),u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;var p=t.slice(s.length);return{value:u,rest:p}}}function ow(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function aw(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function iw(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=t.match(e.matchPattern);if(!o)return null;var a=o[0],i=t.match(e.parsePattern);if(!i)return null;var s=e.valueCallback?e.valueCallback(i[0]):i[0];s=n.valueCallback?n.valueCallback(s):s;var l=t.slice(a.length);return{value:s,rest:l}}}var sw=/^(\d+)(th|st|nd|rd)?/i,lw=/\d+/i,cw={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},uw={any:[/^b/i,/^(a|c)/i]},dw={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},pw={any:[/1/i,/2/i,/3/i,/4/i]},fw={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},mw={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},hw={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},gw={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},xw={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},yw={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},vw={ordinalNumber:iw({matchPattern:sw,parsePattern:lw,valueCallback:function(t){return parseInt(t,10)}}),era:Kt({matchPatterns:cw,defaultMatchWidth:"wide",parsePatterns:uw,defaultParseWidth:"any"}),quarter:Kt({matchPatterns:dw,defaultMatchWidth:"wide",parsePatterns:pw,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Kt({matchPatterns:fw,defaultMatchWidth:"wide",parsePatterns:mw,defaultParseWidth:"any"}),day:Kt({matchPatterns:hw,defaultMatchWidth:"wide",parsePatterns:gw,defaultParseWidth:"any"}),dayPeriod:Kt({matchPatterns:xw,defaultMatchWidth:"any",parsePatterns:yw,defaultParseWidth:"any"})},Tw={code:"en-US",formatDistance:HT,formatLong:qT,formatRelative:XT,localize:rw,match:vw,options:{weekStartsOn:0,firstWeekContainsDate:1}},ww=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,bw=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Cw=/^'([^]*?)'?$/,Aw=/''/g,Ow=/[a-zA-Z]/;function _w(e,t,n){var o,a,i,s,l,c,u,p,m,h,T,d,g,v;xe(2,arguments);var y=String(t),b=hr(),C=(o=(a=void 0)!==null&&a!==void 0?a:b.locale)!==null&&o!==void 0?o:Tw,A=At((i=(s=(l=(c=void 0)!==null&&c!==void 0?c:void 0)!==null&&l!==void 0?l:b.firstWeekContainsDate)!==null&&s!==void 0?s:(u=b.locale)===null||u===void 0||(p=u.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(A>=1&&A<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var I=At((m=(h=(T=(d=void 0)!==null&&d!==void 0?d:void 0)!==null&&T!==void 0?T:b.weekStartsOn)!==null&&h!==void 0?h:(g=b.locale)===null||g===void 0||(v=g.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&m!==void 0?m:0);if(!(I>=0&&I<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!C.localize)throw new RangeError("locale must contain localize property");if(!C.formatLong)throw new RangeError("locale must contain formatLong property");var E=Ge(e);if(!OT(E))throw new RangeError("Invalid time value");var _=CT(E),O=_T(E,_),S={firstWeekContainsDate:A,weekStartsOn:I,locale:C,_originalDate:E},R=y.match(bw).map(function(P){var D=P[0];if(D==="p"||D==="P"){var M=MT[D];return M(P,C.formatLong)}return P}).join("").match(ww).map(function(P){if(P==="''")return"'";var D=P[0];if(D==="'")return Iw(P);var M=NT[D];if(M)return BT(P)&&si(P,t,String(e)),WT(P)&&si(P,t,String(e)),M(O,P,C.localize,S);if(D.match(Ow))throw new RangeError("Format string contains an unescaped latin alphabet character `"+D+"`");return P}).join("");return R}function Iw(e){var t=e.match(Cw);return t?t[1].replace(Aw,"'"):e}function li({date:e}){const t=_n(e),n=_w(e||0,"MMM d YYY, h:mm a");return r.jsx(ze,{children:e?r.jsxs($n,{children:[r.jsx("strong",{children:t}),r.jsxs("span",{children:["(",n,")"]})]}):"-"})}function Sw(e){const{inputToken:t,outputToken:n}=e,{executedFeeToken:o}=e.executionData,a=o==null?void 0:o.toLowerCase();return a?[t,n].find(i=>(i==null?void 0:i.address.toLowerCase())===a):t}function Ew({order:e}){const{totalFee:t}=e.executionData,n=Sw(e);if(!n)return r.jsx(ze,{});const o=ne.fromRawAmount(n,t||0),a=n.symbol;return r.jsx(ze,{children:!a||!t?r.jsx("span",{children:"-"}):r.jsx("span",{children:r.jsx(Q,{amount:o,tokenSymbol:n})})})}function ce({label:e,tooltip:t,prefix:n}){return r.jsxs(gT,{children:[n,r.jsx(hT,{children:e}),t&&r.jsx(Mo,{content:t})]})}const Rw=""+new URL("safe-logo-BN6da4xV.svg",import.meta.url).href,jw=w.img.withConfig({displayName:"SafeTxFields__SafeIcon",componentId:"sc-s4oziv-0"})(["margin-right:5px;"]);function Pw(e){const{chainId:t,safeAddress:n,safeTxHash:o,nonce:a,confirmationsRequired:i,confirmations:s}=e,l={safe:n,safeTxHash:o},c=r.jsx(jw,{src:Rw,alt:"Safe logo"});return r.jsxs(r.Fragment,{children:[r.jsxs(ge,{children:[r.jsx(ce,{label:"Safe transaction",tooltip:"The hash for this Safe transaction.",prefix:c}),r.jsxs("div",{children:[r.jsx("span",{children:o.slice(0,8)})," "," - ",r.jsx(op,{chainId:t,safeTransaction:l})]})]}),r.jsxs(ge,{children:[r.jsx(ce,{label:"Safe nonce",tooltip:'Safe contracts have a so-called "nonce." This is to ensure that each transaction can be executed only once so no replay attacks are possible.',prefix:c}),r.jsx("span",{children:a})]}),r.jsxs(ge,{children:[r.jsx(ce,{label:"Safe confirmed signatures",tooltip:"The number of signers who have confirmed this transaction versus the number of signer confirmations needed.",prefix:c}),r.jsxs("span",{children:[s," / ",i]})]})]})}function kw({order:e}){const{executionData:{filledPercentage:t,filledPercentDisplay:n,fullyFilled:o}}=e,{action:a,mainAmount:i,formattedFilledAmount:s,formattedSwappedAmount:l}=ap(e),c=t==null?void 0:t.gt(0);return r.jsxs(ze,{children:[r.jsx($n,{children:r.jsxs(yg,{children:[r.jsx(Dl,{value:n}),r.jsx("b",{children:r.jsx(os,{percent:n})})]})}),r.jsx($n,{children:r.jsxs("span",{children:[r.jsx("b",{children:r.jsx(Q,{amount:s,tokenSymbol:s.currency})})," ",!o&&r.jsxs(r.Fragment,{children:["of"," ",r.jsx("b",{children:r.jsx(Q,{amount:i,tokenSymbol:i==null?void 0:i.currency})})," "]}),a," ",c&&r.jsxs(r.Fragment,{children:["for a total of"," ",r.jsx("b",{children:r.jsx(Q,{amount:l,tokenSymbol:l.currency})})]})]})})]})}function Lw({id:e,chainId:t}){const n=wo(t,"transaction",e);return r.jsx(ze,{children:r.jsxs(we,{href:n||"",children:[r.jsx("span",{children:e.slice(0,8)}),r.jsx("span",{children:"↗"})]})})}const Nw={[ue.SWAP]:"Market",[ue.LIMIT]:"Limit",[ue.TWAP]:"TWAP",[ue.HOOKS]:"Hooks",[ue.YIELD]:"Yield"};function Dw({order:e}){const t=er(e);return r.jsx(ze,{children:r.jsxs(vT,{children:[Nw[t]," ",e.kind," order"," ",e.partiallyFillable?"(Partially fillable)":"(Fill or Kill)"]})})}function Rr({order:e,price:t}){return r.jsx(ze,{children:t?r.jsxs(yT,{children:["1 ",r.jsx(be,{token:e.inputToken})," = ",r.jsx(Q,{amount:t,tokenSymbol:e.outputToken})]}):"-"})}function Mw({order:e}){return r.jsx(ze,{children:r.jsx(na,{order:e,widthAuto:!0})})}function Fw({order:e}){var u;const{kind:t,inputToken:n,outputToken:o}=e,{surplusAmount:a,surplusPercentage:i}=e.executionData,s=$e(t)?o:n;if(!s||!a||a!=null&&a.isZero())return r.jsx(ze,{children:"-"});const l=ne.fromRawAmount(s,a==null?void 0:a.decimalPlaces(0).toFixed()),c=(u=i==null?void 0:i.multipliedBy(100))==null?void 0:u.toFixed(2);return r.jsx(ze,{title:`${l.toExact()} ${s.symbol}`,children:r.jsxs($n,{children:[r.jsxs(xT,{children:["+",c,"%"]}),r.jsx("span",{children:r.jsx(Q,{amount:l,tokenSymbol:s})})]})})}const ci="How much of the order has been filled.",_e={LIMIT_PRICE:"You will receive this price or better for your tokens.",EXECUTION_PRICE:"An order’s actual execution price will vary based on the market price and network costs.",EXECUTES_AT:"Network costs (incl. gas) are covered by filling your order when the market price is better than your limit price.",FILLED_TWAP:ci,FILLED:r.jsxs("span",{children:[ci,r.jsx("br",{}),"Market orders are always ",r.jsx("i",{children:"Fill or kill"}),", while limit orders are by default ",r.jsx("i",{children:"Partially fillable"}),", but can also be changed to ",r.jsx("i",{children:"Fill or kill"})," through your order settings."]}),SURPLUS:"The amount of extra tokens you get on top of your limit price.",NETWORK_COSTS:"CoW Protocol covers the costs by executing your order at a slightly better price than your limit price.",CREATED:"Your order was created on this date & time. It will remain open until it expires or is filled.",RECEIVER:"The account address which will/did receive the bought amount.",EXPIRY:"If your order has not been filled by this date & time, it will expire. Don't worry - expirations and order placement are free on CoW Swap!",TOTAL_FEE:"This fee helps pay for maintenance & improvements to the trade experience",ORDER_TYPE:r.jsxs("span",{children:["Orders on CoW Swap can either be market orders (which fill at the market price within the slippage tolerance you set) or limit orders (which fill at a price you specify).",r.jsx("br",{}),r.jsx("br",{}),"Market orders are always ",r.jsx("i",{children:"Fill or kill"}),", while limit orders are by default ",r.jsx("i",{children:"Partially fillable"}),", but can also be changed to ",r.jsx("i",{children:"Fill or kill"})," through your order settings."]})},Uw=new Set([j.PENDING,j.FULFILLED,j.EXPIRED]);function Ww({isOpen:e,onDismiss:t,order:n,twapOrder:o,isTwapPartOrder:a,chainId:i,buyAmount:s,limitPrice:l,executionPrice:c,estimatedExecutionPrice:u,receiverEnsName:p,alternativeOrderModalContext:m}){const h=!ip(n.id),T=sp(),g=lp(n)&&h&&Hs(n);if(!n||!i)return null;const v=a&&Uw.has(n.status),y=$e(n.kind),b=y?"You sell":"You sell at most",C=y?"You receive at least":"You receive exactly",A=o==null?void 0:o.safeTxParams,I=cp(n.fullAppData);return r.jsx(nr,{onDismiss:t,isOpen:e,children:r.jsxs(sT,{children:[r.jsxs(lT,{children:[r.jsxs("div",{children:[r.jsx(cT,{children:"Order Receipt"}),m&&r.jsxs(TT,{onClick:m.showAlternativeOrderModal,children:[m.isEdit?"Edit":"Recreate"," this order"]})]}),r.jsx(up,{onClick:()=>t()})]}),o&&r.jsx(pT,{children:r.jsx(Ee,{bannerType:wt.Info,children:r.jsx("p",{children:a?`Part of a ${o.order.n}-part TWAP order split`:`TWAP order split into ${o.order.n} parts`})})}),r.jsxs(uT,{children:[r.jsx(ri,{amount:Pl(n),token:n.inputToken,label:b}),r.jsx(ri,{amount:s,token:n.outputToken,label:C}),r.jsxs(dT,{children:[g&&r.jsx(dp,{borderRadius:"12px 12px 0 0",orientation:zs.Horizontal,onDismiss:()=>T(n.id)}),r.jsxs(ge,{children:[r.jsx(ce,{label:"Status"}),r.jsx(Mw,{order:n})]}),n.receiver&&r.jsxs(ge,{children:[r.jsx(ce,{label:"Recipient",tooltip:_e.RECEIVER}),r.jsxs("div",{children:[g&&r.jsx(pp,{image:fp.ALERT,color:x.COLOR_ALERT,description:"Alert"}),r.jsxs(we,{href:hp(i,n.receiver,gp.ADDRESS),children:[p||mp(n.receiver)," ↗"]})]})]}),r.jsxs(ge,{children:[r.jsx(ce,{label:"Limit price (incl.costs)",tooltip:_e.LIMIT_PRICE}),r.jsx(Rr,{order:n,price:l})]}),(!o||a)&&r.jsx(ge,{children:u&&n.status===j.PENDING?r.jsxs(r.Fragment,{children:[r.jsx(ce,{label:"Executes at",tooltip:_e.EXECUTES_AT}),r.jsx(Rr,{order:n,price:u})]}):r.jsxs(r.Fragment,{children:[r.jsx(ce,{label:n.partiallyFillable?"Avg. execution price":"Execution price",tooltip:_e.EXECUTION_PRICE})," ",r.jsx(Rr,{order:n,price:c})]})}),I&&r.jsxs(ge,{children:[r.jsx(ce,{label:"Total fee",tooltip:_e.TOTAL_FEE}),r.jsxs("span",{children:[(I.bps/100).toFixed(2),"%"]})]}),r.jsxs(ge,{children:[r.jsx(ce,{label:"Filled",tooltip:o?_e.FILLED_TWAP:_e.FILLED}),r.jsx(kw,{order:n})]}),r.jsxs(ge,{children:[r.jsx(ce,{label:"Order surplus",tooltip:_e.SURPLUS}),r.jsx(Fw,{order:n})]}),(!o||a)&&r.jsx(r.Fragment,{children:r.jsxs(ge,{children:[r.jsx(ce,{label:"Network costs",tooltip:_e.NETWORK_COSTS}),r.jsx(Ew,{order:n})]})}),r.jsxs(ge,{children:[r.jsx(ce,{label:"Created",tooltip:_e.CREATED}),r.jsx(li,{date:n.creationTime})]}),r.jsxs(ge,{children:[r.jsx(ce,{label:"Expiry",tooltip:_e.EXPIRY}),r.jsx(li,{date:n.expirationTime})]}),r.jsxs(ge,{children:[r.jsx(ce,{label:"Order type",tooltip:_e.ORDER_TYPE}),r.jsx(Dw,{order:n})]}),(!o||v)&&r.jsx(ge,{children:n.executionData.activityId&&r.jsxs(r.Fragment,{children:[r.jsx(ce,{label:n.executionData.activityTitle}),r.jsx(Lw,{id:n.executionData.activityId,chainId:i})]})}),o&&A&&r.jsx(Pw,{chainId:i,safeAddress:o.safeAddress,safeTxHash:A.safeTxHash,nonce:A.nonce,confirmations:A.confirmations,confirmationsRequired:A.confirmationsRequired})]})]})]})})}function Bw(e){const t=oT(),{chainId:n}=H(),o=xc(),{name:a}=Ys(t==null?void 0:t.receiver),i=dc(t==null?void 0:t.id),s=uv(t==null?void 0:t.id),l=i||s,c=!!s,u=aT(t);if(!n||!t)return null;const{inputToken:p,outputToken:m,buyAmount:h,sellAmount:T}=t,{executedBuyAmount:d,executedSellAmount:g}=t.executionData,v=ne.fromRawAmount(p,T.toString()),y=ne.fromRawAmount(m,h.toString()),b=ni({buyAmount:Mn.BigInt(h.toString()),sellAmount:Mn.BigInt(T.toString()),inputToken:p,outputToken:m}),C=ni({buyAmount:d,sellAmount:g,inputToken:p,outputToken:m}),{pendingOrdersPrices:A}=e,{estimatedExecutionPrice:I=null}=A[t.id]||{};return r.jsx(Ww,{receiverEnsName:a,sellAmount:v,buyAmount:y,limitPrice:b,executionPrice:C,estimatedExecutionPrice:I,chainId:n,order:t,twapOrder:l,isTwapPartOrder:c,isOpen:!!t,onDismiss:o,alternativeOrderModalContext:u})}const zw=w.div.withConfig({displayName:"OrdersTableWidget__SearchInputContainer",componentId:"sc-11xcc12-0"})(["margin:0;padding:0 0 0 16px;position:relative;","{padding:0;}"],L.upToMedium()),Hw=w(Cp).withConfig({displayName:"OrdersTableWidget__SearchIcon",componentId:"sc-11xcc12-1"})(["position:absolute;left:28px;top:50%;transform:translateY(-50%);color:var(",");width:16px;height:16px;","{left:10px;}"],x.COLOR_TEXT_OPACITY_50,L.upToMedium()),$w=w(Gh).withConfig({displayName:"OrdersTableWidget__StyledCloseIcon",componentId:"sc-11xcc12-2"})(["position:absolute;right:10px;top:50%;transform:translateY(-50%);width:16px;height:16px;> svg{width:100%;height:100%;}"]),Gw=w.input.withConfig({displayName:"OrdersTableWidget__SearchInput",componentId:"sc-11xcc12-3"})(["width:100%;padding:8px 36px;border:1px solid var(",");background:var(",");color:var(",");border-radius:8px;font-size:13px;font-weight:500;min-height:36px;","{padding:8px 32px;border-radius:12px;}&::placeholder{color:var(",");}&:focus{outline:none;border-color:var(",");}@supports (-webkit-touch-callout:none){&:hover,&:active{font-size:16px;}}"],x.COLOR_TEXT_OPACITY_10,x.COLOR_PAPER,x.COLOR_TEXT,L.upToMedium(),x.COLOR_TEXT_OPACITY_50,x.COLOR_TEXT_OPACITY_50);function An(e,t){switch(t){case"all":return e.all;case"unfillable":return e.unfillable;case"signing":return e.signing;case"open":return e.pending;case"history":return e.history;default:return e.pending}}function Yw(e,t){return e.find(o=>o.id===t.id)?e.filter(o=>o.id!==t.id):[...e,t]}function bc({orders:e,orderType:t,children:n,displayOrdersOnlyForSafeApp:o=!1,isTwapTable:a=!1}){const{chainId:i,account:s}=H(),l=Ot(),c=cn(),u=xp(),{allowsOffchainSigning:p}=dn(),m=k(yp),h=k(ls),T=U(_o),d=vp(),g=rT(),v=Cs(),y=Fo(),[b,C]=f.useState(""),A=Tp(),I=wp(),E=f.useMemo(()=>{const{isLoading:z,values:fe}=A,{isLoading:Ce,values:Ae}=I;return{isLoading:z||Ce,balances:fe,allowances:Ae}},[A,I]),_=rg(e,t,i,E),{currentTabId:O,currentPageNumber:S}=f.useMemo(()=>{if(!s)return{currentTabId:Qe.id,currentPageNumber:1};const z=El(l.search);return z.tabId==="signing"&&!_.signing.length||z.tabId==="unfillable"&&!_.unfillable.length?{currentTabId:Qe.id,currentPageNumber:z.pageNumber||1}:{currentTabId:z.tabId||Qe.id,currentPageNumber:z.pageNumber||1}},[l.search,_.signing.length,_.unfillable.length,s]),R=f.useMemo(()=>An(_,O),[_,O]),P=f.useMemo(()=>s?Ol.filter(z=>z.id==="unfillable"||z.id==="signing"?An(_,z.id).length>0:!0).map(z=>({...z,isActive:z.id===O,count:An(_,z.id).length})):[{...Qe,count:0,isActive:!0}],[O,_,s]),{pendingActivity:D}=bp(),M=f.useCallback(z=>{T(z)},[T]),$=f.useCallback(z=>{T(Yw(h,z))},[h,T]),Z=f.useCallback(z=>{const fe=e.find(Ce=>Ce.id===z.id);return fe?u(fe):null},[e,u]),ie=yc(),pe=og(),re={getShowCancellationModal:Z,getAlternativeOrderModalContext:ie,selectReceiptOrder:g,toggleOrderForCancellation:$,toggleOrdersForCancellation:M,approveOrderToken:pe};f.useEffect(()=>{c(Zo(l,{pageNumber:S,tabId:O}),{replace:!0})},[]),ig(R.length,O,S),f.useEffect(()=>{T([])},[O,T]);const Me=f.useMemo(()=>{if(!b)return R;const z=b.toLowerCase().trim(),fe=R.filter(Ce=>{const Ae=ot(Ce),Ye=Ae.inputToken,J=Ae.outputToken;return[Ye.symbol,J.symbol].some(se=>(se==null?void 0:se.toLowerCase())===z)});return fe.length>0?fe:R.filter(Ce=>{const Ae=ot(Ce),Ye=Ae.inputToken,J=Ae.outputToken;if([Ye.symbol,J.symbol].some(Oe=>Oe==null?void 0:Oe.toLowerCase().includes(z)))return!0;const Fe=z.startsWith("0x"),me=z.replace(/[^0-9a-fx]/g,"");if(me.length===40||me.length===42){const Oe=Fe?me:`0x${me}`;return[Ye.address,J.address].some(dt=>dt.toLowerCase()===Oe.toLowerCase())}const he=Fe?me.slice(2):me;return he.length>=2?[Ye.address,J.address].some(Oe=>Oe.slice(2).toLowerCase().includes(he.toLowerCase())):!1})},[R,b]);return r.jsxs(r.Fragment,{children:[n,r.jsxs(Tx,{chainId:i,tabs:P,orders:Me,displayOrdersOnlyForSafeApp:o,isSafeViaWc:v,currentPageNumber:S,pendingOrdersPrices:m,balancesAndAllowances:E,isWalletConnected:!!s,orderActions:re,getSpotPrice:d,selectedOrders:h,allowsOffchainSigning:p,orderType:t,pendingActivities:D,injectedWidgetParams:y,searchTerm:b,isTwapTable:a,children:[(O===en.id||O==="all"||O==="unfillable")&&R.length>0&&r.jsx(Ox,{pendingOrders:Sl(R)}),!!s&&R.length>0&&r.jsxs(zw,{children:[r.jsx(Hw,{}),r.jsx(Gw,{type:"text",placeholder:"Token symbol, address",value:b,onChange:z=>C(z.target.value)}),b&&r.jsx($w,{onClick:()=>C("")})]})]}),r.jsx(Bw,{pendingOrdersPrices:m})]})}const qw="1500px",Cc=w.div.withConfig({displayName:"TradePageLayout__PageWrapper",componentId:"sc-1tvb5ov-0"})(["width:100%;display:grid;max-width:",";margin:0 auto;grid-template-columns:1fr;grid-template-rows:auto;grid-template-areas:",";gap:20px;","{grid-template-columns:",";grid-template-rows:1fr;grid-template-areas:",";}> div:last-child{display:",";}"],({maxWidth:e=qw})=>e,({hideOrdersTable:e})=>e?'"primary"':'"primary" "secondary"',L.LargeAndUp(),({isUnlocked:e,hideOrdersTable:t,secondaryOnLeft:n})=>e&&!t?n?"1fr minmax(auto, "+kn.swap.replace("px","")+"px)":"minmax(auto, "+kn.swap.replace("px","")+"px) 1fr":"1fr",({secondaryOnLeft:e,hideOrdersTable:t})=>t?'"primary"':e?'"secondary primary"':'"primary secondary"',({isUnlocked:e})=>e?"":"none"),Ac=w.div.withConfig({displayName:"TradePageLayout__PrimaryWrapper",componentId:"sc-1tvb5ov-1"})(["display:flex;flex-flow:column wrap;gap:16px;width:100%;max-width:",";margin:0 auto;color:inherit;grid-area:primary;"],kn.swap),Oc=w.div.attrs({id:Ap}).withConfig({displayName:"TradePageLayout__SecondaryWrapper",componentId:"sc-1tvb5ov-2"})(["display:flex;flex-flow:column wrap;width:100%;overflow:hidden;border-radius:var(",");background:var(",");color:inherit;border:none;box-shadow:none;position:relative;padding:10px;min-height:200px;height:100%;width:100%;margin:0 0 76px;grid-area:secondary;","{flex-flow:column wrap;margin:0 0 20px;}"],x.BORDER_RADIUS_NORMAL,x.COLOR_PAPER,L.upToLargeAlt()),Vw="1800px";function Xw(){const{isUnlocked:e}=k(Lr),{ordersTableOnLeft:t}=k(je),n=cv(),o=xn(),a=sa(),i=yn(),s=dv(),{hideOrdersTable:l}=Fo(),u={disablePriceImpact:a===Te.SELL_AMOUNT_TOO_SMALL},p=n.filter(m=>m.status===j.PENDING);return r.jsxs(r.Fragment,{children:[r.jsx(Ht,{title:Ut.ADVANCED}),r.jsx(Wh,{slippage:i}),r.jsx(zh,{}),r.jsxs(Cc,{isUnlocked:e,maxWidth:Vw,secondaryOnLeft:t,hideOrdersTable:l,children:[r.jsxs(Ac,{children:[o&&p.length>0&&r.jsx(gv,{}),r.jsx(Uh,{updaters:r.jsx(nT,{}),confirmContent:r.jsx(Ky,{}),params:u,mapCurrencyInfo:s,children:m=>r.jsx(r.Fragment,{children:r.jsx(My,{tradeWarnings:m})})})]}),!l&&r.jsx(Oc,{children:r.jsx(bc,{isTwapTable:!0,displayOrdersOnlyForSafeApp:!0,orderType:Ct.ADVANCED,orders:n})})]})]})}const Kw=""+new URL("cow-404-BRavMRZs.png",import.meta.url).href,_c=w(we).withConfig({displayName:"AnySwapAffectedUsers__ExternalLink",componentId:"sc-153p7oz-0"})([""]),Qw=w(Op).withConfig({displayName:"AnySwapAffectedUsers__Wrapper",componentId:"sc-153p7oz-1"})(["",";min-height:auto;padding-bottom:32px;","{padding-bottom:24px;}","{margin-bottom:50px;font-size:26px;","{font-size:18px;text-align:center;}}","{margin-bottom:0;pre{display:inline;}}","{text-decoration:underline;font-weight:800;color:",";}"],_p,L.upToSmall(),go,L.upToSmall(),ho,_c,({theme:e})=>e.info),Zw=w.div.withConfig({displayName:"AnySwapAffectedUsers__Container",componentId:"sc-153p7oz-2"})(["display:flex;flex-direction:column;align-items:center;","{width:196px;padding:9px;color:",";&:hover{}}h2{margin:36px 0 32px;}img{max-width:506px;}p{text-align:left;}","{img{max-width:287px;}h2{font-size:16px;text-align:center;}}"],Le,({theme:e})=>e.text1,L.upToSmall());function Jw(){return r.jsxs(Qw,{children:[r.jsx(go,{children:"Your account is affected by the AnySwap Hack"}),r.jsxs(ho,{children:[r.jsxs(Zw,{children:[r.jsx("img",{src:Kw,alt:"CoW Swap 404 not found"}),r.jsx("h2",{children:"Read how to prevent losing funds"})]}),r.jsxs("p",{children:["You have given an allowance to ",r.jsx("pre",{children:"AnyswapV4Router"})," which is affected by a critical vulnerability."]}),r.jsx("p",{children:"In order to protect your funds, you will need to remove the approval on this contract."}),r.jsxs("p",{children:["Please read more in this"," ",r.jsx(_c,{href:"https://cointelegraph.com/news/multichain-asks-users-to-revoke-approvals-amid-critical-vulnerability",children:"link"}),"."]})]})]})}function eb(){return r.jsxs(r.Fragment,{children:[r.jsx(Ht,{title:Ut.HOOKS}),r.jsx(cl,{}),r.jsx(Ip,{})]})}const tb=""+new URL("icon-minus-BG9dNpyI.svg",import.meta.url).href,nb=""+new URL("icon-plus-3iCvXwrD.svg",import.meta.url).href;function rb(){const e=ss(Dr.TRANSACTION_ERROR),t=Sp(),n=Ep(Dr.TRANSACTION_ERROR),o=f.useCallback(({message:a,onDismiss:i})=>r.jsx(nr,{isOpen:!!a&&n,onDismiss:t,children:r.jsx(Rp,{modalMode:!0,onDismiss:i,message:a||""})}),[t,n]);return f.useMemo(()=>({openModal:e,closeModal:t,TransactionErrorModal:o}),[e,t,o])}function ob(){const[e,t]=f.useState(),{openModal:n,closeModal:o,TransactionErrorModal:a}=rb();return f.useMemo(()=>{const i=()=>{o(),t(void 0)};return{error:e,handleCloseError:i,handleSetError:l=>{t(l),l&&n()},ErrorModal:function({message:c=e}){return r.jsx(a,{onDismiss:i,message:c})}}},[e,o,n,a])}const ab=w.div.withConfig({displayName:"styled__Wrapper",componentId:"sc-93pke0-0"})(["width:100%;max-width:",";margin:0 auto;position:relative;p{padding:0.8rem 0 0.8rem 0;}li{padding:0.3rem;}.noFunds{color:var(",");background:var(",");padding:10px;border-radius:16px;}"],kn.swap,x.COLOR_ALERT_TEXT,x.COLOR_ALERT_BG),ib=w.div.withConfig({displayName:"styled__ProxyInfo",componentId:"sc-93pke0-1"})(["display:flex;flex-flow:column wrap;gap:10px;margin:0;text-align:center;font-size:15px;> h4{font-size:16px;font-weight:600;margin:0 auto;}> a{color:inherit;width:100%;}> a > span{font-size:100%;background:var(",");border-radius:16px;padding:10px;display:flex;align-items:center;justify-content:center;width:100%;margin:0 auto;word-break:break-all;}"],x.COLOR_PAPER),sb=w.div.withConfig({displayName:"styled__Content",componentId:"sc-93pke0-2"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;gap:20px;padding:20px;background:var(",");border-radius:16px;p{text-align:center;}"],x.COLOR_PAPER_DARKER),lb=w.div.withConfig({displayName:"styled__Title",componentId:"sc-93pke0-3"})(["font-size:24px;font-weight:600;margin:10px 0;"]),cb=w.div.withConfig({displayName:"styled__FAQWrapper",componentId:"sc-93pke0-4"})(["display:flex;flex-flow:column wrap;align-items:flex-start;gap:10px;margin:24px 0 0;width:100%;"]),ub=w.details.withConfig({displayName:"styled__FAQItem",componentId:"sc-93pke0-5"})(["display:flex;flex-flow:column wrap;width:100%;margin:0 auto;padding:0;line-height:1;position:relative;border-radius:",";> summary{display:flex;align-items:center;justify-content:space-between;cursor:pointer;margin:0;padding:8px 8px 8px 10px;list-style-type:none;line-height:1.2;font-weight:600;font-size:16px;&::marker,&::-webkit-details-marker{display:none;}> i{--size:26px;width:var(--size);height:var(--size);min-height:var(--size);min-width:var(--size);border-radius:var(--size);background:transparent;transition:background 0.2s ease-in-out;display:flex;align-items:center;justify-content:center;&:hover{background:",";}> svg{width:100%;height:100%;padding:0;fill:currentColor;}}}> div{padding:0 21px 21px;font-size:15px;line-height:1.8;color:var(",");}> div > ol{margin:0;padding:0 0 0 20px;}"],({open:e})=>e?"32px":"56px",({theme:e})=>e.bg3,x.COLOR_TEXT_OPACITY_70);function db(){const{chainId:e}=H();return so([e,"CowShedHooks"],([t])=>new q.CowShedHooks(t)).data}const pb=e=>il(Uf(e)).slice(0,10),jr=(e,t)=>Mf(["bytes4","bytes"],[pb(e),t]);function fb(e,t,n){const[o,a]=f.useState(!1),i=jo(),{account:s}=H(),l=db(),{contract:c}=jp(q.COW_SHED_FACTORY,Pp),u=f.useMemo(()=>{if(!(!s||!l))return l.proxyOf(s)},[s,l]);return{callback:f.useCallback(async()=>{if(!(!l||!i||!u||!c||!e||!s||!t)){a(!0);try{const m=n?[{target:s,callData:jr("send(uint256)",kt.encode(["uint256"],[t.quotient.toString()])),value:BigInt(t.quotient.toString()),isDelegateCall:!1,allowFailure:!1}]:[{target:e,callData:jr("approve(address,uint256)",kt.encode(["address","uint256"],[u,t.quotient.toString()])),value:0n,isDelegateCall:!1,allowFailure:!1},{target:e,callData:jr("transferFrom(address,address,uint256)",kt.encode(["address","address","uint256"],[u,s,t.quotient.toString()])),value:0n,isDelegateCall:!1,allowFailure:!1}],h=Ff(Date.now().toString()),T=99999999999,d=await l.signCalls(m,h,BigInt(T),i.getSigner(),kp.EIP712);return(await c.executeHooks(m,h,BigInt(T),s,d,{gasLimit:6e5})).hash}finally{a(!1)}}},[i,u,c,e,s,t,l,n]),isTxSigningInProgress:o,proxyAddress:u}}const mb=5e3,ui={refreshInterval:mb,revalidateOnFocus:!0},hb=X(void 0);function gb({explorerLink:e}){const[t,n]=f.useState({}),o=i=>s=>{s.preventDefault(),n(l=>({...l,[i]:!l[i]}))},a=[{question:"What is CoW Shed?",answer:r.jsxs(r.Fragment,{children:[r.jsx(we,{href:"https://github.com/cowdao-grants/cow-shed",children:"CoW Shed"})," is a helper contract that enhances user experience inside CoW Swap for features like"," ",r.jsx(we,{href:"https://docs.cow.fi/cow-protocol/reference/core/intents/hooks",children:"CoW Hooks"}),".",r.jsx("br",{}),r.jsx("br",{}),"This contract is deployed only once per account. This account becomes the only owner. CoW Shed will act as an intermediary account who will do the trading on your behalf.",r.jsx("br",{}),r.jsx("br",{}),"Because this contract holds the funds temporarily, it's possible the funds are stuck in some edge cases. This tool will help you recover your funds."]})},{question:"How do I recover my funds from CoW Shed?",answer:r.jsx(r.Fragment,{children:r.jsxs("ol",{children:[r.jsxs("li",{children:[e?r.jsx(we,{href:e,children:"Check in the block explorer"}):"Check in block explorer"," ","if your own CoW Shed has any token"]}),r.jsx("li",{children:"Select the token you want to recover from CoW Shed"}),r.jsx("li",{children:"Recover!"})]})})}];return r.jsx(cb,{children:a.map((i,s)=>r.jsxs(ub,{open:t[s],children:[r.jsxs("summary",{onClick:o(s),children:[i.question,r.jsx("i",{children:r.jsx(ae,{src:t[s]?tb:nb})})]}),t[s]&&r.jsx("div",{children:i.answer})]},s))})}function xb({onDismiss:e}){const[t,n]=mn(hb),[o,a]=f.useState(null),i=t?En(t):void 0,s=!!(o!=null&&o.greaterThan(0)),l=!!t&&rs(t),{ErrorModal:c,handleSetError:u}=ob(),p=Bs(),{contract:m,chainId:h}=Po(i),T=Lp(),d=Np(),{open:g}=Dp(),v=Mp(),y=f.useCallback(()=>{d({open:!1}),e()},[d,e]),{callback:b,isTxSigningInProgress:C,proxyAddress:A}=fb(i,o,l),{isLoading:I}=so(!l&&m&&A&&t?[m,A,t]:null,async([D,M,$])=>{const Z=await D.balanceOf(M);a(ne.fromRawAmount($,Z.toHexString()))},ui),{isLoading:E,data:_}=Fp(l?A:void 0,v,ui);f.useEffect(()=>{!t||!_||a(ne.fromRawAmount(t,_.toHexString()))},[t,_]);const O=I||E,S=f.useCallback(async()=>{try{const D=await b();D&&p({hash:D,summary:"Recover funds from CoW Shed Proxy"})}catch(D){console.error(D),u(D.message||D.toString())}},[b,p,u]),R=f.useCallback(()=>{T(t,void 0,void 0,n)},[T,t,n]),P=A?wo(h,"address",A):void 0;return r.jsx(ab,{children:r.jsxs(qs,{modalMode:!1,title:"CoW Shed",onDismiss:y,contentPadding:"10px",justifyContent:"flex-start",children:[r.jsx(c,{}),r.jsx(Di,{}),!g&&r.jsxs(r.Fragment,{children:[r.jsxs(sb,{children:[r.jsx(lb,{children:"Recover funds"}),r.jsxs(ib,{children:[r.jsx("h4",{children:"Proxy account:"}),P&&r.jsx(we,{href:P,children:r.jsxs("span",{children:[A," ↗"]})})]}),r.jsx($s,{currency:t,loading:!1,onClick:R}),i?r.jsxs(r.Fragment,{children:[r.jsxs("p",{children:["Balance to be recovered:",r.jsx("br",{}),o?r.jsx("b",{children:r.jsx(Q,{amount:o,defaultValue:"0",tokenSymbol:o.currency})}):O?r.jsx(st,{}):null]}),r.jsx(Le,{onClick:S,disabled:!s||C,children:C?r.jsx(st,{}):s?"Recover funds":r.jsx("span",{className:"noFunds",children:"No funds to recover"})})]}):r.jsx("div",{})]}),r.jsx(gb,{explorerLink:P})]})]})})}function yb(){const e=Up();return r.jsx(r.Fragment,{children:r.jsx(xb,{onDismiss:e})})}const Ic=new zt(0),vn=-5,vb=w.div.withConfig({displayName:"Widget",componentId:"sc-11pd08l-0"})(["background:transparent;border-radius:16px;padding:0;"]);w(vb).withConfig({displayName:"styled__Chart",componentId:"sc-12sdfqe-0"})(["min-height:200px;"]);function Sc(){return Uo().isUnlocked||is()}function Pe(){return k(Wo)}function Tb(){const e=Wp(),t=U(Wo),n=Sc(),o=Wi(zp,!1);f.useEffect(()=>{t(e?Bp:{...o,isUnlocked:n,slippage:Ic,tradeType:yo.LIMIT_ORDER})},[o,t,n,e])}const wb=()=>({isInverted:!1,isLoading:!1,isLoadingMarketRate:!1,initialRate:null,activeRate:null,marketRate:null,feeAmount:null,isTypedValue:!1,isRateFromUrl:!1,typedValue:null,isAlternativeOrderRate:!1}),{atom:De,updateAtom:St}=hs(X(wb()));var mt;(function(e){e.RateLoading="RateLoading",e.FeeExceedsFrom="FeeExceedsFrom",e.PriceIsNotSet="PriceIsNotSet",e.ZeroPrice="ZeroPrice"})(mt||(mt={}));function bb(e){const{activeRate:t,isRateLoading:n,sellAmount:o,buyAmount:a,feeAmount:i}=e;return We(t)?"PriceIsNotSet":n?"RateLoading":!(o!=null&&o.equalTo(0))&&(a==null?void 0:a.toExact())==="0"||!(a!=null&&a.equalTo(0))&&(a==null?void 0:a.toExact())==="0"?"ZeroPrice":o&&(i!=null&&i.greaterThan(o))?"FeeExceedsFrom":null}function la(){const{quote:e}=Re(),{inputCurrencyAmount:t,outputCurrencyAmount:n}=Pe(),{activeRate:o,isLoading:a}=k(De),i=e==null?void 0:e.quoteResults.quoteResponse.quote.feeAmount,s=i&&t?ne.fromRawAmount(t.currency,i):null,l={activeRate:o,feeAmount:s,isRateLoading:a,sellAmount:t,buyAmount:n};return _t(()=>bb(l),Object.values(l))}const di=15;function gr(){const{activeRate:e,marketRate:t,isLoading:n,isLoadingMarketRate:o}=k(De);return f.useMemo(()=>{const a=!e||e.equalTo(0),i=!t||t.equalTo(0);if(a||i||n||o)return 0;const s=+e.toFixed(di),l=+t.toFixed(di),p=+(s/l*100-100).toFixed(1);return!p||!Number.isFinite(p)||Number.isNaN(p)?0:p},[e,t,n,o])}const qn=X({isRateImpactAccepted:!1}),Cb=X(null,(e,t,n)=>{t(qn,()=>({...e(qn),...n}))}),Ab=w.div.withConfig({displayName:"RateImpactWarning__RateImpactWarningBox",componentId:"sc-1e1ft4h-0"})(["display:flex;align-items:center;border-radius:",";padding:16px;gap:16px;color:var(",");background:var(",");font-size:14px;font-weight:500;line-height:1.4;"],({withAcknowledge:e})=>e?"18px 18px 0 0":"18px",x.COLOR_DANGER_TEXT,x.COLOR_DANGER_BG),Ob=w.a.withConfig({displayName:"RateImpactWarning__ReadMoreLink",componentId:"sc-1e1ft4h-1"})(["display:block;color:inherit;margin:16px 0 0;text-decoration:underline;&:hover{color:inherit;}"]),_b=w.div.withConfig({displayName:"RateImpactWarning__AcknowledgeBox",componentId:"sc-1e1ft4h-2"})(["color:var(",");background:var(",");text-align:center;padding:16px 0;border-radius:0 0 16px 16px;label{cursor:pointer;}input{margin-right:5px;}"],x.COLOR_DANGER_TEXT,x.COLOR_DANGER_BG);function Ib({withAcknowledge:e=!1,onAcknowledgeChange:t,isAccepted:n,rateImpact:o,inputCurrency:a,className:i}){return o<vn?r.jsxs("div",{className:i,children:[r.jsxs(Ab,{withAcknowledge:e,children:[r.jsx("div",{children:r.jsx(Vs,{size:32})}),r.jsxs("div",{children:["Your limit price is ",Math.abs(o),"% lower than current market price. You could be selling your"," ",r.jsx(be,{token:a})," at a loss (although CoW Swap will always try to give you the best price regardless).",r.jsx(Ob,{target:"_blank",href:"https://www.investopedia.com/terms/l/limitorder.asp",children:"Read more about limit orders"})]})]}),e&&r.jsx(_b,{children:r.jsxs("label",{children:[r.jsx("input",{type:"checkbox",checked:n,onChange:l=>t==null?void 0:t(l.target.checked)}),r.jsx("span",{children:"I acknowledge the high price impact"})]})})]}):null}function Sb({feePercentage:e,feeAmount:t}){return r.jsxs(Ee,{iconSize:32,children:[r.jsx("strong",{children:"Small orders are unlikely to be executed"}),r.jsxs("p",{children:["For this order, network costs would be"," ",r.jsxs("b",{children:[e==null?void 0:e.toFixed(2),"% (",r.jsx(Q,{amount:t,tokenSymbol:t==null?void 0:t.currency}),")"]})," ","of your sell amount! Therefore, your order is unlikely to execute."]})]})}const Eb=[Tt.ApproveAndSwap],Rb=w.div.withConfig({displayName:"LimitOrdersWarnings__Wrapper",componentId:"sc-nvwn7t-0"})(["display:flex;flex-flow:column wrap;gap:10px;"]),jb=w(Ib).withConfig({displayName:"LimitOrdersWarnings__StyledRateImpactWarning",componentId:"sc-nvwn7t-1"})(["margin:10px auto 0;"]);function Ec(e){const{feeAmount:t,isConfirmScreen:n=!1,className:o}=e,{isRateImpactAccepted:a}=k(qn),i=U(Cb),s=la(),l=pn(),c=gr(),{inputCurrency:u,inputCurrencyAmount:p,outputCurrencyAmount:m}=Pe(),h=Re(),T=l&&Eb.includes(l),g=s===null&&(l===null||T)&&!h.error&&u&&!We(p)&&!We(m),v=Hl({value:t,reference:p}),y=v==null?void 0:v.greaterThan(Ji),b=l===Tt.SellNativeToken,C=c<0||y||b;f.useEffect(()=>{n&&i({isRateImpactAccepted:!1})},[i,n]);const A=f.useCallback(I=>{i({isRateImpactAccepted:I})},[i]);return C?r.jsxs(Rb,{className:o,children:[g&&r.jsx(jb,{withAcknowledge:n,isAccepted:a,rateImpact:c,inputCurrency:u,onAcknowledgeChange:A}),y&&r.jsx(Sb,{feeAmount:t,feePercentage:v}),b&&r.jsx(As,{})]}):null}function Pb({activeRate:e,amount:t,field:n,inputCurrency:o,outputCurrency:a}){if(!t||t.equalTo(0)||!e||e.equalTo(0)||!o||!a)return null;const{decimals:i}=o,{decimals:s}=a,l=te.adjustDecimalsAtoms(t,n===K.INPUT?i:s,n===K.INPUT?s:i),c=e instanceof Dt?te.fromPrice(e):e;return n===K.INPUT?ne.fromRawAmount(a,l.multiply(c).quotient):n===K.OUTPUT?ne.fromRawAmount(o,l.divide(c).quotient):null}function kb(e,t,n,o){return t?e?n&&new Dt(n.currency,t.currency,n.quotient,t.quotient):o&&new Dt(t.currency,o.currency,t.quotient,o.quotient):null}function Rc(){const e=ut(),{inputCurrency:t,outputCurrency:n,inputCurrencyAmount:o,outputCurrencyAmount:a}=Pe(),i=U(St),{limitPriceLocked:s}=k(je);return f.useCallback(l=>{const{activeRate:c,amount:u,orderKind:p,isPriceUpdate:m}=l,h=$e(p)?K.INPUT:K.OUTPUT,T=h===K.OUTPUT;if(!u||u.equalTo(0)){e({inputCurrencyAmount:null,outputCurrencyAmount:null});return}if(!s&&!m){const b={orderKind:p,[T?"outputCurrencyAmount":"inputCurrencyAmount"]:te.serializeFractionToJSON(u)};e(b);const C=kb(T,u,o,a);if(C){i({activeRate:te.fractionLikeToFraction(C),isTypedValue:!1,isRateFromUrl:!1,isAlternativeOrderRate:!1});return}}const d=Pb({activeRate:c,amount:u,field:h,inputCurrency:t,outputCurrency:n}),g=h===K.INPUT?u:d,v=h===K.OUTPUT?u:d,y={orderKind:p,...g?{inputCurrencyAmount:te.serializeFractionToJSON(g)}:void 0,...v?{outputCurrencyAmount:te.serializeFractionToJSON(v)}:void 0};e(y)},[t,n,e,o,a,s,i])}function Lb(){const{inputCurrency:e,outputCurrency:t,orderKind:n}=Pe(),{activeRate:o}=k(De),a=Ro(),i=Rc(),s=ct(),l=f.useMemo(()=>xl(s),[s]),c=ut(),u=Ni(),p=f.useCallback((d,g)=>{const v=d===K.INPUT?e:t;if(!v)return;const y=nt(g,v);l([d,Number(g)]),i({activeRate:o,amount:y,orderKind:a||d===K.INPUT?q.OrderKind.SELL:q.OrderKind.BUY})},[i,a,e,t,o,l]),m=f.useMemo(()=>({orderKind:$e(n)?q.OrderKind.BUY:q.OrderKind.SELL}),[n]),h=po(m),T=f.useCallback(d=>c({recipient:d}),[c]);return f.useMemo(()=>({onUserInput:p,onSwitchTokens:h,onChangeRecipient:T,onCurrencySelection:u}),[p,h,T,u])}function jc(e){const{isRateImpactAccepted:t}=k(qn),n=vs();return e?t:n}const Nb={[mt.RateLoading]:{text:r.jsx(Hp,{})},[mt.PriceIsNotSet]:{text:"Enter a price"},[mt.ZeroPrice]:{text:"Invalid price. Try increasing input/output amount."},[mt.FeeExceedsFrom]:{text:"Sell amount is too small"}},pi="Review limit order",Db=[Tt.ApproveAndSwap,Tt.ApproveRequired];function Mb({isTradeContextReady:e}){const t=la(),n=pn(),o=jc(!1),i=fn().onOpen,s=Ts(pi,i),l=!o||!e;if(!s)return null;if((!n||Db.indexOf(n)!==-1)&&t){const c=Nb[t];return typeof c=="function"?c():r.jsx($p,{id:c.id,disabled:!0,children:r.jsx(B,{id:"J/hVSQ",values:{0:c.text}})})}return r.jsx(ws,{confirmText:pi,validation:n,context:s,isDisabled:l})}function Fb(e,t){return fi(e.inputCurrencyInfo,t.inputCurrencyInfo)&&fi(e.outputCurrencyInfo,t.outputCurrencyInfo)&&e.isUnlocked===t.isUnlocked&&e.isRateLoading===t.isRateLoading&&e.showRecipient===t.showRecipient&&e.recipient===t.recipient&&e.widgetActions===t.widgetActions&&Ub(e.rateInfoParams,t.rateInfoParams)&&Wb(e.priceImpact,t.priceImpact)&&Xs(e.settingsState,t.settingsState)&&Ke(e.feeAmount,t.feeAmount)}function fi(e,t){return e.field===t.field&&e.label===t.label&&e.isIndependent===t.isIndependent&&Ke(e.amount,t.amount)&&Xs(e.receiveAmountInfo,t.receiveAmountInfo)&&at(e.currency)===at(t.currency)&&Ke(e.balance,t.balance)&&Ke(e.fiatAmount,t.fiatAmount)}function Ub(e,t){return e.chainId===t.chainId&&Ke(e.inputCurrencyAmount,t.inputCurrencyAmount)&&Ke(e.outputCurrencyAmount,t.outputCurrencyAmount)&&Ke(e.activeRateFiatAmount,t.activeRateFiatAmount)&&Ke(e.invertedActiveRateFiatAmount,t.invertedActiveRateFiatAmount)}function Wb(e,t){return e.loading===t.loading&&Ke(e.priceImpact,t.priceImpact)}const Bb=w.div.withConfig({displayName:"styled__TradeButtonBox",componentId:"sc-2mee6f-0"})(["margin:10px 0 0;display:flex;gap:10px;flex-direction:column;"]),zb=w.div.withConfig({displayName:"styled__FooterBox",componentId:"sc-2mee6f-1"})(["display:flex;flex-flow:column wrap;max-width:100%;padding:0 6px;gap:7px;"]),Hb=w.div.withConfig({displayName:"styled__RateWrapper",componentId:"sc-2mee6f-2"})(["display:flex;flex-flow:column wrap;width:100%;max-width:100%;gap:6px;text-align:right;color:inherit;background:var(",");border-radius:16px;","{display:flex;flex-flow:column wrap;}"],x.COLOR_PAPER_DARKER,L.upToSmall());function $b(){var S;const e=jo(),{account:t}=H(),{allowsOffchainSigning:n}=dn(),o=Pe(),a=tr(),{contract:i,chainId:s}=Is(),l=Gp(),c=ko(),u=Re(),p=gr(),m=k(je),h=Ii(o.inputCurrency,yo.LIMIT_ORDER),{maximumSendSellAmount:T}=Yp()||{},d=q.COW_PROTOCOL_VAULT_RELAYER_ADDRESS[s],{enoughAllowance:g}=Fi({account:t,amount:T||void 0,checkAllowanceAddress:d}),v=_i(),y=qp(),b=!!u.quote&&!u.isLoading&&!!u.localQuoteTimestamp,C=o.recipient||o.recipientAddress,A=o.recipientAddress||o.recipient||t,I=o.inputCurrency,E=o.outputCurrency,_=((S=u.quote)==null?void 0:S.quoteResults.quoteResponse.id)||void 0,O=m.partialFillsEnabled;return _t(()=>{if(!t||!o.inputCurrencyAmount||!o.outputCurrencyAmount||!o.inputCurrency||!o.outputCurrency||!e||!i||!b||!c)return null;const R=ne.fromRawAmount(o.inputCurrency,0);return{chainId:s,settlementContract:i,allowsOffchainSigning:n,dispatch:l,signer:e.getSigner(),rateImpact:p,permitInfo:g?void 0:h,generatePermitHook:v,getCachedPermit:y,quoteState:u,postOrderParams:{class:q.OrderClass.LIMIT,kind:o.orderKind,account:t,chainId:s,sellToken:I,buyToken:E,recipient:A,recipientAddressOrName:C,allowsOffchainSigning:n,feeAmount:R,inputAmount:o.inputCurrencyAmount,outputAmount:o.outputCurrencyAmount,sellAmountBeforeFee:o.inputCurrencyAmount,partiallyFillable:O,appData:c,quoteId:_,isSafeWallet:a}}},[t,o.inputCurrencyAmount,o.outputCurrencyAmount,o.inputCurrency,o.outputCurrency,o.orderKind,e,i,b,c,s,i,n,l,p,g,h,v,y,u,I,E,A,C,n,O,c,_,a])}const Gb=w.div.withConfig({displayName:"styled__InfoPopup",componentId:"sc-6ecsxt-0"})(["display:flex;position:relative;align-items:center;gap:12px;font-size:14px;line-height:1.3;background:",";border-radius:16px;color:inherit;padding:15px 34px 15px 15px;.icon{--size:32px;display:flex;align-items:center;width:var(--size);height:var(--size);min-width:var(--size);min-height:var(--size);color:inherit;}.icon > svg{--size:32px;width:100%;height:100%;color:inherit;opacity:0.6;> path{fill:currentColor;}}.content > a{color:inherit;text-decoration:underline;&::after{content:' ↗';display:inline-block;font-size:12px;}}"],`linear-gradient(90deg, var(${x.COLOR_PAPER}) 0%, var(${x.COLOR_PAPER_DARKER}) 100%)`),Yb=w(un).withConfig({displayName:"styled__CloseIcon",componentId:"sc-6ecsxt-1"})(["--size:16px;cursor:pointer;position:absolute;right:10px;top:10px;stroke-width:3px;transition:opacity var(",") ease-in-out;height:var(--size);width:var(--size);opacity:0.6;&:hover{opacity:1;}"],x.ANIMATION_DURATION),qb="limitOrders_showInfoBanner";function Vb(){return r.jsx(r.Fragment,{children:Vp(qb,e=>r.jsxs(Gb,{children:[r.jsx("div",{className:"icon",children:r.jsx(ae,{src:To})}),r.jsxs("div",{className:"content",children:["Your order may not fill exactly when the market price reaches your limit price."," ",r.jsx(Oo,{target:"_blank",to:"https://docs.cow.fi/cow-protocol/tutorials/cow-swap/limit#track-a-limit-order","data-click-event":tn({category:de.TRADE,action:"Click limit order fees FAQ link"}),children:"Learn more"})]}),r.jsx(Yb,{onClick:e,"data-click-event":tn({category:de.TRADE,action:"Close limit order info banner"})})]}))})}function mi(e){const t=typeof e=="number"?new Date(e*1e3):e,[n,o]=t.toISOString().split(":");return[n,o].join(":")}function hi(e){const t=typeof e=="number"?new Date(e*1e3):e,n=new Date().getTimezoneOffset()*60*1e3;return new Date(t.getTime()-n).toISOString().replace("Z","")}function gi(){const e=Date.now();return[xi(new Date(e+Eh)),xi(new Date(e+yl))]}function xi(e){return new Date(new Date(e.setMilliseconds(0)).setSeconds(0))}function Xb(e,t){if(e){const n=new Date(e*1e3);if(n>t)return n}return t}function Kb(){const e=new Date().getTimezoneOffset(),t=Math.abs(e),n=e<0?"+":"-",o=Math.floor(t/60).toString().padStart(2,"0"),a=Math.floor(t%60).toString().padStart(2,"0");return`${n}${o}:${a}`}const Qb=w.div.withConfig({displayName:"styled__Wrapper",componentId:"sc-wizteu-0"})(["color:inherit;padding:0;justify-content:space-between;display:flex;flex-flow:row wrap;width:100%;font-size:13px;font-weight:inherit;"]),Zb=w.span.withConfig({displayName:"styled__Label",componentId:"sc-wizteu-1"})(["display:flex;font-size:inherit;font-weight:inherit;color:inherit;align-self:center;justify-self:center;"]),Jb=w(Qn).withConfig({displayName:"styled__Current",componentId:"sc-wizteu-2"})(["color:inherit;font-size:",";letter-spacing:",";font-weight:inherit;display:flex;align-items:center;justify-content:space-between;background:none;border:0;outline:none;margin:0;padding:0;white-space:nowrap;cursor:pointer;text-overflow:ellipsis;overflow:hidden;&:hover{text-decoration:underline;}> span{display:inline-block;}> svg{margin:0 0 0 auto;}"],({$custom:e})=>e?"12px":"100%",({$custom:e})=>e?"-0.3px":"0"),e0=w(Zn).withConfig({displayName:"styled__ListWrapper",componentId:"sc-wizteu-3"})(["display:block;background:var(",");box-shadow:",";margin:15px 0 0 0;padding:10px 15px;border-radius:20px;outline:none;list-style:none;position:relative;z-index:2;min-width:120px;"],x.COLOR_PAPER,({theme:e})=>e.boxShadow2),yi=w(Bt).withConfig({displayName:"styled__ListItem",componentId:"sc-wizteu-4"})(["color:inherit;background:none;border:0;outline:none;margin:0 0 10px 0;padding:5px;cursor:pointer;font-size:16px;font-weight:400;position:relative;:hover{text-decoration:underline;}"]),t0=w.input.withConfig({displayName:"styled__CustomInput",componentId:"sc-wizteu-5"})(["display:flex;cursor:pointer;font-size:21px;border-radius:8px;width:100%;border:1px solid ",";color:inherit;padding:4px 8px;outline:0;background:var(",");&::-webkit-calendar-picker-indicator{filter:",";}&::-webkit-datetime-edit{color:inherit;}&::-webkit-datetime-edit[disabled]{color:",";}"],({theme:e})=>Ue(e.text,.7),x.COLOR_PAPER,({theme:e})=>e.darkMode?"invert(1)":"invert(0)",({theme:e})=>Ue(e.text,.7)),n0=w.label.withConfig({displayName:"styled__CustomLabel",componentId:"sc-wizteu-6"})(["display:flex;flex-flow:column wrap;font-size:15px;font-weight:600;gap:10px;width:100%;"]),r0=w.div.withConfig({displayName:"styled__ModalWrapper",componentId:"sc-wizteu-7"})(["display:flex;flex-flow:column wrap;height:100%;width:100%;padding:16px;min-height:150px;"]),o0=w.div.withConfig({displayName:"styled__ModalHeader",componentId:"sc-wizteu-8"})(["display:flex;width:100%;justify-content:space-between;padding:0 0 16px;color:inherit;> h3{font-size:21px;margin:0;}"]),a0=w.div.withConfig({displayName:"styled__ModalFooter",componentId:"sc-wizteu-9"})(["display:flex;width:100%;justify-content:space-between;padding:32px 0 0;gap:10px;> button{border-radius:12px;}"]),i0=w.div.withConfig({displayName:"styled__ModalContent",componentId:"sc-wizteu-10"})(["display:flex;flex-flow:column wrap;align-items:flex-start;justify-content:center;padding:16px;background:var(",");border-radius:12px;"],x.COLOR_PAPER_DARKER),s0=w(un).withConfig({displayName:"styled__CloseIcon",componentId:"sc-wizteu-11"})(["height:28px;width:28px;opacity:0.6;transition:opacity var(",") ease-in-out;&:hover{cursor:pointer;opacity:1;}> line{stroke:var(",");}"],x.ANIMATION_DURATION,x.COLOR_TEXT),l0={year:"2-digit",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1};function c0(e){const{deadline:t,customDeadline:n,isDeadlineDisabled:o,selectDeadline:a,selectCustomDeadline:i}=e,s=f.useRef(null),[[l,c],u]=f.useState(gi),p=mi(l),m=mi(c),[h,T]=f.useState(null),[d,g]=f.useState("");f.useEffect(()=>{try{const R=new Date(d).getTime(),{timeZone:P}=Intl.DateTimeFormat().resolvedOptions();R<l.getTime()?T(`Must be after ${l.toLocaleString()} ${P}`):R>c.getTime()?T(`Must be before ${c.toLocaleString()} ${P}`):T(null)}catch(R){console.error("[DeadlineSelector] Failed to parse input value to Date",d,R),T("Failed to parse date and time provided")}},[c,l,i,d]);const v=f.useMemo(()=>Tl(t),[t]),y=f.useMemo(()=>n?new Date(n*1e3).toLocaleString(void 0,l0):"",[n]),b=f.useCallback(R=>{var P;a(R),i(null),(P=s.current)==null||P.click()},[i,a]),C=f.useCallback(({target:{value:R}})=>{g(R||hi(l))},[l]),[A,I]=f.useState(!1),E=f.useCallback(()=>{var P;(P=s.current)==null||P.click(),I(!0),T(null);const R=gi();u(R),g(hi(Xb(n,R[0])))},[n]),_=f.useCallback(()=>I(!1),[]),O=f.useCallback(()=>{const R=Math.round(new Date(d+Kb()).getTime()/1e3);i(R),_()},[_,i,d]),S=n?y:t==null?void 0:t.title;return r.jsxs(Qb,{children:[r.jsx(Zb,{children:r.jsx(B,{id:"/VawHZ"})}),o?r.jsx("div",{children:r.jsx("span",{children:S})}):r.jsxs(Wt,{children:[r.jsxs(Jb,{ref:s,$custom:!!n,children:[r.jsx("span",{children:S}),r.jsx(mo,{size:"18"})]}),r.jsxs(e0,{children:[v.map(R=>r.jsx("li",{children:r.jsx(yi,{onSelect:()=>b(R),children:r.jsx(B,{id:"J/hVSQ",values:{0:R.title}})})},R.value)),r.jsx(yi,{onSelect:E,children:r.jsx(B,{id:"8Tg/JR"})})]})]}),r.jsx(nr,{isOpen:A,onDismiss:_,children:r.jsxs(r0,{children:[r.jsxs(o0,{children:[r.jsx("h3",{children:r.jsx(B,{id:"GBqQaF"})}),r.jsx(s0,{onClick:_})]}),r.jsxs(i0,{children:[r.jsxs(n0,{htmlFor:"custom-deadline",children:[r.jsx(B,{id:"OVRiRq"}),r.jsx(t0,{type:"datetime-local",id:"custom-deadline",onChange:C,min:p,max:m,value:d,pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}",onFocus:R=>{R.target.defaultValue=""}})]}),h&&r.jsx("div",{children:r.jsx(B,{id:"gj2MDZ",values:{error:h}})})]}),r.jsxs(a0,{children:[r.jsx(Jn,{onClick:_,children:"Cancel"}),r.jsx(Le,{onClick:O,disabled:!!h,children:r.jsx(B,{id:"TYVnXX"})})]})]})})]})}function u0(){const{deadlineMilliseconds:e,customDeadlineTimestamp:t}=k(je),n=U(hn),o=f.useRef(void 0),a=f.useMemo(()=>Tl(e).find(u=>u.value===e),[e]),i=Os(_s.LIMIT);f.useEffect(()=>{if(i){const u=i*60*1e3,p=gt[0].value,m=gt[gt.length-1].value;let h=u;u<p?h=p:u>m&&(h=m),n({customDeadlineTimestamp:null,deadlineMilliseconds:h})}},[i,n]);const s=!!i,l=f.useCallback(u=>{var p;n({deadlineMilliseconds:u.value,customDeadlineTimestamp:null}),(p=o.current)==null||p.click()},[n]),c=f.useCallback(u=>{n({customDeadlineTimestamp:u})},[n]);return r.jsx(c0,{deadline:a,customDeadline:t,isDeadlineDisabled:s,selectDeadline:l,selectCustomDeadline:c})}function d0(e){const t=e==null?void 0:e.postOrderParams.sellToken,{contract:n}=Po(t==null?void 0:t.address),o=Es(),a=Rs();return f.useMemo(()=>!e||!n||!o?null:{...e,erc20Contract:n,spender:o,sendBatchTransactions:a},[e,n,o,a])}class ca extends Error{}function ua(e,t){return e.customDeadlineTimestamp?e.customDeadlineTimestamp:Xp(e.deadlineMilliseconds/1e3,t)}const Ve="LIMIT ORDER SAFE BUNDLE FLOW";async function p0(e,t,n,o,a,i){if(le(Ve,"STEP 1: confirm price impact"),!(e.rateImpact<vn)&&t.priceImpact&&!await o(t.priceImpact))throw new ca;const{account:l,recipientAddressOrName:c,sellToken:u,buyToken:p,inputAmount:m,outputAmount:h,isSafeWallet:T}=e.postOrderParams;e.postOrderParams.appData=await Kp(e.postOrderParams.appData,e.typedHooks);const d={account:l,recipient:c,recipientAddress:c,marketLabel:[u.symbol,p.symbol].join(","),orderType:ue.LIMIT};le(Ve,"STEP 2: send transaction"),a.approveAndPresign(d),i==null||i();const{chainId:g,postOrderParams:v,erc20Contract:y,spender:b,dispatch:C,sendBatchTransactions:A}=e,I=ua(n,e.quoteState);try{le(Ve,"STEP 2: build approval tx");const E=await Qp({erc20Contract:y,spender:b,amountToApprove:m});le(Ve,"STEP 3: post order");const{orderId:_,signature:O,signingScheme:S,orderToSign:R}=await Ks(()=>Ln.postLimitOrder({sellAmount:v.inputAmount.quotient.toString(),buyAmount:v.outputAmount.quotient.toString(),sellToken:v.sellToken.address,buyToken:v.buyToken.address,sellTokenDecimals:v.sellToken.decimals,buyTokenDecimals:v.buyToken.decimals,kind:v.kind,partiallyFillable:v.partiallyFillable,receiver:v.recipient,validTo:I,quoteId:v.quoteId},{appData:v.appData.doc,additionalParams:{signingScheme:q.SigningScheme.PRESIGN}})),P=Qs({unsignedOrder:R,additionalParams:{...v,orderId:_,summary:Zs(v),signingScheme:S,signature:O}});le(Ve,"STEP 4: add order, but hidden"),Js({id:_,chainId:g,order:{...P,isHidden:!0},isSafeWallet:T},C),le(Ve,"STEP 5: build presign tx");const D=await Ln.getPreSignTransaction({orderId:_,account:l});le(Ve,"STEP 6: send safe tx");const M=[{to:E.to,data:E.data,value:"0",operation:0},{to:D.to,data:D.data,value:"0",operation:0}];if(await Ri({tokenContract:y,spender:b,amountToApprove:m,isBundle:!0})){const ie=await Zp({erc20Contract:y,spender:b,currency:m.currency});M.unshift({to:ie.to,data:ie.data,value:"0",operation:0})}const Z=await A(M);return Lo({chainId:g,id:_,orderCreationHash:Z,kind:v.kind,receiver:c,inputAmount:m,outputAmount:h,owner:l,uiOrderType:ue.LIMIT}),le(Ve,"STEP 7: add safe tx hash and unhide order"),el({chainId:g,order:{id:P.id,presignGnosisSafeTxHash:Z,isHidden:!1},isSafeWallet:T},C),a.sign(d),_}catch(E){le(Ve,"STEP 8: ERROR: ",E);const _=Bo(E);throw a.error(E,_,d),E}}async function f0(e,t,n,o,a,i,s){const{postOrderParams:l,typedHooks:c,rateImpact:u,permitInfo:p,chainId:m,allowsOffchainSigning:h,dispatch:T,generatePermitHook:d,quoteState:g,signer:v}=e,{account:y,recipientAddressOrName:b,sellToken:C,buyToken:A,appData:I,isSafeWallet:E,inputAmount:_,outputAmount:O}=l,S=[C.symbol,A.symbol].join(","),R={account:y,recipient:b,recipientAddress:b,marketLabel:S,orderType:ue.LIMIT};if(le("LIMIT ORDER FLOW","STEP 1: confirm price impact"),!(u<vn)&&t.priceImpact&&!await a(t.priceImpact))throw new ca;const D=ua(n,g);try{le("LIMIT ORDER FLOW","STEP 2: handle permit"),Si(p)&&await i(),l.appData=await Jp({permitInfo:p,inputToken:C,account:y,appData:I,typedHooks:c,generatePermitHook:d}),ef(l.appData.fullAppData)&&tf(l),le("LIMIT ORDER FLOW","STEP 3: send transaction"),o.trade(R),s(),le("LIMIT ORDER FLOW","STEP 4: sign and post order");const{orderId:M,signature:$,signingScheme:Z,orderToSign:ie}=await Ks(()=>Ln.postLimitOrder({sellAmount:l.inputAmount.quotient.toString(),buyAmount:l.outputAmount.quotient.toString(),sellToken:l.sellToken.address,buyToken:l.buyToken.address,sellTokenDecimals:l.sellToken.decimals,buyTokenDecimals:l.buyToken.decimals,kind:l.kind,partiallyFillable:l.partiallyFillable,receiver:l.recipient,validTo:D,quoteId:l.quoteId},{appData:l.appData.doc,additionalParams:{signingScheme:l.allowsOffchainSigning?q.SigningScheme.EIP712:q.SigningScheme.PRESIGN}}));let pe=null;if(!l.allowsOffchainSigning){const Me=await Ln.getPreSignTransaction({orderId:M,account:y});pe=(await v.sendTransaction(Me)).hash}const re=Qs({unsignedOrder:ie,additionalParams:{...l,orderId:M,summary:Zs(l),signingScheme:Z,signature:$}});return le("LIMIT ORDER FLOW","STEP 5: add pending order step"),Js({id:M,chainId:m,order:{...re,isHidden:!h},isSafeWallet:E},T),le("LIMIT ORDER FLOW","STEP 6: unhide SC order (optional)"),pe&&el({chainId:m,order:{id:re.id,presignGnosisSafeTxHash:E?pe:void 0,isHidden:!1},isSafeWallet:E},T),Lo({chainId:m,id:M,kind:l.kind,receiver:b,inputAmount:_,outputAmount:O,owner:y,uiOrderType:ue.LIMIT}),le("LIMIT ORDER FLOW","STEP 8: Sign order"),o.sign(R),M}catch(M){le("LIMIT ORDER FLOW","STEP 9: ERROR: ",M);const $=Bo(M);throw o.error(M,$,R),M}}function m0(){const e=ct();return f.useCallback(t=>{e.sendEvent({category:de.TRADE,action:"alternative_modal_completion",label:t?"placed":"not-placed"})},[e])}function h0(e,t,n,o){const{confirmPriceImpactWithoutFee:a}=js(),i=ut(),s=zo(),{isEdit:l}=Ho()||{},c=xc(),u=sc(),[p,m]=mn(dr),h=d0(e),T=tl(e==null?void 0:e.postOrderParams.inputAmount),d=m0(),g=Ps(),v=f.useCallback(async()=>{if(!e)return;const{postOrderParams:{inputAmount:C},getCachedPermit:A}=e,I=C.currency;await A(at(I))||o.requestPermitSignature(vi(e))},[o,e]),y=f.useCallback(()=>{e&&o.onSign(vi(e))},[e,o]),b=f.useCallback(async()=>{if(T){if(!h)throw new Error("safeBundleFlowContext is not set!");return h.postOrderParams.partiallyFillable=p??h.postOrderParams.partiallyFillable,p0(h,t,n,a,g,y)}return e.postOrderParams.partiallyFillable=p??e.postOrderParams.partiallyFillable,f0(e,t,n,g,a,v,y)},[v,y,a,T,p,t,h,n,e,g]);return f.useCallback(()=>b().then(C=>{o.onSuccess(C),i({recipient:null}),m(void 0),s(),u(),c(),l!==void 0&&d(l)}).catch(C=>{C instanceof ca||(C instanceof nf?o.onError(C.message||C.description):o.onError(Bo(C)))}),[b,o,i,m,l,u,c,s,d])}function vi(e){return{inputAmount:e.postOrderParams.inputAmount,outputAmount:e.postOrderParams.outputAmount}}const da=X(null);w.div.withConfig({displayName:"styled__FeeTooltipWrapper",componentId:"sc-kbasld-0"})(["display:flex;flex-flow:column wrap;align-items:center;justify-content:center;color:inherit;"]);w.div.withConfig({displayName:"styled__FeeItem",componentId:"sc-kbasld-1"})(["display:flex;flex-flow:",";align-items:flex-start;width:100%;margin:",";padding:",";border-radius:",";background:",";border-top:",";gap:4px;> i{font-size:12px;font-style:normal;color:var(",");max-width:60%;min-width:50%;font-weight:300;}> span{display:flex;flex-flow:row nowrap;align-items:center;justify-content:space-between;text-align:right;width:100%;}> span > p{margin:0;}"],({highlighted:e})=>e?"row":"column wrap",({highlighted:e})=>e?"10px 0 0":"0",({borderTop:e})=>e?"16px 10px 10px":"10px",({highlighted:e})=>e?"10px":"0",({theme:e,highlighted:t})=>t?e.paper:"transparent",({borderTop:e})=>e?`1px solid var(${x.COLOR_PAPER_DARKER})`:"none",x.COLOR_TEXT_OPACITY_25);const io=w.div.withConfig({displayName:"styled__DetailsRow",componentId:"sc-1iscs18-0"})(["display:flex;width:100%;flex-direction:row;justify-content:space-between;align-items:center;text-align:right;gap:16px;p{opacity:0.8;padding:0;margin:0;text-align:left;white-space:nowrap;}"]),g0=w(Ao).attrs({rightAlign:!0}).withConfig({displayName:"styled__StyledRateInfo",componentId:"sc-1iscs18-1"})(["font-size:13px;font-weight:400;color:inherit;gap:16px;"]),x0=w.div.withConfig({displayName:"styled__Wrapper",componentId:"sc-bl4ryp-0"})(["position:relative;"]),Pc=w.span.withConfig({displayName:"styled__LabelText",componentId:"sc-bl4ryp-1"})(["color:inherit;transition:color var(",") ease-in-out;font-size:inherit;"],x.ANIMATION_DURATION),kc=w(ae).withConfig({displayName:"styled__StyledSVG",componentId:"sc-bl4ryp-2"})(["--size:10px;margin:0 0 0 5px;width:var(--size);height:var(--size);> path{fill:var(",");transition:fill var(",") ease-in-out;}&.expanded{transform:rotate(180deg);}"],x.COLOR_TEXT,x.ANIMATION_DURATION),y0=w(Qn).withConfig({displayName:"styled__StyledMenuButton",componentId:"sc-bl4ryp-3"})(["background:none;border:none;outline:none;margin:0;position:relative;cursor:",";opacity:",";display:flex;align-items:center;background:var(",");color:inherit;padding:2px 6px;border-radius:8px;font-size:inherit;&:hover{background:var(",");color:var(",");> ",",> "," > path{fill:currentColor;color:currentColor;}}"],({disabled:e})=>e?"inherit":"pointer",({disabled:e})=>e?"0.7":"1",x.COLOR_PAPER_DARKER,x.COLOR_PRIMARY,x.COLOR_BUTTON_TEXT,Pc,kc),v0=w(Zn).withConfig({displayName:"styled__StyledMenuList",componentId:"sc-bl4ryp-4"})(["box-shadow:none;background:var(",");border:1px solid var(",");border-radius:8px;z-index:2;min-width:100%;right:0;position:absolute;white-space:nowrap;text-align:left;padding:6px;"],x.COLOR_PAPER,x.COLOR_BORDER),T0=w(Bt).withConfig({displayName:"styled__StyledMenuItem",componentId:"sc-bl4ryp-5"})(["padding:6px 12px;color:inherit;font-size:13px;cursor:pointer;border-radius:8px;font-weight:400;transition:background var(",") ease-in-out;&:hover{background:var(",");color:var(",");}"],x.ANIMATION_DURATION,x.COLOR_PRIMARY,x.COLOR_BUTTON_TEXT);function w0(e){const{isPartiallyFillable:t,className:n,partiallyFillableOverride:[o]}=e,a=o??t?"This order can be partially filled":"This order will either be filled completely or not filled.";return r.jsxs(io,{className:n,children:[r.jsxs(nl,{children:[r.jsx("p",{children:"Order type"}),r.jsx(Mo,{content:a})]}),r.jsx(b0,{...e})]})}const On=["Partially fillable","Fill or kill"];function b0({isPartiallyFillable:e,partiallyFillableOverride:t}){const[n,o]=t,a=n??e,[i]=a?On:[...On].reverse(),s=l=>o(l===On[0]);return r.jsx(Wt,{children:({isExpanded:l})=>r.jsxs(x0,{children:[r.jsxs(y0,{children:[r.jsx(Pc,{children:i}),r.jsx(kc,{src:Mr,description:"dropdown icon",className:l?"expanded":""})]}),r.jsx(v0,{portal:!1,children:On.map(c=>r.jsx(T0,{onSelect:()=>s(c),children:c},c))})]})})}const C0={DISPLAY_EXECUTION_TIME:!1},A0=w.div.withConfig({displayName:"LimitOrdersDetails__Wrapper",componentId:"sc-r4kjjj-0"})(["font-size:13px;font-weight:400;color:inherit;padding:8px;gap:7px;display:flex;flex-flow:column wrap;"]);w.div.withConfig({displayName:"LimitOrdersDetails__ArrowDownRight",componentId:"sc-r4kjjj-1"})(["display:flex;opacity:0.3;margin:0 3px 0 0;color:inherit;"]);function O0(e){const{executionPrice:t,tradeContext:n,settingsState:o,rateInfoParams:a,limitRateState:i,partiallyFillableOverride:s,children:l}=e,{account:c,recipient:u,recipientAddressOrName:p,partiallyFillable:m}=n.postOrderParams,{feeAmount:h,activeRate:T,marketRate:d}=i,g=ua(o,n.quoteState),v=new Date(g*1e3),y=f.useState(!1),[b]=y;return f.useMemo(()=>{if(!T)return"";const C=b?T.invert():T;return nn(C)},[b,T]),r.jsxs(A0,{children:[r.jsx(io,{children:r.jsx(g0,{isInvertedState:y,rateInfoParams:a})}),l,r.jsx(Ds,{}),C0.DISPLAY_EXECUTION_TIME,r.jsxs(io,{children:[r.jsxs(nl,{children:[r.jsx("p",{children:"Order expires"}),r.jsx(Mo,{content:"If your order has not been filled by this date & time, it will expire. Don't worry - expirations and order placement are free on CoW Swap!"})]}),r.jsx("span",{children:v.toLocaleString(void 0,rf)})]}),r.jsx(w0,{isPartiallyFillable:m,partiallyFillableOverride:s}),r.jsx(of,{chainId:n.chainId,recipient:p||u,account:c})]})}function _0(){const e=lt(),t=lo(),n=e==null?void 0:e.outputCurrencyAmount;return f.useMemo(()=>n?t!=null&&t.bps&&t.bps>0?n.multiply(af(t.bps)):ne.fromRawAmount(n.currency,0):null,[n,t])}function Lc({rateInfoParams:e,alwaysExpanded:t=!1}){const[n,o]=f.useState(t),a=lo(),i=_0(),s=sf(),l=Be(i).value,c=a==null?void 0:a.bps,u=f.useCallback(()=>{t||o(m=>!m)},[t]),p=r.jsx(df,{withTimelineDot:!1,partnerFeeUsd:l,partnerFeeAmount:i,partnerFeeBps:c,volumeFeeTooltip:s});return e?t?r.jsxs(r.Fragment,{children:[r.jsx(lf,{label:"Limit price",stylized:!0,rateInfoParams:e,rightAlign:!0}),r.jsx(cf,{noMargin:!0,children:p})]}):r.jsx(uf,{rateInfoParams:e,totalCosts:i,isFeeDetailsOpen:n,toggleAccordion:u,children:p}):p}const Ti="Limit Order";function I0(e){const{inputCurrencyInfo:t,outputCurrencyInfo:n,tradeContext:o,priceImpact:a,recipient:i}=e,s=f.useMemo(()=>o,[]),{account:l}=H(),{ensName:c}=dn(),u=jc(!0),p=k(je),m=k(da),h=k(De),T=mn(dr),{amount:d}=t,{amount:g}=n,v=gr(),y=ln(d,g),b=fn(),C=h0(s,a,p,b),I=v<vn?!u:!1,_=tl(d)?r.jsxs(r.Fragment,{children:["Confirm (Approve ",r.jsx(be,{token:d&&bt(d.currency),length:6})," & Limit order)"]}):"Place limit order";return r.jsx(Ls,{title:Ti,children:r.jsx(Ns,{title:Ti,account:l,ensName:c,inputCurrencyInfo:t,outputCurrencyInfo:n,onConfirm:C,onDismiss:b.onDismiss,isConfirmDisabled:I,priceImpact:a,buttonText:_,recipient:i,appData:s.postOrderParams.appData||void 0,isPriceStatic:!0,children:O=>r.jsxs(r.Fragment,{children:[s&&r.jsx(O0,{limitRateState:h,tradeContext:s,rateInfoParams:y,settingsState:p,executionPrice:m,partiallyFillableOverride:T,children:r.jsx(Lc,{})}),O,r.jsx(Ec,{isConfirmScreen:!0})]})})})}const S0=""+new URL("icon-locked-Dpe-KwP3.svg",import.meta.url).href,E0=""+new URL("icon-unlocked-DP-z6_Ap.svg",import.meta.url).href,R0=""+new URL("icon-USD-CCXbGSWS.svg",import.meta.url).href;function xr(){const{inputCurrencyAmount:e,outputCurrencyAmount:t,orderKind:n}=Pe(),o=k(De),a=ut(),i=Rc(),s=U(St),{isRateFromUrl:l}=o;return f.useCallback(c=>{const{activeRate:u,isRateFromUrl:p,isAlternativeOrderRate:m,isInitialPriceSet:h}=c,T=l&&h,d=T?l:!1;T||s(c);const g=$e(n);if(u){if(d||p||m)return;i({activeRate:u,amount:g?e:t,orderKind:n,isPriceUpdate:!0})}(u===null||u.equalTo("0"))&&a(g?{outputCurrencyAmount:null}:{inputCurrencyAmount:null})},[s,n,l,i,e,t,a])}const wi=999,j0=w.span.withConfig({displayName:"RateImpactIndicator__PercentBox",componentId:"sc-1at7l3o-0"})(["font-size:12px;display:inline-flex;align-items:center;gap:2px;color:",";"],({isPositive:e,isTooLowRate:t})=>e?`var(${x.COLOR_SUCCESS})`:t?`var(${x.COLOR_DANGER})`:`var(${x.COLOR_TEXT})`),P0=w.span.withConfig({displayName:"RateImpactIndicator__ImpactTooltip",componentId:"sc-1at7l3o-1"})(["display:block;font-size:13px;padding:5px 10px;max-width:300px;"]);function k0({rateImpact:e,inputCurrency:t}){const n=e>0,o=e>wi,a=e<vn,i=o?">"+wi:e;if(!e)return null;const s=r.jsxs(P0,{children:[n&&`Your order will execute when the market price is ${i}% better than the current market price.`,!n&&r.jsxs(r.Fragment,{children:["This price is ",i,"% lower than current market price. You could be selling your"," ",r.jsx(be,{token:t}),' at a loss! Click on "Market price" to set your limit price to the current market price.']})]});return r.jsx(vt,{wrapInContainer:!1,content:s,placement:"bottom",children:r.jsxs(j0,{isPositive:n,isTooLowRate:a,children:[r.jsxs("span",{children:["(",n&&!o?"+":"",i,"%)"]}),a&&r.jsx(Vs,{size:14})]})})}const bi=w.span.withConfig({displayName:"HeadingText__Wrapper",componentId:"sc-178i16l-0"})(["display:flex;flex-flow:row wrap;align-items:center;justify-content:flex-start;text-align:left;gap:0 3px;font-size:13px;font-weight:400;margin:auto 0;color:var(",");"],x.COLOR_TEXT_OPACITY_70),L0=w.div.withConfig({displayName:"HeadingText__TokenWrapper",componentId:"sc-178i16l-1"})(["display:flex;align-items:center;gap:4px;font-weight:600;color:var(",");"],x.COLOR_TEXT),N0=w.span.withConfig({displayName:"HeadingText__TextWrapper",componentId:"sc-178i16l-2"})(["display:flex;align-items:center;gap:4px;cursor:",";transition:opacity var(",") ease-in-out,text-decoration-color var(",") ease-in-out;text-decoration:underline;text-decoration-style:dashed;text-decoration-thickness:1px;text-underline-offset:2px;text-decoration-color:var(",");&:hover{text-decoration-color:var(",");}"],({clickable:e})=>e?"pointer":"default",x.ANIMATION_DURATION,x.ANIMATION_DURATION,x.COLOR_TEXT_OPACITY_25,x.COLOR_TEXT_OPACITY_70);function D0({inputCurrency:e,currency:t,rateImpact:n,toggleIcon:o,onToggle:a}){return t?r.jsxs(bi,{children:[o,r.jsxs(N0,{clickable:!!a,onClick:a,children:["When",r.jsxs(L0,{children:["1",r.jsx(Pn,{token:t,size:16}),r.jsx(be,{token:t})]}),"is worth",r.jsx(k0,{inputCurrency:e,rateImpact:n})]})]}):r.jsx(bi,{children:"Select input and output"})}var Nc={exports:{}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(e,t){(function(n){var o=2e3,a={s:1,n:0,d:1};function i(d,g){if(isNaN(d=parseInt(d,10)))throw T.InvalidParameter;return d*g}function s(d,g){if(g===0)throw T.DivisionByZero;var v=Object.create(T.prototype);v.s=d<0?-1:1,d=d<0?-d:d;var y=h(d,g);return v.n=d/y,v.d=g/y,v}function l(d){for(var g={},v=d,y=2,b=4;b<=v;){for(;v%y===0;)v/=y,g[y]=(g[y]||0)+1;b+=1+2*y++}return v!==d?v>1&&(g[v]=(g[v]||0)+1):g[d]=(g[d]||0)+1,g}var c=function(d,g){var v=0,y=1,b=1,C=0,A=0,I=0,E=1,_=1,O=0,S=1,R=1,P=1,D=1e7,M;if(d!=null)if(g!==void 0){if(v=d,y=g,b=v*y,v%1!==0||y%1!==0)throw T.NonIntegerParameter}else switch(typeof d){case"object":{if("d"in d&&"n"in d)v=d.n,y=d.d,"s"in d&&(v*=d.s);else if(0 in d)v=d[0],1 in d&&(y=d[1]);else throw T.InvalidParameter;b=v*y;break}case"number":{if(d<0&&(b=d,d=-d),d%1===0)v=d;else if(d>0){for(d>=1&&(_=Math.pow(10,Math.floor(1+Math.log(d)/Math.LN10)),d/=_);S<=D&&P<=D;)if(M=(O+R)/(S+P),d===M){S+P<=D?(v=O+R,y=S+P):P>S?(v=R,y=P):(v=O,y=S);break}else d>M?(O+=R,S+=P):(R+=O,P+=S),S>D?(v=R,y=P):(v=O,y=S);v*=_}else(isNaN(d)||isNaN(g))&&(y=v=NaN);break}case"string":{if(S=d.match(/\d+|./g),S===null)throw T.InvalidParameter;if(S[O]==="-"?(b=-1,O++):S[O]==="+"&&O++,S.length===O+1?A=i(S[O++],b):S[O+1]==="."||S[O]==="."?(S[O]!=="."&&(C=i(S[O++],b)),O++,(O+1===S.length||S[O+1]==="("&&S[O+3]===")"||S[O+1]==="'"&&S[O+3]==="'")&&(A=i(S[O],b),E=Math.pow(10,S[O].length),O++),(S[O]==="("&&S[O+2]===")"||S[O]==="'"&&S[O+2]==="'")&&(I=i(S[O+1],b),_=Math.pow(10,S[O+1].length)-1,O+=3)):S[O+1]==="/"||S[O+1]===":"?(A=i(S[O],b),E=i(S[O+2],1),O+=3):S[O+3]==="/"&&S[O+1]===" "&&(C=i(S[O],b),A=i(S[O+2],b),E=i(S[O+4],1),O+=5),S.length<=O){y=E*_,b=v=I+y*C+_*A;break}}default:throw T.InvalidParameter}if(y===0)throw T.DivisionByZero;a.s=b<0?-1:1,a.n=Math.abs(v),a.d=Math.abs(y)};function u(d,g,v){for(var y=1;g>0;d=d*d%v,g>>=1)g&1&&(y=y*d%v);return y}function p(d,g){for(;g%2===0;g/=2);for(;g%5===0;g/=5);if(g===1)return 0;for(var v=10%g,y=1;v!==1;y++)if(v=v*10%g,y>o)return 0;return y}function m(d,g,v){for(var y=1,b=u(10,v,g),C=0;C<300;C++){if(y===b)return C;y=y*10%g,b=b*10%g}return 0}function h(d,g){if(!d)return g;if(!g)return d;for(;;){if(d%=g,!d)return g;if(g%=d,!g)return d}}function T(d,g){if(c(d,g),this instanceof T)d=h(a.d,a.n),this.s=a.s,this.n=a.n/d,this.d=a.d/d;else return s(a.s*a.n,a.d)}T.DivisionByZero=new Error("Division by Zero"),T.InvalidParameter=new Error("Invalid argument"),T.NonIntegerParameter=new Error("Parameters must be integer"),T.prototype={s:1,n:0,d:1,abs:function(){return s(this.n,this.d)},neg:function(){return s(-this.s*this.n,this.d)},add:function(d,g){return c(d,g),s(this.s*this.n*a.d+a.s*this.d*a.n,this.d*a.d)},sub:function(d,g){return c(d,g),s(this.s*this.n*a.d-a.s*this.d*a.n,this.d*a.d)},mul:function(d,g){return c(d,g),s(this.s*a.s*this.n*a.n,this.d*a.d)},div:function(d,g){return c(d,g),s(this.s*a.s*this.n*a.d,this.d*a.n)},clone:function(){return s(this.s*this.n,this.d)},mod:function(d,g){if(isNaN(this.n)||isNaN(this.d))return new T(NaN);if(d===void 0)return s(this.s*this.n%this.d,1);if(c(d,g),a.n===0&&this.d===0)throw T.DivisionByZero;return s(this.s*(a.d*this.n)%(a.n*this.d),a.d*this.d)},gcd:function(d,g){return c(d,g),s(h(a.n,this.n)*h(a.d,this.d),a.d*this.d)},lcm:function(d,g){return c(d,g),a.n===0&&this.n===0?s(0,1):s(a.n*this.n,h(a.n,this.n)*h(a.d,this.d))},ceil:function(d){return d=Math.pow(10,d||0),isNaN(this.n)||isNaN(this.d)?new T(NaN):s(Math.ceil(d*this.s*this.n/this.d),d)},floor:function(d){return d=Math.pow(10,d||0),isNaN(this.n)||isNaN(this.d)?new T(NaN):s(Math.floor(d*this.s*this.n/this.d),d)},round:function(d){return d=Math.pow(10,d||0),isNaN(this.n)||isNaN(this.d)?new T(NaN):s(Math.round(d*this.s*this.n/this.d),d)},inverse:function(){return s(this.s*this.d,this.n)},pow:function(d,g){if(c(d,g),a.d===1)return a.s<0?s(Math.pow(this.s*this.d,a.n),Math.pow(this.n,a.n)):s(Math.pow(this.s*this.n,a.n),Math.pow(this.d,a.n));if(this.s<0)return null;var v=l(this.n),y=l(this.d),b=1,C=1;for(var A in v)if(A!=="1"){if(A==="0"){b=0;break}if(v[A]*=a.n,v[A]%a.d===0)v[A]/=a.d;else return null;b*=Math.pow(A,v[A])}for(var A in y)if(A!=="1"){if(y[A]*=a.n,y[A]%a.d===0)y[A]/=a.d;else return null;C*=Math.pow(A,y[A])}return a.s<0?s(C,b):s(b,C)},equals:function(d,g){return c(d,g),this.s*this.n*a.d===a.s*a.n*this.d},compare:function(d,g){c(d,g);var v=this.s*this.n*a.d-a.s*a.n*this.d;return(0<v)-(v<0)},simplify:function(d){if(isNaN(this.n)||isNaN(this.d))return this;d=d||.001;for(var g=this.abs(),v=g.toContinued(),y=1;y<v.length;y++){for(var b=s(v[y-1],1),C=y-2;C>=0;C--)b=b.inverse().add(v[C]);if(b.sub(g).abs().valueOf()<d)return b.mul(this.s)}return this},divisible:function(d,g){return c(d,g),!(!(a.n*this.d)||this.n*a.d%(a.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(d){var g,v="",y=this.n,b=this.d;return this.s<0&&(v+="-"),b===1?v+=y:(d&&(g=Math.floor(y/b))>0&&(v+=g,v+=" ",y%=b),v+=y,v+="/",v+=b),v},toLatex:function(d){var g,v="",y=this.n,b=this.d;return this.s<0&&(v+="-"),b===1?v+=y:(d&&(g=Math.floor(y/b))>0&&(v+=g,y%=b),v+="\\frac{",v+=y,v+="}{",v+=b,v+="}"),v},toContinued:function(){var d,g=this.n,v=this.d,y=[];if(isNaN(g)||isNaN(v))return y;do y.push(Math.floor(g/v)),d=g%v,g=v,v=d;while(g!==1);return y},toString:function(d){var g=this.n,v=this.d;if(isNaN(g)||isNaN(v))return"NaN";d=d||15;var y=p(g,v),b=m(g,v,y),C=this.s<0?"-":"";if(C+=g/v|0,g%=v,g*=10,g&&(C+="."),y){for(var A=b;A--;)C+=g/v|0,g%=v,g*=10;C+="(";for(var A=y;A--;)C+=g/v|0,g%=v,g*=10;C+=")"}else for(var A=d;g&&A--;)C+=g/v|0,g%=v,g*=10;return C}},Object.defineProperty(T,"__esModule",{value:!0}),T.default=T,T.Fraction=T,e.exports=T})()})(Nc);var M0=Nc.exports;const F0=$o(M0);function Ci(e,t=!1){if(!e||!Number(e))return new Dn(0);const{n,d:o}=new F0(e),a=t?[o,n]:[n,o];return new Dn(...a)}const U0=pf(e=>e(je).isUsdValuesMode);function W0(e){const{isInverted:t}=k(De),n=t?e==null?void 0:e.invert():e,o=nt("1",t?e==null?void 0:e.quoteCurrency:e==null?void 0:e.baseCurrency),{value:a}=Be(o?n==null?void 0:n.quote(o):null);return a}function B0(e,t){const{isInverted:n,activeRate:o,typedValue:a,isTypedValue:i}=k(De),{inputCurrency:s,outputCurrency:l}=Pe(),c=!!s&&!!l,u=f.useMemo(()=>{if(i)return a||"";if(!o||!c||o.equalTo(0))return"";const h=n?o.invert():o;return nn(h)},[o,c,n,i,a]),p=!e||!u?null:nt(u,e),{value:m}=Be(p);return t?nn(m):u}const z0=w.div.withConfig({displayName:"styled__Wrapper",componentId:"sc-es022h-0"})(["padding:16px 16px 0;width:100%;max-width:100%;display:flex;flex-flow:row wrap;color:inherit;","{gap:10px;}"],L.upToSmall()),H0=w.div.withConfig({displayName:"styled__Header",componentId:"sc-es022h-1"})(["display:flex;align-items:center;justify-content:space-between;font-size:13px;font-weight:500;width:100%;color:inherit;","{flex-flow:row wrap;gap:14px;}> span > i{font-style:normal;color:var(",");}"],L.upToSmall(),x.COLOR_TEXT),$0=w.div.withConfig({displayName:"styled__MarketRateWrapper",componentId:"sc-es022h-2"})(["display:flex;align-items:center;gap:4px;font-size:12px;font-weight:400;> i{font-style:normal;color:var(",");}"],x.COLOR_TEXT_OPACITY_70),G0=w.button.withConfig({displayName:"styled__MarketPriceButton",componentId:"sc-es022h-3"})(["color:inherit;white-space:nowrap;border:none;font-weight:500;cursor:pointer;font-size:inherit;background:transparent;padding:0;color:var(",");transition:background var(",") ease-in-out,color var(",") ease-in-out;text-decoration:underline;text-decoration-style:dashed;text-decoration-thickness:1px;text-underline-offset:2px;text-decoration-color:var(",");> svg{margin:0 0 -2px 7px;}&:disabled{cursor:default;opacity:0.7;text-decoration:none;}"],x.COLOR_TEXT,x.ANIMATION_DURATION,x.ANIMATION_DURATION,x.COLOR_TEXT_OPACITY_70),Y0=w.div.withConfig({displayName:"styled__Body",componentId:"sc-es022h-4"})(["display:flex;align-items:center;justify-content:space-between;width:100%;max-width:100%;gap:0;padding:12px 0 4px;color:inherit;"]),q0=w(cs).withConfig({displayName:"styled__NumericalInput",componentId:"sc-es022h-5"})(["display:flex;align-items:center;background:none;border:none;text-align:left;color:inherit;font-size:32px;letter-spacing:-1.5px;flex:1 1 auto;&::placeholder{opacity:0.7;color:inherit;}"]),V0=w.div.withConfig({displayName:"styled__CurrencyToggleGroup",componentId:"sc-es022h-6"})(["display:flex;align-items:center;background:transparent;overflow:hidden;margin:0 0 0 8px;"]),Dc=w.button.withConfig({displayName:"styled__ActiveCurrency",componentId:"sc-es022h-7"})(["--height:25px;--skew-width:6px;--skew-offset:-3px;--skew-angle:-10deg;--padding:10px;--gap:6px;--font-size:13px;--border-radius:8px;display:flex;align-items:center;gap:var(--gap);font-size:var(--font-size);font-weight:var(",");border:none;cursor:pointer;position:relative;height:var(--height);border-radius:var(--border-radius);transition:all 0.2s ease-in-out;background:",";color:",";padding:0 10px;&:first-child{padding-right:var(--padding);border-top-right-radius:0;border-bottom-right-radius:0;","}&:last-child{padding-left:var(--padding);border-top-left-radius:0;border-bottom-left-radius:0;","}&:hover{color:var(",");}"],x.FONT_WEIGHT_MEDIUM,({$active:e})=>e?"var("+x.COLOR_PAPER+")":"var("+x.COLOR_PAPER_DARKEST+")",({$active:e})=>e?"var("+x.COLOR_TEXT+")":"var("+x.COLOR_TEXT_OPACITY_50+")",({$active:e})=>e&&`
      &::after {
        content: '';
        position: absolute;
        right: var(--skew-offset);
        top: 0;
        bottom: 0;
        width: var(--skew-width);
        background: var(${x.COLOR_PAPER_DARKER});
        transform: skew(var(--skew-angle));
        z-index: 5;
      }
    `,({$active:e})=>e&&`
      &::before {
        content: '';
        position: absolute;
        left: var(--skew-offset);
        top: 0;
        bottom: 0;
        width: var(--skew-width);
        background: var(${x.COLOR_PAPER_DARKER});
        transform: skew(var(--skew-angle));
        z-index: 5;
      }
    `,x.COLOR_TEXT),X0=w(Dc).withConfig({displayName:"styled__UsdButton",componentId:"sc-es022h-8"})(["font-weight:var(",");min-width:40px;justify-content:center;> svg{width:10px;height:16px;color:inherit;}"],x.FONT_WEIGHT_BOLD),K0=w.span.withConfig({displayName:"styled__ActiveSymbol",componentId:"sc-es022h-9"})(["color:inherit;font-size:13px;font-weight:500;text-align:right;padding:10px 0;display:flex;gap:4px;",""],({$active:e})=>!e&&`
    > div {
    background: transparent;
    }
    > div > img {
      opacity: 0.5;
    }
    
    > ${be} {
      color: var(${x.COLOR_TEXT_OPACITY_50});
    }
  `);w.div.withConfig({displayName:"styled__ActiveIcon",componentId:"sc-es022h-10"})(["--size:19px;color:inherit;width:var(--size);min-width:var(--size);height:var(--size);min-height:var(--size);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;margin:0 2px 0 0;transition:color var(",") ease-in-out,background var(",") ease-in-out;background:transparent;border:1px solid var(",");&:hover{color:var(",");background:var(",");border-color:var(",");}"],x.ANIMATION_DURATION,x.ANIMATION_DURATION,x.COLOR_PAPER_DARKEST,x.COLOR_TEXT,x.COLOR_PAPER,x.COLOR_PAPER);const Pr=w(st).withConfig({displayName:"styled__RateLoader",componentId:"sc-es022h-11"})(["margin:5px;"]),Q0=w.div.withConfig({displayName:"styled__EstimatedRate",componentId:"sc-es022h-12"})(["display:flex;width:100%;justify-content:space-between;min-height:36px;margin:0;padding:12px 10px 14px;font-size:16px;border-radius:0 0 16px 16px;font-weight:500;color:var(",");background:var(",");border:2px solid var(",");> b{display:flex;flex-flow:row nowrap;font-weight:inherit;text-align:left;transition:opacity var(",") ease-in-out;color:inherit;}> b svg{opacity:0.7;transition:opacity var(",") ease-in-out;color:inherit;&:hover{opacity:1;}}> span > i{font-style:normal;color:inherit;opacity:0.7;}> span{display:flex;align-items:center;font-size:13px;font-weight:400;color:var(",");}"],x.COLOR_TEXT,x.COLOR_PAPER,x.COLOR_PAPER_DARKER,x.ANIMATION_DURATION,x.ANIMATION_DURATION,x.COLOR_TEXT_OPACITY_70),Z0=w.span.withConfig({displayName:"styled__LockIcon",componentId:"sc-es022h-13"})(["--size:19px;position:relative;display:flex;align-items:center;justify-content:center;gap:4px;color:inherit;border-radius:var(--size);width:var(--size);min-width:var(--size);height:var(--size);border:1px solid var(",");cursor:pointer;transition:border-color var(",") ease-in-out,background var(",") ease-in-out;&:hover{border-color:var(",");background:var(",");}"],x.COLOR_PAPER_DARKEST,x.ANIMATION_DURATION,x.ANIMATION_DURATION,x.COLOR_PAPER,x.COLOR_PAPER);function J0(){const{chainId:e}=H(),{isInverted:t,activeRate:n,isLoading:o,marketRate:a,isLoadingMarketRate:i,initialRate:s}=k(De),l=xr(),c=U(St),u=k(da),{limitPriceLocked:p,partialFillsEnabled:m}=k(je),h=U(hn),T=W0(u),[d,g]=f.useState(!1),[v,y]=f.useState(""),[b,C]=mn(U0),{inputCurrency:A,outputCurrency:I,inputCurrencyAmount:E,outputCurrencyAmount:_}=Pe(),O=gr(),S=!!A&&!!I,R=A==null?void 0:A.symbol,P=I==null?void 0:I.symbol,D=t?I:A,M=t?A:I,$=a&&!a.equalTo(0)?nn(t?a.invert():a):null,{value:Z}=Be($&&M?nt($,M):null),ie=b?"$"+nn(Z):$,pe=B0(M,b),re=ff(M),Me=f.useCallback(J=>{if(J===""){y(""),c({typedValue:""}),l({activeRate:null,isTypedValue:!0,isRateFromUrl:!1,isAlternativeOrderRate:!1});return}const se=J.slice(pe.length),Fe=J.endsWith("."),me=J.includes(".")&&/^0+$/.test(se);if(Fe||me){if(y(se),Fe&&!me){const Oe=J.slice(0,-1),dt=re(Oe,b);c({typedValue:dt}),l({activeRate:Ci(dt,t),isTypedValue:!0,isRateFromUrl:!1,isAlternativeOrderRate:!1})}return}y("");const he=re(J,b);c({typedValue:he}),l({activeRate:Ci(he,t),isTypedValue:!0,isRateFromUrl:!1,isAlternativeOrderRate:!1})},[b,t,l,c,pe,re]),z=f.useCallback(()=>{l({activeRate:We(a)?s:a,isTypedValue:!1,isRateFromUrl:!1,isAlternativeOrderRate:!1})},[a,s,l]),fe=f.useCallback(()=>{c({isInverted:!t,isTypedValue:!1})},[t,c]),Ce=f.useCallback(()=>{b?C(!1):c({isInverted:!t,isTypedValue:!1})},[t,c,b,C]),Ae=f.useCallback(J=>{J.stopPropagation(),h({limitPriceLocked:!p})},[p,h]),Ye=f.useMemo(()=>i||!P||!R?!0:a&&!a.equalTo(0)?n==null?void 0:n.equalTo(a):!!s&&(n==null?void 0:n.equalTo(s)),[n,a,i,s,R,P]);return f.useEffect(()=>{if(d||We(E)||We(_)||!A||!I)return;const J=mf(e,A,I)||ns(e,E,_),[se,Fe]=[at(J),at(A)];c({isInverted:se!==Fe}),g(!0)},[d,e,A,I,E,_,c]),f.useEffect(()=>{g(!1)},[A,I]),r.jsxs(r.Fragment,{children:[r.jsxs(z0,{children:[r.jsxs(H0,{children:[r.jsx(D0,{inputCurrency:A,currency:D,rateImpact:O,toggleIcon:r.jsx(vt,{content:"When locked, the limit price stays fixed when changing the amounts. When unlocked, the limit price will update based on the amount changes.",wrapInContainer:!0,placement:"top-start",children:r.jsx(Z0,{onClick:Ae,children:r.jsx(ae,{src:p?S0:E0,width:12,height:10})})}),onToggle:fe}),S&&(i||ie)&&r.jsxs($0,{children:[r.jsx("i",{children:"Market:"})," ",r.jsx(G0,{disabled:Ye,onClick:z,children:i?r.jsx(Pr,{size:"14px"}):ie})]})]}),r.jsxs(Y0,{children:[o&&S?r.jsx(Pr,{}):r.jsx(q0,{$loading:!1,id:"rate-limit-amount-input",prependSymbol:b?"$":"",value:pe+v,onUserInput:Me}),M&&r.jsxs(V0,{children:[r.jsx(Dc,{onClick:Ce,$active:!b,children:r.jsxs(K0,{$active:!b,children:[r.jsx(Pn,{token:M,size:16}),r.jsx(be,{token:M})]})}),r.jsx(X0,{onClick:()=>C(J=>!J),$active:b,children:r.jsx(ae,{src:R0})})]})]})]}),r.jsxs(Q0,{children:[r.jsx("b",{children:i?r.jsx(Pr,{size:"14px"}):u?b?r.jsx(Eo,{amount:T}):r.jsx(fs,{executionPrice:u,isInverted:t,hideFiat:!0}):"-"}),r.jsxs("span",{children:[m?"Est. partial fill price":"Estimated fill price",r.jsx(Ft,{text:"Network costs (incl. gas) are covered by filling your order when the market price is better than your limit price."})]})]})]})}var Ai;(function(e){e.TOGGLE_SETTINGS="Toggle Limit Order Settings",e.CUSTOM_RECIPIENT="Custom Recipient",e.PARTIAL_EXECUTIONS="Enable Partial Executions",e.PRICE_POSITION="Limit Price Position",e.LOCK_PRICE="Lock Limit Price",e.USD_MODE="Global USD Mode",e.TABLE_POSITION="Orders Table Position"})(Ai||(Ai={}));function Mc(){const e=ct(),t=(o,a)=>{e.sendEvent({category:de.LIMIT_ORDER_SETTINGS,action:o,...a&&{label:a}})},n=(o,a,i)=>{t(o,i?a?i[0]:i[1]:a?"Enabled":"Disabled")};return{openSettings(){t("Toggle Limit Order Settings")},toggleCustomRecipient(o){n("Custom Recipient",o)},togglePartialExecutions(o){n("Enable Partial Executions",o)},changeLimitPricePosition(o,a){t("Limit Price Position",`${o} -> ${a}`)},toggleLockLimitPrice(o){n("Lock Limit Price",o)},toggleGlobalUsdMode(o){n("Global USD Mode",o)},toggleOrdersTablePosition(o){n("Orders Table Position",o,["Left","Right"])}}}const eC=w.button.withConfig({displayName:"Settings__DropdownButton",componentId:"sc-jxysqp-0"})(["background:var(",");color:inherit;border:1px solid var(",");border-radius:12px;padding:10px 34px 10px 12px;width:180px;cursor:pointer;font-size:14px;display:flex;align-items:center;justify-content:space-between;position:relative;transition:all 0.2s ease-in-out;&::after{content:'▼';position:absolute;right:12px;top:50%;transform:translateY(-50%);font-size:10px;transition:transform 0.2s ease-in-out;color:var(",");}&:hover{border-color:var(",");background:var(",");}&:focus{outline:none;}"],x.COLOR_PAPER_DARKER,x.COLOR_BORDER,x.COLOR_PRIMARY_OPACITY_50,x.COLOR_PRIMARY_OPACITY_25,x.COLOR_PRIMARY_OPACITY_10),tC=w.div.withConfig({displayName:"Settings__DropdownList",componentId:"sc-jxysqp-1"})(["display:",";position:absolute;top:calc(100% + 8px);right:0;background:var(",");border:1px solid var(",");border-radius:12px;padding:6px;width:180px;z-index:100;box-shadow:0 4px 12px rgba(0,0,0,0.15);"],({isOpen:e})=>e?"block":"none",x.COLOR_PAPER,x.COLOR_BORDER),nC=w.div.withConfig({displayName:"Settings__DropdownItem",componentId:"sc-jxysqp-2"})(["padding:10px 12px;border-radius:8px;cursor:pointer;font-size:14px;transition:all 0.15s ease-in-out;color:inherit;&:hover{background:var(",");transform:translateX(2px);}&:active{transform:translateX(2px) scale(0.98);}"],x.COLOR_PRIMARY_OPACITY_10),rC=w.div.withConfig({displayName:"Settings__DropdownContainer",componentId:"sc-jxysqp-3"})(["position:relative;user-select:none;"]),oC=w.div.withConfig({displayName:"Settings__SettingsRow",componentId:"sc-jxysqp-4"})(["display:flex;justify-content:space-between;align-items:center;gap:15px;font-weight:400;color:inherit;font-size:14px;"]),aC=w.div.withConfig({displayName:"Settings__SettingsLabel",componentId:"sc-jxysqp-5"})(["display:flex;align-items:center;gap:5px;"]),Oi={top:"Top",between:"Between currencies",bottom:"Bottom"};function iC({state:e,onStateChanged:t}){const n=Mc(),[o,a]=f.useState(!1),{showRecipient:i,partialFillsEnabled:s,limitPricePosition:l,limitPriceLocked:c,ordersTableOnLeft:u}=e,p=f.useCallback(()=>{const y=!i;n.toggleCustomRecipient(y),t({...e,showRecipient:y})},[n,t,e,i]),m=f.useCallback(()=>{const y=!s;n.togglePartialExecutions(y),t({...e,partialFillsEnabled:y})},[n,t,e,s]),h=f.useCallback(y=>b=>{b.stopPropagation(),n.changeLimitPricePosition(l,y),t({...e,limitPricePosition:y}),a(!1)},[n,t,e,l]),T=f.useCallback(()=>{const y=!c;n.toggleLockLimitPrice(y),t({...e,limitPriceLocked:y})},[n,t,e,c]),d=f.useCallback(()=>{const y=!u;n.toggleOrdersTablePosition(y),t({...e,ordersTableOnLeft:y})},[n,t,e,u]),g=y=>{y.stopPropagation(),a(!o)},v=y=>{y.stopPropagation()};return r.jsx("div",{onClick:v,children:r.jsxs(Hi,{children:[r.jsx($i,{children:"Limit Order Settings"}),r.jsx(Pt,{title:"Custom Recipient",tooltip:"Allows you to choose a destination address for the swap other than the connected one.",value:i,toggle:p}),r.jsx(Pt,{title:"Enable Partial Executions",tooltip:r.jsxs(r.Fragment,{children:["Allow you to chose whether your limit orders will be ",r.jsx("i",{children:"Partially fillable"})," or ",r.jsx("i",{children:"Fill or kill"}),".",r.jsx("br",{}),r.jsx("br",{}),r.jsx("i",{children:"Fill or kill"})," orders will either be filled fully or not at all.",r.jsx("br",{}),r.jsx("i",{children:"Partially fillable"})," orders may be filled partially if there isn't enough liquidity to fill the full amount."]}),value:s,toggle:m}),r.jsx(Pt,{title:"Lock Limit Price",tooltip:"When enabled, the limit price stays fixed when changing the BUY amount. When disabled, the limit price will update based on the BUY amount changes.",value:c,toggle:T}),r.jsx(Pt,{title:jn.LEFT_ALIGNED.title,tooltip:jn.LEFT_ALIGNED.tooltip,value:u,toggle:d}),r.jsxs(oC,{children:[r.jsxs(aC,{children:["Limit Price Position ",r.jsx(Ft,{text:"Choose where to display the limit price input."})]}),r.jsxs(rC,{children:[r.jsx(eC,{onClick:g,children:Oi[l]}),r.jsx(tC,{isOpen:o,children:Object.entries(Oi).map(([y,b])=>r.jsx(nC,{onClick:h(y),children:b},y))})]})]})]})})}function sC(){const e=k(je),t=U(hn),n=Mc(),o=ut(),a=f.useCallback(i=>{t(i),i.showRecipient===!1&&o({recipient:void 0,recipientAddress:void 0})},[t,o]);return r.jsx(hf,{children:r.jsxs(Wt,{children:[r.jsx(Gi,{onClick:()=>n.openSettings(),children:r.jsx(Yi,{})}),r.jsx(qi,{portal:!1,children:r.jsx(Vi,{children:r.jsx(Bt,{onSelect:()=>null,children:r.jsx("div",{onClick:i=>i.stopPropagation(),onMouseDown:i=>i.stopPropagation(),onMouseUp:i=>i.stopPropagation(),children:r.jsx(iC,{state:e,onStateChanged:a})})})})})]})})}const lC=[{content:"Set any limit price and time horizon"},{content:"FREE order placement and cancellation"},{content:"Place multiple orders using the same balance"},{content:"Receive surplus of your order"},{content:"Protection from MEV by default"},{content:r.jsx("span",{children:"Place orders for higher than available balance!"})}],Qt={title:"Want to try out limit orders?",subtitle:"Get started!",orderType:"partially fillable",buttonText:"Get started with limit orders",buttonLink:"https://cow.fi/learn/cow-swap-improves-the-limit-order-experience-with-partially-fillable-limit-orders"};function Fc(){const{inputCurrency:e,outputCurrency:t,inputCurrencyAmount:n,outputCurrencyAmount:o,inputCurrencyBalance:a,outputCurrencyBalance:i,inputCurrencyFiatAmount:s,outputCurrencyFiatAmount:l,recipient:c,isUnlocked:u,orderKind:p}=Pe(),m=k(je),h=$e(p),{feeAmount:T}=k(De),{isLoading:d}=Re(),g=ln(n,o),v=Lb(),{showRecipient:y,isUsdValuesMode:b}=m,C=y||!!c,A=sn(),I=f.useMemo(()=>h?n:o,[h,n,o]);sr({amount:I});const E={field:K.INPUT,label:h?"Sell":"You sell at most",currency:e,amount:n,isIndependent:h,balance:a,fiatAmount:s,receiveAmountInfo:null,isUsdValuesMode:b},_={field:K.OUTPUT,label:h?"Receive at least":"Buy exactly",currency:t,amount:o,isIndependent:!h,balance:i,fiatAmount:l,receiveAmountInfo:null,isUsdValuesMode:b},O={inputCurrencyInfo:E,outputCurrencyInfo:_,isUnlocked:u,isRateLoading:d,showRecipient:C,recipient:c,rateInfoParams:g,priceImpact:A,settingsState:m,feeAmount:T,widgetActions:v};return r.jsx(cC,{...O})}const cC=Y.memo(e=>{const{inputCurrencyInfo:t,outputCurrencyInfo:n,isUnlocked:o,isRateLoading:a,widgetActions:i,showRecipient:s,recipient:l,rateInfoParams:c,priceImpact:u,feeAmount:p}=e,m=$b(),h=ut(),T=la(),{isOpen:d}=gf(),{search:g}=Ot(),v=f.useCallback(()=>h({isUnlocked:!0}),[h]),{isLimitOrdersUpgradeBannerEnabled:y}=xf(),b=Ro();f.useEffect(()=>{g.includes("skipLockScreen")&&v()},[g,v]);const C=!!m,A={amount:t.amount,fiatAmount:t.fiatAmount,balance:t.balance,label:t.label},I={amount:n.amount,fiatAmount:n.fiatAmount,balance:n.balance,label:n.label},E=b?null:r.jsx(Hb,{children:r.jsx(J0,{})}),_={settingsWidget:r.jsx(sC,{}),lockScreen:!o&&!y?r.jsx(Ko,{id:"limit-orders",items:lC,buttonLink:Qt.buttonLink,title:Qt.title,subtitle:Qt.subtitle,orderType:Qt.orderType,buttonText:Qt.buttonText,handleUnlock:v}):void 0,topContent:e.settingsState.limitPricePosition==="top"?E:void 0,middleContent:e.settingsState.limitPricePosition==="between"?E:void 0,bottomContent(S){return r.jsxs(r.Fragment,{children:[e.settingsState.limitPricePosition==="bottom"&&E,r.jsxs(zb,{children:[r.jsx(u0,{}),r.jsx(Lc,{rateInfoParams:c,alwaysExpanded:!0})]}),r.jsx(Ec,{feeAmount:p}),S,r.jsx(Bb,{children:r.jsx(Mb,{isTradeContextReady:C})})]})},outerContent:r.jsx(r.Fragment,{children:o&&r.jsx(Vb,{})})},O={compactView:!0,recipient:l,showRecipient:s,isTradePriceUpdating:a,priceImpact:u,disablePriceImpact:T===mt.FeeExceedsFrom,disableQuotePolling:d,hideTradeWarnings:!!T};return r.jsx(fo,{slots:_,actions:i,params:O,inputCurrencyInfo:t,outputCurrencyInfo:n,confirmModal:m?r.jsx(I0,{recipient:l,tradeContext:m,priceImpact:u,inputCurrencyInfo:A,outputCurrencyInfo:I}):null})},Fb);function uC(){return dC(),pC(),fC(),null}function dC(){const{order:e}=Ho()||{},t=ut(),n=U(dr),o=U(hn),a=U(Wo),{receiver:i,owner:s}=e||{},l=i&&i!==s?i:void 0,{name:c}=Ys(l);return f.useEffect(()=>{if(e){a({...yf,isUnlocked:!0});const{inputToken:u,outputToken:p,sellAmount:m,feeAmount:h,buyAmount:T,kind:d,partiallyFillable:g}=e,v=(BigInt(m)+BigInt(h)).toString();t({inputCurrencyId:u.address,outputCurrencyId:p.address,inputCurrencyAmount:v,outputCurrencyAmount:T,orderKind:d,recipient:c||l,recipientAddress:l}),n(g),o(xC(e,!!l))}},[c,l]),null}function pC(){const e=xr(),t=U(St),{inputCurrencyAmount:n,outputCurrencyAmount:o}=Pe(),[a,i]=f.useState(!1);return f.useEffect(()=>{!n&&!o&&i(!1)},[n,o]),f.useEffect(()=>{if(!a&&n&&o){i(!0),t({marketRate:null});const s=te.fromPrice(new Dt({baseAmount:n,quoteAmount:o}));e({activeRate:s,isTypedValue:!1,isRateFromUrl:!1,isAlternativeOrderRate:!0})}},[n,a,o,e,t]),null}function fC(){const{chainId:e,account:t}=H(),n=Nt(e),o=Nt(t),a=zo();return f.useEffect(()=>{(n&&e!==n||o&&o!==t)&&a()},[e,t,n,o,a]),null}function mC(e){return"validTo"in e?[new Date(e.creationTime),new Date(+e.validTo*1e3)]:[e.creationTime,e.expirationTime]}function hC(e){const[t,n]=mC(e),o=n.getTime()-t.getTime();return Math.round(o)}function gC(e){return gt.find(({value:t})=>{const n=t/e;return n>.9&&n<1.1})}function xC(e,t){const n={showRecipient:t,partialFillsEnabled:e.partiallyFillable},o=hC(e),a=gC(o);if(a)return{...n,deadlineMilliseconds:a.value};const i=Math.round((Date.now()+o)/1e3);return{...n,customDeadlineTimestamp:i}}function yC(){const{marketRate:e,feeAmount:t}=k(De),{inputCurrencyAmount:n,outputCurrencyAmount:o,orderKind:a}=Pe(),{partialFillsEnabled:i}=k(je),s=U(da),{fullAppData:l}=ko()||{},c=(n==null?void 0:n.currency)&&bt(n.currency),u=(o==null?void 0:o.currency)&&bt(o.currency),p=_t(()=>{try{if(e&&!e.equalTo("0")&&c&&u)return te.toPrice(e,c,u)}catch(T){console.error(`[ExecutionPriceUpdater] Failed to parse the market price for ${c==null?void 0:c.address} and ${u==null?void 0:u.address}`,e==null?void 0:e.numerator.toString(),e==null?void 0:e.denominator.toString(),T)}return null},[e,c,u]),m=t==null?void 0:t.quotient.toString(),h=p&&m&&n&&o&&ts(void 0,p,m,n,o,a,l,i);return yt(()=>{s(null)},[c,u,s]),yt(()=>{h&&h.greaterThan(0)&&s(h)},[h,s]),null}function vC(){return Tb(),null}function TC(){const{inputCurrency:e,outputCurrency:t}=Pe(),[n,o]=f.useState(!1),a=e&&bt(e),i=t&&bt(t),s=Nn(a),l=Nn(i);f.useEffect(()=>{o(!!(s!=null&&s.isLoading)||!!(l!=null&&l.isLoading))},[s==null?void 0:s.isLoading,l==null?void 0:l.isLoading]);const c=ar(async()=>{if(console.debug("[useGetInitialPrice] Fetching price"),!(s!=null&&s.price)||!(l!=null&&l.price))return null;const u=te.fromPrice(s.price),p=te.fromPrice(l.price);return u.divide(p)},[s==null?void 0:s.price,l==null?void 0:l.price],null);return _t(()=>({price:c,isLoading:n}),[c,n])}function wC(){const{inputCurrencyId:e,outputCurrencyId:t,chainId:n}=Uo(),{isTypedValue:o,activeRate:a}=k(De),i=U(St),s=xr(),[l,c]=f.useState(o),{price:u,isLoading:p}=TC(),m=Nt(u),h=!!a;return f.useEffect(()=>{c(o)},[o]),f.useLayoutEffect(()=>{i({initialRate:u,isLoading:l?!1:p})},[l,u,p,i]),f.useLayoutEffect(()=>{const T=!!(h&&u&&(m!=null&&m.equalTo(u)));!u||l||p||T||(c(!0),s({activeRate:u,isInitialPriceSet:!0,isTypedValue:!1,isRateFromUrl:!1,isAlternativeOrderRate:!1}),i({isLoading:p}))},[l,i,s,u,p,m,h]),f.useLayoutEffect(()=>{c(!1)},[e,t,n]),null}function bC(){const e=lt(),t=U(St),n=e==null?void 0:e.inputCurrency,o=e==null?void 0:e.outputCurrency,a=n&&bt(n),i=o&&bt(o),{price:s,isLoading:l}=CC(a,i);yt(()=>{t({marketRate:s,isLoadingMarketRate:l})},[s,l,t]);const{quote:c}=Re(),u=c==null?void 0:c.quoteResults.quoteResponse.quote.feeAmount,p=n&&u?ne.fromRawAmount(n,u):null;return yt(()=>{t({feeAmount:p})},[p,t]),null}function CC(e,t){const n=Nn(e),o=Nn(t);return f.useMemo(()=>{const a=!!(n!=null&&n.isLoading)||!!(o!=null&&o.isLoading);if(!(n!=null&&n.price)||!(o!=null&&o.price))return{price:null,isLoading:a};const i=te.fromPrice(n.price),s=te.fromPrice(o.price);return{price:i.divide(s),isLoading:a}},[n==null?void 0:n.price,n==null?void 0:n.isLoading,o==null?void 0:o.price,o==null?void 0:o.isLoading])}function AC(){const e=xr(),t=U(St),{inputCurrencyId:n,outputCurrencyId:o}=Uo(),a=`${n||""}${o||""}`,i=Nt(a);f.useEffect(()=>{!a||!i||a===i||t({isRateFromUrl:!1})},[a,i,t]);const s=f.useMemo(()=>({onAmountsUpdate:l=>{const c=new Dt({baseAmount:l.inputAmount,quoteAmount:l.outputAmount});e({activeRate:c,isTypedValue:!1,isRateFromUrl:!0,isAlternativeOrderRate:!1})}}),[e]);return ur(s),null}function OC(){const{account:e,chainId:t}=H(),n=vf(t),o=f.useMemo(()=>n.reduce((a,i)=>(er(i)===ue.LIMIT&&a.push(i.id),a),[]).join(","),[n]);return f.useEffect(()=>{e&&t&&o&&Tf({account:e,chainId:t,pendingOrderIds:o,openedLimitPage:!0},"limit")},[e,t,o]),null}function _C(){const e=ut(),{isVisible:t}=wf();return f.useEffect(()=>{t||e({isUnlocked:!0})},[t,e]),null}const Uc=450,IC=w.div.withConfig({displayName:"AlternativeLimitOrder__Wrapper",componentId:"sc-l9n8qr-0"})(["display:flex;flex-flow:column wrap;width:100%;max-width:","px;"],Uc);function SC(){const e=zo(),{isEdit:t}=Ho()||{};if(t===void 0)return null;const n=`${t?"Edit":"Recreate"} limit order`;return r.jsx(IC,{children:r.jsx(qs,{modalMode:!0,title:n,onDismiss:e,maxWidth:Uc,children:r.jsx(Fc,{})})})}const EC="1800px";function RC(){const e=Sc(),{chainId:t,account:n}=H(),o=Ws(t,n,ue.LIMIT),{hideOrdersTable:a}=Fo(),{ordersTableOnLeft:i}=k(je);return r.jsxs(Cc,{isUnlocked:e,secondaryOnLeft:i,maxWidth:EC,hideOrdersTable:a,children:[r.jsx(Ac,{children:r.jsx(Fc,{})}),!a&&r.jsx(Oc,{children:r.jsx(bc,{orderType:Ct.LIMIT,orders:o})})]})}function jC(){const e=bf();return r.jsxs(r.Fragment,{children:[r.jsx(lr,{orderClass:"limit",slippageBips:Vn(Ic)}),r.jsx(bC,{}),r.jsx(vC,{}),r.jsx(yC,{}),r.jsx(_C,{}),e?r.jsxs(r.Fragment,{children:[r.jsx(uC,{}),r.jsx(SC,{})]}):r.jsxs(r.Fragment,{children:[r.jsx(wC,{}),r.jsx(AC,{}),r.jsx(OC,{}),r.jsx(RC,{})]}),r.jsx(Ht,{title:Ut.LIMIT_ORDERS})]})}function PC(){return Cf().chainId?r.jsxs(r.Fragment,{children:[r.jsx(Ht,{title:Ut.SWAP}),r.jsx(cl,{}),r.jsx(Af,{})]}):r.jsx(kC,{})}function kC(){var l;const{chainId:e}=H(),t=Ot();if(!e)return null;const n=Of(e),o=new URLSearchParams(t.search),a=o.get("inputCurrency")||n.inputCurrencyId||((l=_f[e])==null?void 0:l.symbol),i=o.get("outputCurrency")||n.outputCurrencyId||void 0;o.delete("inputCurrency"),o.delete("outputCurrency"),o.delete("chain");const s=bs({chainId:String(e),inputCurrencyId:a,outputCurrencyId:i,inputCurrencyAmount:void 0,outputCurrencyAmount:void 0,orderKind:void 0},W.SWAP);return r.jsx(Rn,{to:{...t,pathname:s,search:o.toString()}})}function LC(){return r.jsxs(r.Fragment,{children:[r.jsx(Ht,{title:Ut.YIELD}),r.jsx(jm,{}),r.jsx(Im,{})]})}const NC=f.lazy(()=>et(()=>import("./index-B7nSgaSJ.js"),__vite__mapDeps([12,1,2,3,4,5,6,7,8]),import.meta.url)),DC=f.lazy(()=>et(()=>import("./index-CPsYZhZD.js"),__vite__mapDeps([13,1,2,3,4,5,6,7,8,14]),import.meta.url)),MC=f.lazy(()=>et(()=>import("./index-DW03tDzx.js"),__vite__mapDeps([15,1,2,3,4,5,6,7,8]),import.meta.url)),kr=r.jsx(Se,{url:kf}),FC=f.lazy(()=>et(()=>import("./index-Dg-7T66f.js"),__vite__mapDeps([16,1,2,3,4,5,6,7,11,10,8]),import.meta.url)),UC=f.lazy(()=>et(()=>import("./index-B7nSgaSJ.js"),__vite__mapDeps([12,1,2,3,4,5,6,7,8]),import.meta.url));function Se({url:e}){return f.useEffect(()=>{window.location.replace(e)},[e]),null}function WC({route:e,element:t,key:n}){return r.jsx(oe,{path:e,element:r.jsx(f.Suspense,{fallback:r.jsx(Qo,{}),children:t})},n)}const BC=[{route:W.LIMIT_ORDER,element:r.jsx(jC,{})},{route:W.YIELD,element:r.jsx(LC,{})},{route:W.LONG_LIMIT_ORDER,element:r.jsx(qr,{path:"/limit"})},{route:W.ADVANCED_ORDERS,element:r.jsx(Xw,{})},{route:W.LONG_ADVANCED_ORDERS,element:r.jsx(qr,{path:"/advanced"})},{route:W.ABOUT,element:r.jsx(Se,{url:Pf})},{route:W.FAQ,element:r.jsx(Se,{url:Et})},{route:W.FAQ_PROTOCOL,element:r.jsx(Se,{url:Et})},{route:W.FAQ_TOKEN,element:r.jsx(Se,{url:Et})},{route:W.FAQ_TRADING,element:r.jsx(Se,{url:Et})},{route:W.FAQ_LIMIT_ORDERS,element:r.jsx(Se,{url:Et})},{route:W.FAQ_ETH_FLOW,element:r.jsx(Se,{url:Et})},{route:W.PLAY_COWRUNNER,element:r.jsx(DC,{})},{route:W.PLAY_MEVSLICER,element:r.jsx(MC,{})},{route:W.PRIVACY_POLICY,element:kr},{route:W.COOKIE_POLICY,element:kr},{route:W.TERMS_CONDITIONS,element:kr}];function zC(){return r.jsx(f.Suspense,{fallback:r.jsx(st,{}),children:r.jsxs(If,{children:[r.jsxs(oe,{path:W.ACCOUNT,element:r.jsx(Ch,{}),children:[r.jsx(oe,{path:W.ACCOUNT,element:r.jsx(bh,{})}),r.jsx(oe,{path:W.ACCOUNT_TOKENS,element:r.jsx(FC,{})}),r.jsx(oe,{path:"*",element:r.jsx(UC,{})})]}),r.jsx(oe,{path:"claim",element:r.jsx(Rn,{to:W.ACCOUNT})}),r.jsx(oe,{path:"profile",element:r.jsx(Rn,{to:W.ACCOUNT})}),r.jsx(oe,{path:W.SWAP,element:r.jsx(PC,{})}),r.jsx(oe,{path:W.HOOKS,element:r.jsx(eb,{})}),r.jsx(oe,{path:W.COW_SHED,element:r.jsx(yb,{})}),r.jsx(oe,{path:W.SEND,element:r.jsx(Pa,{})}),BC.map((e,t)=>WC({...e,key:t})),r.jsx(oe,{path:W.ANYSWAP_AFFECTED,element:r.jsx(Jw,{})}),r.jsx(oe,{path:W.CHAT,element:r.jsx(Se,{url:Sf})}),r.jsx(oe,{path:W.DOCS,element:r.jsx(Se,{url:Ef})}),r.jsx(oe,{path:W.STATS,element:r.jsx(Se,{url:Rf})}),r.jsx(oe,{path:W.TWITTER,element:r.jsx(Se,{url:jf})}),r.jsx(oe,{path:W.HOME,element:r.jsx(Pa,{})}),r.jsx(oe,{path:"*",element:r.jsx(f.Suspense,{fallback:r.jsx(Qo,{}),children:r.jsx(NC,{})})})]})})}const lA=Object.freeze(Object.defineProperty({__proto__:null,RoutesApp:zC},Symbol.toStringTag,{value:"Module"}));export{tA as A,oA as C,rA as L,KC as M,aA as O,Ht as P,nA as R,ZC as S,sA as T,QC as a,JC as b,Kw as c,eA as d,iA as e,lA as f,ob as u};
