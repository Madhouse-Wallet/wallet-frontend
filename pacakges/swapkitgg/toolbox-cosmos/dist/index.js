import{toBech32 as gf}from"@cosmjs/encoding";import{base64 as Of,bech32 as zf}from"@scure/base";import{fromByteArray as rf,toByteArray as af}from"base64-js";function p(v){return Of.encode(Uint8Array.from(zf.fromWords(zf.decode(v).words)))}function c(v,B="thor"){return gf(B,Of.decode(v))}function jx(v){return rf(v)}function bx(v){if(!v.match(/^[a-zA-Z0-9+/]*={0,2}$/))throw new Error("Invalid base64 string format");return af(v)}import{AssetValue as Ax,Chain as o,ChainToChainId as Ff}from"@swapkit/helpers";import{GasPrice as sf,SigningStargateClient as Jf,StargateClient as ef}from"@cosmjs/stargate";import{AssetValue as q,Chain as _,ChainId as e,FeeOption as fx,StagenetChain as _f,defaultRequestHeaders as Yf,getGasAsset as xx,getRPCUrl as R}from"@swapkit/helpers";var j="FACTORY/KUJIRA1QK00H5ATUTPSV900X202PXX42NPJR9THG58DNQPA72F2P7M2LUASE444A7/UUSK",ff="FACTORY/KUJIRA1YGFXN0ER40KLCNCK8THLTUPRDXLCK6WVNPKF2K/UYUM",xf={amount:[{denom:"uatom",amount:"500"}],gas:"200000"},Tx={amount:[{denom:"ukuji",amount:"1000"}],gas:"200000"};function U(v){switch(v){case _.Maya:return{amount:[],gas:"10000000000"};case _.THORChain:return{amount:[],gas:"500000000"};case _.Kujira:return Tx;default:return xf}}var S=(v,B=!1)=>{if(B)return v.toLowerCase();switch(v){case"uUSK":case"USK":return j;case"uYUM":case"YUM":return ff;case"uKUJI":case"KUJI":return"ukuji";case"ATOM":case"uATOM":return"uatom";default:return v}},Zf=({symbol:v,chain:B})=>{if(B===_.Maya)return(v.toUpperCase()!=="CACAO"?v:`${_.Maya}.${v}`).toUpperCase();if(B===_.THORChain)return(v.toUpperCase()!=="RUNE"?v:`${_.THORChain}.${v}`).toUpperCase();return S(v,!1)},b=(v,B)=>{switch(v){case"rune":return q.from({chain:_.THORChain,value:Number.parseInt(B)/1e8});case"uatom":case"atom":return q.from({chain:_.Cosmos,value:Number.parseInt(B)/1e6});case"cacao":return q.from({chain:_.Maya,value:Number.parseInt(B)/10000000000});case"maya":return q.from({asset:`${_.Maya}.${_.Maya}`,value:Number.parseInt(B)/1e4});case"ukuji":case"kuji":return q.from({chain:_.Kujira,value:Number.parseInt(B)/1e6});case j:return q.from({asset:`${_.Kujira}.USK`,value:Number.parseInt(B)/1e6});default:return q.from({asset:v,value:Number.parseInt(B)/1e8})}},V=(v)=>{return ef.connect({url:v,headers:Yf})},d=(v,B,I={})=>{let f=typeof I==="string"?I:"0.0003uatom",T=typeof I==="string"?{}:I;return Jf.connectWithSigner({url:v,headers:Yf},B,{gasPrice:sf.fromString(f),...T})},Qf=(v,B)=>{return Jf.offline(v,B)},w=(v,B)=>{switch(v){case e.Kujira:return R(_.Kujira);case e.THORChain:case"thorchain-mainnet-v1":return B?R(_f.THORChain):R(_.THORChain);case e.Maya:return B?R(_f.Maya):R(_.Maya);default:return R(_.Cosmos)}},mx=async({from:v,toolbox:B,asset:I,feeOptionKey:f=fx.Fast})=>{let T=typeof I==="string"?await q.from({asyncTokenLookup:!0,asset:I}):I,x=await B.getBalance(v),K=x.find(({symbol:z,chain:O})=>I?z===T?.symbol:z===q.from({chain:O}).symbol),H=await B.getFees();if(!K)return q.from({chain:T?.chain||x[0]?.chain||_.Cosmos});return K.sub(H[f])},Bx=(v)=>{switch(v){case _.Maya:case _.THORChain:return"/types.MsgSend";case _.Cosmos:case _.Kujira:return"/cosmos.bank.v1beta1.MsgSend";default:throw new Error("Unsupported chain")}},i=async({fromAddress:v,toAddress:B,assetValue:I,memo:f="",fee:T})=>{let{chain:x,chainId:K}=I,H=w(K),O=await(await V(H)).getAccount(v);if(!O)throw new Error("Account does not exist");let F=S(xx({chain:x}).symbol),N=U(x),k=F&&T?{amount:[{denom:F,amount:T}],gas:N.gas}:N,E={fromAddress:v,toAddress:B,amount:[{amount:I.getBaseValue("string"),denom:S(I.symbol)}]};return{memo:f,accountNumber:O.accountNumber,sequence:O.sequence,chainId:K,msgs:[{typeUrl:Bx(x),value:E}],fee:k}};import{Registry as Kx}from"@cosmjs/proto-signing";import{AminoTypes as vx,defaultRegistryTypes as Hx}from"@cosmjs/stargate";import{Chain as Xf}from"@swapkit/helpers";import J from"protobufjs/minimal.js";var L=J.Reader,Q=J.Writer,G=J.util,A=J.roots.default||(J.roots.default={});A.common=(()=>{let v={};return v.Asset=(()=>{function B(I){if(I){for(let f=Object.keys(I),T=0;T<f.length;++T)if(I[f[T]]!=null)this[f[T]]=I[f[T]]}}return B.prototype.chain="",B.prototype.symbol="",B.prototype.ticker="",B.prototype.synth=!1,B.create=function I(f){return new B(f)},B.encode=function I(f,T){if(!T)T=Q.create();if(f.chain!=null&&Object.hasOwnProperty.call(f,"chain"))T.uint32(10).string(f.chain);if(f.symbol!=null&&Object.hasOwnProperty.call(f,"symbol"))T.uint32(18).string(f.symbol);if(f.ticker!=null&&Object.hasOwnProperty.call(f,"ticker"))T.uint32(26).string(f.ticker);if(f.synth!=null&&Object.hasOwnProperty.call(f,"synth"))T.uint32(32).bool(f.synth);return T},B.encodeDelimited=function I(f,T){return this.encode(f,T).ldelim()},B.decode=function I(f,T){if(!(f instanceof L))f=L.create(f);let x=T===void 0?f.len:f.pos+T,K=new A.common.Asset;while(f.pos<x){let H=f.uint32();switch(H>>>3){case 1:K.chain=f.string();break;case 2:K.symbol=f.string();break;case 3:K.ticker=f.string();break;case 4:K.synth=f.bool();break;default:f.skipType(H&7);break}}return K},B.decodeDelimited=function I(f){if(!(f instanceof L))f=new L(f);return this.decode(f,f.uint32())},B.verify=function I(f){if(typeof f!=="object"||f===null)return"object expected";if(f.chain!=null&&f.hasOwnProperty("chain")){if(!G.isString(f.chain))return"chain: string expected"}if(f.symbol!=null&&f.hasOwnProperty("symbol")){if(!G.isString(f.symbol))return"symbol: string expected"}if(f.ticker!=null&&f.hasOwnProperty("ticker")){if(!G.isString(f.ticker))return"ticker: string expected"}if(f.synth!=null&&f.hasOwnProperty("synth")){if(typeof f.synth!=="boolean")return"synth: boolean expected"}return null},B.fromObject=function I(f){if(f instanceof A.common.Asset)return f;let T=new A.common.Asset;if(f.chain!=null)T.chain=String(f.chain);if(f.symbol!=null)T.symbol=String(f.symbol);if(f.ticker!=null)T.ticker=String(f.ticker);if(f.synth!=null)T.synth=Boolean(f.synth);return T},B.toObject=function I(f,T){if(!T)T={};let x={};if(T.defaults)x.chain="",x.symbol="",x.ticker="",x.synth=!1;if(f.chain!=null&&f.hasOwnProperty("chain"))x.chain=f.chain;if(f.symbol!=null&&f.hasOwnProperty("symbol"))x.symbol=f.symbol;if(f.ticker!=null&&f.hasOwnProperty("ticker"))x.ticker=f.ticker;if(f.synth!=null&&f.hasOwnProperty("synth"))x.synth=f.synth;return x},B.prototype.toJSON=function I(){return this.constructor.toObject(this,J.util.toJSONOptions)},B})(),v.Coin=(()=>{function B(I){if(I){for(let f=Object.keys(I),T=0;T<f.length;++T)if(I[f[T]]!=null)this[f[T]]=I[f[T]]}}return B.prototype.asset=null,B.prototype.amount="",B.prototype.decimals=G.Long?G.Long.fromBits(0,0,!1):0,B.create=function I(f){return new B(f)},B.encode=function I(f,T){if(!T)T=Q.create();if(f.asset!=null&&Object.hasOwnProperty.call(f,"asset"))A.common.Asset.encode(f.asset,T.uint32(10).fork()).ldelim();if(f.amount!=null&&Object.hasOwnProperty.call(f,"amount"))T.uint32(18).string(f.amount);if(f.decimals!=null&&Object.hasOwnProperty.call(f,"decimals"))T.uint32(24).int64(f.decimals);return T},B.encodeDelimited=function I(f,T){return this.encode(f,T).ldelim()},B.decode=function I(f,T){if(!(f instanceof L))f=L.create(f);let x=T===void 0?f.len:f.pos+T,K=new A.common.Coin;while(f.pos<x){let H=f.uint32();switch(H>>>3){case 1:K.asset=A.common.Asset.decode(f,f.uint32());break;case 2:K.amount=f.string();break;case 3:K.decimals=f.int64();break;default:f.skipType(H&7);break}}return K},B.decodeDelimited=function I(f){if(!(f instanceof L))f=new L(f);return this.decode(f,f.uint32())},B.verify=function I(f){if(typeof f!=="object"||f===null)return"object expected";if(f.asset!=null&&f.hasOwnProperty("asset")){let T=A.common.Asset.verify(f.asset);if(T)return"asset."+T}if(f.amount!=null&&f.hasOwnProperty("amount")){if(!G.isString(f.amount))return"amount: string expected"}if(f.decimals!=null&&f.hasOwnProperty("decimals")){if(!G.isInteger(f.decimals)&&!(f.decimals&&G.isInteger(f.decimals.low)&&G.isInteger(f.decimals.high)))return"decimals: integer|Long expected"}return null},B.fromObject=function I(f){if(f instanceof A.common.Coin)return f;let T=new A.common.Coin;if(f.asset!=null){if(typeof f.asset!=="object")throw TypeError(".common.Coin.asset: object expected");T.asset=A.common.Asset.fromObject(f.asset)}if(f.amount!=null)T.amount=String(f.amount);if(f.decimals!=null){if(G.Long)(T.decimals=G.Long.fromValue(f.decimals)).unsigned=!1;else if(typeof f.decimals==="string")T.decimals=parseInt(f.decimals,10);else if(typeof f.decimals==="number")T.decimals=f.decimals;else if(typeof f.decimals==="object")T.decimals=new G.LongBits(f.decimals.low>>>0,f.decimals.high>>>0).toNumber()}return T},B.toObject=function I(f,T){if(!T)T={};let x={};if(T.defaults)if(x.asset=null,x.amount="",G.Long){let K=new G.Long(0,0,!1);x.decimals=T.longs===String?K.toString():T.longs===Number?K.toNumber():K}else x.decimals=T.longs===String?"0":0;if(f.asset!=null&&f.hasOwnProperty("asset"))x.asset=A.common.Asset.toObject(f.asset,T);if(f.amount!=null&&f.hasOwnProperty("amount"))x.amount=f.amount;if(f.decimals!=null&&f.hasOwnProperty("decimals"))if(typeof f.decimals==="number")x.decimals=T.longs===String?String(f.decimals):f.decimals;else x.decimals=T.longs===String?G.Long.prototype.toString.call(f.decimals):T.longs===Number?new G.LongBits(f.decimals.low>>>0,f.decimals.high>>>0).toNumber():f.decimals;return x},B.prototype.toJSON=function I(){return this.constructor.toObject(this,J.util.toJSONOptions)},B})(),v.PubKeySet=(()=>{function B(I){if(I){for(let f=Object.keys(I),T=0;T<f.length;++T)if(I[f[T]]!=null)this[f[T]]=I[f[T]]}}return B.prototype.secp256k1="",B.prototype.ed25519="",B.create=function I(f){return new B(f)},B.encode=function I(f,T){if(!T)T=Q.create();if(f.secp256k1!=null&&Object.hasOwnProperty.call(f,"secp256k1"))T.uint32(10).string(f.secp256k1);if(f.ed25519!=null&&Object.hasOwnProperty.call(f,"ed25519"))T.uint32(18).string(f.ed25519);return T},B.encodeDelimited=function I(f,T){return this.encode(f,T).ldelim()},B.decode=function I(f,T){if(!(f instanceof L))f=L.create(f);let x=T===void 0?f.len:f.pos+T,K=new A.common.PubKeySet;while(f.pos<x){let H=f.uint32();switch(H>>>3){case 1:K.secp256k1=f.string();break;case 2:K.ed25519=f.string();break;default:f.skipType(H&7);break}}return K},B.decodeDelimited=function I(f){if(!(f instanceof L))f=new L(f);return this.decode(f,f.uint32())},B.verify=function I(f){if(typeof f!=="object"||f===null)return"object expected";if(f.secp256k1!=null&&f.hasOwnProperty("secp256k1")){if(!G.isString(f.secp256k1))return"secp256k1: string expected"}if(f.ed25519!=null&&f.hasOwnProperty("ed25519")){if(!G.isString(f.ed25519))return"ed25519: string expected"}return null},B.fromObject=function I(f){if(f instanceof A.common.PubKeySet)return f;let T=new A.common.PubKeySet;if(f.secp256k1!=null)T.secp256k1=String(f.secp256k1);if(f.ed25519!=null)T.ed25519=String(f.ed25519);return T},B.toObject=function I(f,T){if(!T)T={};let x={};if(T.defaults)x.secp256k1="",x.ed25519="";if(f.secp256k1!=null&&f.hasOwnProperty("secp256k1"))x.secp256k1=f.secp256k1;if(f.ed25519!=null&&f.hasOwnProperty("ed25519"))x.ed25519=f.ed25519;return x},B.prototype.toJSON=function I(){return this.constructor.toObject(this,J.util.toJSONOptions)},B})(),v.Tx=(()=>{function B(I){if(this.coins=[],this.gas=[],I){for(let f=Object.keys(I),T=0;T<f.length;++T)if(I[f[T]]!=null)this[f[T]]=I[f[T]]}}return B.prototype.id="",B.prototype.chain="",B.prototype.fromAddress="",B.prototype.toAddress="",B.prototype.coins=G.emptyArray,B.prototype.gas=G.emptyArray,B.prototype.memo="",B.create=function I(f){return new B(f)},B.encode=function I(f,T){if(!T)T=Q.create();if(f.id!=null&&Object.hasOwnProperty.call(f,"id"))T.uint32(10).string(f.id);if(f.chain!=null&&Object.hasOwnProperty.call(f,"chain"))T.uint32(18).string(f.chain);if(f.fromAddress!=null&&Object.hasOwnProperty.call(f,"fromAddress"))T.uint32(26).string(f.fromAddress);if(f.toAddress!=null&&Object.hasOwnProperty.call(f,"toAddress"))T.uint32(34).string(f.toAddress);if(f.coins?.length)for(let x=0;x<f.coins.length;++x)A.common.Coin.encode(f.coins[x],T.uint32(42).fork()).ldelim();if(f.gas?.length)for(let x=0;x<f.gas.length;++x)A.common.Coin.encode(f.gas[x],T.uint32(50).fork()).ldelim();if(f.memo!=null&&Object.hasOwnProperty.call(f,"memo"))T.uint32(58).string(f.memo);return T},B.encodeDelimited=function I(f,T){return this.encode(f,T).ldelim()},B.decode=function I(f,T){if(!(f instanceof L))f=L.create(f);let x=T===void 0?f.len:f.pos+T,K=new A.common.Tx;while(f.pos<x){let H=f.uint32();switch(H>>>3){case 1:K.id=f.string();break;case 2:K.chain=f.string();break;case 3:K.fromAddress=f.string();break;case 4:K.toAddress=f.string();break;case 5:if(!K.coins?.length)K.coins=[];K.coins.push(A.common.Coin.decode(f,f.uint32()));break;case 6:if(!K.gas?.length)K.gas=[];K.gas.push(A.common.Coin.decode(f,f.uint32()));break;case 7:K.memo=f.string();break;default:f.skipType(H&7);break}}return K},B.decodeDelimited=function I(f){if(!(f instanceof L))f=new L(f);return this.decode(f,f.uint32())},B.verify=function I(f){if(typeof f!=="object"||f===null)return"object expected";if(f.id!=null&&f.hasOwnProperty("id")){if(!G.isString(f.id))return"id: string expected"}if(f.chain!=null&&f.hasOwnProperty("chain")){if(!G.isString(f.chain))return"chain: string expected"}if(f.fromAddress!=null&&f.hasOwnProperty("fromAddress")){if(!G.isString(f.fromAddress))return"fromAddress: string expected"}if(f.toAddress!=null&&f.hasOwnProperty("toAddress")){if(!G.isString(f.toAddress))return"toAddress: string expected"}if(f.coins!=null&&f.hasOwnProperty("coins")){if(!Array.isArray(f.coins))return"coins: array expected";for(let T=0;T<f.coins.length;++T){let x=A.common.Coin.verify(f.coins[T]);if(x)return"coins."+x}}if(f.gas!=null&&f.hasOwnProperty("gas")){if(!Array.isArray(f.gas))return"gas: array expected";for(let T=0;T<f.gas.length;++T){let x=A.common.Coin.verify(f.gas[T]);if(x)return"gas."+x}}if(f.memo!=null&&f.hasOwnProperty("memo")){if(!G.isString(f.memo))return"memo: string expected"}return null},B.fromObject=function I(f){if(f instanceof A.common.Tx)return f;let T=new A.common.Tx;if(f.id!=null)T.id=String(f.id);if(f.chain!=null)T.chain=String(f.chain);if(f.fromAddress!=null)T.fromAddress=String(f.fromAddress);if(f.toAddress!=null)T.toAddress=String(f.toAddress);if(f.coins){if(!Array.isArray(f.coins))throw TypeError(".common.Tx.coins: array expected");T.coins=[];for(let x=0;x<f.coins.length;++x){if(typeof f.coins[x]!=="object")throw TypeError(".common.Tx.coins: object expected");T.coins[x]=A.common.Coin.fromObject(f.coins[x])}}if(f.gas){if(!Array.isArray(f.gas))throw TypeError(".common.Tx.gas: array expected");T.gas=[];for(let x=0;x<f.gas.length;++x){if(typeof f.gas[x]!=="object")throw TypeError(".common.Tx.gas: object expected");T.gas[x]=A.common.Coin.fromObject(f.gas[x])}}if(f.memo!=null)T.memo=String(f.memo);return T},B.toObject=function I(f,T){if(!T)T={};let x={};if(T.arrays||T.defaults)x.coins=[],x.gas=[];if(T.defaults)x.id="",x.chain="",x.fromAddress="",x.toAddress="",x.memo="";if(f.id!=null&&f.hasOwnProperty("id"))x.id=f.id;if(f.chain!=null&&f.hasOwnProperty("chain"))x.chain=f.chain;if(f.fromAddress!=null&&f.hasOwnProperty("fromAddress"))x.fromAddress=f.fromAddress;if(f.toAddress!=null&&f.hasOwnProperty("toAddress"))x.toAddress=f.toAddress;if(f.coins?.length){x.coins=[];for(let K=0;K<f.coins.length;++K)x.coins[K]=A.common.Coin.toObject(f.coins[K],T)}if(f.gas?.length){x.gas=[];for(let K=0;K<f.gas.length;++K)x.gas[K]=A.common.Coin.toObject(f.gas[K],T)}if(f.memo!=null&&f.hasOwnProperty("memo"))x.memo=f.memo;return x},B.prototype.toJSON=function I(){return this.constructor.toObject(this,J.util.toJSONOptions)},B})(),v.Fee=(()=>{function B(I){if(this.coins=[],I){for(let f=Object.keys(I),T=0;T<f.length;++T)if(I[f[T]]!=null)this[f[T]]=I[f[T]]}}return B.prototype.coins=G.emptyArray,B.prototype.poolDeduct="",B.create=function I(f){return new B(f)},B.encode=function I(f,T){if(!T)T=Q.create();if(f.coins?.length)for(let x=0;x<f.coins.length;++x)A.common.Coin.encode(f.coins[x],T.uint32(10).fork()).ldelim();if(f.poolDeduct!=null&&Object.hasOwnProperty.call(f,"poolDeduct"))T.uint32(18).string(f.poolDeduct);return T},B.encodeDelimited=function I(f,T){return this.encode(f,T).ldelim()},B.decode=function I(f,T){if(!(f instanceof L))f=L.create(f);let x=T===void 0?f.len:f.pos+T,K=new A.common.Fee;while(f.pos<x){let H=f.uint32();switch(H>>>3){case 1:if(!K.coins?.length)K.coins=[];K.coins.push(A.common.Coin.decode(f,f.uint32()));break;case 2:K.poolDeduct=f.string();break;default:f.skipType(H&7);break}}return K},B.decodeDelimited=function I(f){if(!(f instanceof L))f=new L(f);return this.decode(f,f.uint32())},B.verify=function I(f){if(typeof f!=="object"||f===null)return"object expected";if(f.coins!=null&&f.hasOwnProperty("coins")){if(!Array.isArray(f.coins))return"coins: array expected";for(let T=0;T<f.coins.length;++T){let x=A.common.Coin.verify(f.coins[T]);if(x)return"coins."+x}}if(f.poolDeduct!=null&&f.hasOwnProperty("poolDeduct")){if(!G.isString(f.poolDeduct))return"poolDeduct: string expected"}return null},B.fromObject=function I(f){if(f instanceof A.common.Fee)return f;let T=new A.common.Fee;if(f.coins){if(!Array.isArray(f.coins))throw TypeError(".common.Fee.coins: array expected");T.coins=[];for(let x=0;x<f.coins.length;++x){if(typeof f.coins[x]!=="object")throw TypeError(".common.Fee.coins: object expected");T.coins[x]=A.common.Coin.fromObject(f.coins[x])}}if(f.poolDeduct!=null)T.poolDeduct=String(f.poolDeduct);return T},B.toObject=function I(f,T){if(!T)T={};let x={};if(T.arrays||T.defaults)x.coins=[];if(T.defaults)x.poolDeduct="";if(f.coins?.length){x.coins=[];for(let K=0;K<f.coins.length;++K)x.coins[K]=A.common.Coin.toObject(f.coins[K],T)}if(f.poolDeduct!=null&&f.hasOwnProperty("poolDeduct"))x.poolDeduct=f.poolDeduct;return x},B.prototype.toJSON=function I(){return this.constructor.toObject(this,J.util.toJSONOptions)},B})(),v.ProtoUint=(()=>{function B(I){if(I){for(let f=Object.keys(I),T=0;T<f.length;++T)if(I[f[T]]!=null)this[f[T]]=I[f[T]]}}return B.prototype.value="",B.create=function I(f){return new B(f)},B.encode=function I(f,T){if(!T)T=Q.create();if(f.value!=null&&Object.hasOwnProperty.call(f,"value"))T.uint32(10).string(f.value);return T},B.encodeDelimited=function I(f,T){return this.encode(f,T).ldelim()},B.decode=function I(f,T){if(!(f instanceof L))f=L.create(f);let x=T===void 0?f.len:f.pos+T,K=new A.common.ProtoUint;while(f.pos<x){let H=f.uint32();switch(H>>>3){case 1:K.value=f.string();break;default:f.skipType(H&7);break}}return K},B.decodeDelimited=function I(f){if(!(f instanceof L))f=new L(f);return this.decode(f,f.uint32())},B.verify=function I(f){if(typeof f!=="object"||f===null)return"object expected";if(f.value!=null&&f.hasOwnProperty("value")){if(!G.isString(f.value))return"value: string expected"}return null},B.fromObject=function I(f){if(f instanceof A.common.ProtoUint)return f;let T=new A.common.ProtoUint;if(f.value!=null)T.value=String(f.value);return T},B.toObject=function I(f,T){if(!T)T={};let x={};if(T.defaults)x.value="";if(f.value!=null&&f.hasOwnProperty("value"))x.value=f.value;return x},B.prototype.toJSON=function I(){return this.constructor.toObject(this,J.util.toJSONOptions)},B})(),v})();A.types=(()=>{let v={};return v.MsgDeposit=(()=>{function B(I){if(this.coins=[],I){for(let f=Object.keys(I),T=0;T<f.length;++T)if(I[f[T]]!=null)this[f[T]]=I[f[T]]}}return B.prototype.coins=G.emptyArray,B.prototype.memo="",B.prototype.signer=G.newBuffer([]),B.create=function I(f){return new B(f)},B.encode=function I(f,T){if(!T)T=Q.create();if(f.coins?.length)for(let x=0;x<f.coins.length;++x)A.common.Coin.encode(f.coins[x],T.uint32(10).fork()).ldelim();if(f.memo!=null&&Object.hasOwnProperty.call(f,"memo"))T.uint32(18).string(f.memo);if(f.signer!=null&&Object.hasOwnProperty.call(f,"signer"))T.uint32(26).bytes(f.signer);return T},B.encodeDelimited=function I(f,T){return this.encode(f,T).ldelim()},B.decode=function I(f,T){if(!(f instanceof L))f=L.create(f);let x=T===void 0?f.len:f.pos+T,K=new A.types.MsgDeposit;while(f.pos<x){let H=f.uint32();switch(H>>>3){case 1:if(!K.coins?.length)K.coins=[];K.coins.push(A.common.Coin.decode(f,f.uint32()));break;case 2:K.memo=f.string();break;case 3:K.signer=f.bytes();break;default:f.skipType(H&7);break}}return K},B.decodeDelimited=function I(f){if(!(f instanceof L))f=new L(f);return this.decode(f,f.uint32())},B.verify=function I(f){if(typeof f!=="object"||f===null)return"object expected";if(f.coins!=null&&f.hasOwnProperty("coins")){if(!Array.isArray(f.coins))return"coins: array expected";for(let T=0;T<f.coins.length;++T){let x=A.common.Coin.verify(f.coins[T]);if(x)return"coins."+x}}if(f.memo!=null&&f.hasOwnProperty("memo")){if(!G.isString(f.memo))return"memo: string expected"}if(f.signer!=null&&f.hasOwnProperty("signer")){if(!(f.signer&&typeof f.signer.length==="number"||G.isString(f.signer)))return"signer: buffer expected"}return null},B.fromObject=function I(f){if(f instanceof A.types.MsgDeposit)return f;let T=new A.types.MsgDeposit;if(f.coins){if(!Array.isArray(f.coins))throw TypeError(".types.MsgDeposit.coins: array expected");T.coins=[];for(let x=0;x<f.coins.length;++x){if(typeof f.coins[x]!=="object")throw TypeError(".types.MsgDeposit.coins: object expected");T.coins[x]=A.common.Coin.fromObject(f.coins[x])}}if(f.memo!=null)T.memo=String(f.memo);if(f.signer!=null){if(typeof f.signer==="string")G.base64.decode(f.signer,T.signer=G.newBuffer(G.base64.length(f.signer)),0);else if(f.signer.length)T.signer=f.signer}return T},B.toObject=function I(f,T){if(!T)T={};let x={};if(T.arrays||T.defaults)x.coins=[];if(T.defaults){if(x.memo="",T.bytes===String)x.signer="";else if(x.signer=[],T.bytes!==Array)x.signer=G.newBuffer(x.signer)}if(f.coins?.length){x.coins=[];for(let K=0;K<f.coins.length;++K)x.coins[K]=A.common.Coin.toObject(f.coins[K],T)}if(f.memo!=null&&f.hasOwnProperty("memo"))x.memo=f.memo;if(f.signer!=null&&f.hasOwnProperty("signer"))x.signer=T.bytes===String?G.base64.encode(f.signer,0,f.signer.length):T.bytes===Array?Array.prototype.slice.call(f.signer):f.signer;return x},B.prototype.toJSON=function I(){return this.constructor.toObject(this,J.util.toJSONOptions)},B})(),v.MsgSend=(()=>{function B(I){if(this.amount=[],I){for(let f=Object.keys(I),T=0;T<f.length;++T)if(I[f[T]]!=null)this[f[T]]=I[f[T]]}}return B.prototype.fromAddress=G.newBuffer([]),B.prototype.toAddress=G.newBuffer([]),B.prototype.amount=G.emptyArray,B.create=function I(f){return new B(f)},B.encode=function I(f,T){if(!T)T=Q.create();if(f.fromAddress!=null&&Object.hasOwnProperty.call(f,"fromAddress"))T.uint32(10).bytes(f.fromAddress);if(f.toAddress!=null&&Object.hasOwnProperty.call(f,"toAddress"))T.uint32(18).bytes(f.toAddress);if(f.amount?.length)for(let x=0;x<f.amount.length;++x)A.cosmos.base.v1beta1.Coin.encode(f.amount[x],T.uint32(26).fork()).ldelim();return T},B.encodeDelimited=function I(f,T){return this.encode(f,T).ldelim()},B.decode=function I(f,T){if(!(f instanceof L))f=L.create(f);let x=T===void 0?f.len:f.pos+T,K=new A.types.MsgSend;while(f.pos<x){let H=f.uint32();switch(H>>>3){case 1:K.fromAddress=f.bytes();break;case 2:K.toAddress=f.bytes();break;case 3:if(!K.amount?.length)K.amount=[];K.amount.push(A.cosmos.base.v1beta1.Coin.decode(f,f.uint32()));break;default:f.skipType(H&7);break}}return K},B.decodeDelimited=function I(f){if(!(f instanceof L))f=new L(f);return this.decode(f,f.uint32())},B.verify=function I(f){if(typeof f!=="object"||f===null)return"object expected";if(f.fromAddress!=null&&f.hasOwnProperty("fromAddress")){if(!(f.fromAddress&&typeof f.fromAddress.length==="number"||G.isString(f.fromAddress)))return"fromAddress: buffer expected"}if(f.toAddress!=null&&f.hasOwnProperty("toAddress")){if(!(f.toAddress&&typeof f.toAddress.length==="number"||G.isString(f.toAddress)))return"toAddress: buffer expected"}if(f.amount!=null&&f.hasOwnProperty("amount")){if(!Array.isArray(f.amount))return"amount: array expected";for(let T=0;T<f.amount.length;++T){let x=A.cosmos.base.v1beta1.Coin.verify(f.amount[T]);if(x)return"amount."+x}}return null},B.fromObject=function I(f){if(f instanceof A.types.MsgSend)return f;let T=new A.types.MsgSend;if(f.fromAddress!=null){if(typeof f.fromAddress==="string")G.base64.decode(f.fromAddress,T.fromAddress=G.newBuffer(G.base64.length(f.fromAddress)),0);else if(f.fromAddress.length)T.fromAddress=f.fromAddress}if(f.toAddress!=null){if(typeof f.toAddress==="string")G.base64.decode(f.toAddress,T.toAddress=G.newBuffer(G.base64.length(f.toAddress)),0);else if(f.toAddress.length)T.toAddress=f.toAddress}if(f.amount){if(!Array.isArray(f.amount))throw TypeError(".types.MsgSend.amount: array expected");T.amount=[];for(let x=0;x<f.amount.length;++x){if(typeof f.amount[x]!=="object")throw TypeError(".types.MsgSend.amount: object expected");T.amount[x]=A.cosmos.base.v1beta1.Coin.fromObject(f.amount[x])}}return T},B.toObject=function I(f,T){if(!T)T={};let x={};if(T.arrays||T.defaults)x.amount=[];if(T.defaults){if(T.bytes===String)x.fromAddress="";else if(x.fromAddress=[],T.bytes!==Array)x.fromAddress=G.newBuffer(x.fromAddress);if(T.bytes===String)x.toAddress="";else if(x.toAddress=[],T.bytes!==Array)x.toAddress=G.newBuffer(x.toAddress)}if(f.fromAddress!=null&&f.hasOwnProperty("fromAddress"))x.fromAddress=T.bytes===String?G.base64.encode(f.fromAddress,0,f.fromAddress.length):T.bytes===Array?Array.prototype.slice.call(f.fromAddress):f.fromAddress;if(f.toAddress!=null&&f.hasOwnProperty("toAddress"))x.toAddress=T.bytes===String?G.base64.encode(f.toAddress,0,f.toAddress.length):T.bytes===Array?Array.prototype.slice.call(f.toAddress):f.toAddress;if(f.amount?.length){x.amount=[];for(let K=0;K<f.amount.length;++K)x.amount[K]=A.cosmos.base.v1beta1.Coin.toObject(f.amount[K],T)}return x},B.prototype.toJSON=function I(){return this.constructor.toObject(this,J.util.toJSONOptions)},B})(),v})();A.cosmos=(()=>{let v={};return v.base=(()=>{let B={};return B.v1beta1=(()=>{let I={};return I.Coin=(()=>{function f(T){if(T){for(let x=Object.keys(T),K=0;K<x.length;++K)if(T[x[K]]!=null)this[x[K]]=T[x[K]]}}return f.prototype.denom="",f.prototype.amount="",f.create=function T(x){return new f(x)},f.encode=function T(x,K){if(!K)K=Q.create();if(x.denom!=null&&Object.hasOwnProperty.call(x,"denom"))K.uint32(10).string(x.denom);if(x.amount!=null&&Object.hasOwnProperty.call(x,"amount"))K.uint32(18).string(x.amount);return K},f.encodeDelimited=function T(x,K){return this.encode(x,K).ldelim()},f.decode=function T(x,K){if(!(x instanceof L))x=L.create(x);let H=K===void 0?x.len:x.pos+K,z=new A.cosmos.base.v1beta1.Coin;while(x.pos<H){let O=x.uint32();switch(O>>>3){case 1:z.denom=x.string();break;case 2:z.amount=x.string();break;default:x.skipType(O&7);break}}return z},f.decodeDelimited=function T(x){if(!(x instanceof L))x=new L(x);return this.decode(x,x.uint32())},f.verify=function T(x){if(typeof x!=="object"||x===null)return"object expected";if(x.denom!=null&&x.hasOwnProperty("denom")){if(!G.isString(x.denom))return"denom: string expected"}if(x.amount!=null&&x.hasOwnProperty("amount")){if(!G.isString(x.amount))return"amount: string expected"}return null},f.fromObject=function T(x){if(x instanceof A.cosmos.base.v1beta1.Coin)return x;let K=new A.cosmos.base.v1beta1.Coin;if(x.denom!=null)K.denom=String(x.denom);if(x.amount!=null)K.amount=String(x.amount);return K},f.toObject=function T(x,K){if(!K)K={};let H={};if(K.defaults)H.denom="",H.amount="";if(x.denom!=null&&x.hasOwnProperty("denom"))H.denom=x.denom;if(x.amount!=null&&x.hasOwnProperty("amount"))H.amount=x.amount;return H},f.prototype.toJSON=function T(){return this.constructor.toObject(this,J.util.toJSONOptions)},f})(),I.DecCoin=(()=>{function f(T){if(T){for(let x=Object.keys(T),K=0;K<x.length;++K)if(T[x[K]]!=null)this[x[K]]=T[x[K]]}}return f.prototype.denom="",f.prototype.amount="",f.create=function T(x){return new f(x)},f.encode=function T(x,K){if(!K)K=Q.create();if(x.denom!=null&&Object.hasOwnProperty.call(x,"denom"))K.uint32(10).string(x.denom);if(x.amount!=null&&Object.hasOwnProperty.call(x,"amount"))K.uint32(18).string(x.amount);return K},f.encodeDelimited=function T(x,K){return this.encode(x,K).ldelim()},f.decode=function T(x,K){if(!(x instanceof L))x=L.create(x);let H=K===void 0?x.len:x.pos+K,z=new A.cosmos.base.v1beta1.DecCoin;while(x.pos<H){let O=x.uint32();switch(O>>>3){case 1:z.denom=x.string();break;case 2:z.amount=x.string();break;default:x.skipType(O&7);break}}return z},f.decodeDelimited=function T(x){if(!(x instanceof L))x=new L(x);return this.decode(x,x.uint32())},f.verify=function T(x){if(typeof x!=="object"||x===null)return"object expected";if(x.denom!=null&&x.hasOwnProperty("denom")){if(!G.isString(x.denom))return"denom: string expected"}if(x.amount!=null&&x.hasOwnProperty("amount")){if(!G.isString(x.amount))return"amount: string expected"}return null},f.fromObject=function T(x){if(x instanceof A.cosmos.base.v1beta1.DecCoin)return x;let K=new A.cosmos.base.v1beta1.DecCoin;if(x.denom!=null)K.denom=String(x.denom);if(x.amount!=null)K.amount=String(x.amount);return K},f.toObject=function T(x,K){if(!K)K={};let H={};if(K.defaults)H.denom="",H.amount="";if(x.denom!=null&&x.hasOwnProperty("denom"))H.denom=x.denom;if(x.amount!=null&&x.hasOwnProperty("amount"))H.amount=x.amount;return H},f.prototype.toJSON=function T(){return this.constructor.toObject(this,J.util.toJSONOptions)},f})(),I.IntProto=(()=>{function f(T){if(T){for(let x=Object.keys(T),K=0;K<x.length;++K)if(T[x[K]]!=null)this[x[K]]=T[x[K]]}}return f.prototype.int="",f.create=function T(x){return new f(x)},f.encode=function T(x,K){if(!K)K=Q.create();if(x.int!=null&&Object.hasOwnProperty.call(x,"int"))K.uint32(10).string(x.int);return K},f.encodeDelimited=function T(x,K){return this.encode(x,K).ldelim()},f.decode=function T(x,K){if(!(x instanceof L))x=L.create(x);let H=K===void 0?x.len:x.pos+K,z=new A.cosmos.base.v1beta1.IntProto;while(x.pos<H){let O=x.uint32();switch(O>>>3){case 1:z.int=x.string();break;default:x.skipType(O&7);break}}return z},f.decodeDelimited=function T(x){if(!(x instanceof L))x=new L(x);return this.decode(x,x.uint32())},f.verify=function T(x){if(typeof x!=="object"||x===null)return"object expected";if(x.int!=null&&x.hasOwnProperty("int")){if(!G.isString(x.int))return"int: string expected"}return null},f.fromObject=function T(x){if(x instanceof A.cosmos.base.v1beta1.IntProto)return x;let K=new A.cosmos.base.v1beta1.IntProto;if(x.int!=null)K.int=String(x.int);return K},f.toObject=function T(x,K){if(!K)K={};let H={};if(K.defaults)H.int="";if(x.int!=null&&x.hasOwnProperty("int"))H.int=x.int;return H},f.prototype.toJSON=function T(){return this.constructor.toObject(this,J.util.toJSONOptions)},f})(),I.DecProto=(()=>{function f(T){if(T){for(let x=Object.keys(T),K=0;K<x.length;++K)if(T[x[K]]!=null)this[x[K]]=T[x[K]]}}return f.prototype.dec="",f.create=function T(x){return new f(x)},f.encode=function T(x,K){if(!K)K=Q.create();if(x.dec!=null&&Object.hasOwnProperty.call(x,"dec"))K.uint32(10).string(x.dec);return K},f.encodeDelimited=function T(x,K){return this.encode(x,K).ldelim()},f.decode=function T(x,K){if(!(x instanceof L))x=L.create(x);let H=K===void 0?x.len:x.pos+K,z=new A.cosmos.base.v1beta1.DecProto;while(x.pos<H){let O=x.uint32();switch(O>>>3){case 1:z.dec=x.string();break;default:x.skipType(O&7);break}}return z},f.decodeDelimited=function T(x){if(!(x instanceof L))x=new L(x);return this.decode(x,x.uint32())},f.verify=function T(x){if(typeof x!=="object"||x===null)return"object expected";if(x.dec!=null&&x.hasOwnProperty("dec")){if(!G.isString(x.dec))return"dec: string expected"}return null},f.fromObject=function T(x){if(x instanceof A.cosmos.base.v1beta1.DecProto)return x;let K=new A.cosmos.base.v1beta1.DecProto;if(x.dec!=null)K.dec=String(x.dec);return K},f.toObject=function T(x,K){if(!K)K={};let H={};if(K.defaults)H.dec="";if(x.dec!=null&&x.hasOwnProperty("dec"))H.dec=x.dec;return H},f.prototype.toJSON=function T(){return this.constructor.toObject(this,J.util.toJSONOptions)},f})(),I})(),B})(),v})();var Tf=A;var C=()=>{return new Kx([...Hx,["/types.MsgSend",{...Tf.types.MsgSend}],["/types.MsgDeposit",{...Tf.types.MsgDeposit}]])},M=(v)=>{return new vx({"/types.MsgSend":{aminoType:`${v===Xf.Maya?"mayachain":"thorchain"}/MsgSend`,toAmino:(B)=>({from_address:c(B.fromAddress),to_address:c(B.toAddress),amount:[...B.amount]}),fromAmino:(B)=>({fromAddress:p(B.from_address),toAddress:p(B.to_address),amount:[...B.amount]})},"/types.MsgDeposit":{aminoType:`${v===Xf.Maya?"mayachain":"thorchain"}/MsgDeposit`,toAmino:(B)=>({signer:c(B.signer),memo:B.memo,coins:[...B.coins]}),fromAmino:(B)=>({signer:p(B.signer),memo:B.memo,coins:[...B.coins]})}})};var IT=U(o.THORChain).gas,KT=U(o.Maya).gas,Nf=({from:v,recipient:B,assetValue:I,chain:f})=>({type:`${f===o.Maya?"mayachain":"thorchain"}/MsgSend`,value:{from_address:v,to_address:B,amount:[{amount:I.getBaseValue("string"),denom:S(I.symbol,!0)}]}}),Wf=({from:v,assetValue:B,memo:I="",chain:f})=>{return{type:`${f===o.Maya?"mayachain":"thorchain"}/MsgDeposit`,value:{coins:[{amount:B.getBaseValue("string"),asset:Zf(B)}],signer:v,memo:I}}},Bf=({from:v,recipient:B,assetValue:I,memo:f,chain:T})=>{return!B?Wf({from:v,assetValue:I,memo:f,chain:T}):Nf({from:v,recipient:B,assetValue:I,chain:T})},h=(v,B)=>{return M(B).fromAmino(v)},qf=async({rpcUrl:v,from:B})=>{let f=await(await V(v)).getAccount(B);if(!f)throw new Error("Account does not exist");return f},Ef=(v)=>async({from:B,recipient:I,assetValue:f,memo:T="",chain:x,asSignable:K=!0,asAminoMessage:H=!1})=>{let z=await qf({rpcUrl:v,from:B}),O=Nf({from:B,recipient:I,assetValue:f,chain:x}),F=K?h(H?O:D(O),x):O;return{chainId:Ff[x],accountNumber:z.accountNumber,sequence:z.sequence,msgs:[F],fee:U(f.chain),memo:T}},yf=(v)=>async({from:B,assetValue:I,memo:f="",chain:T,asSignable:x=!0,asAminoMessage:K=!1})=>{let H=await qf({rpcUrl:v,from:B}),z=Wf({from:B,assetValue:I,memo:f,chain:T}),O=x?h(K?z:D(z),T):z;return{chainId:Ff[T],accountNumber:H.accountNumber,sequence:H.sequence,msgs:[O],fee:U(I.chain),memo:f}};function D(v){if(v.type==="thorchain/MsgSend"||v.type==="mayachain/MsgSend")return v;return{...v,value:{...v.value,coins:v.value.coins.map((B)=>{let I=Ax.from({asset:B.asset}),f=(I.isSynthetic?I.symbol.split("/")?.[1]:I.symbol)?.toUpperCase(),T=(I.isSynthetic?I.symbol.split("/")?.[0]:I.chain)?.toUpperCase();return{...B,asset:{chain:T,symbol:f,ticker:f,synth:I.isSynthetic}}})}}}var If=({chain:v,memo:B,msgs:I})=>{let f=C(),T=M(v),x={typeUrl:"/cosmos.tx.v1beta1.TxBody",value:{memo:B,messages:I.map((K)=>T.fromAmino(K))}};return f.encode(x)};import{Bip39 as Ox,EnglishMnemonic as _x,Slip10 as Jx,Slip10Curve as Yx,stringToPath as Uf}from"@cosmjs/crypto";import{DirectSecp256k1HdWallet as Zx,DirectSecp256k1Wallet as Qx}from"@cosmjs/proto-signing";import{SwapKitApi as Xx}from"@swapkit/api";import{AssetValue as m,Chain as Z,ChainId as l,ChainIdToChain as Fx}from"@swapkit/helpers";import{Secp256k1HdWallet as Gx}from"@cosmjs/amino";import{base64 as Lx,bech32 as Kf}from"@scure/base";import{SwapKitError as Pf}from"@swapkit/helpers";import{stringToPath as zx}from"@cosmjs/crypto";class X{server;chainId;prefix="";rpcUrl;constructor({server:v,chainId:B,prefix:I="cosmos",stagenet:f=!1}){this.rpcUrl=w(B,f),this.server=v,this.chainId=B,this.prefix=I}getAddressFromMnemonic=async(v,B)=>{return(await this.#f(v,B)).address};getPubKeyFromMnemonic=async(v,B)=>{let I=await this.#f(v,B);return Lx.encode(I.pubkey)};checkAddress=(v)=>{if(!v.startsWith(this.prefix))return!1;try{let{prefix:B,words:I}=Kf.decode(v);return Kf.encode(B,I)===v.toLocaleLowerCase()}catch(B){return!1}};getBalance=async(v)=>{return(await(await V(this.rpcUrl)).getAllBalances(v)).map((f)=>({...f,denom:f.denom.includes("/")?f.denom.toUpperCase():f.denom}))};getAccount=async(v)=>{return(await V(this.rpcUrl)).getAccount(v)};transfer=async({from:v,recipient:B,assetValue:I,memo:f="",fee:T=xf,signer:x})=>{if(!x)throw new Pf("toolbox_cosmos_signer_not_defined");return(await(await d(this.rpcUrl,x)).sendTokens(v,B,[{denom:S(`u${I.symbol}`).toLowerCase(),amount:I.getBaseValue("string")}],T,f)).transactionHash};#x=(v,B)=>{return Gx.fromMnemonic(v,{prefix:this.prefix,hdPaths:[zx(B)]})};#f=async(v,B)=>{let f=await(await this.#x(v,B)).getAccounts();if(f.length===0)throw new Pf("toolbox_cosmos_no_accounts_found");return f[0]}}var n=async(v,B)=>{try{let f=(await Xx.getGasRate()).find((T)=>T.chainId===v)?.value;return f?Number.parseFloat(f):B}catch(I){return console.error(I),B}},u=({derivationPath:v,client:B})=>({transfer:B.transfer,getSigner:(I)=>{return Zx.fromMnemonic(I,{prefix:B.prefix,hdPaths:[Uf(`${v}/0`)]})},getSignerFromPrivateKey:(I)=>{return Qx.fromKey(I,B.prefix)},createPrivateKeyFromPhrase:async(I)=>{let f=Uf(`${v}/0`),T=new _x(I),x=await Ox.mnemonicToSeed(T),{privkey:K}=Jx.derivePath(Yx.Secp256k1,x,f);return K},getAccount:B.getAccount,validateAddress:B.checkAddress,getAddressFromMnemonic:(I)=>B.getAddressFromMnemonic(I,`${v}/0`),getPubKeyFromMnemonic:(I)=>B.getPubKeyFromMnemonic(I,`${v}/0`),getFeeRateFromThorswap:n,getBalance:async(I,f)=>{let T=await B.getBalance(I),x=Fx[B.chainId];return await Promise.all(T.filter(({denom:K})=>K&&!K.includes("IBC/")).map(({denom:K,amount:H})=>{let z=[Z.THORChain,Z.Maya].includes(x)&&K.includes("/")?`${x}.${K}`:K;return b(z,H)}))}}),PT=({address:v,chain:B,stagenet:I=!1,server:f})=>{switch(B){case Z.Cosmos:return new X({server:f||"https://node-router.thorswap.net/cosmos/rest",chainId:l.Cosmos}).checkAddress(v);case Z.Kujira:return new X({server:f||"https://lcd-kujira.synergynodes.com/",chainId:l.Kujira,prefix:"kujira"}).checkAddress(v);case Z.THORChain:return new X({server:I?"https://stagenet-thornode.ninerealms.com":"https://thornode.thorswap.net",chainId:I?l.THORChainStagenet:l.THORChain,prefix:`${I?"s":""}thor`,stagenet:I}).checkAddress(v);case Z.Maya:return new X({server:I?"https://stagenet.mayanode.mayachain.info":"https://mayanode.mayachain.info",chainId:I?l.MayaStagenet:l.Maya,prefix:`${I?"s":""}maya`,stagenet:I}).checkAddress(v)}},UT=({assetValue:v})=>{switch(v.chain){case Z.Cosmos:return m.from({chain:Z.Cosmos,value:0.007});case Z.Kujira:return m.from({chain:Z.Kujira,value:0.02});case Z.THORChain:return m.from({chain:Z.THORChain,value:0.02});case Z.Maya:return m.from({chain:Z.Maya,value:0.02});default:return v.set(0)}};import{BaseDecimal as t,ChainId as Vf,DerivationPath as Nx,SwapKitNumber as vf}from"@swapkit/helpers";var kf=({server:v}={})=>{let B=new X({server:v||"https://node-router.thorswap.net/cosmos/rest",chainId:Vf.Cosmos}),I=u({decimal:t.GAIA,derivationPath:Nx.GAIA,client:B});async function f(){let x=await n(Vf.Cosmos,500);return{type:"base",average:vf.fromBigInt(BigInt(x),t.GAIA),fast:vf.fromBigInt(BigInt(x)*15n/10n,t.GAIA),fastest:vf.fromBigInt(BigInt(x)*2n,t.GAIA)}}async function T(x){let K=await f();return I.transfer({...x,fee:x.fee||{amount:[{denom:"uatom",amount:K[x.feeOptionKey||"fast"].getBaseValue("string")||"1000"}],gas:"200000"}})}return{...I,getFees:f,transfer:T,buildTransferTx:i}};import{Chain as a}from"@swapkit/helpers";import{BaseDecimal as g,ChainId as Mf,DerivationPath as Wx,SwapKitNumber as Hf}from"@swapkit/helpers";async function Sf(){let v=await n(Mf.Kujira,1000);return{type:"base",average:Hf.fromBigInt(BigInt(v),g.KUJI),fast:Hf.fromBigInt(BigInt(Math.floor(v*1.5)),g.KUJI),fastest:Hf.fromBigInt(BigInt(Math.floor(v*2)),g.KUJI)}}var Df=({server:v}={})=>{let B=new X({server:v||"https://lcd-kujira.synergynodes.com/",chainId:Mf.Kujira,prefix:"kujira"}),I=u({decimal:g.KUJI,derivationPath:Wx.KUJI,client:B});return{...I,getFees:Sf,buildTransferTx:i,getBalance:async(f,T)=>{let x=await B.getBalance(f);return await Promise.all(x.filter(({denom:K})=>{if(!K||K.includes("IBC/"))return!1;return[j,ff].includes(K)||!K.startsWith("FACTORY")}).map(({denom:K,amount:H})=>b(K,H)))},transfer:async(f)=>{let T=await Sf();return I.transfer({...f,fee:f.fee||{amount:[{denom:"ukuji",amount:T[f.feeOptionKey||"fast"].getBaseValue("string")||"1000"}],gas:"200000"}})}}};import{Secp256k1HdWallet as qx,createMultisigThresholdPubkey as Ex,encodeSecp256k1Pubkey as lf,pubkeyToAddress as uf}from"@cosmjs/amino";import{Secp256k1 as wf,Secp256k1Signature as yx,stringToPath as Px}from"@cosmjs/crypto";import{makeMultisignedTxBytes as Ux}from"@cosmjs/stargate";import{base64 as P}from"@scure/base";import{BaseDecimal as Rf,Chain as r,ChainId as Cf,DerivationPath as Vx,FeeOption as Af,RequestClient as kx,SwapKitError as Sx,SwapKitNumber as hf}from"@swapkit/helpers";var Mx=({prefix:v,derivationPath:B})=>(I,f=0)=>{return qx.fromMnemonic(I,{hdPaths:[Px(`${B}/${f}`)],prefix:v})},Dx=(v)=>P.encode(v),Rx=async(v,B,I)=>{let{msgs:f,accountNumber:T,sequence:x,chainId:K,fee:H,memo:z}=JSON.parse(B),O=(await v.getAccounts())?.[0]?.address||"",F=await M(I),N=await C(),k=await Qf(v,{registry:N,aminoTypes:F}),E=[];for(let W of f){let y=await h(W,I);E.push(y)}let{signatures:[$]}=await k.sign(O,E,H,z,{accountNumber:T,sequence:x,chainId:K}),Y=await If({chain:I,msgs:f.map(D),memo:z});return{signature:Dx($),bodyBytes:Y}},Cx=({prefix:v,rpcUrl:B})=>async(I,f,T,x,K)=>{let{sequence:H,fee:z}=JSON.parse(I),O=await nf(T,x),F=f.map((E)=>[uf(lf(P.decode(E.pubKey)),v),P.decode(E.signature)]),N=await V(B),{transactionHash:k}=await N.broadcastTx(Ux(O,H,z,K,new Map(F)));return k},nf=async(v,B,I=!0)=>{return Ex(v.map((f)=>lf(P.decode(f))),B,I)},hx=(v)=>P.decode(v),lx=(v)=>(B)=>{return uf(B,v)},ux=async({privateKey:v,message:B})=>{let I=await wf.createSignature(P.decode(B),v);return P.encode(Buffer.concat([I.r(32),I.s(32)]))};function wx(v){return async function B({signature:I,message:f,address:T}){let x=await v(T);if(!x?.pubkey)throw new Sx("toolbox_cosmos_verify_signature_no_pubkey");let K=yx.fromFixedLength(P.decode(I));return wf.verifySignature(K,P.decode(f),x.pubkey.value)}}var $f=({chain:v,stagenet:B})=>{let I=v===r.THORChain,f=v===r.Maya,T=I?Cf.THORChain:Cf.Maya,x=`${B?"s":""}${v.toLowerCase()}`,K=Vx[v],H=w(T,B),z=B?f?"https://stagenet.mayanode.mayachain.info":"https://stagenet-thornode.ninerealms.com":f?"https://mayanode.mayachain.info":"https://thornode.thorswap.net",O=new X({server:z,chainId:T,prefix:x,stagenet:B}),F=U(v),N=u({client:O,derivationPath:K,decimal:Rf[v]}),k=async(Y)=>{try{return await N.getBalance(Y)}catch(W){return Promise.reject(W)}},E=async()=>{let Y,W=`${z}/${I?"thorchain":"mayachain"}/constants}`;try{let{int_64_values:{NativeTransactionFee:y}}=await kx.get(W);if(!y||Number.isNaN(y)||y<0)throw Error(`Invalid nativeFee: ${y.toString()}`);Y=new hf(y)}catch{Y=new hf({value:I?0.02:1,decimal:Rf[v]})}return{[Af.Average]:Y,[Af.Fast]:Y,[Af.Fastest]:Y}},$=async({from:Y,recipient:W,assetValue:y,memo:Gf="",signer:s})=>{if(!s)throw new Error("Signer not defined");let jf="signAmino"in s,bf=C(),df=M(v),of=await d(H,s,{registry:bf,aminoTypes:df}),Lf=Bf({assetValue:y,from:Y,recipient:W,memo:Gf,chain:v}),mf=jf?Lf:D(Lf),tf=h(mf,v);return(await of.signAndBroadcast(Y,[tf],F,Gf)).transactionHash};return{...N,deposit:(Y)=>$(Y),transfer:$,getFees:E,buildAminoMsg:Bf,convertToSignable:h,buildDepositTx:yf(H),buildTransferTx:Ef(H),buildEncodedTxBody:If,prepareMessageForBroadcast:D,parseAminoMessageForDirectSigning:D,createDefaultAminoTypes:()=>M(v),createDefaultRegistry:C,secp256k1HdWalletFromMnemonic:Mx({derivationPath:K,prefix:x}),signMultisigTx:(Y,W)=>Rx(Y,W,v),broadcastMultisigTx:Cx({prefix:x,rpcUrl:H}),createMultisig:nf,importSignature:hx,loadAddressBalances:k,pubkeyToAddress:lx(x),signWithPrivateKey:ux,verifySignature:wx(N.getAccount)}},pf=({stagenet:v}={})=>{return $f({chain:r.THORChain,stagenet:v})},cf=({stagenet:v}={})=>{return $f({chain:r.Maya,stagenet:v})};var eT=(v)=>{switch(v){case a.Kujira:return Df;case a.Maya:return cf;case a.THORChain:return pf;case a.Cosmos:return kf;default:throw new Error(`Chain ${v} is not supported`)}};export{Nf as transferMsgAmino,jx as toBase64,D as parseAminoMessageForDirectSigning,eT as getToolboxByChain,w as getRPC,S as getMsgSendDenom,n as getFeeRateFromThorswap,Zf as getDenomWithChain,U as getDefaultChainFee,b as getAssetFromDenom,bx as fromBase64,UT as estimateTransactionFee,mx as estimateMaxSendableAmount,Wf as depositMsgAmino,V as createStargateClient,d as createSigningStargateClient,Qf as createOfflineStargateClient,C as createDefaultRegistry,M as createDefaultAminoTypes,PT as cosmosValidateAddress,h as convertToSignable,Ef as buildTransferTx,i as buildNativeTransferTx,If as buildEncodedTxBody,yf as buildDepositTx,Bf as buildAminoMsg,p as bech32ToBase64,c as base64ToBech32,ff as YUM_KUJIRA_FACTORY_DENOM,j as USK_KUJIRA_FACTORY_DENOM,pf as ThorchainToolbox,IT as THORCHAIN_GAS_VALUE,cf as MayaToolbox,KT as MAYA_GAS_VALUE,Df as KujiraToolbox,kf as GaiaToolbox,Tx as DEFAULT_KUJI_FEE_MAINNET,xf as DEFAULT_COSMOS_FEE_MAINNET,$f as BaseThorchainToolbox,u as BaseCosmosToolbox};

//# debugId=44A279E5A47606BF64756E2164756E21
