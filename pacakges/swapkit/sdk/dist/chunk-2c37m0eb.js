import{d as nY,e as pY,g as N$,h as Vw}from"./chunk-1m9bj8n0.js";import{$c as TK,Zc as xD,_c as R8,ad as p0}from"./chunk-p967kwt7.js";import{hd as wG,id as BG}from"./chunk-w38asa2a.js";import{kd as xC}from"./chunk-c4w4zgtk.js";import{Se as gD,Te as FD,Ue as hD,Ve as v,We as XD,Xe as wC,Ye as dY}from"./chunk-trjbmn7w.js";var cD={};XD(cD,{__values:()=>Tw,__spreadArrays:()=>bW,__spread:()=>cW,__rest:()=>uW,__read:()=>BC,__param:()=>kW,__metadata:()=>yW,__makeTemplateObject:()=>lW,__importStar:()=>oW,__importDefault:()=>sW,__generator:()=>dW,__extends:()=>mW,__exportStar:()=>pW,__decorate:()=>gW,__createBinding:()=>nW,__classPrivateFieldSet:()=>tW,__classPrivateFieldGet:()=>aW,__awaiter:()=>hW,__await:()=>A8,__asyncValues:()=>iW,__asyncGenerator:()=>vW,__asyncDelegator:()=>rW,__assign:()=>qw});function mW(D,$){Mw(D,$);function B(){this.constructor=D}D.prototype=$===null?Object.create($):(B.prototype=$.prototype,new B)}function uW(D,$){var B={};for(var w in D)if(Object.prototype.hasOwnProperty.call(D,w)&&$.indexOf(w)<0)B[w]=D[w];if(D!=null&&typeof Object.getOwnPropertySymbols==="function"){for(var Y=0,w=Object.getOwnPropertySymbols(D);Y<w.length;Y++)if($.indexOf(w[Y])<0&&Object.prototype.propertyIsEnumerable.call(D,w[Y]))B[w[Y]]=D[w[Y]]}return B}function gW(D,$,B,w){var Y=arguments.length,C=Y<3?$:w===null?w=Object.getOwnPropertyDescriptor($,B):w,X;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")C=Reflect.decorate(D,$,B,w);else for(var Q=D.length-1;Q>=0;Q--)if(X=D[Q])C=(Y<3?X(C):Y>3?X($,B,C):X($,B))||C;return Y>3&&C&&Object.defineProperty($,B,C),C}function kW(D,$){return function(B,w){$(B,w,D)}}function yW(D,$){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(D,$)}function hW(D,$,B,w){function Y(C){return C instanceof B?C:new B(function(X){X(C)})}return new(B||(B=Promise))(function(C,X){function Q(E){try{Z(w.next(E))}catch(J){X(J)}}function F(E){try{Z(w.throw(E))}catch(J){X(J)}}function Z(E){E.done?C(E.value):Y(E.value).then(Q,F)}Z((w=w.apply(D,$||[])).next())})}function dW(D,$){var B={label:0,sent:function(){if(C[0]&1)throw C[1];return C[1]},trys:[],ops:[]},w,Y,C,X;return X={next:Q(0),throw:Q(1),return:Q(2)},typeof Symbol==="function"&&(X[Symbol.iterator]=function(){return this}),X;function Q(Z){return function(E){return F([Z,E])}}function F(Z){if(w)throw new TypeError("Generator is already executing.");while(B)try{if(w=1,Y&&(C=Z[0]&2?Y.return:Z[0]?Y.throw||((C=Y.return)&&C.call(Y),0):Y.next)&&!(C=C.call(Y,Z[1])).done)return C;if(Y=0,C)Z=[Z[0]&2,C.value];switch(Z[0]){case 0:case 1:C=Z;break;case 4:return B.label++,{value:Z[1],done:!1};case 5:B.label++,Y=Z[1],Z=[0];continue;case 7:Z=B.ops.pop(),B.trys.pop();continue;default:if((C=B.trys,!(C=C.length>0&&C[C.length-1]))&&(Z[0]===6||Z[0]===2)){B=0;continue}if(Z[0]===3&&(!C||Z[1]>C[0]&&Z[1]<C[3])){B.label=Z[1];break}if(Z[0]===6&&B.label<C[1]){B.label=C[1],C=Z;break}if(C&&B.label<C[2]){B.label=C[2],B.ops.push(Z);break}if(C[2])B.ops.pop();B.trys.pop();continue}Z=$.call(D,B)}catch(E){Z=[6,E],Y=0}finally{w=C=0}if(Z[0]&5)throw Z[1];return{value:Z[0]?Z[1]:void 0,done:!0}}}function nW(D,$,B,w){if(w===void 0)w=B;D[w]=$[B]}function pW(D,$){for(var B in D)if(B!=="default"&&!$.hasOwnProperty(B))$[B]=D[B]}function Tw(D){var $=typeof Symbol==="function"&&Symbol.iterator,B=$&&D[$],w=0;if(B)return B.call(D);if(D&&typeof D.length==="number")return{next:function(){if(D&&w>=D.length)D=void 0;return{value:D&&D[w++],done:!D}}};throw new TypeError($?"Object is not iterable.":"Symbol.iterator is not defined.")}function BC(D,$){var B=typeof Symbol==="function"&&D[Symbol.iterator];if(!B)return D;var w=B.call(D),Y,C=[],X;try{while(($===void 0||$-- >0)&&!(Y=w.next()).done)C.push(Y.value)}catch(Q){X={error:Q}}finally{try{if(Y&&!Y.done&&(B=w.return))B.call(w)}finally{if(X)throw X.error}}return C}function cW(){for(var D=[],$=0;$<arguments.length;$++)D=D.concat(BC(arguments[$]));return D}function bW(){for(var D=0,$=0,B=arguments.length;$<B;$++)D+=arguments[$].length;for(var w=Array(D),Y=0,$=0;$<B;$++)for(var C=arguments[$],X=0,Q=C.length;X<Q;X++,Y++)w[Y]=C[X];return w}function A8(D){return this instanceof A8?(this.v=D,this):new A8(D)}function vW(D,$,B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var w=B.apply(D,$||[]),Y,C=[];return Y={},X("next"),X("throw"),X("return"),Y[Symbol.asyncIterator]=function(){return this},Y;function X(G){if(w[G])Y[G]=function(W){return new Promise(function(K,V){C.push([G,W,K,V])>1||Q(G,W)})}}function Q(G,W){try{F(w[G](W))}catch(K){J(C[0][3],K)}}function F(G){G.value instanceof A8?Promise.resolve(G.value.v).then(Z,E):J(C[0][2],G)}function Z(G){Q("next",G)}function E(G){Q("throw",G)}function J(G,W){if(G(W),C.shift(),C.length)Q(C[0][0],C[0][1])}}function rW(D){var $,B;return $={},w("next"),w("throw",function(Y){throw Y}),w("return"),$[Symbol.iterator]=function(){return this},$;function w(Y,C){$[Y]=D[Y]?function(X){return(B=!B)?{value:A8(D[Y](X)),done:Y==="return"}:C?C(X):X}:C}}function iW(D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $=D[Symbol.asyncIterator],B;return $?$.call(D):(D=typeof Tw==="function"?Tw(D):D[Symbol.iterator](),B={},w("next"),w("throw"),w("return"),B[Symbol.asyncIterator]=function(){return this},B);function w(C){B[C]=D[C]&&function(X){return new Promise(function(Q,F){X=D[C](X),Y(Q,F,X.done,X.value)})}}function Y(C,X,Q,F){Promise.resolve(F).then(function(Z){C({value:Z,done:Q})},X)}}function lW(D,$){if(Object.defineProperty)Object.defineProperty(D,"raw",{value:$});else D.raw=$;return D}function oW(D){if(D&&D.__esModule)return D;var $={};if(D!=null){for(var B in D)if(Object.hasOwnProperty.call(D,B))$[B]=D[B]}return $.default=D,$}function sW(D){return D&&D.__esModule?D:{default:D}}function aW(D,$){if(!$.has(D))throw new TypeError("attempted to get private field on non-instance");return $.get(D)}function tW(D,$,B){if(!$.has(D))throw new TypeError("attempted to set private field on non-instance");return $.set(D,B),B}var Mw=function(D,$){return Mw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,w){B.__proto__=w}||function(B,w){for(var Y in w)if(w.hasOwnProperty(Y))B[Y]=w[Y]},Mw(D,$)},qw=function(){return qw=Object.assign||function D($){for(var B,w=1,Y=arguments.length;w<Y;w++){B=arguments[w];for(var C in B)if(Object.prototype.hasOwnProperty.call(B,C))$[C]=B[C]}return $},qw.apply(this,arguments)};var bD=wC(()=>{/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */});var XC=v((YC)=>{Object.defineProperty(YC,"__esModule",{value:!0});YC.delay=void 0;function eW(D){return new Promise(($)=>{setTimeout(()=>{$(!0)},D)})}YC.delay=eW});var FC=v((QC)=>{Object.defineProperty(QC,"__esModule",{value:!0});QC.ONE_THOUSAND=QC.ONE_HUNDRED=void 0;QC.ONE_HUNDRED=100;QC.ONE_THOUSAND=1000});var zC=v((EC)=>{Object.defineProperty(EC,"__esModule",{value:!0});EC.ONE_YEAR=EC.FOUR_WEEKS=EC.THREE_WEEKS=EC.TWO_WEEKS=EC.ONE_WEEK=EC.THIRTY_DAYS=EC.SEVEN_DAYS=EC.FIVE_DAYS=EC.THREE_DAYS=EC.ONE_DAY=EC.TWENTY_FOUR_HOURS=EC.TWELVE_HOURS=EC.SIX_HOURS=EC.THREE_HOURS=EC.ONE_HOUR=EC.SIXTY_MINUTES=EC.THIRTY_MINUTES=EC.TEN_MINUTES=EC.FIVE_MINUTES=EC.ONE_MINUTE=EC.SIXTY_SECONDS=EC.THIRTY_SECONDS=EC.TEN_SECONDS=EC.FIVE_SECONDS=EC.ONE_SECOND=void 0;EC.ONE_SECOND=1;EC.FIVE_SECONDS=5;EC.TEN_SECONDS=10;EC.THIRTY_SECONDS=30;EC.SIXTY_SECONDS=60;EC.ONE_MINUTE=EC.SIXTY_SECONDS;EC.FIVE_MINUTES=EC.ONE_MINUTE*5;EC.TEN_MINUTES=EC.ONE_MINUTE*10;EC.THIRTY_MINUTES=EC.ONE_MINUTE*30;EC.SIXTY_MINUTES=EC.ONE_MINUTE*60;EC.ONE_HOUR=EC.SIXTY_MINUTES;EC.THREE_HOURS=EC.ONE_HOUR*3;EC.SIX_HOURS=EC.ONE_HOUR*6;EC.TWELVE_HOURS=EC.ONE_HOUR*12;EC.TWENTY_FOUR_HOURS=EC.ONE_HOUR*24;EC.ONE_DAY=EC.TWENTY_FOUR_HOURS;EC.THREE_DAYS=EC.ONE_DAY*3;EC.FIVE_DAYS=EC.ONE_DAY*5;EC.SEVEN_DAYS=EC.ONE_DAY*7;EC.THIRTY_DAYS=EC.ONE_DAY*30;EC.ONE_WEEK=EC.SEVEN_DAYS;EC.TWO_WEEKS=EC.ONE_WEEK*2;EC.THREE_WEEKS=EC.ONE_WEEK*3;EC.FOUR_WEEKS=EC.ONE_WEEK*4;EC.ONE_YEAR=EC.ONE_DAY*365});var Rw=v((P$)=>{Object.defineProperty(P$,"__esModule",{value:!0});var VC=(bD(),hD(cD));VC.__exportStar(FC(),P$);VC.__exportStar(zC(),P$)});var HC=v((OC)=>{Object.defineProperty(OC,"__esModule",{value:!0});OC.fromMiliseconds=OC.toMiliseconds=void 0;var PC=Rw();function VK(D){return D*PC.ONE_THOUSAND}OC.toMiliseconds=VK;function PK(D){return Math.floor(D/PC.ONE_THOUSAND)}OC.fromMiliseconds=PK});var fC=v((O$)=>{Object.defineProperty(O$,"__esModule",{value:!0});var IC=(bD(),hD(cD));IC.__exportStar(XC(),O$);IC.__exportStar(HC(),O$)});var qC=v((UC)=>{Object.defineProperty(UC,"__esModule",{value:!0});UC.Watch=void 0;class Sw{constructor(){this.timestamps=new Map}start(D){if(this.timestamps.has(D))throw new Error(`Watch already started for label: ${D}`);this.timestamps.set(D,{started:Date.now()})}stop(D){let $=this.get(D);if(typeof $.elapsed!=="undefined")throw new Error(`Watch already stopped for label: ${D}`);let B=Date.now()-$.started;this.timestamps.set(D,{started:$.started,elapsed:B})}get(D){let $=this.timestamps.get(D);if(typeof $==="undefined")throw new Error(`No timestamp found for label: ${D}`);return $}elapsed(D){let $=this.get(D);return $.elapsed||Date.now()-$.started}}UC.Watch=Sw;UC.default=Sw});var LC=v((RC)=>{Object.defineProperty(RC,"__esModule",{value:!0});RC.IWatch=void 0;class TC{}RC.IWatch=TC});var jC=v((Lw)=>{Object.defineProperty(Lw,"__esModule",{value:!0});var HK=(bD(),hD(cD));HK.__exportStar(LC(),Lw)});var I0=v((n0)=>{Object.defineProperty(n0,"__esModule",{value:!0});var A$=(bD(),hD(cD));A$.__exportStar(fC(),n0);A$.__exportStar(qC(),n0);A$.__exportStar(jC(),n0);A$.__exportStar(Rw(),n0)});class D0{}var _C={};XD(_C,{IEvents:()=>D0});var jw=()=>{};var kC=v((uC)=>{Object.defineProperty(uC,"__esModule",{value:!0});uC.IHeartBeat=void 0;var IK=(jw(),hD(_C));class mC extends IK.IEvents{constructor(D){super()}}uC.IHeartBeat=mC});var _w=v((xw)=>{Object.defineProperty(xw,"__esModule",{value:!0});var fK=(bD(),hD(cD));fK.__exportStar(kC(),xw)});var dC=v((yC)=>{Object.defineProperty(yC,"__esModule",{value:!0});yC.HEARTBEAT_EVENTS=yC.HEARTBEAT_INTERVAL=void 0;var UK=I0();yC.HEARTBEAT_INTERVAL=UK.FIVE_SECONDS;yC.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}});var uw=v((mw)=>{Object.defineProperty(mw,"__esModule",{value:!0});var qK=(bD(),hD(cD));qK.__exportStar(dC(),mw)});var cC=v((nC)=>{Object.defineProperty(nC,"__esModule",{value:!0});nC.HeartBeat=void 0;var gw=(bD(),hD(cD)),RK=(p0(),hD(TK)),SK=I0(),LK=_w(),kw=uw();class yw extends LK.IHeartBeat{constructor(D){super(D);this.events=new RK.EventEmitter,this.interval=kw.HEARTBEAT_INTERVAL,this.interval=(D===null||D===void 0?void 0:D.interval)||kw.HEARTBEAT_INTERVAL}static init(D){return gw.__awaiter(this,void 0,void 0,function*(){let $=new yw(D);return yield $.init(),$})}init(){return gw.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(D,$){this.events.on(D,$)}once(D,$){this.events.once(D,$)}off(D,$){this.events.off(D,$)}removeListener(D,$){this.events.removeListener(D,$)}initialize(){return gw.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),SK.toMiliseconds(this.interval))})}pulse(){this.events.emit(kw.HEARTBEAT_EVENTS.pulse)}}nC.HeartBeat=yw});var bC=v((f8)=>{Object.defineProperty(f8,"__esModule",{value:!0});var hw=(bD(),hD(cD));hw.__exportStar(cC(),f8);hw.__exportStar(_w(),f8);hw.__exportStar(uw(),f8)});var rC=v((Af,vC)=>{function jK(D){try{return JSON.stringify(D)}catch($){return'"[Circular]"'}}vC.exports=xK;function xK(D,$,B){var w=B&&B.stringify||jK,Y=1;if(typeof D==="object"&&D!==null){var C=$.length+Y;if(C===1)return D;var X=new Array(C);X[0]=w(D);for(var Q=1;Q<C;Q++)X[Q]=w($[Q]);return X.join(" ")}if(typeof D!=="string")return D;var F=$.length;if(F===0)return D;var Z="",E=1-Y,J=-1,G=D&&D.length||0;for(var W=0;W<G;){if(D.charCodeAt(W)===37&&W+1<G){switch(J=J>-1?J:0,D.charCodeAt(W+1)){case 100:case 102:if(E>=F)break;if($[E]==null)break;if(J<W)Z+=D.slice(J,W);Z+=Number($[E]),J=W+2,W++;break;case 105:if(E>=F)break;if($[E]==null)break;if(J<W)Z+=D.slice(J,W);Z+=Math.floor(Number($[E])),J=W+2,W++;break;case 79:case 111:case 106:if(E>=F)break;if($[E]===void 0)break;if(J<W)Z+=D.slice(J,W);var K=typeof $[E];if(K==="string"){Z+="'"+$[E]+"'",J=W+2,W++;break}if(K==="function"){Z+=$[E].name||"<anonymous>",J=W+2,W++;break}Z+=w($[E]),J=W+2,W++;break;case 115:if(E>=F)break;if(J<W)Z+=D.slice(J,W);Z+=String($[E]),J=W+2,W++;break;case 37:if(J<W)Z+=D.slice(J,W);Z+="%",J=W+2,W++,E--;break}++E}++W}if(J===-1)return D;else if(J<G)Z+=D.slice(J);return Z}});var pw=v((Hf,sC)=>{var iC=rC();sC.exports=vD;var U8=pK().console||{},_K={mapHttpRequest:H$,mapHttpResponse:H$,wrapRequestSerializer:dw,wrapResponseSerializer:dw,wrapErrorSerializer:dw,req:H$,res:H$,err:yK};function mK(D,$){if(Array.isArray(D))return D.filter(function(w){return w!=="!stdSerializers.err"});else if(D===!0)return Object.keys($);return!1}function vD(D){D=D||{},D.browser=D.browser||{};let $=D.browser.transmit;if($&&typeof $.send!=="function")throw Error("pino: transmit option must have a send function");let B=D.browser.write||U8;if(D.browser.write)D.browser.asObject=!0;let w=D.serializers||{},Y=mK(D.browser.serialize,w),C=D.browser.serialize;if(Array.isArray(D.browser.serialize)&&D.browser.serialize.indexOf("!stdSerializers.err")>-1)C=!1;let X=["error","fatal","warn","info","debug","trace"];if(typeof B==="function")B.error=B.fatal=B.warn=B.info=B.debug=B.trace=B;if(D.enabled===!1)D.level="silent";let Q=D.level||"info",F=Object.create(B);if(!F.log)F.log=M8;Object.defineProperty(F,"levelVal",{get:E}),Object.defineProperty(F,"level",{get:J,set:G});let Z={transmit:$,serialize:Y,asObject:D.browser.asObject,levels:X,timestamp:hK(D)};if(F.levels=vD.levels,F.level=Q,F.setMaxListeners=F.getMaxListeners=F.emit=F.addListener=F.on=F.prependListener=F.once=F.prependOnceListener=F.removeListener=F.removeAllListeners=F.listeners=F.listenerCount=F.eventNames=F.write=F.flush=M8,F.serializers=w,F._serialize=Y,F._stdErrSerialize=C,F.child=W,$)F._logEvent=nw();function E(){return this.level==="silent"?1/0:this.levels.values[this.level]}function J(){return this._level}function G(K){if(K!=="silent"&&!this.levels.values[K])throw Error("unknown level "+K);this._level=K,c0(Z,F,"error","log"),c0(Z,F,"fatal","error"),c0(Z,F,"warn","error"),c0(Z,F,"info","log"),c0(Z,F,"debug","log"),c0(Z,F,"trace","log")}function W(K,V){if(!K)throw new Error("missing bindings for child Pino");if(V=V||{},Y&&K.serializers)V.serializers=K.serializers;let O=V.serializers;if(Y&&O){var H=Object.assign({},w,O),f=D.browser.serialize===!0?Object.keys(H):Y;delete K.serializers,I$([K],f,H,this._stdErrSerialize)}function P(A){if(this._childLevel=(A._childLevel|0)+1,this.error=b0(A,K,"error"),this.fatal=b0(A,K,"fatal"),this.warn=b0(A,K,"warn"),this.info=b0(A,K,"info"),this.debug=b0(A,K,"debug"),this.trace=b0(A,K,"trace"),H)this.serializers=H,this._serialize=f;if($)this._logEvent=nw([].concat(A._logEvent.bindings,K))}return P.prototype=this,new P(this)}return F}vD.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};vD.stdSerializers=_K;vD.stdTimeFunctions=Object.assign({},{nullTime:lC,epochTime:oC,unixTime:dK,isoTime:nK});function c0(D,$,B,w){let Y=Object.getPrototypeOf($);$[B]=$.levelVal>$.levels.values[B]?M8:Y[B]?Y[B]:U8[B]||U8[w]||M8,uK(D,$,B)}function uK(D,$,B){if(!D.transmit&&$[B]===M8)return;$[B]=function(w){return function Y(){let C=D.timestamp(),X=new Array(arguments.length),Q=Object.getPrototypeOf&&Object.getPrototypeOf(this)===U8?U8:this;for(var F=0;F<X.length;F++)X[F]=arguments[F];if(D.serialize&&!D.asObject)I$(X,this._serialize,this.serializers,this._stdErrSerialize);if(D.asObject)w.call(Q,gK(this,B,X,C));else w.apply(Q,X);if(D.transmit){let Z=D.transmit.level||$.level,E=vD.levels.values[Z],J=vD.levels.values[B];if(J<E)return;kK(this,{ts:C,methodLevel:B,methodValue:J,transmitLevel:Z,transmitValue:vD.levels.values[D.transmit.level||$.level],send:D.transmit.send,val:$.levelVal},X)}}}($[B])}function gK(D,$,B,w){if(D._serialize)I$(B,D._serialize,D.serializers,D._stdErrSerialize);let Y=B.slice(),C=Y[0],X={};if(w)X.time=w;X.level=vD.levels.values[$];let Q=(D._childLevel|0)+1;if(Q<1)Q=1;if(C!==null&&typeof C==="object"){while(Q--&&typeof Y[0]==="object")Object.assign(X,Y.shift());C=Y.length?iC(Y.shift(),Y):void 0}else if(typeof C==="string")C=iC(Y.shift(),Y);if(C!==void 0)X.msg=C;return X}function I$(D,$,B,w){for(let Y in D)if(w&&D[Y]instanceof Error)D[Y]=vD.stdSerializers.err(D[Y]);else if(typeof D[Y]==="object"&&!Array.isArray(D[Y])){for(let C in D[Y])if($&&$.indexOf(C)>-1&&C in B)D[Y][C]=B[C](D[Y][C])}}function b0(D,$,B){return function(){let w=new Array(1+arguments.length);w[0]=$;for(var Y=1;Y<w.length;Y++)w[Y]=arguments[Y-1];return D[B].apply(this,w)}}function kK(D,$,B){let{send:w,ts:Y,methodLevel:C,methodValue:X,val:Q}=$,F=D._logEvent.bindings;I$(B,D._serialize||Object.keys(D.serializers),D.serializers,D._stdErrSerialize===void 0?!0:D._stdErrSerialize),D._logEvent.ts=Y,D._logEvent.messages=B.filter(function(Z){return F.indexOf(Z)===-1}),D._logEvent.level.label=C,D._logEvent.level.value=X,w(C,D._logEvent,Q),D._logEvent=nw(F)}function nw(D){return{ts:0,messages:[],bindings:D||[],level:{label:"",value:0}}}function yK(D){let $={type:D.constructor.name,msg:D.message,stack:D.stack};for(let B in D)if($[B]===void 0)$[B]=D[B];return $}function hK(D){if(typeof D.timestamp==="function")return D.timestamp;if(D.timestamp===!1)return lC;return oC}function H$(){return{}}function dw(D){return D}function M8(){}function lC(){return!1}function oC(){return Date.now()}function dK(){return Math.round(Date.now()/1000)}function nK(){return new Date(Date.now()).toISOString()}function pK(){function D($){return typeof $!=="undefined"&&$}try{if(typeof globalThis!=="undefined")return globalThis;return Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch($){return D(self)||D(window)||D(this)||{}}}});var YX=v((wX)=>{Object.defineProperty(wX,"__esModule",{value:!0});wX.BrowserRandomSource=void 0;var DX=65536;class $X{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let D=typeof self!=="undefined"?self.crypto||self.msCrypto:null;if(D&&D.getRandomValues!==void 0)this._crypto=D,this.isAvailable=!0,this.isInstantiated=!0}randomBytes(D){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");let $=new Uint8Array(D);for(let B=0;B<$.length;B+=DX)this._crypto.getRandomValues($.subarray(B,B+Math.min($.length-B,DX)));return $}}wX.BrowserRandomSource=$X});var dD=v((CX)=>{Object.defineProperty(CX,"__esModule",{value:!0});function DG(D){for(var $=0;$<D.length;$++)D[$]=0;return D}CX.wipe=DG});var FX=v((QX)=>{Object.defineProperty(QX,"__esModule",{value:!0});QX.NodeRandomSource=void 0;var YG=dD();class XX{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{let D=(BG(),hD(wG));if(D&&D.randomBytes)this._crypto=D,this.isAvailable=!0,this.isInstantiated=!0}}randomBytes(D){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let $=this._crypto.randomBytes(D);if($.length!==D)throw new Error("NodeRandomSource: got fewer bytes than requested");let B=new Uint8Array(D);for(let w=0;w<B.length;w++)B[w]=$[w];return YG.wipe($),B}}QX.NodeRandomSource=XX});var KX=v((JX)=>{Object.defineProperty(JX,"__esModule",{value:!0});JX.SystemRandomSource=void 0;var CG=YX(),XG=FX();class EX{constructor(){if(this.isAvailable=!1,this.name="",this._source=new CG.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new XG.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(D){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(D)}}JX.SystemRandomSource=EX});var zX=v((GX)=>{Object.defineProperty(GX,"__esModule",{value:!0});function QG(D,$){var B=D>>>16&65535,w=D&65535,Y=$>>>16&65535,C=$&65535;return w*C+(B*C+w*Y<<16>>>0)|0}GX.mul=Math.imul||QG;function ZG(D,$){return D+$|0}GX.add=ZG;function FG(D,$){return D-$|0}GX.sub=FG;function EG(D,$){return D<<$|D>>>32-$}GX.rotl=EG;function JG(D,$){return D<<32-$|D>>>$}GX.rotr=JG;function WG(D){return typeof D==="number"&&isFinite(D)&&Math.floor(D)===D}GX.isInteger=Number.isInteger||WG;GX.MAX_SAFE_INTEGER=9007199254740991;GX.isSafeInteger=function(D){return GX.isInteger(D)&&(D>=-GX.MAX_SAFE_INTEGER&&D<=GX.MAX_SAFE_INTEGER)}});var r0=v((IX)=>{Object.defineProperty(IX,"__esModule",{value:!0});var VX=zX();function OG(D,$){if($===void 0)$=0;return(D[$+0]<<8|D[$+1])<<16>>16}IX.readInt16BE=OG;function AG(D,$){if($===void 0)$=0;return(D[$+0]<<8|D[$+1])>>>0}IX.readUint16BE=AG;function HG(D,$){if($===void 0)$=0;return(D[$+1]<<8|D[$])<<16>>16}IX.readInt16LE=HG;function IG(D,$){if($===void 0)$=0;return(D[$+1]<<8|D[$])>>>0}IX.readUint16LE=IG;function PX(D,$,B){if($===void 0)$=new Uint8Array(2);if(B===void 0)B=0;return $[B+0]=D>>>8,$[B+1]=D>>>0,$}IX.writeUint16BE=PX;IX.writeInt16BE=PX;function OX(D,$,B){if($===void 0)$=new Uint8Array(2);if(B===void 0)B=0;return $[B+0]=D>>>0,$[B+1]=D>>>8,$}IX.writeUint16LE=OX;IX.writeInt16LE=OX;function $B(D,$){if($===void 0)$=0;return D[$]<<24|D[$+1]<<16|D[$+2]<<8|D[$+3]}IX.readInt32BE=$B;function wB(D,$){if($===void 0)$=0;return(D[$]<<24|D[$+1]<<16|D[$+2]<<8|D[$+3])>>>0}IX.readUint32BE=wB;function BB(D,$){if($===void 0)$=0;return D[$+3]<<24|D[$+2]<<16|D[$+1]<<8|D[$]}IX.readInt32LE=BB;function YB(D,$){if($===void 0)$=0;return(D[$+3]<<24|D[$+2]<<16|D[$+1]<<8|D[$])>>>0}IX.readUint32LE=YB;function f$(D,$,B){if($===void 0)$=new Uint8Array(4);if(B===void 0)B=0;return $[B+0]=D>>>24,$[B+1]=D>>>16,$[B+2]=D>>>8,$[B+3]=D>>>0,$}IX.writeUint32BE=f$;IX.writeInt32BE=f$;function U$(D,$,B){if($===void 0)$=new Uint8Array(4);if(B===void 0)B=0;return $[B+0]=D>>>0,$[B+1]=D>>>8,$[B+2]=D>>>16,$[B+3]=D>>>24,$}IX.writeUint32LE=U$;IX.writeInt32LE=U$;function fG(D,$){if($===void 0)$=0;var B=$B(D,$),w=$B(D,$+4);return B*4294967296+w-(w>>31)*4294967296}IX.readInt64BE=fG;function UG(D,$){if($===void 0)$=0;var B=wB(D,$),w=wB(D,$+4);return B*4294967296+w}IX.readUint64BE=UG;function MG(D,$){if($===void 0)$=0;var B=BB(D,$),w=BB(D,$+4);return w*4294967296+B-(B>>31)*4294967296}IX.readInt64LE=MG;function qG(D,$){if($===void 0)$=0;var B=YB(D,$),w=YB(D,$+4);return w*4294967296+B}IX.readUint64LE=qG;function AX(D,$,B){if($===void 0)$=new Uint8Array(8);if(B===void 0)B=0;return f$(D/4294967296>>>0,$,B),f$(D>>>0,$,B+4),$}IX.writeUint64BE=AX;IX.writeInt64BE=AX;function HX(D,$,B){if($===void 0)$=new Uint8Array(8);if(B===void 0)B=0;return U$(D>>>0,$,B),U$(D/4294967296>>>0,$,B+4),$}IX.writeUint64LE=HX;IX.writeInt64LE=HX;function TG(D,$,B){if(B===void 0)B=0;if(D%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(D/8>$.length-B)throw new Error("readUintBE: array is too short for the given bitLength");var w=0,Y=1;for(var C=D/8+B-1;C>=B;C--)w+=$[C]*Y,Y*=256;return w}IX.readUintBE=TG;function RG(D,$,B){if(B===void 0)B=0;if(D%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(D/8>$.length-B)throw new Error("readUintLE: array is too short for the given bitLength");var w=0,Y=1;for(var C=B;C<B+D/8;C++)w+=$[C]*Y,Y*=256;return w}IX.readUintLE=RG;function SG(D,$,B,w){if(B===void 0)B=new Uint8Array(D/8);if(w===void 0)w=0;if(D%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!VX.isSafeInteger($))throw new Error("writeUintBE value must be an integer");var Y=1;for(var C=D/8+w-1;C>=w;C--)B[C]=$/Y&255,Y*=256;return B}IX.writeUintBE=SG;function LG(D,$,B,w){if(B===void 0)B=new Uint8Array(D/8);if(w===void 0)w=0;if(D%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!VX.isSafeInteger($))throw new Error("writeUintLE value must be an integer");var Y=1;for(var C=w;C<w+D/8;C++)B[C]=$/Y&255,Y*=256;return B}IX.writeUintLE=LG;function jG(D,$){if($===void 0)$=0;var B=new DataView(D.buffer,D.byteOffset,D.byteLength);return B.getFloat32($)}IX.readFloat32BE=jG;function xG(D,$){if($===void 0)$=0;var B=new DataView(D.buffer,D.byteOffset,D.byteLength);return B.getFloat32($,!0)}IX.readFloat32LE=xG;function _G(D,$){if($===void 0)$=0;var B=new DataView(D.buffer,D.byteOffset,D.byteLength);return B.getFloat64($)}IX.readFloat64BE=_G;function mG(D,$){if($===void 0)$=0;var B=new DataView(D.buffer,D.byteOffset,D.byteLength);return B.getFloat64($,!0)}IX.readFloat64LE=mG;function uG(D,$,B){if($===void 0)$=new Uint8Array(4);if(B===void 0)B=0;var w=new DataView($.buffer,$.byteOffset,$.byteLength);return w.setFloat32(B,D),$}IX.writeFloat32BE=uG;function gG(D,$,B){if($===void 0)$=new Uint8Array(4);if(B===void 0)B=0;var w=new DataView($.buffer,$.byteOffset,$.byteLength);return w.setFloat32(B,D,!0),$}IX.writeFloat32LE=gG;function kG(D,$,B){if($===void 0)$=new Uint8Array(8);if(B===void 0)B=0;var w=new DataView($.buffer,$.byteOffset,$.byteLength);return w.setFloat64(B,D),$}IX.writeFloat64BE=kG;function yG(D,$,B){if($===void 0)$=new Uint8Array(8);if(B===void 0)B=0;var w=new DataView($.buffer,$.byteOffset,$.byteLength);return w.setFloat64(B,D,!0),$}IX.writeFloat64LE=yG});var L8=v((qX)=>{Object.defineProperty(qX,"__esModule",{value:!0});qX.randomStringForEntropy=qX.randomString=qX.randomUint32=qX.randomBytes=qX.defaultRandomSource=void 0;var HN=KX(),IN=r0(),fX=dD();qX.defaultRandomSource=new HN.SystemRandomSource;function CB(D,$=qX.defaultRandomSource){return $.randomBytes(D)}qX.randomBytes=CB;function fN(D=qX.defaultRandomSource){let $=CB(4,D),B=IN.readUint32LE($);return fX.wipe($),B}qX.randomUint32=fN;var UX="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function MX(D,$=UX,B=qX.defaultRandomSource){if($.length<2)throw new Error("randomString charset is too short");if($.length>256)throw new Error("randomString charset is too long");let w="",Y=$.length,C=256-256%Y;while(D>0){let X=CB(Math.ceil(D*256/C),B);for(let Q=0;Q<X.length&&D>0;Q++){let F=X[Q];if(F<C)w+=$.charAt(F%Y),D--}fX.wipe(X)}return w}qX.randomString=MX;function UN(D,$=UX,B=qX.defaultRandomSource){let w=Math.ceil(D/(Math.log($.length)/Math.LN2));return MX(w,$,B)}qX.randomStringForEntropy=UN});var xX=v((LX)=>{Object.defineProperty(LX,"__esModule",{value:!0});var l0=r0(),i0=dD();LX.DIGEST_LENGTH=64;LX.BLOCK_SIZE=128;var SX=function(){function D(){this.digestLength=LX.DIGEST_LENGTH,this.blockSize=LX.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return D.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},D.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},D.prototype.clean=function(){i0.wipe(this._buffer),i0.wipe(this._tempHi),i0.wipe(this._tempLo),this.reset()},D.prototype.update=function($,B){if(B===void 0)B=$.length;if(this._finished)throw new Error("SHA512: can't update because hash was finished.");var w=0;if(this._bytesHashed+=B,this._bufferLength>0){while(this._bufferLength<LX.BLOCK_SIZE&&B>0)this._buffer[this._bufferLength++]=$[w++],B--;if(this._bufferLength===this.blockSize)XB(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0}if(B>=this.blockSize)w=XB(this._tempHi,this._tempLo,this._stateHi,this._stateLo,$,w,B),B%=this.blockSize;while(B>0)this._buffer[this._bufferLength++]=$[w++],B--;return this},D.prototype.finish=function($){if(!this._finished){var B=this._bytesHashed,w=this._bufferLength,Y=B/536870912|0,C=B<<3,X=B%128<112?128:256;this._buffer[w]=128;for(var Q=w+1;Q<X-8;Q++)this._buffer[Q]=0;l0.writeUint32BE(Y,this._buffer,X-8),l0.writeUint32BE(C,this._buffer,X-4),XB(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,X),this._finished=!0}for(var Q=0;Q<this.digestLength/8;Q++)l0.writeUint32BE(this._stateHi[Q],$,Q*8),l0.writeUint32BE(this._stateLo[Q],$,Q*8+4);return this},D.prototype.digest=function(){var $=new Uint8Array(this.digestLength);return this.finish($),$},D.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},D.prototype.restoreState=function($){if(this._stateHi.set($.stateHi),this._stateLo.set($.stateLo),this._bufferLength=$.bufferLength,$.buffer)this._buffer.set($.buffer);return this._bytesHashed=$.bytesHashed,this._finished=!1,this},D.prototype.cleanSavedState=function($){if(i0.wipe($.stateHi),i0.wipe($.stateLo),$.buffer)i0.wipe($.buffer);$.bufferLength=0,$.bytesHashed=0},D}();LX.SHA512=SX;var RX=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function XB(D,$,B,w,Y,C,X){var Q=B[0],F=B[1],Z=B[2],E=B[3],J=B[4],G=B[5],W=B[6],K=B[7],V=w[0],O=w[1],H=w[2],f=w[3],P=w[4],A=w[5],T=w[6],R=w[7],N,z,S,x,M,I,U,q;while(X>=128){for(var u=0;u<16;u++){var g=8*u+C;D[u]=l0.readUint32BE(Y,g),$[u]=l0.readUint32BE(Y,g+4)}for(var u=0;u<80;u++){var j=Q,b=F,BD=Z,m=E,y=J,h=G,d=W,k=K,n=V,p=O,c=H,r=f,l=P,o=A,s=T,i=R;if(N=K,z=R,M=z&65535,I=z>>>16,U=N&65535,q=N>>>16,N=(J>>>14|P<<18)^(J>>>18|P<<14)^(P>>>9|J<<23),z=(P>>>14|J<<18)^(P>>>18|J<<14)^(J>>>9|P<<23),M+=z&65535,I+=z>>>16,U+=N&65535,q+=N>>>16,N=J&G^~J&W,z=P&A^~P&T,M+=z&65535,I+=z>>>16,U+=N&65535,q+=N>>>16,N=RX[u*2],z=RX[u*2+1],M+=z&65535,I+=z>>>16,U+=N&65535,q+=N>>>16,N=D[u%16],z=$[u%16],M+=z&65535,I+=z>>>16,U+=N&65535,q+=N>>>16,I+=M>>>16,U+=I>>>16,q+=U>>>16,S=U&65535|q<<16,x=M&65535|I<<16,N=S,z=x,M=z&65535,I=z>>>16,U=N&65535,q=N>>>16,N=(Q>>>28|V<<4)^(V>>>2|Q<<30)^(V>>>7|Q<<25),z=(V>>>28|Q<<4)^(Q>>>2|V<<30)^(Q>>>7|V<<25),M+=z&65535,I+=z>>>16,U+=N&65535,q+=N>>>16,N=Q&F^Q&Z^F&Z,z=V&O^V&H^O&H,M+=z&65535,I+=z>>>16,U+=N&65535,q+=N>>>16,I+=M>>>16,U+=I>>>16,q+=U>>>16,k=U&65535|q<<16,i=M&65535|I<<16,N=m,z=r,M=z&65535,I=z>>>16,U=N&65535,q=N>>>16,N=S,z=x,M+=z&65535,I+=z>>>16,U+=N&65535,q+=N>>>16,I+=M>>>16,U+=I>>>16,q+=U>>>16,m=U&65535|q<<16,r=M&65535|I<<16,F=j,Z=b,E=BD,J=m,G=y,W=h,K=d,Q=k,O=n,H=p,f=c,P=r,A=l,T=o,R=s,V=i,u%16===15)for(var g=0;g<16;g++)N=D[g],z=$[g],M=z&65535,I=z>>>16,U=N&65535,q=N>>>16,N=D[(g+9)%16],z=$[(g+9)%16],M+=z&65535,I+=z>>>16,U+=N&65535,q+=N>>>16,S=D[(g+1)%16],x=$[(g+1)%16],N=(S>>>1|x<<31)^(S>>>8|x<<24)^S>>>7,z=(x>>>1|S<<31)^(x>>>8|S<<24)^(x>>>7|S<<25),M+=z&65535,I+=z>>>16,U+=N&65535,q+=N>>>16,S=D[(g+14)%16],x=$[(g+14)%16],N=(S>>>19|x<<13)^(x>>>29|S<<3)^S>>>6,z=(x>>>19|S<<13)^(S>>>29|x<<3)^(x>>>6|S<<26),M+=z&65535,I+=z>>>16,U+=N&65535,q+=N>>>16,I+=M>>>16,U+=I>>>16,q+=U>>>16,D[g]=U&65535|q<<16,$[g]=M&65535|I<<16}N=Q,z=V,M=z&65535,I=z>>>16,U=N&65535,q=N>>>16,N=B[0],z=w[0],M+=z&65535,I+=z>>>16,U+=N&65535,q+=N>>>16,I+=M>>>16,U+=I>>>16,q+=U>>>16,B[0]=Q=U&65535|q<<16,w[0]=V=M&65535|I<<16,N=F,z=O,M=z&65535,I=z>>>16,U=N&65535,q=N>>>16,N=B[1],z=w[1],M+=z&65535,I+=z>>>16,U+=N&65535,q+=N>>>16,I+=M>>>16,U+=I>>>16,q+=U>>>16,B[1]=F=U&65535|q<<16,w[1]=O=M&65535|I<<16,N=Z,z=H,M=z&65535,I=z>>>16,U=N&65535,q=N>>>16,N=B[2],z=w[2],M+=z&65535,I+=z>>>16,U+=N&65535,q+=N>>>16,I+=M>>>16,U+=I>>>16,q+=U>>>16,B[2]=Z=U&65535|q<<16,w[2]=H=M&65535|I<<16,N=E,z=f,M=z&65535,I=z>>>16,U=N&65535,q=N>>>16,N=B[3],z=w[3],M+=z&65535,I+=z>>>16,U+=N&65535,q+=N>>>16,I+=M>>>16,U+=I>>>16,q+=U>>>16,B[3]=E=U&65535|q<<16,w[3]=f=M&65535|I<<16,N=J,z=P,M=z&65535,I=z>>>16,U=N&65535,q=N>>>16,N=B[4],z=w[4],M+=z&65535,I+=z>>>16,U+=N&65535,q+=N>>>16,I+=M>>>16,U+=I>>>16,q+=U>>>16,B[4]=J=U&65535|q<<16,w[4]=P=M&65535|I<<16,N=G,z=A,M=z&65535,I=z>>>16,U=N&65535,q=N>>>16,N=B[5],z=w[5],M+=z&65535,I+=z>>>16,U+=N&65535,q+=N>>>16,I+=M>>>16,U+=I>>>16,q+=U>>>16,B[5]=G=U&65535|q<<16,w[5]=A=M&65535|I<<16,N=W,z=T,M=z&65535,I=z>>>16,U=N&65535,q=N>>>16,N=B[6],z=w[6],M+=z&65535,I+=z>>>16,U+=N&65535,q+=N>>>16,I+=M>>>16,U+=I>>>16,q+=U>>>16,B[6]=W=U&65535|q<<16,w[6]=T=M&65535|I<<16,N=K,z=R,M=z&65535,I=z>>>16,U=N&65535,q=N>>>16,N=B[7],z=w[7],M+=z&65535,I+=z>>>16,U+=N&65535,q+=N>>>16,I+=M>>>16,U+=I>>>16,q+=U>>>16,B[7]=K=U&65535|q<<16,w[7]=R=M&65535|I<<16,C+=128,X-=128}return C}function RN(D){var $=new SX;$.update(D);var B=$.digest();return $.clean(),B}LX.hash=RN});var lX=v((rX)=>{Object.defineProperty(rX,"__esModule",{value:!0});rX.convertSecretKeyToX25519=rX.convertPublicKeyToX25519=rX.verify=rX.sign=rX.extractPublicKeyFromSecretKey=rX.generateKeyPair=rX.generateKeyPairFromSeed=rX.SEED_LENGTH=rX.SECRET_KEY_LENGTH=rX.PUBLIC_KEY_LENGTH=rX.SIGNATURE_LENGTH=void 0;var jN=L8(),j8=xX(),kX=dD();rX.SIGNATURE_LENGTH=64;rX.PUBLIC_KEY_LENGTH=32;rX.SECRET_KEY_LENGTH=64;rX.SEED_LENGTH=32;function _(D){let $=new Float64Array(16);if(D)for(let B=0;B<D.length;B++)$[B]=D[B];return $}var xN=new Uint8Array(32);xN[0]=9;var EB=_(),o0=_([1]),_N=_([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),mN=_([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),_X=_([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),mX=_([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),uN=_([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function W0(D,$){for(let B=0;B<16;B++)D[B]=$[B]|0}function ZB(D){let $=1;for(let B=0;B<16;B++){let w=D[B]+$+65535;$=Math.floor(w/65536),D[B]=w-$*65536}D[0]+=$-1+37*($-1)}function yX(D,$,B){let w=~(B-1);for(let Y=0;Y<16;Y++){let C=w&(D[Y]^$[Y]);D[Y]^=C,$[Y]^=C}}function x8(D,$){let B=_(),w=_();for(let Y=0;Y<16;Y++)w[Y]=$[Y];ZB(w),ZB(w),ZB(w);for(let Y=0;Y<2;Y++){B[0]=w[0]-65517;for(let X=1;X<15;X++)B[X]=w[X]-65535-(B[X-1]>>16&1),B[X-1]&=65535;B[15]=w[15]-32767-(B[14]>>16&1);let C=B[15]>>16&1;B[14]&=65535,yX(w,B,1-C)}for(let Y=0;Y<16;Y++)D[2*Y]=w[Y]&255,D[2*Y+1]=w[Y]>>8}function hX(D,$){let B=0;for(let w=0;w<32;w++)B|=D[w]^$[w];return(1&B-1>>>8)-1}function uX(D,$){let B=new Uint8Array(32),w=new Uint8Array(32);return x8(B,D),x8(w,$),hX(B,w)}function dX(D){let $=new Uint8Array(32);return x8($,D),$[0]&1}function gN(D,$){for(let B=0;B<16;B++)D[B]=$[2*B]+($[2*B+1]<<8);D[15]&=32767}function f0(D,$,B){for(let w=0;w<16;w++)D[w]=$[w]+B[w]}function M0(D,$,B){for(let w=0;w<16;w++)D[w]=$[w]-B[w]}function wD(D,$,B){let w,Y,C=0,X=0,Q=0,F=0,Z=0,E=0,J=0,G=0,W=0,K=0,V=0,O=0,H=0,f=0,P=0,A=0,T=0,R=0,N=0,z=0,S=0,x=0,M=0,I=0,U=0,q=0,u=0,g=0,j=0,b=0,BD=0,m=B[0],y=B[1],h=B[2],d=B[3],k=B[4],n=B[5],p=B[6],c=B[7],r=B[8],l=B[9],o=B[10],s=B[11],i=B[12],t=B[13],e=B[14],DD=B[15];w=$[0],C+=w*m,X+=w*y,Q+=w*h,F+=w*d,Z+=w*k,E+=w*n,J+=w*p,G+=w*c,W+=w*r,K+=w*l,V+=w*o,O+=w*s,H+=w*i,f+=w*t,P+=w*e,A+=w*DD,w=$[1],X+=w*m,Q+=w*y,F+=w*h,Z+=w*d,E+=w*k,J+=w*n,G+=w*p,W+=w*c,K+=w*r,V+=w*l,O+=w*o,H+=w*s,f+=w*i,P+=w*t,A+=w*e,T+=w*DD,w=$[2],Q+=w*m,F+=w*y,Z+=w*h,E+=w*d,J+=w*k,G+=w*n,W+=w*p,K+=w*c,V+=w*r,O+=w*l,H+=w*o,f+=w*s,P+=w*i,A+=w*t,T+=w*e,R+=w*DD,w=$[3],F+=w*m,Z+=w*y,E+=w*h,J+=w*d,G+=w*k,W+=w*n,K+=w*p,V+=w*c,O+=w*r,H+=w*l,f+=w*o,P+=w*s,A+=w*i,T+=w*t,R+=w*e,N+=w*DD,w=$[4],Z+=w*m,E+=w*y,J+=w*h,G+=w*d,W+=w*k,K+=w*n,V+=w*p,O+=w*c,H+=w*r,f+=w*l,P+=w*o,A+=w*s,T+=w*i,R+=w*t,N+=w*e,z+=w*DD,w=$[5],E+=w*m,J+=w*y,G+=w*h,W+=w*d,K+=w*k,V+=w*n,O+=w*p,H+=w*c,f+=w*r,P+=w*l,A+=w*o,T+=w*s,R+=w*i,N+=w*t,z+=w*e,S+=w*DD,w=$[6],J+=w*m,G+=w*y,W+=w*h,K+=w*d,V+=w*k,O+=w*n,H+=w*p,f+=w*c,P+=w*r,A+=w*l,T+=w*o,R+=w*s,N+=w*i,z+=w*t,S+=w*e,x+=w*DD,w=$[7],G+=w*m,W+=w*y,K+=w*h,V+=w*d,O+=w*k,H+=w*n,f+=w*p,P+=w*c,A+=w*r,T+=w*l,R+=w*o,N+=w*s,z+=w*i,S+=w*t,x+=w*e,M+=w*DD,w=$[8],W+=w*m,K+=w*y,V+=w*h,O+=w*d,H+=w*k,f+=w*n,P+=w*p,A+=w*c,T+=w*r,R+=w*l,N+=w*o,z+=w*s,S+=w*i,x+=w*t,M+=w*e,I+=w*DD,w=$[9],K+=w*m,V+=w*y,O+=w*h,H+=w*d,f+=w*k,P+=w*n,A+=w*p,T+=w*c,R+=w*r,N+=w*l,z+=w*o,S+=w*s,x+=w*i,M+=w*t,I+=w*e,U+=w*DD,w=$[10],V+=w*m,O+=w*y,H+=w*h,f+=w*d,P+=w*k,A+=w*n,T+=w*p,R+=w*c,N+=w*r,z+=w*l,S+=w*o,x+=w*s,M+=w*i,I+=w*t,U+=w*e,q+=w*DD,w=$[11],O+=w*m,H+=w*y,f+=w*h,P+=w*d,A+=w*k,T+=w*n,R+=w*p,N+=w*c,z+=w*r,S+=w*l,x+=w*o,M+=w*s,I+=w*i,U+=w*t,q+=w*e,u+=w*DD,w=$[12],H+=w*m,f+=w*y,P+=w*h,A+=w*d,T+=w*k,R+=w*n,N+=w*p,z+=w*c,S+=w*r,x+=w*l,M+=w*o,I+=w*s,U+=w*i,q+=w*t,u+=w*e,g+=w*DD,w=$[13],f+=w*m,P+=w*y,A+=w*h,T+=w*d,R+=w*k,N+=w*n,z+=w*p,S+=w*c,x+=w*r,M+=w*l,I+=w*o,U+=w*s,q+=w*i,u+=w*t,g+=w*e,j+=w*DD,w=$[14],P+=w*m,A+=w*y,T+=w*h,R+=w*d,N+=w*k,z+=w*n,S+=w*p,x+=w*c,M+=w*r,I+=w*l,U+=w*o,q+=w*s,u+=w*i,g+=w*t,j+=w*e,b+=w*DD,w=$[15],A+=w*m,T+=w*y,R+=w*h,N+=w*d,z+=w*k,S+=w*n,x+=w*p,M+=w*c,I+=w*r,U+=w*l,q+=w*o,u+=w*s,g+=w*i,j+=w*t,b+=w*e,BD+=w*DD,C+=38*T,X+=38*R,Q+=38*N,F+=38*z,Z+=38*S,E+=38*x,J+=38*M,G+=38*I,W+=38*U,K+=38*q,V+=38*u,O+=38*g,H+=38*j,f+=38*b,P+=38*BD,Y=1,w=C+Y+65535,Y=Math.floor(w/65536),C=w-Y*65536,w=X+Y+65535,Y=Math.floor(w/65536),X=w-Y*65536,w=Q+Y+65535,Y=Math.floor(w/65536),Q=w-Y*65536,w=F+Y+65535,Y=Math.floor(w/65536),F=w-Y*65536,w=Z+Y+65535,Y=Math.floor(w/65536),Z=w-Y*65536,w=E+Y+65535,Y=Math.floor(w/65536),E=w-Y*65536,w=J+Y+65535,Y=Math.floor(w/65536),J=w-Y*65536,w=G+Y+65535,Y=Math.floor(w/65536),G=w-Y*65536,w=W+Y+65535,Y=Math.floor(w/65536),W=w-Y*65536,w=K+Y+65535,Y=Math.floor(w/65536),K=w-Y*65536,w=V+Y+65535,Y=Math.floor(w/65536),V=w-Y*65536,w=O+Y+65535,Y=Math.floor(w/65536),O=w-Y*65536,w=H+Y+65535,Y=Math.floor(w/65536),H=w-Y*65536,w=f+Y+65535,Y=Math.floor(w/65536),f=w-Y*65536,w=P+Y+65535,Y=Math.floor(w/65536),P=w-Y*65536,w=A+Y+65535,Y=Math.floor(w/65536),A=w-Y*65536,C+=Y-1+37*(Y-1),Y=1,w=C+Y+65535,Y=Math.floor(w/65536),C=w-Y*65536,w=X+Y+65535,Y=Math.floor(w/65536),X=w-Y*65536,w=Q+Y+65535,Y=Math.floor(w/65536),Q=w-Y*65536,w=F+Y+65535,Y=Math.floor(w/65536),F=w-Y*65536,w=Z+Y+65535,Y=Math.floor(w/65536),Z=w-Y*65536,w=E+Y+65535,Y=Math.floor(w/65536),E=w-Y*65536,w=J+Y+65535,Y=Math.floor(w/65536),J=w-Y*65536,w=G+Y+65535,Y=Math.floor(w/65536),G=w-Y*65536,w=W+Y+65535,Y=Math.floor(w/65536),W=w-Y*65536,w=K+Y+65535,Y=Math.floor(w/65536),K=w-Y*65536,w=V+Y+65535,Y=Math.floor(w/65536),V=w-Y*65536,w=O+Y+65535,Y=Math.floor(w/65536),O=w-Y*65536,w=H+Y+65535,Y=Math.floor(w/65536),H=w-Y*65536,w=f+Y+65535,Y=Math.floor(w/65536),f=w-Y*65536,w=P+Y+65535,Y=Math.floor(w/65536),P=w-Y*65536,w=A+Y+65535,Y=Math.floor(w/65536),A=w-Y*65536,C+=Y-1+37*(Y-1),D[0]=C,D[1]=X,D[2]=Q,D[3]=F,D[4]=Z,D[5]=E,D[6]=J,D[7]=G,D[8]=W,D[9]=K,D[10]=V,D[11]=O,D[12]=H,D[13]=f,D[14]=P,D[15]=A}function U0(D,$){wD(D,$,$)}function nX(D,$){let B=_(),w;for(w=0;w<16;w++)B[w]=$[w];for(w=253;w>=0;w--)if(U0(B,B),w!==2&&w!==4)wD(B,B,$);for(w=0;w<16;w++)D[w]=B[w]}function kN(D,$){let B=_(),w;for(w=0;w<16;w++)B[w]=$[w];for(w=250;w>=0;w--)if(U0(B,B),w!==1)wD(B,B,$);for(w=0;w<16;w++)D[w]=B[w]}function JB(D,$){let B=_(),w=_(),Y=_(),C=_(),X=_(),Q=_(),F=_(),Z=_(),E=_();M0(B,D[1],D[0]),M0(E,$[1],$[0]),wD(B,B,E),f0(w,D[0],D[1]),f0(E,$[0],$[1]),wD(w,w,E),wD(Y,D[3],$[3]),wD(Y,Y,mN),wD(C,D[2],$[2]),f0(C,C,C),M0(X,w,B),M0(Q,C,Y),f0(F,C,Y),f0(Z,w,B),wD(D[0],X,Q),wD(D[1],Z,F),wD(D[2],F,Q),wD(D[3],X,Z)}function gX(D,$,B){for(let w=0;w<4;w++)yX(D[w],$[w],B)}function zB(D,$){let B=_(),w=_(),Y=_();nX(Y,$[2]),wD(B,$[0],Y),wD(w,$[1],Y),x8(D,w),D[31]^=dX(B)<<7}function pX(D,$,B){W0(D[0],EB),W0(D[1],o0),W0(D[2],o0),W0(D[3],EB);for(let w=255;w>=0;--w){let Y=B[w/8|0]>>(w&7)&1;gX(D,$,Y),JB($,D),JB(D,D),gX(D,$,Y)}}function VB(D,$){let B=[_(),_(),_(),_()];W0(B[0],_X),W0(B[1],mX),W0(B[2],o0),wD(B[3],_X,mX),pX(D,B,$)}function cX(D){if(D.length!==rX.SEED_LENGTH)throw new Error(`ed25519: seed must be ${rX.SEED_LENGTH} bytes`);let $=j8.hash(D);$[0]&=248,$[31]&=127,$[31]|=64;let B=new Uint8Array(32),w=[_(),_(),_(),_()];VB(w,$),zB(B,w);let Y=new Uint8Array(64);return Y.set(D),Y.set(B,32),{publicKey:B,secretKey:Y}}rX.generateKeyPairFromSeed=cX;function yN(D){let $=jN.randomBytes(32,D),B=cX($);return kX.wipe($),B}rX.generateKeyPair=yN;function hN(D){if(D.length!==rX.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${rX.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(D.subarray(32))}rX.extractPublicKeyFromSecretKey=hN;var FB=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function bX(D,$){let B,w,Y,C;for(w=63;w>=32;--w){B=0;for(Y=w-32,C=w-12;Y<C;++Y)$[Y]+=B-16*$[w]*FB[Y-(w-32)],B=Math.floor(($[Y]+128)/256),$[Y]-=B*256;$[Y]+=B,$[w]=0}B=0;for(Y=0;Y<32;Y++)$[Y]+=B-($[31]>>4)*FB[Y],B=$[Y]>>8,$[Y]&=255;for(Y=0;Y<32;Y++)$[Y]-=B*FB[Y];for(w=0;w<32;w++)$[w+1]+=$[w]>>8,D[w]=$[w]&255}function WB(D){let $=new Float64Array(64);for(let B=0;B<64;B++)$[B]=D[B];for(let B=0;B<64;B++)D[B]=0;bX(D,$)}function dN(D,$){let B=new Float64Array(64),w=[_(),_(),_(),_()],Y=j8.hash(D.subarray(0,32));Y[0]&=248,Y[31]&=127,Y[31]|=64;let C=new Uint8Array(64);C.set(Y.subarray(32),32);let X=new j8.SHA512;X.update(C.subarray(32)),X.update($);let Q=X.digest();X.clean(),WB(Q),VB(w,Q),zB(C,w),X.reset(),X.update(C.subarray(0,32)),X.update(D.subarray(32)),X.update($);let F=X.digest();WB(F);for(let Z=0;Z<32;Z++)B[Z]=Q[Z];for(let Z=0;Z<32;Z++)for(let E=0;E<32;E++)B[Z+E]+=F[Z]*Y[E];return bX(C.subarray(32),B),C}rX.sign=dN;function vX(D,$){let B=_(),w=_(),Y=_(),C=_(),X=_(),Q=_(),F=_();if(W0(D[2],o0),gN(D[1],$),U0(Y,D[1]),wD(C,Y,_N),M0(Y,Y,D[2]),f0(C,D[2],C),U0(X,C),U0(Q,X),wD(F,Q,X),wD(B,F,Y),wD(B,B,C),kN(B,B),wD(B,B,Y),wD(B,B,C),wD(B,B,C),wD(D[0],B,C),U0(w,D[0]),wD(w,w,C),uX(w,Y))wD(D[0],D[0],uN);if(U0(w,D[0]),wD(w,w,C),uX(w,Y))return-1;if(dX(D[0])===$[31]>>7)M0(D[0],EB,D[0]);return wD(D[3],D[0],D[1]),0}function nN(D,$,B){let w=new Uint8Array(32),Y=[_(),_(),_(),_()],C=[_(),_(),_(),_()];if(B.length!==rX.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${rX.SIGNATURE_LENGTH} bytes`);if(vX(C,D))return!1;let X=new j8.SHA512;X.update(B.subarray(0,32)),X.update(D),X.update($);let Q=X.digest();if(WB(Q),pX(Y,C,Q),VB(C,B.subarray(32)),JB(Y,C),zB(w,Y),hX(B,w))return!1;return!0}rX.verify=nN;function pN(D){let $=[_(),_(),_(),_()];if(vX($,D))throw new Error("Ed25519: invalid public key");let B=_(),w=_(),Y=$[1];f0(B,o0,Y),M0(w,o0,Y),nX(w,w),wD(B,B,w);let C=new Uint8Array(32);return x8(C,B),C}rX.convertPublicKeyToX25519=pN;function cN(D){let $=j8.hash(D.subarray(0,32));$[0]&=248,$[31]&=127,$[31]|=64;let B=new Uint8Array($.subarray(0,32));return kX.wipe($),B}rX.convertSecretKeyToX25519=cN});var kQ=v((gQ)=>{Object.defineProperty(gQ,"__esModule",{value:!0});var ID=r0(),yB=dD(),FV=20;function EV(D,$,B){var w=1634760805,Y=857760878,C=2036477234,X=1797285236,Q=B[3]<<24|B[2]<<16|B[1]<<8|B[0],F=B[7]<<24|B[6]<<16|B[5]<<8|B[4],Z=B[11]<<24|B[10]<<16|B[9]<<8|B[8],E=B[15]<<24|B[14]<<16|B[13]<<8|B[12],J=B[19]<<24|B[18]<<16|B[17]<<8|B[16],G=B[23]<<24|B[22]<<16|B[21]<<8|B[20],W=B[27]<<24|B[26]<<16|B[25]<<8|B[24],K=B[31]<<24|B[30]<<16|B[29]<<8|B[28],V=$[3]<<24|$[2]<<16|$[1]<<8|$[0],O=$[7]<<24|$[6]<<16|$[5]<<8|$[4],H=$[11]<<24|$[10]<<16|$[9]<<8|$[8],f=$[15]<<24|$[14]<<16|$[13]<<8|$[12],P=w,A=Y,T=C,R=X,N=Q,z=F,S=Z,x=E,M=J,I=G,U=W,q=K,u=V,g=O,j=H,b=f;for(var BD=0;BD<FV;BD+=2)P=P+N|0,u^=P,u=u>>>16|u<<16,M=M+u|0,N^=M,N=N>>>20|N<<12,A=A+z|0,g^=A,g=g>>>16|g<<16,I=I+g|0,z^=I,z=z>>>20|z<<12,T=T+S|0,j^=T,j=j>>>16|j<<16,U=U+j|0,S^=U,S=S>>>20|S<<12,R=R+x|0,b^=R,b=b>>>16|b<<16,q=q+b|0,x^=q,x=x>>>20|x<<12,T=T+S|0,j^=T,j=j>>>24|j<<8,U=U+j|0,S^=U,S=S>>>25|S<<7,R=R+x|0,b^=R,b=b>>>24|b<<8,q=q+b|0,x^=q,x=x>>>25|x<<7,A=A+z|0,g^=A,g=g>>>24|g<<8,I=I+g|0,z^=I,z=z>>>25|z<<7,P=P+N|0,u^=P,u=u>>>24|u<<8,M=M+u|0,N^=M,N=N>>>25|N<<7,P=P+z|0,b^=P,b=b>>>16|b<<16,U=U+b|0,z^=U,z=z>>>20|z<<12,A=A+S|0,u^=A,u=u>>>16|u<<16,q=q+u|0,S^=q,S=S>>>20|S<<12,T=T+x|0,g^=T,g=g>>>16|g<<16,M=M+g|0,x^=M,x=x>>>20|x<<12,R=R+N|0,j^=R,j=j>>>16|j<<16,I=I+j|0,N^=I,N=N>>>20|N<<12,T=T+x|0,g^=T,g=g>>>24|g<<8,M=M+g|0,x^=M,x=x>>>25|x<<7,R=R+N|0,j^=R,j=j>>>24|j<<8,I=I+j|0,N^=I,N=N>>>25|N<<7,A=A+S|0,u^=A,u=u>>>24|u<<8,q=q+u|0,S^=q,S=S>>>25|S<<7,P=P+z|0,b^=P,b=b>>>24|b<<8,U=U+b|0,z^=U,z=z>>>25|z<<7;ID.writeUint32LE(P+w|0,D,0),ID.writeUint32LE(A+Y|0,D,4),ID.writeUint32LE(T+C|0,D,8),ID.writeUint32LE(R+X|0,D,12),ID.writeUint32LE(N+Q|0,D,16),ID.writeUint32LE(z+F|0,D,20),ID.writeUint32LE(S+Z|0,D,24),ID.writeUint32LE(x+E|0,D,28),ID.writeUint32LE(M+J|0,D,32),ID.writeUint32LE(I+G|0,D,36),ID.writeUint32LE(U+W|0,D,40),ID.writeUint32LE(q+K|0,D,44),ID.writeUint32LE(u+V|0,D,48),ID.writeUint32LE(g+O|0,D,52),ID.writeUint32LE(j+H|0,D,56),ID.writeUint32LE(b+f|0,D,60)}function uQ(D,$,B,w,Y){if(Y===void 0)Y=0;if(D.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(w.length<B.length)throw new Error("ChaCha: destination is shorter than source");var C,X;if(Y===0){if($.length!==8&&$.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");C=new Uint8Array(16),X=C.length-$.length,C.set($,X)}else{if($.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");C=$,X=Y}var Q=new Uint8Array(64);for(var F=0;F<B.length;F+=64){EV(Q,C,D);for(var Z=F;Z<F+64&&Z<B.length;Z++)w[Z]=B[Z]^Q[Z-F];WV(C,0,X)}if(yB.wipe(Q),Y===0)yB.wipe(C);return w}gQ.streamXOR=uQ;function JV(D,$,B,w){if(w===void 0)w=0;return yB.wipe(B),uQ(D,$,B,B,w)}gQ.stream=JV;function WV(D,$,B){var w=1;while(B--)w=w+(D[$]&255)|0,D[$]=w&255,w>>>=8,$++;if(w>0)throw new Error("ChaCha: counter overflow")}});var j$=v((hQ)=>{Object.defineProperty(hQ,"__esModule",{value:!0});function NV(D,$,B){return~(D-1)&$|D-1&B}hQ.select=NV;function zV(D,$){return(D|0)-($|0)-1>>>31&1}hQ.lessOrEqual=zV;function yQ(D,$){if(D.length!==$.length)return 0;var B=0;for(var w=0;w<D.length;w++)B|=D[w]^$[w];return 1&B-1>>>8}hQ.compare=yQ;function VV(D,$){if(D.length===0||$.length===0)return!1;return yQ(D,$)!==0}hQ.equal=VV});var pQ=v((nQ)=>{Object.defineProperty(nQ,"__esModule",{value:!0});var IV=j$(),x$=dD();nQ.DIGEST_LENGTH=16;var dQ=function(){function D($){this.digestLength=nQ.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var B=$[0]|$[1]<<8;this._r[0]=B&8191;var w=$[2]|$[3]<<8;this._r[1]=(B>>>13|w<<3)&8191;var Y=$[4]|$[5]<<8;this._r[2]=(w>>>10|Y<<6)&7939;var C=$[6]|$[7]<<8;this._r[3]=(Y>>>7|C<<9)&8191;var X=$[8]|$[9]<<8;this._r[4]=(C>>>4|X<<12)&255,this._r[5]=X>>>1&8190;var Q=$[10]|$[11]<<8;this._r[6]=(X>>>14|Q<<2)&8191;var F=$[12]|$[13]<<8;this._r[7]=(Q>>>11|F<<5)&8065;var Z=$[14]|$[15]<<8;this._r[8]=(F>>>8|Z<<8)&8191,this._r[9]=Z>>>5&127,this._pad[0]=$[16]|$[17]<<8,this._pad[1]=$[18]|$[19]<<8,this._pad[2]=$[20]|$[21]<<8,this._pad[3]=$[22]|$[23]<<8,this._pad[4]=$[24]|$[25]<<8,this._pad[5]=$[26]|$[27]<<8,this._pad[6]=$[28]|$[29]<<8,this._pad[7]=$[30]|$[31]<<8}return D.prototype._blocks=function($,B,w){var Y=this._fin?0:2048,C=this._h[0],X=this._h[1],Q=this._h[2],F=this._h[3],Z=this._h[4],E=this._h[5],J=this._h[6],G=this._h[7],W=this._h[8],K=this._h[9],V=this._r[0],O=this._r[1],H=this._r[2],f=this._r[3],P=this._r[4],A=this._r[5],T=this._r[6],R=this._r[7],N=this._r[8],z=this._r[9];while(w>=16){var S=$[B+0]|$[B+1]<<8;C+=S&8191;var x=$[B+2]|$[B+3]<<8;X+=(S>>>13|x<<3)&8191;var M=$[B+4]|$[B+5]<<8;Q+=(x>>>10|M<<6)&8191;var I=$[B+6]|$[B+7]<<8;F+=(M>>>7|I<<9)&8191;var U=$[B+8]|$[B+9]<<8;Z+=(I>>>4|U<<12)&8191,E+=U>>>1&8191;var q=$[B+10]|$[B+11]<<8;J+=(U>>>14|q<<2)&8191;var u=$[B+12]|$[B+13]<<8;G+=(q>>>11|u<<5)&8191;var g=$[B+14]|$[B+15]<<8;W+=(u>>>8|g<<8)&8191,K+=g>>>5|Y;var j=0,b=j;b+=C*V,b+=X*(5*z),b+=Q*(5*N),b+=F*(5*R),b+=Z*(5*T),j=b>>>13,b&=8191,b+=E*(5*A),b+=J*(5*P),b+=G*(5*f),b+=W*(5*H),b+=K*(5*O),j+=b>>>13,b&=8191;var BD=j;BD+=C*O,BD+=X*V,BD+=Q*(5*z),BD+=F*(5*N),BD+=Z*(5*R),j=BD>>>13,BD&=8191,BD+=E*(5*T),BD+=J*(5*A),BD+=G*(5*P),BD+=W*(5*f),BD+=K*(5*H),j+=BD>>>13,BD&=8191;var m=j;m+=C*H,m+=X*O,m+=Q*V,m+=F*(5*z),m+=Z*(5*N),j=m>>>13,m&=8191,m+=E*(5*R),m+=J*(5*T),m+=G*(5*A),m+=W*(5*P),m+=K*(5*f),j+=m>>>13,m&=8191;var y=j;y+=C*f,y+=X*H,y+=Q*O,y+=F*V,y+=Z*(5*z),j=y>>>13,y&=8191,y+=E*(5*N),y+=J*(5*R),y+=G*(5*T),y+=W*(5*A),y+=K*(5*P),j+=y>>>13,y&=8191;var h=j;h+=C*P,h+=X*f,h+=Q*H,h+=F*O,h+=Z*V,j=h>>>13,h&=8191,h+=E*(5*z),h+=J*(5*N),h+=G*(5*R),h+=W*(5*T),h+=K*(5*A),j+=h>>>13,h&=8191;var d=j;d+=C*A,d+=X*P,d+=Q*f,d+=F*H,d+=Z*O,j=d>>>13,d&=8191,d+=E*V,d+=J*(5*z),d+=G*(5*N),d+=W*(5*R),d+=K*(5*T),j+=d>>>13,d&=8191;var k=j;k+=C*T,k+=X*A,k+=Q*P,k+=F*f,k+=Z*H,j=k>>>13,k&=8191,k+=E*O,k+=J*V,k+=G*(5*z),k+=W*(5*N),k+=K*(5*R),j+=k>>>13,k&=8191;var n=j;n+=C*R,n+=X*T,n+=Q*A,n+=F*P,n+=Z*f,j=n>>>13,n&=8191,n+=E*H,n+=J*O,n+=G*V,n+=W*(5*z),n+=K*(5*N),j+=n>>>13,n&=8191;var p=j;p+=C*N,p+=X*R,p+=Q*T,p+=F*A,p+=Z*P,j=p>>>13,p&=8191,p+=E*f,p+=J*H,p+=G*O,p+=W*V,p+=K*(5*z),j+=p>>>13,p&=8191;var c=j;c+=C*z,c+=X*N,c+=Q*R,c+=F*T,c+=Z*A,j=c>>>13,c&=8191,c+=E*P,c+=J*f,c+=G*H,c+=W*O,c+=K*V,j+=c>>>13,c&=8191,j=(j<<2)+j|0,j=j+b|0,b=j&8191,j=j>>>13,BD+=j,C=b,X=BD,Q=m,F=y,Z=h,E=d,J=k,G=n,W=p,K=c,B+=16,w-=16}this._h[0]=C,this._h[1]=X,this._h[2]=Q,this._h[3]=F,this._h[4]=Z,this._h[5]=E,this._h[6]=J,this._h[7]=G,this._h[8]=W,this._h[9]=K},D.prototype.finish=function($,B){if(B===void 0)B=0;var w=new Uint16Array(10),Y,C,X,Q;if(this._leftover){Q=this._leftover,this._buffer[Q++]=1;for(;Q<16;Q++)this._buffer[Q]=0;this._fin=1,this._blocks(this._buffer,0,16)}Y=this._h[1]>>>13,this._h[1]&=8191;for(Q=2;Q<10;Q++)this._h[Q]+=Y,Y=this._h[Q]>>>13,this._h[Q]&=8191;this._h[0]+=Y*5,Y=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=Y,Y=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=Y,w[0]=this._h[0]+5,Y=w[0]>>>13,w[0]&=8191;for(Q=1;Q<10;Q++)w[Q]=this._h[Q]+Y,Y=w[Q]>>>13,w[Q]&=8191;w[9]-=8192,C=(Y^1)-1;for(Q=0;Q<10;Q++)w[Q]&=C;C=~C;for(Q=0;Q<10;Q++)this._h[Q]=this._h[Q]&C|w[Q];this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,X=this._h[0]+this._pad[0],this._h[0]=X&65535;for(Q=1;Q<8;Q++)X=(this._h[Q]+this._pad[Q]|0)+(X>>>16)|0,this._h[Q]=X&65535;return $[B+0]=this._h[0]>>>0,$[B+1]=this._h[0]>>>8,$[B+2]=this._h[1]>>>0,$[B+3]=this._h[1]>>>8,$[B+4]=this._h[2]>>>0,$[B+5]=this._h[2]>>>8,$[B+6]=this._h[3]>>>0,$[B+7]=this._h[3]>>>8,$[B+8]=this._h[4]>>>0,$[B+9]=this._h[4]>>>8,$[B+10]=this._h[5]>>>0,$[B+11]=this._h[5]>>>8,$[B+12]=this._h[6]>>>0,$[B+13]=this._h[6]>>>8,$[B+14]=this._h[7]>>>0,$[B+15]=this._h[7]>>>8,this._finished=!0,this},D.prototype.update=function($){var B=0,w=$.length,Y;if(this._leftover){if(Y=16-this._leftover,Y>w)Y=w;for(var C=0;C<Y;C++)this._buffer[this._leftover+C]=$[B+C];if(w-=Y,B+=Y,this._leftover+=Y,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(w>=16)Y=w-w%16,this._blocks($,B,Y),B+=Y,w-=Y;if(w){for(var C=0;C<w;C++)this._buffer[this._leftover+C]=$[B+C];this._leftover+=w}return this},D.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var $=new Uint8Array(16);return this.finish($),$},D.prototype.clean=function(){return x$.wipe(this._buffer),x$.wipe(this._r),x$.wipe(this._h),x$.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},D}();nQ.Poly1305=dQ;function fV(D,$){var B=new dQ(D);B.update($);var w=B.digest();return B.clean(),w}nQ.oneTimeAuth=fV;function UV(D,$){if(D.length!==nQ.DIGEST_LENGTH||$.length!==nQ.DIGEST_LENGTH)return!1;return IV.equal(D,$)}nQ.equal=UV});var oQ=v((vQ)=>{Object.defineProperty(vQ,"__esModule",{value:!0});var m$=kQ(),RV=pQ(),d8=dD(),cQ=r0(),SV=j$();vQ.KEY_LENGTH=32;vQ.NONCE_LENGTH=12;vQ.TAG_LENGTH=16;var bQ=new Uint8Array(16),LV=function(){function D($){if(this.nonceLength=vQ.NONCE_LENGTH,this.tagLength=vQ.TAG_LENGTH,$.length!==vQ.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array($)}return D.prototype.seal=function($,B,w,Y){if($.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var C=new Uint8Array(16);C.set($,C.length-$.length);var X=new Uint8Array(32);m$.stream(this._key,C,X,4);var Q=B.length+this.tagLength,F;if(Y){if(Y.length!==Q)throw new Error("ChaCha20Poly1305: incorrect destination length");F=Y}else F=new Uint8Array(Q);return m$.streamXOR(this._key,C,B,F,4),this._authenticate(F.subarray(F.length-this.tagLength,F.length),X,F.subarray(0,F.length-this.tagLength),w),d8.wipe(C),F},D.prototype.open=function($,B,w,Y){if($.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(B.length<this.tagLength)return null;var C=new Uint8Array(16);C.set($,C.length-$.length);var X=new Uint8Array(32);m$.stream(this._key,C,X,4);var Q=new Uint8Array(this.tagLength);if(this._authenticate(Q,X,B.subarray(0,B.length-this.tagLength),w),!SV.equal(Q,B.subarray(B.length-this.tagLength,B.length)))return null;var F=B.length-this.tagLength,Z;if(Y){if(Y.length!==F)throw new Error("ChaCha20Poly1305: incorrect destination length");Z=Y}else Z=new Uint8Array(F);return m$.streamXOR(this._key,C,B.subarray(0,B.length-this.tagLength),Z,4),d8.wipe(C),Z},D.prototype.clean=function(){return d8.wipe(this._key),this},D.prototype._authenticate=function($,B,w,Y){var C=new RV.Poly1305(B);if(Y){if(C.update(Y),Y.length%16>0)C.update(bQ.subarray(Y.length%16))}if(C.update(w),w.length%16>0)C.update(bQ.subarray(w.length%16));var X=new Uint8Array(8);if(Y)cQ.writeUint64LE(Y.length,X);C.update(X),cQ.writeUint64LE(w.length,X),C.update(X);var Q=C.digest();for(var F=0;F<Q.length;F++)$[F]=Q[F];C.clean(),d8.wipe(Q),d8.wipe(X)},D}();vQ.ChaCha20Poly1305=LV});var aQ=v((sQ)=>{Object.defineProperty(sQ,"__esModule",{value:!0});function xV(D){return typeof D.saveState!=="undefined"&&typeof D.restoreState!=="undefined"&&typeof D.cleanSavedState!=="undefined"}sQ.isSerializableHash=xV});var DZ=v((eQ)=>{Object.defineProperty(eQ,"__esModule",{value:!0});var iD=aQ(),mV=j$(),uV=dD(),tQ=function(){function D($,B){this._finished=!1,this._inner=new $,this._outer=new $,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var w=new Uint8Array(this.blockSize);if(B.length>this.blockSize)this._inner.update(B).finish(w).clean();else w.set(B);for(var Y=0;Y<w.length;Y++)w[Y]^=54;this._inner.update(w);for(var Y=0;Y<w.length;Y++)w[Y]^=106;if(this._outer.update(w),iD.isSerializableHash(this._inner)&&iD.isSerializableHash(this._outer))this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState();uV.wipe(w)}return D.prototype.reset=function(){if(!iD.isSerializableHash(this._inner)||!iD.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},D.prototype.clean=function(){if(iD.isSerializableHash(this._inner))this._inner.cleanSavedState(this._innerKeyedState);if(iD.isSerializableHash(this._outer))this._outer.cleanSavedState(this._outerKeyedState);this._inner.clean(),this._outer.clean()},D.prototype.update=function($){return this._inner.update($),this},D.prototype.finish=function($){if(this._finished)return this._outer.finish($),this;return this._inner.finish($),this._outer.update($.subarray(0,this.digestLength)).finish($),this._finished=!0,this},D.prototype.digest=function(){var $=new Uint8Array(this.digestLength);return this.finish($),$},D.prototype.saveState=function(){if(!iD.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},D.prototype.restoreState=function($){if(!iD.isSerializableHash(this._inner)||!iD.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState($),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},D.prototype.cleanSavedState=function($){if(!iD.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState($)},D}();eQ.HMAC=tQ;function gV(D,$,B){var w=new tQ(D,$);w.update(B);var Y=w.digest();return w.clean(),Y}eQ.hmac=gV;eQ.equal=mV.equal});var YZ=v((BZ)=>{Object.defineProperty(BZ,"__esModule",{value:!0});var $Z=DZ(),wZ=dD(),dV=function(){function D($,B,w,Y){if(w===void 0)w=new Uint8Array(0);this._counter=new Uint8Array(1),this._hash=$,this._info=Y;var C=$Z.hmac(this._hash,w,B);this._hmac=new $Z.HMAC($,C),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return D.prototype._fillBuffer=function(){this._counter[0]++;var $=this._counter[0];if($===0)throw new Error("hkdf: cannot expand more");if(this._hmac.reset(),$>1)this._hmac.update(this._buffer);if(this._info)this._hmac.update(this._info);this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},D.prototype.expand=function($){var B=new Uint8Array($);for(var w=0;w<B.length;w++){if(this._bufpos===this._buffer.length)this._fillBuffer();B[w]=this._buffer[this._bufpos++]}return B},D.prototype.clean=function(){this._hmac.clean(),wZ.wipe(this._buffer),wZ.wipe(this._counter),this._bufpos=0},D}();BZ.HKDF=dV});var FZ=v((XZ)=>{Object.defineProperty(XZ,"__esModule",{value:!0});var g$=r0(),u$=dD();XZ.DIGEST_LENGTH=32;XZ.BLOCK_SIZE=64;var CZ=function(){function D(){this.digestLength=XZ.DIGEST_LENGTH,this.blockSize=XZ.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return D.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},D.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},D.prototype.clean=function(){u$.wipe(this._buffer),u$.wipe(this._temp),this.reset()},D.prototype.update=function($,B){if(B===void 0)B=$.length;if(this._finished)throw new Error("SHA256: can't update because hash was finished.");var w=0;if(this._bytesHashed+=B,this._bufferLength>0){while(this._bufferLength<this.blockSize&&B>0)this._buffer[this._bufferLength++]=$[w++],B--;if(this._bufferLength===this.blockSize)hB(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0}if(B>=this.blockSize)w=hB(this._temp,this._state,$,w,B),B%=this.blockSize;while(B>0)this._buffer[this._bufferLength++]=$[w++],B--;return this},D.prototype.finish=function($){if(!this._finished){var B=this._bytesHashed,w=this._bufferLength,Y=B/536870912|0,C=B<<3,X=B%64<56?64:128;this._buffer[w]=128;for(var Q=w+1;Q<X-8;Q++)this._buffer[Q]=0;g$.writeUint32BE(Y,this._buffer,X-8),g$.writeUint32BE(C,this._buffer,X-4),hB(this._temp,this._state,this._buffer,0,X),this._finished=!0}for(var Q=0;Q<this.digestLength/4;Q++)g$.writeUint32BE(this._state[Q],$,Q*4);return this},D.prototype.digest=function(){var $=new Uint8Array(this.digestLength);return this.finish($),$},D.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},D.prototype.restoreState=function($){if(this._state.set($.state),this._bufferLength=$.bufferLength,$.buffer)this._buffer.set($.buffer);return this._bytesHashed=$.bytesHashed,this._finished=!1,this},D.prototype.cleanSavedState=function($){if(u$.wipe($.state),$.buffer)u$.wipe($.buffer);$.bufferLength=0,$.bytesHashed=0},D}();XZ.SHA256=CZ;var pV=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function hB(D,$,B,w,Y){while(Y>=64){var C=$[0],X=$[1],Q=$[2],F=$[3],Z=$[4],E=$[5],J=$[6],G=$[7];for(var W=0;W<16;W++){var K=w+W*4;D[W]=g$.readUint32BE(B,K)}for(var W=16;W<64;W++){var V=D[W-2],O=(V>>>17|V<<15)^(V>>>19|V<<13)^V>>>10;V=D[W-15];var H=(V>>>7|V<<25)^(V>>>18|V<<14)^V>>>3;D[W]=(O+D[W-7]|0)+(H+D[W-16]|0)}for(var W=0;W<64;W++){var O=(((Z>>>6|Z<<26)^(Z>>>11|Z<<21)^(Z>>>25|Z<<7))+(Z&E^~Z&J)|0)+(G+(pV[W]+D[W]|0)|0)|0,H=((C>>>2|C<<30)^(C>>>13|C<<19)^(C>>>22|C<<10))+(C&X^C&Q^X&Q)|0;G=J,J=E,E=Z,Z=F+O|0,F=Q,Q=X,X=C,C=O+H|0}$[0]+=C,$[1]+=X,$[2]+=Q,$[3]+=F,$[4]+=Z,$[5]+=E,$[6]+=J,$[7]+=G,w+=64,Y-=64}return w}function cV(D){var $=new CZ;$.update(D);var B=$.digest();return $.clean(),B}XZ.hash=cV});var NZ=v((KZ)=>{Object.defineProperty(KZ,"__esModule",{value:!0});KZ.sharedKey=KZ.generateKeyPair=KZ.generateKeyPairFromSeed=KZ.scalarMultBase=KZ.scalarMult=KZ.SHARED_KEY_LENGTH=KZ.SECRET_KEY_LENGTH=KZ.PUBLIC_KEY_LENGTH=void 0;var rV=L8(),iV=dD();KZ.PUBLIC_KEY_LENGTH=32;KZ.SECRET_KEY_LENGTH=32;KZ.SHARED_KEY_LENGTH=32;function lD(D){let $=new Float64Array(16);if(D)for(let B=0;B<D.length;B++)$[B]=D[B];return $}var EZ=new Uint8Array(32);EZ[0]=9;var lV=lD([56129,1]);function dB(D){let $=1;for(let B=0;B<16;B++){let w=D[B]+$+65535;$=Math.floor(w/65536),D[B]=w-$*65536}D[0]+=$-1+37*($-1)}function n8(D,$,B){let w=~(B-1);for(let Y=0;Y<16;Y++){let C=w&(D[Y]^$[Y]);D[Y]^=C,$[Y]^=C}}function oV(D,$){let B=lD(),w=lD();for(let Y=0;Y<16;Y++)w[Y]=$[Y];dB(w),dB(w),dB(w);for(let Y=0;Y<2;Y++){B[0]=w[0]-65517;for(let X=1;X<15;X++)B[X]=w[X]-65535-(B[X-1]>>16&1),B[X-1]&=65535;B[15]=w[15]-32767-(B[14]>>16&1);let C=B[15]>>16&1;B[14]&=65535,n8(w,B,1-C)}for(let Y=0;Y<16;Y++)D[2*Y]=w[Y]&255,D[2*Y+1]=w[Y]>>8}function sV(D,$){for(let B=0;B<16;B++)D[B]=$[2*B]+($[2*B+1]<<8);D[15]&=32767}function k$(D,$,B){for(let w=0;w<16;w++)D[w]=$[w]+B[w]}function y$(D,$,B){for(let w=0;w<16;w++)D[w]=$[w]-B[w]}function w0(D,$,B){let w,Y,C=0,X=0,Q=0,F=0,Z=0,E=0,J=0,G=0,W=0,K=0,V=0,O=0,H=0,f=0,P=0,A=0,T=0,R=0,N=0,z=0,S=0,x=0,M=0,I=0,U=0,q=0,u=0,g=0,j=0,b=0,BD=0,m=B[0],y=B[1],h=B[2],d=B[3],k=B[4],n=B[5],p=B[6],c=B[7],r=B[8],l=B[9],o=B[10],s=B[11],i=B[12],t=B[13],e=B[14],DD=B[15];w=$[0],C+=w*m,X+=w*y,Q+=w*h,F+=w*d,Z+=w*k,E+=w*n,J+=w*p,G+=w*c,W+=w*r,K+=w*l,V+=w*o,O+=w*s,H+=w*i,f+=w*t,P+=w*e,A+=w*DD,w=$[1],X+=w*m,Q+=w*y,F+=w*h,Z+=w*d,E+=w*k,J+=w*n,G+=w*p,W+=w*c,K+=w*r,V+=w*l,O+=w*o,H+=w*s,f+=w*i,P+=w*t,A+=w*e,T+=w*DD,w=$[2],Q+=w*m,F+=w*y,Z+=w*h,E+=w*d,J+=w*k,G+=w*n,W+=w*p,K+=w*c,V+=w*r,O+=w*l,H+=w*o,f+=w*s,P+=w*i,A+=w*t,T+=w*e,R+=w*DD,w=$[3],F+=w*m,Z+=w*y,E+=w*h,J+=w*d,G+=w*k,W+=w*n,K+=w*p,V+=w*c,O+=w*r,H+=w*l,f+=w*o,P+=w*s,A+=w*i,T+=w*t,R+=w*e,N+=w*DD,w=$[4],Z+=w*m,E+=w*y,J+=w*h,G+=w*d,W+=w*k,K+=w*n,V+=w*p,O+=w*c,H+=w*r,f+=w*l,P+=w*o,A+=w*s,T+=w*i,R+=w*t,N+=w*e,z+=w*DD,w=$[5],E+=w*m,J+=w*y,G+=w*h,W+=w*d,K+=w*k,V+=w*n,O+=w*p,H+=w*c,f+=w*r,P+=w*l,A+=w*o,T+=w*s,R+=w*i,N+=w*t,z+=w*e,S+=w*DD,w=$[6],J+=w*m,G+=w*y,W+=w*h,K+=w*d,V+=w*k,O+=w*n,H+=w*p,f+=w*c,P+=w*r,A+=w*l,T+=w*o,R+=w*s,N+=w*i,z+=w*t,S+=w*e,x+=w*DD,w=$[7],G+=w*m,W+=w*y,K+=w*h,V+=w*d,O+=w*k,H+=w*n,f+=w*p,P+=w*c,A+=w*r,T+=w*l,R+=w*o,N+=w*s,z+=w*i,S+=w*t,x+=w*e,M+=w*DD,w=$[8],W+=w*m,K+=w*y,V+=w*h,O+=w*d,H+=w*k,f+=w*n,P+=w*p,A+=w*c,T+=w*r,R+=w*l,N+=w*o,z+=w*s,S+=w*i,x+=w*t,M+=w*e,I+=w*DD,w=$[9],K+=w*m,V+=w*y,O+=w*h,H+=w*d,f+=w*k,P+=w*n,A+=w*p,T+=w*c,R+=w*r,N+=w*l,z+=w*o,S+=w*s,x+=w*i,M+=w*t,I+=w*e,U+=w*DD,w=$[10],V+=w*m,O+=w*y,H+=w*h,f+=w*d,P+=w*k,A+=w*n,T+=w*p,R+=w*c,N+=w*r,z+=w*l,S+=w*o,x+=w*s,M+=w*i,I+=w*t,U+=w*e,q+=w*DD,w=$[11],O+=w*m,H+=w*y,f+=w*h,P+=w*d,A+=w*k,T+=w*n,R+=w*p,N+=w*c,z+=w*r,S+=w*l,x+=w*o,M+=w*s,I+=w*i,U+=w*t,q+=w*e,u+=w*DD,w=$[12],H+=w*m,f+=w*y,P+=w*h,A+=w*d,T+=w*k,R+=w*n,N+=w*p,z+=w*c,S+=w*r,x+=w*l,M+=w*o,I+=w*s,U+=w*i,q+=w*t,u+=w*e,g+=w*DD,w=$[13],f+=w*m,P+=w*y,A+=w*h,T+=w*d,R+=w*k,N+=w*n,z+=w*p,S+=w*c,x+=w*r,M+=w*l,I+=w*o,U+=w*s,q+=w*i,u+=w*t,g+=w*e,j+=w*DD,w=$[14],P+=w*m,A+=w*y,T+=w*h,R+=w*d,N+=w*k,z+=w*n,S+=w*p,x+=w*c,M+=w*r,I+=w*l,U+=w*o,q+=w*s,u+=w*i,g+=w*t,j+=w*e,b+=w*DD,w=$[15],A+=w*m,T+=w*y,R+=w*h,N+=w*d,z+=w*k,S+=w*n,x+=w*p,M+=w*c,I+=w*r,U+=w*l,q+=w*o,u+=w*s,g+=w*i,j+=w*t,b+=w*e,BD+=w*DD,C+=38*T,X+=38*R,Q+=38*N,F+=38*z,Z+=38*S,E+=38*x,J+=38*M,G+=38*I,W+=38*U,K+=38*q,V+=38*u,O+=38*g,H+=38*j,f+=38*b,P+=38*BD,Y=1,w=C+Y+65535,Y=Math.floor(w/65536),C=w-Y*65536,w=X+Y+65535,Y=Math.floor(w/65536),X=w-Y*65536,w=Q+Y+65535,Y=Math.floor(w/65536),Q=w-Y*65536,w=F+Y+65535,Y=Math.floor(w/65536),F=w-Y*65536,w=Z+Y+65535,Y=Math.floor(w/65536),Z=w-Y*65536,w=E+Y+65535,Y=Math.floor(w/65536),E=w-Y*65536,w=J+Y+65535,Y=Math.floor(w/65536),J=w-Y*65536,w=G+Y+65535,Y=Math.floor(w/65536),G=w-Y*65536,w=W+Y+65535,Y=Math.floor(w/65536),W=w-Y*65536,w=K+Y+65535,Y=Math.floor(w/65536),K=w-Y*65536,w=V+Y+65535,Y=Math.floor(w/65536),V=w-Y*65536,w=O+Y+65535,Y=Math.floor(w/65536),O=w-Y*65536,w=H+Y+65535,Y=Math.floor(w/65536),H=w-Y*65536,w=f+Y+65535,Y=Math.floor(w/65536),f=w-Y*65536,w=P+Y+65535,Y=Math.floor(w/65536),P=w-Y*65536,w=A+Y+65535,Y=Math.floor(w/65536),A=w-Y*65536,C+=Y-1+37*(Y-1),Y=1,w=C+Y+65535,Y=Math.floor(w/65536),C=w-Y*65536,w=X+Y+65535,Y=Math.floor(w/65536),X=w-Y*65536,w=Q+Y+65535,Y=Math.floor(w/65536),Q=w-Y*65536,w=F+Y+65535,Y=Math.floor(w/65536),F=w-Y*65536,w=Z+Y+65535,Y=Math.floor(w/65536),Z=w-Y*65536,w=E+Y+65535,Y=Math.floor(w/65536),E=w-Y*65536,w=J+Y+65535,Y=Math.floor(w/65536),J=w-Y*65536,w=G+Y+65535,Y=Math.floor(w/65536),G=w-Y*65536,w=W+Y+65535,Y=Math.floor(w/65536),W=w-Y*65536,w=K+Y+65535,Y=Math.floor(w/65536),K=w-Y*65536,w=V+Y+65535,Y=Math.floor(w/65536),V=w-Y*65536,w=O+Y+65535,Y=Math.floor(w/65536),O=w-Y*65536,w=H+Y+65535,Y=Math.floor(w/65536),H=w-Y*65536,w=f+Y+65535,Y=Math.floor(w/65536),f=w-Y*65536,w=P+Y+65535,Y=Math.floor(w/65536),P=w-Y*65536,w=A+Y+65535,Y=Math.floor(w/65536),A=w-Y*65536,C+=Y-1+37*(Y-1),D[0]=C,D[1]=X,D[2]=Q,D[3]=F,D[4]=Z,D[5]=E,D[6]=J,D[7]=G,D[8]=W,D[9]=K,D[10]=V,D[11]=O,D[12]=H,D[13]=f,D[14]=P,D[15]=A}function p8(D,$){w0(D,$,$)}function aV(D,$){let B=lD();for(let w=0;w<16;w++)B[w]=$[w];for(let w=253;w>=0;w--)if(p8(B,B),w!==2&&w!==4)w0(B,B,$);for(let w=0;w<16;w++)D[w]=B[w]}function cB(D,$){let B=new Uint8Array(32),w=new Float64Array(80),Y=lD(),C=lD(),X=lD(),Q=lD(),F=lD(),Z=lD();for(let W=0;W<31;W++)B[W]=D[W];B[31]=D[31]&127|64,B[0]&=248,sV(w,$);for(let W=0;W<16;W++)C[W]=w[W];Y[0]=Q[0]=1;for(let W=254;W>=0;--W){let K=B[W>>>3]>>>(W&7)&1;n8(Y,C,K),n8(X,Q,K),k$(F,Y,X),y$(Y,Y,X),k$(X,C,Q),y$(C,C,Q),p8(Q,F),p8(Z,Y),w0(Y,X,Y),w0(X,C,F),k$(F,Y,X),y$(Y,Y,X),p8(C,Y),y$(X,Q,Z),w0(Y,X,lV),k$(Y,Y,Q),w0(X,X,Y),w0(Y,Q,Z),w0(Q,C,w),p8(C,F),n8(Y,C,K),n8(X,Q,K)}for(let W=0;W<16;W++)w[W+16]=Y[W],w[W+32]=X[W],w[W+48]=C[W],w[W+64]=Q[W];let E=w.subarray(32),J=w.subarray(16);aV(E,E),w0(J,J,E);let G=new Uint8Array(32);return oV(G,J),G}KZ.scalarMult=cB;function JZ(D){return cB(D,EZ)}KZ.scalarMultBase=JZ;function WZ(D){if(D.length!==KZ.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${KZ.SECRET_KEY_LENGTH} bytes`);let $=new Uint8Array(D);return{publicKey:JZ($),secretKey:$}}KZ.generateKeyPairFromSeed=WZ;function tV(D){let $=rV.randomBytes(32,D),B=WZ($);return iV.wipe($),B}KZ.generateKeyPair=tV;function eV(D,$,B=!1){if(D.length!==KZ.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if($.length!==KZ.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");let w=cB(D,$);if(B){let Y=0;for(let C=0;C<w.length;C++)Y|=w[C];if(Y===0)throw new Error("X25519: invalid shared key")}return w}KZ.sharedKey=eV});var bB=v((HZ)=>{Object.defineProperty(HZ,"__esModule",{value:!0});HZ.getLocalStorage=HZ.getLocalStorageOrThrow=HZ.getCrypto=HZ.getCryptoOrThrow=HZ.getLocation=HZ.getLocationOrThrow=HZ.getNavigator=HZ.getNavigatorOrThrow=HZ.getDocument=HZ.getDocumentOrThrow=HZ.getFromWindowOrThrow=HZ.getFromWindow=void 0;function T0(D){let $=void 0;if(typeof window!=="undefined"&&typeof window[D]!=="undefined")$=window[D];return $}HZ.getFromWindow=T0;function $8(D){let $=T0(D);if(!$)throw new Error(`${D} is not defined in Window`);return $}HZ.getFromWindowOrThrow=$8;function VP(){return $8("document")}HZ.getDocumentOrThrow=VP;function PP(){return T0("document")}HZ.getDocument=PP;function OP(){return $8("navigator")}HZ.getNavigatorOrThrow=OP;function AP(){return T0("navigator")}HZ.getNavigator=AP;function HP(){return $8("location")}HZ.getLocationOrThrow=HP;function IP(){return T0("location")}HZ.getLocation=IP;function fP(){return $8("crypto")}HZ.getCryptoOrThrow=fP;function UP(){return T0("crypto")}HZ.getCrypto=UP;function MP(){return $8("localStorage")}HZ.getLocalStorageOrThrow=MP;function qP(){return T0("localStorage")}HZ.getLocalStorage=qP});var qZ=v((UZ)=>{Object.defineProperty(UZ,"__esModule",{value:!0});UZ.getWindowMetadata=void 0;var fZ=bB();function yP(){let D,$;try{D=fZ.getDocumentOrThrow(),$=fZ.getLocationOrThrow()}catch(J){return null}function B(){let J=D.getElementsByTagName("link"),G=[];for(let W=0;W<J.length;W++){let K=J[W],V=K.getAttribute("rel");if(V){if(V.toLowerCase().indexOf("icon")>-1){let O=K.getAttribute("href");if(O)if(O.toLowerCase().indexOf("https:")===-1&&O.toLowerCase().indexOf("http:")===-1&&O.indexOf("//")!==0){let H=$.protocol+"//"+$.host;if(O.indexOf("/")===0)H+=O;else{let f=$.pathname.split("/");f.pop();let P=f.join("/");H+=P+"/"+O}G.push(H)}else if(O.indexOf("//")===0){let H=$.protocol+O;G.push(H)}else G.push(O)}}}return G}function w(...J){let G=D.getElementsByTagName("meta");for(let W=0;W<G.length;W++){let K=G[W],V=["itemprop","property","name"].map((O)=>K.getAttribute(O)).filter((O)=>{if(O)return J.includes(O);return!1});if(V.length&&V){let O=K.getAttribute("content");if(O)return O}}return""}function Y(){let J=w("name","og:site_name","og:title","twitter:title");if(!J)J=D.title;return J}function C(){return w("description","og:description","twitter:description","keywords")}let X=Y(),Q=C(),F=$.origin,Z=B();return{description:Q,url:F,icons:Z,name:X}}UZ.getWindowMetadata=yP});var RZ=v((GM,TZ)=>{TZ.exports=(D)=>encodeURIComponent(D).replace(/[!'()*]/g,($)=>`%${$.charCodeAt(0).toString(16).toUpperCase()}`)});var _Z=v((NM,xZ)=>{var jZ="%[a-f0-9]{2}",SZ=new RegExp("("+jZ+")|([^%]+?)","gi"),LZ=new RegExp("("+jZ+")+","gi");function vB(D,$){try{return[decodeURIComponent(D.join(""))]}catch(Y){}if(D.length===1)return D;$=$||1;var B=D.slice(0,$),w=D.slice($);return Array.prototype.concat.call([],vB(B),vB(w))}function hP(D){try{return decodeURIComponent(D)}catch(w){var $=D.match(SZ)||[];for(var B=1;B<$.length;B++)D=vB($,B).join(""),$=D.match(SZ)||[];return D}}function dP(D){var $={"%FE%FF":"��","%FF%FE":"��"},B=LZ.exec(D);while(B){try{$[B[0]]=decodeURIComponent(B[0])}catch(Q){var w=hP(B[0]);if(w!==B[0])$[B[0]]=w}B=LZ.exec(D)}$["%C2"]="�";var Y=Object.keys($);for(var C=0;C<Y.length;C++){var X=Y[C];D=D.replace(new RegExp(X,"g"),$[X])}return D}xZ.exports=function(D){if(typeof D!=="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof D+"`");try{return D=D.replace(/\+/g," "),decodeURIComponent(D)}catch($){return dP(D)}}});var uZ=v((zM,mZ)=>{mZ.exports=(D,$)=>{if(!(typeof D==="string"&&typeof $==="string"))throw new TypeError("Expected the arguments to be of type `string`");if($==="")return[D];let B=D.indexOf($);if(B===-1)return[D];return[D.slice(0,B),D.slice(B+$.length)]}});var kZ=v((VM,gZ)=>{gZ.exports=function(D,$){var B={},w=Object.keys(D),Y=Array.isArray($);for(var C=0;C<w.length;C++){var X=w[C],Q=D[X];if(Y?$.indexOf(X)!==-1:$(X,Q,D))B[X]=Q}return B}});var bF=v((pF)=>{Object.defineProperty(pF,"__esModule",{value:!0});pF.isBrowserCryptoAvailable=pF.getSubtleCrypto=pF.getBrowerCrypto=void 0;function FY(){return(global===null||global===void 0?void 0:global.crypto)||(global===null||global===void 0?void 0:global.msCrypto)||{}}pF.getBrowerCrypto=FY;function nF(){let D=FY();return D.subtle||D.webkitSubtle}pF.getSubtleCrypto=nF;function _O(){return!!FY()&&!!nF()}pF.isBrowserCryptoAvailable=_O});var oF=v((iF)=>{Object.defineProperty(iF,"__esModule",{value:!0});iF.isBrowser=iF.isNode=iF.isReactNative=void 0;function vF(){return typeof document==="undefined"&&typeof navigator!=="undefined"&&navigator.product==="ReactNative"}iF.isReactNative=vF;function rF(){return typeof process!=="undefined"&&typeof process.versions!=="undefined"&&typeof process.versions.node!=="undefined"}iF.isNode=rF;function gO(){return!vF()&&!rF()}iF.isBrowser=gO});var EY=v((a$)=>{Object.defineProperty(a$,"__esModule",{value:!0});var sF=(bD(),hD(cD));sF.__exportStar(bF(),a$);sF.__exportStar(oF(),a$)});var JE=v((oM,EE)=>{EE.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}});var tE=v(($w,W8)=>{var nO=200,MY="__lodash_hash_undefined__",Fw=1,SE=2,LE=9007199254740991,ww="[object Arguments]",PY="[object Array]",pO="[object AsyncFunction]",jE="[object Boolean]",xE="[object Date]",_E="[object Error]",mE="[object Function]",cO="[object GeneratorFunction]",Bw="[object Map]",uE="[object Number]",bO="[object Null]",J8="[object Object]",PE="[object Promise]",vO="[object Proxy]",gE="[object RegExp]",Yw="[object Set]",kE="[object String]",rO="[object Symbol]",iO="[object Undefined]",OY="[object WeakMap]",yE="[object ArrayBuffer]",Cw="[object DataView]",lO="[object Float32Array]",oO="[object Float64Array]",sO="[object Int8Array]",aO="[object Int16Array]",tO="[object Int32Array]",eO="[object Uint8Array]",DA="[object Uint8ClampedArray]",$A="[object Uint16Array]",wA="[object Uint32Array]",BA=/[\\^$.*+?()[\]{}|]/g,YA=/^\[object .+?Constructor\]$/,CA=/^(?:0|[1-9]\d*)$/,YD={};YD[lO]=YD[oO]=YD[sO]=YD[aO]=YD[tO]=YD[eO]=YD[DA]=YD[$A]=YD[wA]=!0;YD[ww]=YD[PY]=YD[yE]=YD[jE]=YD[Cw]=YD[xE]=YD[_E]=YD[mE]=YD[Bw]=YD[uE]=YD[J8]=YD[gE]=YD[Yw]=YD[kE]=YD[OY]=!1;var hE=typeof global=="object"&&global&&global.Object===Object&&global,XA=typeof self=="object"&&self&&self.Object===Object&&self,Q0=hE||XA||Function("return this")(),dE=typeof $w=="object"&&$w&&!$w.nodeType&&$w,OE=dE&&typeof W8=="object"&&W8&&!W8.nodeType&&W8,nE=OE&&OE.exports===dE,NY=nE&&hE.process,AE=function(){try{return NY&&NY.binding&&NY.binding("util")}catch(D){}}(),HE=AE&&AE.isTypedArray;function QA(D,$){var B=-1,w=D==null?0:D.length,Y=0,C=[];while(++B<w){var X=D[B];if($(X,B,D))C[Y++]=X}return C}function ZA(D,$){var B=-1,w=$.length,Y=D.length;while(++B<w)D[Y+B]=$[B];return D}function FA(D,$){var B=-1,w=D==null?0:D.length;while(++B<w)if($(D[B],B,D))return!0;return!1}function EA(D,$){var B=-1,w=Array(D);while(++B<D)w[B]=$(B);return w}function JA(D){return function($){return D($)}}function WA(D,$){return D.has($)}function KA(D,$){return D==null?void 0:D[$]}function GA(D){var $=-1,B=Array(D.size);return D.forEach(function(w,Y){B[++$]=[Y,w]}),B}function NA(D,$){return function(B){return D($(B))}}function zA(D){var $=-1,B=Array(D.size);return D.forEach(function(w){B[++$]=w}),B}var VA=Array.prototype,PA=Function.prototype,Ew=Object.prototype,zY=Q0["__core-js_shared__"],pE=PA.toString,aD=Ew.hasOwnProperty,IE=function(){var D=/[^.]+$/.exec(zY&&zY.keys&&zY.keys.IE_PROTO||"");return D?"Symbol(src)_1."+D:""}(),cE=Ew.toString,OA=RegExp("^"+pE.call(aD).replace(BA,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fE=nE?Q0.Buffer:void 0,Xw=Q0.Symbol,UE=Q0.Uint8Array,bE=Ew.propertyIsEnumerable,AA=VA.splice,_0=Xw?Xw.toStringTag:void 0,ME=Object.getOwnPropertySymbols,HA=fE?fE.isBuffer:void 0,IA=NA(Object.keys,Object),AY=K8(Q0,"DataView"),Y$=K8(Q0,"Map"),HY=K8(Q0,"Promise"),IY=K8(Q0,"Set"),fY=K8(Q0,"WeakMap"),C$=K8(Object,"create"),fA=g0(AY),UA=g0(Y$),MA=g0(HY),qA=g0(IY),TA=g0(fY),qE=Xw?Xw.prototype:void 0,VY=qE?qE.valueOf:void 0;function m0(D){var $=-1,B=D==null?0:D.length;this.clear();while(++$<B){var w=D[$];this.set(w[0],w[1])}}function RA(){this.__data__=C$?C$(null):{},this.size=0}function SA(D){var $=this.has(D)&&delete this.__data__[D];return this.size-=$?1:0,$}function LA(D){var $=this.__data__;if(C$){var B=$[D];return B===MY?void 0:B}return aD.call($,D)?$[D]:void 0}function jA(D){var $=this.__data__;return C$?$[D]!==void 0:aD.call($,D)}function xA(D,$){var B=this.__data__;return this.size+=this.has(D)?0:1,B[D]=C$&&$===void 0?MY:$,this}m0.prototype.clear=RA;m0.prototype.delete=SA;m0.prototype.get=LA;m0.prototype.has=jA;m0.prototype.set=xA;function Z0(D){var $=-1,B=D==null?0:D.length;this.clear();while(++$<B){var w=D[$];this.set(w[0],w[1])}}function _A(){this.__data__=[],this.size=0}function mA(D){var $=this.__data__,B=Jw($,D);if(B<0)return!1;var w=$.length-1;if(B==w)$.pop();else AA.call($,B,1);return--this.size,!0}function uA(D){var $=this.__data__,B=Jw($,D);return B<0?void 0:$[B][1]}function gA(D){return Jw(this.__data__,D)>-1}function kA(D,$){var B=this.__data__,w=Jw(B,D);if(w<0)++this.size,B.push([D,$]);else B[w][1]=$;return this}Z0.prototype.clear=_A;Z0.prototype.delete=mA;Z0.prototype.get=uA;Z0.prototype.has=gA;Z0.prototype.set=kA;function u0(D){var $=-1,B=D==null?0:D.length;this.clear();while(++$<B){var w=D[$];this.set(w[0],w[1])}}function yA(){this.size=0,this.__data__={hash:new m0,map:new(Y$||Z0),string:new m0}}function hA(D){var $=Ww(this,D).delete(D);return this.size-=$?1:0,$}function dA(D){return Ww(this,D).get(D)}function nA(D){return Ww(this,D).has(D)}function pA(D,$){var B=Ww(this,D),w=B.size;return B.set(D,$),this.size+=B.size==w?0:1,this}u0.prototype.clear=yA;u0.prototype.delete=hA;u0.prototype.get=dA;u0.prototype.has=nA;u0.prototype.set=pA;function Qw(D){var $=-1,B=D==null?0:D.length;this.__data__=new u0;while(++$<B)this.add(D[$])}function cA(D){return this.__data__.set(D,MY),this}function bA(D){return this.__data__.has(D)}Qw.prototype.add=Qw.prototype.push=cA;Qw.prototype.has=bA;function O0(D){var $=this.__data__=new Z0(D);this.size=$.size}function vA(){this.__data__=new Z0,this.size=0}function rA(D){var $=this.__data__,B=$.delete(D);return this.size=$.size,B}function iA(D){return this.__data__.get(D)}function lA(D){return this.__data__.has(D)}function oA(D,$){var B=this.__data__;if(B instanceof Z0){var w=B.__data__;if(!Y$||w.length<nO-1)return w.push([D,$]),this.size=++B.size,this;B=this.__data__=new u0(w)}return B.set(D,$),this.size=B.size,this}O0.prototype.clear=vA;O0.prototype.delete=rA;O0.prototype.get=iA;O0.prototype.has=lA;O0.prototype.set=oA;function sA(D,$){var B=Zw(D),w=!B&&JH(D),Y=!B&&!w&&UY(D),C=!B&&!w&&!Y&&aE(D),X=B||w||Y||C,Q=X?EA(D.length,String):[],F=Q.length;for(var Z in D)if(($||aD.call(D,Z))&&!(X&&(Z=="length"||Y&&(Z=="offset"||Z=="parent")||C&&(Z=="buffer"||Z=="byteLength"||Z=="byteOffset")||XH(Z,F))))Q.push(Z);return Q}function Jw(D,$){var B=D.length;while(B--)if(iE(D[B][0],$))return B;return-1}function aA(D,$,B){var w=$(D);return Zw(D)?w:ZA(w,B(D))}function Q$(D){if(D==null)return D===void 0?iO:bO;return _0&&_0 in Object(D)?YH(D):EH(D)}function TE(D){return X$(D)&&Q$(D)==ww}function vE(D,$,B,w,Y){if(D===$)return!0;if(D==null||$==null||!X$(D)&&!X$($))return D!==D&&$!==$;return tA(D,$,B,w,vE,Y)}function tA(D,$,B,w,Y,C){var X=Zw(D),Q=Zw($),F=X?PY:P0(D),Z=Q?PY:P0($);F=F==ww?J8:F,Z=Z==ww?J8:Z;var E=F==J8,J=Z==J8,G=F==Z;if(G&&UY(D)){if(!UY($))return!1;X=!0,E=!1}if(G&&!E)return C||(C=new O0),X||aE(D)?rE(D,$,B,w,Y,C):wH(D,$,F,B,w,Y,C);if(!(B&Fw)){var W=E&&aD.call(D,"__wrapped__"),K=J&&aD.call($,"__wrapped__");if(W||K){var V=W?D.value():D,O=K?$.value():$;return C||(C=new O0),Y(V,O,B,w,C)}}if(!G)return!1;return C||(C=new O0),BH(D,$,B,w,Y,C)}function eA(D){if(!sE(D)||ZH(D))return!1;var $=lE(D)?OA:YA;return $.test(g0(D))}function DH(D){return X$(D)&&oE(D.length)&&!!YD[Q$(D)]}function $H(D){if(!FH(D))return IA(D);var $=[];for(var B in Object(D))if(aD.call(D,B)&&B!="constructor")$.push(B);return $}function rE(D,$,B,w,Y,C){var X=B&Fw,Q=D.length,F=$.length;if(Q!=F&&!(X&&F>Q))return!1;var Z=C.get(D);if(Z&&C.get($))return Z==$;var E=-1,J=!0,G=B&SE?new Qw:void 0;C.set(D,$),C.set($,D);while(++E<Q){var W=D[E],K=$[E];if(w)var V=X?w(K,W,E,$,D,C):w(W,K,E,D,$,C);if(V!==void 0){if(V)continue;J=!1;break}if(G){if(!FA($,function(O,H){if(!WA(G,H)&&(W===O||Y(W,O,B,w,C)))return G.push(H)})){J=!1;break}}else if(!(W===K||Y(W,K,B,w,C))){J=!1;break}}return C.delete(D),C.delete($),J}function wH(D,$,B,w,Y,C,X){switch(B){case Cw:if(D.byteLength!=$.byteLength||D.byteOffset!=$.byteOffset)return!1;D=D.buffer,$=$.buffer;case yE:if(D.byteLength!=$.byteLength||!C(new UE(D),new UE($)))return!1;return!0;case jE:case xE:case uE:return iE(+D,+$);case _E:return D.name==$.name&&D.message==$.message;case gE:case kE:return D==$+"";case Bw:var Q=GA;case Yw:var F=w&Fw;if(Q||(Q=zA),D.size!=$.size&&!F)return!1;var Z=X.get(D);if(Z)return Z==$;w|=SE,X.set(D,$);var E=rE(Q(D),Q($),w,Y,C,X);return X.delete(D),E;case rO:if(VY)return VY.call(D)==VY.call($)}return!1}function BH(D,$,B,w,Y,C){var X=B&Fw,Q=RE(D),F=Q.length,Z=RE($),E=Z.length;if(F!=E&&!X)return!1;var J=F;while(J--){var G=Q[J];if(!(X?G in $:aD.call($,G)))return!1}var W=C.get(D);if(W&&C.get($))return W==$;var K=!0;C.set(D,$),C.set($,D);var V=X;while(++J<F){G=Q[J];var O=D[G],H=$[G];if(w)var f=X?w(H,O,G,$,D,C):w(O,H,G,D,$,C);if(!(f===void 0?O===H||Y(O,H,B,w,C):f)){K=!1;break}V||(V=G=="constructor")}if(K&&!V){var P=D.constructor,A=$.constructor;if(P!=A&&(("constructor"in D)&&("constructor"in $))&&!(typeof P=="function"&&P instanceof P&&typeof A=="function"&&A instanceof A))K=!1}return C.delete(D),C.delete($),K}function RE(D){return aA(D,GH,CH)}function Ww(D,$){var B=D.__data__;return QH($)?B[typeof $=="string"?"string":"hash"]:B.map}function K8(D,$){var B=KA(D,$);return eA(B)?B:void 0}function YH(D){var $=aD.call(D,_0),B=D[_0];try{D[_0]=void 0;var w=!0}catch(C){}var Y=cE.call(D);if(w)if($)D[_0]=B;else delete D[_0];return Y}var CH=!ME?NH:function(D){if(D==null)return[];return D=Object(D),QA(ME(D),function($){return bE.call(D,$)})},P0=Q$;if(AY&&P0(new AY(new ArrayBuffer(1)))!=Cw||Y$&&P0(new Y$)!=Bw||HY&&P0(HY.resolve())!=PE||IY&&P0(new IY)!=Yw||fY&&P0(new fY)!=OY)P0=function(D){var $=Q$(D),B=$==J8?D.constructor:void 0,w=B?g0(B):"";if(w)switch(w){case fA:return Cw;case UA:return Bw;case MA:return PE;case qA:return Yw;case TA:return OY}return $};function XH(D,$){return $=$==null?LE:$,!!$&&(typeof D=="number"||CA.test(D))&&(D>-1&&D%1==0&&D<$)}function QH(D){var $=typeof D;return $=="string"||$=="number"||$=="symbol"||$=="boolean"?D!=="__proto__":D===null}function ZH(D){return!!IE&&IE in D}function FH(D){var $=D&&D.constructor,B=typeof $=="function"&&$.prototype||Ew;return D===B}function EH(D){return cE.call(D)}function g0(D){if(D!=null){try{return pE.call(D)}catch($){}try{return D+""}catch($){}}return""}function iE(D,$){return D===$||D!==D&&$!==$}var JH=TE(function(){return arguments}())?TE:function(D){return X$(D)&&aD.call(D,"callee")&&!bE.call(D,"callee")},Zw=Array.isArray;function WH(D){return D!=null&&oE(D.length)&&!lE(D)}var UY=HA||zH;function KH(D,$){return vE(D,$)}function lE(D){if(!sE(D))return!1;var $=Q$(D);return $==mE||$==cO||$==pO||$==vO}function oE(D){return typeof D=="number"&&D>-1&&D%1==0&&D<=LE}function sE(D){var $=typeof D;return D!=null&&($=="object"||$=="function")}function X$(D){return D!=null&&typeof D=="object"}var aE=HE?JA(HE):DH;function GH(D){return WH(D)?sA(D):$H(D)}function NH(){return[]}function zH(){return!1}W8.exports=KH});class Pw{constructor(D){this.openModal=N$.open,this.closeModal=N$.close,this.subscribeModal=N$.subscribe,this.setTheme=Vw.setThemeConfig,Vw.setThemeConfig(D),pY.setConfig(D),this.initUi()}async initUi(){if(typeof window<"u"){await import("./chunk-jrc84sb2.js");let D=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",D),nY.setIsUiLoaded(!0)}}}p0();var EW=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,JW=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,WW=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function KW(D,$){if(D==="__proto__"||D==="constructor"&&$&&typeof $==="object"&&"prototype"in $){GW(D);return}return $}function GW(D){console.warn(`[destr] Dropping "${D}" key to prevent prototype pollution.`)}function z8(D,$={}){if(typeof D!=="string")return D;let B=D.trim();if(D[0]==='"'&&D.endsWith('"')&&!D.includes("\\"))return B.slice(1,-1);if(B.length<=9){let w=B.toLowerCase();if(w==="true")return!0;if(w==="false")return!1;if(w==="undefined")return;if(w==="null")return null;if(w==="nan")return Number.NaN;if(w==="infinity")return Number.POSITIVE_INFINITY;if(w==="-infinity")return Number.NEGATIVE_INFINITY}if(!WW.test(D)){if($.strict)throw new SyntaxError("[destr] Invalid JSON");return D}try{if(EW.test(D)||JW.test(D)){if($.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(D,KW)}return JSON.parse(D)}catch(w){if($.strict)throw w;return D}}function NW(D){if(!D||typeof D.then!=="function")return Promise.resolve(D);return D}function KD(D,...$){try{return NW(D(...$))}catch(B){return Promise.reject(B)}}function zW(D){let $=typeof D;return D===null||$!=="object"&&$!=="function"}function VW(D){let $=Object.getPrototypeOf(D);return!$||$.isPrototypeOf(Object)}function V8(D){if(zW(D))return String(D);if(VW(D)||Array.isArray(D))return JSON.stringify(D);if(typeof D.toJSON==="function")return V8(D.toJSON());throw new Error("[unstorage] Cannot stringify value!")}var Ow="base64:";function cY(D){if(typeof D==="string")return D;return Ow+OW(D)}function bY(D){if(typeof D!=="string")return D;if(!D.startsWith(Ow))return D;return PW(D.slice(Ow.length))}function PW(D){if(globalThis.Buffer)return Buffer.from(D,"base64");return Uint8Array.from(globalThis.atob(D),($)=>$.codePointAt(0))}function OW(D){if(globalThis.Buffer)return Buffer.from(D).toString("base64");return globalThis.btoa(String.fromCodePoint(...D))}function RD(D){if(!D)return"";return D.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function vY(...D){return RD(D.join(":"))}function P8(D){return D=RD(D),D?D+":":""}function AW(D){return D}var HW="memory",IW=AW(()=>{let D=new Map;return{name:HW,getInstance:()=>D,hasItem($){return D.has($)},getItem($){return D.get($)??null},getItemRaw($){return D.get($)??null},setItem($,B){D.set($,B)},setItemRaw($,B){D.set($,B)},removeItem($){D.delete($)},getKeys(){return[...D.keys()]},clear(){D.clear()},dispose(){D.clear()}}});function lY(D={}){let $={mounts:{"":D.driver||IW()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},B=(Z)=>{for(let E of $.mountpoints)if(Z.startsWith(E))return{base:E,relativeKey:Z.slice(E.length),driver:$.mounts[E]};return{base:"",relativeKey:Z,driver:$.mounts[""]}},w=(Z,E)=>{return $.mountpoints.filter((J)=>J.startsWith(Z)||E&&Z.startsWith(J)).map((J)=>({relativeBase:Z.length>J.length?Z.slice(J.length):void 0,mountpoint:J,driver:$.mounts[J]}))},Y=(Z,E)=>{if(!$.watching)return;E=RD(E);for(let J of $.watchListeners)J(Z,E)},C=async()=>{if($.watching)return;$.watching=!0;for(let Z in $.mounts)$.unwatch[Z]=await rY($.mounts[Z],Y,Z)},X=async()=>{if(!$.watching)return;for(let Z in $.unwatch)await $.unwatch[Z]();$.unwatch={},$.watching=!1},Q=(Z,E,J)=>{let G=new Map,W=(K)=>{let V=G.get(K.base);if(!V)V={driver:K.driver,base:K.base,items:[]},G.set(K.base,V);return V};for(let K of Z){let V=typeof K==="string",O=RD(V?K:K.key),H=V?void 0:K.value,f=V||!K.options?E:{...E,...K.options},P=B(O);W(P).items.push({key:O,value:H,relativeKey:P.relativeKey,options:f})}return Promise.all([...G.values()].map((K)=>J(K))).then((K)=>K.flat())},F={hasItem(Z,E={}){Z=RD(Z);let{relativeKey:J,driver:G}=B(Z);return KD(G.hasItem,J,E)},getItem(Z,E={}){Z=RD(Z);let{relativeKey:J,driver:G}=B(Z);return KD(G.getItem,J,E).then((W)=>z8(W))},getItems(Z,E={}){return Q(Z,E,(J)=>{if(J.driver.getItems)return KD(J.driver.getItems,J.items.map((G)=>({key:G.relativeKey,options:G.options})),E).then((G)=>G.map((W)=>({key:vY(J.base,W.key),value:z8(W.value)})));return Promise.all(J.items.map((G)=>{return KD(J.driver.getItem,G.relativeKey,G.options).then((W)=>({key:G.key,value:z8(W)}))}))})},getItemRaw(Z,E={}){Z=RD(Z);let{relativeKey:J,driver:G}=B(Z);if(G.getItemRaw)return KD(G.getItemRaw,J,E);return KD(G.getItem,J,E).then((W)=>bY(W))},async setItem(Z,E,J={}){if(E===void 0)return F.removeItem(Z);Z=RD(Z);let{relativeKey:G,driver:W}=B(Z);if(!W.setItem)return;if(await KD(W.setItem,G,V8(E),J),!W.watch)Y("update",Z)},async setItems(Z,E){await Q(Z,E,async(J)=>{if(J.driver.setItems)return KD(J.driver.setItems,J.items.map((G)=>({key:G.relativeKey,value:V8(G.value),options:G.options})),E);if(!J.driver.setItem)return;await Promise.all(J.items.map((G)=>{return KD(J.driver.setItem,G.relativeKey,V8(G.value),G.options)}))})},async setItemRaw(Z,E,J={}){if(E===void 0)return F.removeItem(Z,J);Z=RD(Z);let{relativeKey:G,driver:W}=B(Z);if(W.setItemRaw)await KD(W.setItemRaw,G,E,J);else if(W.setItem)await KD(W.setItem,G,cY(E),J);else return;if(!W.watch)Y("update",Z)},async removeItem(Z,E={}){if(typeof E==="boolean")E={removeMeta:E};Z=RD(Z);let{relativeKey:J,driver:G}=B(Z);if(!G.removeItem)return;if(await KD(G.removeItem,J,E),E.removeMeta||E.removeMata)await KD(G.removeItem,J+"$",E);if(!G.watch)Y("remove",Z)},async getMeta(Z,E={}){if(typeof E==="boolean")E={nativeOnly:E};Z=RD(Z);let{relativeKey:J,driver:G}=B(Z),W=Object.create(null);if(G.getMeta)Object.assign(W,await KD(G.getMeta,J,E));if(!E.nativeOnly){let K=await KD(G.getItem,J+"$",E).then((V)=>z8(V));if(K&&typeof K==="object"){if(typeof K.atime==="string")K.atime=new Date(K.atime);if(typeof K.mtime==="string")K.mtime=new Date(K.mtime);Object.assign(W,K)}}return W},setMeta(Z,E,J={}){return this.setItem(Z+"$",E,J)},removeMeta(Z,E={}){return this.removeItem(Z+"$",E)},async getKeys(Z,E={}){Z=P8(Z);let J=w(Z,!0),G=[],W=[];for(let K of J){let V=await KD(K.driver.getKeys,K.relativeBase,E);for(let O of V){let H=K.mountpoint+RD(O);if(!G.some((f)=>H.startsWith(f)))W.push(H)}G=[K.mountpoint,...G.filter((O)=>!O.startsWith(K.mountpoint))]}return Z?W.filter((K)=>K.startsWith(Z)&&K[K.length-1]!=="$"):W.filter((K)=>K[K.length-1]!=="$")},async clear(Z,E={}){Z=P8(Z),await Promise.all(w(Z,!1).map(async(J)=>{if(J.driver.clear)return KD(J.driver.clear,J.relativeBase,E);if(J.driver.removeItem){let G=await J.driver.getKeys(J.relativeBase||"",E);return Promise.all(G.map((W)=>J.driver.removeItem(W,E)))}}))},async dispose(){await Promise.all(Object.values($.mounts).map((Z)=>iY(Z)))},async watch(Z){return await C(),$.watchListeners.push(Z),async()=>{if($.watchListeners=$.watchListeners.filter((E)=>E!==Z),$.watchListeners.length===0)await X()}},async unwatch(){$.watchListeners=[],await X()},mount(Z,E){if(Z=P8(Z),Z&&$.mounts[Z])throw new Error(`already mounted at ${Z}`);if(Z)$.mountpoints.push(Z),$.mountpoints.sort((J,G)=>G.length-J.length);if($.mounts[Z]=E,$.watching)Promise.resolve(rY(E,Y,Z)).then((J)=>{$.unwatch[Z]=J}).catch(console.error);return F},async unmount(Z,E=!0){if(Z=P8(Z),!Z||!$.mounts[Z])return;if($.watching&&Z in $.unwatch)$.unwatch[Z]?.(),delete $.unwatch[Z];if(E)await iY($.mounts[Z]);$.mountpoints=$.mountpoints.filter((J)=>J!==Z),delete $.mounts[Z]},getMount(Z=""){Z=RD(Z)+":";let E=B(Z);return{driver:E.driver,base:E.base}},getMounts(Z="",E={}){return Z=RD(Z),w(Z,E.parents).map((G)=>({driver:G.driver,base:G.mountpoint}))},keys:(Z,E={})=>F.getKeys(Z,E),get:(Z,E={})=>F.getItem(Z,E),set:(Z,E,J={})=>F.setItem(Z,E,J),has:(Z,E={})=>F.hasItem(Z,E),del:(Z,E={})=>F.removeItem(Z,E),remove:(Z,E={})=>F.removeItem(Z,E)};return F}function rY(D,$,B){return D.watch?D.watch((w,Y)=>$(w,B+Y)):()=>{}}async function iY(D){if(typeof D.dispose==="function")await KD(D.dispose)}function H0(D){return new Promise(($,B)=>{D.oncomplete=D.onsuccess=()=>$(D.result),D.onabort=D.onerror=()=>B(D.error)})}function Hw(D,$){let B=indexedDB.open(D);B.onupgradeneeded=()=>B.result.createObjectStore($);let w=H0(B);return(Y,C)=>w.then((X)=>C(X.transaction($,Y).objectStore($)))}var Aw;function O8(){if(!Aw)Aw=Hw("keyval-store","keyval");return Aw}function Iw(D,$=O8()){return $("readonly",(B)=>H0(B.get(D)))}function oY(D,$,B=O8()){return B("readwrite",(w)=>{return w.put($,D),H0(w.transaction)})}function sY(D,$=O8()){return $("readwrite",(B)=>{return B.delete(D),H0(B.transaction)})}function aY(D=O8()){return D("readwrite",($)=>{return $.clear(),H0($.transaction)})}function fW(D,$){return D.openCursor().onsuccess=function(){if(!this.result)return;$(this.result),this.result.continue()},H0(D.transaction)}function tY(D=O8()){return D("readonly",($)=>{if($.getAllKeys)return H0($.getAllKeys());let B=[];return fW($,(w)=>B.push(w.key)).then(()=>B)})}var UW=(D)=>JSON.stringify(D,($,B)=>typeof B==="bigint"?B.toString()+"n":B),MW=(D)=>{let $=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,B=D.replace($,'$1"$2n"$3');return JSON.parse(B,(w,Y)=>{if(typeof Y==="string"&&Y.match(/^\d+n$/))return BigInt(Y.substring(0,Y.length-1));return Y})};function J0(D){if(typeof D!=="string")throw new Error(`Cannot safe json parse value of type ${typeof D}`);try{return MW(D)}catch($){return D}}function pD(D){return typeof D==="string"?D:UW(D)||""}var qW="idb-keyval",TW=(D={})=>{let $=D.base&&D.base.length>0?`${D.base}:`:"",B=(Y)=>$+Y,w;return D.dbName&&D.storeName&&(w=Hw(D.dbName,D.storeName)),{name:qW,options:D,async hasItem(Y){return!(typeof await Iw(B(Y),w)>"u")},async getItem(Y){return await Iw(B(Y),w)??null},setItem(Y,C){return oY(B(Y),C,w)},removeItem(Y){return sY(B(Y),w)},getKeys(){return tY(w)},clear(){return aY(w)}}},RW="WALLET_CONNECT_V2_INDEXED_DB",SW="keyvaluestorage";class DC{constructor(){this.indexedDb=lY({driver:TW({dbName:RW,storeName:SW})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map((D)=>[D.key,D.value])}async getItem(D){let $=await this.indexedDb.getItem(D);if($!==null)return $}async setItem(D,$){await this.indexedDb.setItem(D,pD($))}async removeItem(D){await this.indexedDb.removeItem(D)}}var fw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},z$={exports:{}};(function(){let D;function $(){}D=$,D.prototype.getItem=function(B){return this.hasOwnProperty(B)?String(this[B]):null},D.prototype.setItem=function(B,w){this[B]=String(w)},D.prototype.removeItem=function(B){delete this[B]},D.prototype.clear=function(){let B=this;Object.keys(B).forEach(function(w){B[w]=void 0,delete B[w]})},D.prototype.key=function(B){return B=B||0,Object.keys(this)[B]},D.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof fw<"u"&&fw.localStorage?z$.exports=fw.localStorage:typeof window<"u"&&window.localStorage?z$.exports=window.localStorage:z$.exports=new $})();function LW(D){var $;return[D[0],J0(($=D[1])!=null?$:"")]}class $C{constructor(){this.localStorage=z$.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(LW)}async getItem(D){let $=this.localStorage.getItem(D);if($!==null)return J0($)}async setItem(D,$){this.localStorage.setItem(D,pD($))}async removeItem(D){this.localStorage.removeItem(D)}}var jW="wc_storage_version",eY=1,xW=async(D,$,B)=>{let w=jW,Y=await $.getItem(w);if(Y&&Y>=eY){B($);return}let C=await D.getKeys();if(!C.length){B($);return}let X=[];for(;C.length;){let Q=C.shift();if(!Q)continue;let F=Q.toLowerCase();if(F.includes("wc@")||F.includes("walletconnect")||F.includes("wc_")||F.includes("wallet_connect")){let Z=await D.getItem(Q);await $.setItem(Q,Z),X.push(Q)}}await $.setItem(w,eY),B($),_W(D,X)},_W=async(D,$)=>{$.length&&$.forEach(async(B)=>{await D.removeItem(B)})};class Uw{constructor(){this.initialized=!1,this.setInitialized=($)=>{this.storage=$,this.initialized=!0};let D=new $C;this.storage=D;try{let $=new DC;xW(D,$,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(D){return await this.initialize(),this.storage.getItem(D)}async setItem(D,$){return await this.initialize(),this.storage.setItem(D,$)}async removeItem(D){return await this.initialize(),this.storage.removeItem(D)}async initialize(){this.initialized||await new Promise((D)=>{let $=setInterval(()=>{this.initialized&&(clearInterval($),D())},20)})}}var k0=FD(bC(),1);var eC=FD(pw(),1),v0=FD(pw(),1);var cK={level:"info"},q8="custom_context";var{defineProperty:bK,defineProperties:vK,getOwnPropertyDescriptors:rK,getOwnPropertySymbols:aC}=Object,iK=Object.prototype.hasOwnProperty,lK=Object.prototype.propertyIsEnumerable,tC=(D,$,B)=>($ in D)?bK(D,$,{enumerable:!0,configurable:!0,writable:!0,value:B}):D[$]=B,oK=(D,$)=>{for(var B in $||($={}))iK.call($,B)&&tC(D,B,$[B]);if(aC)for(var B of aC($))lK.call($,B)&&tC(D,B,$[B]);return D},sK=(D,$)=>vK(D,rK($));function T8(D){return sK(oK({},D),{level:D?.level||cK.level})}function aK(D,$=q8){return D[$]||""}function tK(D,$,B=q8){return D[B]=$,D}function HD(D,$=q8){let B="";return typeof D.bindings>"u"?B=aK(D,$):B=D.bindings().context||"",B}function eK(D,$,B=q8){let w=HD(D,B);return w.trim()?`${w}/${$}`:$}function SD(D,$,B=q8){let w=eK(D,$,B),Y=D.child({context:w});return tK(Y,w,B)}jw();p0();class cw extends D0{constructor(D){super(),this.opts=D,this.protocol="wc",this.version=2}}class bw extends D0{constructor(D,$){super(),this.core=D,this.logger=$,this.records=new Map}}class vw{constructor(D,$){this.logger=D,this.core=$}}class rw extends D0{constructor(D,$){super(),this.relayer=D,this.logger=$}}class iw extends D0{constructor(D){super()}}class lw{constructor(D,$,B,w){this.core=D,this.logger=$,this.name=B}}class ow extends D0{constructor(D,$){super(),this.relayer=D,this.logger=$}}class sw extends D0{constructor(D,$){super(),this.core=D,this.logger=$}}class aw{constructor(D,$){this.projectId=D,this.logger=$}}class tw{constructor(D){this.opts=D,this.protocol="wc",this.version=2}}class ew{constructor(D){this.client=D}}var h8=FD(lX(),1),xQ=FD(L8(),1),_Q=FD(I0(),1);var oX="EdDSA",sX="JWT",PB=".",OB="base64url",aX="utf8",tX="utf8",eX=":",DQ="did",$Q="key",AB="base58btc",wQ="z",BQ="K36";var YQ=32;function _8(D=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null)return globalThis.Buffer.allocUnsafe(D);return new Uint8Array(D)}function s0(D,$){if(!$)$=D.reduce((Y,C)=>Y+C.length,0);let B=_8($),w=0;for(let Y of D)B.set(Y,w),w+=Y.length;return B}var HB={};XD(HB,{identity:()=>wz});function aN(D,$){if(D.length>=255)throw new TypeError("Alphabet too long");var B=new Uint8Array(256);for(var w=0;w<B.length;w++)B[w]=255;for(var Y=0;Y<D.length;Y++){var C=D.charAt(Y),X=C.charCodeAt(0);if(B[X]!==255)throw new TypeError(C+" is ambiguous");B[X]=Y}var Q=D.length,F=D.charAt(0),Z=Math.log(Q)/Math.log(256),E=Math.log(256)/Math.log(Q);function J(K){if(K instanceof Uint8Array);else if(ArrayBuffer.isView(K))K=new Uint8Array(K.buffer,K.byteOffset,K.byteLength);else if(Array.isArray(K))K=Uint8Array.from(K);if(!(K instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(K.length===0)return"";var V=0,O=0,H=0,f=K.length;while(H!==f&&K[H]===0)H++,V++;var P=(f-H)*E+1>>>0,A=new Uint8Array(P);while(H!==f){var T=K[H],R=0;for(var N=P-1;(T!==0||R<O)&&N!==-1;N--,R++)T+=256*A[N]>>>0,A[N]=T%Q>>>0,T=T/Q>>>0;if(T!==0)throw new Error("Non-zero carry");O=R,H++}var z=P-O;while(z!==P&&A[z]===0)z++;var S=F.repeat(V);for(;z<P;++z)S+=D.charAt(A[z]);return S}function G(K){if(typeof K!=="string")throw new TypeError("Expected String");if(K.length===0)return new Uint8Array;var V=0;if(K[V]===" ")return;var O=0,H=0;while(K[V]===F)O++,V++;var f=(K.length-V)*Z+1>>>0,P=new Uint8Array(f);while(K[V]){var A=B[K.charCodeAt(V)];if(A===255)return;var T=0;for(var R=f-1;(A!==0||T<H)&&R!==-1;R--,T++)A+=Q*P[R]>>>0,P[R]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");H=T,V++}if(K[V]===" ")return;var N=f-H;while(N!==f&&P[N]===0)N++;var z=new Uint8Array(O+(f-N)),S=O;while(N!==f)z[S++]=P[N++];return z}function W(K){var V=G(K);if(V)return V;throw new Error(`Non-${$} character`)}return{encode:J,decodeUnsafe:G,decode:W}}var tN=aN,eN=tN,CQ=eN;var pf=new Uint8Array(0);var XQ=(D,$)=>{if(D===$)return!0;if(D.byteLength!==$.byteLength)return!1;for(let B=0;B<D.byteLength;B++)if(D[B]!==$[B])return!1;return!0},$0=(D)=>{if(D instanceof Uint8Array&&D.constructor.name==="Uint8Array")return D;if(D instanceof ArrayBuffer)return new Uint8Array(D);if(ArrayBuffer.isView(D))return new Uint8Array(D.buffer,D.byteOffset,D.byteLength);throw new Error("Unknown type, must be binary type")};var QQ=(D)=>new TextEncoder().encode(D),ZQ=(D)=>new TextDecoder().decode(D);class EQ{constructor(D,$,B){this.name=D,this.prefix=$,this.baseEncode=B}encode(D){if(D instanceof Uint8Array)return`${this.prefix}${this.baseEncode(D)}`;else throw Error("Unknown type, must be binary type")}}class JQ{constructor(D,$,B){if(this.name=D,this.prefix=$,$.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=$.codePointAt(0),this.baseDecode=B}decode(D){if(typeof D==="string"){if(D.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(D)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(D.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(D){return KQ(this,D)}}class WQ{constructor(D){this.decoders=D}or(D){return KQ(this,D)}decode(D){let $=D[0],B=this.decoders[$];if(B)return B.decode(D);else throw RangeError(`Unable to decode multibase string ${JSON.stringify(D)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}var KQ=(D,$)=>new WQ({...D.decoders||{[D.prefix]:D},...$.decoders||{[$.prefix]:$}});class GQ{constructor(D,$,B,w){this.name=D,this.prefix=$,this.baseEncode=B,this.baseDecode=w,this.encoder=new EQ(D,$,B),this.decoder=new JQ(D,$,w)}encode(D){return this.encoder.encode(D)}decode(D){return this.decoder.decode(D)}}var a0=({name:D,prefix:$,encode:B,decode:w})=>new GQ(D,$,B,w),K0=({prefix:D,name:$,alphabet:B})=>{let{encode:w,decode:Y}=CQ(B,$);return a0({prefix:D,name:$,encode:w,decode:(C)=>$0(Y(C))})},Dz=(D,$,B,w)=>{let Y={};for(let E=0;E<$.length;++E)Y[$[E]]=E;let C=D.length;while(D[C-1]==="=")--C;let X=new Uint8Array(C*B/8|0),Q=0,F=0,Z=0;for(let E=0;E<C;++E){let J=Y[D[E]];if(J===void 0)throw new SyntaxError(`Non-${w} character`);if(F=F<<B|J,Q+=B,Q>=8)Q-=8,X[Z++]=255&F>>Q}if(Q>=B||255&F<<8-Q)throw new SyntaxError("Unexpected end of data");return X},$z=(D,$,B)=>{let w=$[$.length-1]==="=",Y=(1<<B)-1,C="",X=0,Q=0;for(let F=0;F<D.length;++F){Q=Q<<8|D[F],X+=8;while(X>B)X-=B,C+=$[Y&Q>>X]}if(X)C+=$[Y&Q<<B-X];if(w)while(C.length*B&7)C+="=";return C},QD=({name:D,prefix:$,bitsPerChar:B,alphabet:w})=>{return a0({prefix:$,name:D,encode(Y){return $z(Y,w,B)},decode(Y){return Dz(Y,w,B,D)}})};var wz=a0({prefix:"\x00",name:"identity",encode:(D)=>ZQ(D),decode:(D)=>QQ(D)});var IB={};XD(IB,{base2:()=>Bz});var Bz=QD({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var fB={};XD(fB,{base8:()=>Yz});var Yz=QD({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var UB={};XD(UB,{base10:()=>Cz});var Cz=K0({prefix:"9",name:"base10",alphabet:"0123456789"});var MB={};XD(MB,{base16upper:()=>Qz,base16:()=>Xz});var Xz=QD({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Qz=QD({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var qB={};XD(qB,{base32z:()=>Nz,base32upper:()=>Zz,base32padupper:()=>Ez,base32pad:()=>Fz,base32hexupper:()=>Wz,base32hexpadupper:()=>Gz,base32hexpad:()=>Kz,base32hex:()=>Jz,base32:()=>t0});var t0=QD({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Zz=QD({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Fz=QD({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ez=QD({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Jz=QD({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Wz=QD({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Kz=QD({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Gz=QD({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Nz=QD({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var TB={};XD(TB,{base36upper:()=>Vz,base36:()=>zz});var zz=K0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Vz=K0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var RB={};XD(RB,{base58flickr:()=>Pz,base58btc:()=>rD});var rD=K0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Pz=K0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var SB={};XD(SB,{base64urlpad:()=>Iz,base64url:()=>Hz,base64pad:()=>Az,base64:()=>Oz});var Oz=QD({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Az=QD({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Hz=QD({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Iz=QD({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var LB={};XD(LB,{base256emoji:()=>Tz});var NQ=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),fz=NQ.reduce((D,$,B)=>{return D[B]=$,D},[]),Uz=NQ.reduce((D,$,B)=>{return D[$.codePointAt(0)]=B,D},[]);function Mz(D){return D.reduce(($,B)=>{return $+=fz[B],$},"")}function qz(D){let $=[];for(let B of D){let w=Uz[B.codePointAt(0)];if(w===void 0)throw new Error(`Non-base256emoji character: ${B}`);$.push(w)}return new Uint8Array($)}var Tz=a0({prefix:"\uD83D\uDE80",name:"base256emoji",encode:Mz,decode:qz});var _B={};XD(_B,{sha512:()=>iz,sha256:()=>rz});var Rz=PQ,zQ=128,Sz=127,Lz=~Sz,jz=Math.pow(2,31);function PQ(D,$,B){$=$||[],B=B||0;var w=B;while(D>=jz)$[B++]=D&255|zQ,D/=128;while(D&Lz)$[B++]=D&255|zQ,D>>>=7;return $[B]=D|0,PQ.bytes=B-w+1,$}var xz=jB,_z=128,VQ=127;function jB(D,w){var B=0,w=w||0,Y=0,C=w,X,Q=D.length;do{if(C>=Q)throw jB.bytes=0,new RangeError("Could not decode varint");X=D[C++],B+=Y<28?(X&VQ)<<Y:(X&VQ)*Math.pow(2,Y),Y+=7}while(X>=_z);return jB.bytes=C-w,B}var mz=Math.pow(2,7),uz=Math.pow(2,14),gz=Math.pow(2,21),kz=Math.pow(2,28),yz=Math.pow(2,35),hz=Math.pow(2,42),dz=Math.pow(2,49),nz=Math.pow(2,56),pz=Math.pow(2,63),cz=function(D){return D<mz?1:D<uz?2:D<gz?3:D<kz?4:D<yz?5:D<hz?6:D<dz?7:D<nz?8:D<pz?9:10},bz={encode:Rz,decode:xz,encodingLength:cz},vz=bz,m8=vz;var u8=(D,$=0)=>{return[m8.decode(D,$),m8.decode.bytes]},e0=(D,$,B=0)=>{return m8.encode(D,$,B),$},D8=(D)=>{return m8.encodingLength(D)};var q0=(D,$)=>{let B=$.byteLength,w=D8(D),Y=w+D8(B),C=new Uint8Array(Y+B);return e0(D,C,0),e0(B,C,w),C.set($,Y),new g8(D,B,$,C)},OQ=(D)=>{let $=$0(D),[B,w]=u8($),[Y,C]=u8($.subarray(w)),X=$.subarray(w+C);if(X.byteLength!==Y)throw new Error("Incorrect length");return new g8(B,Y,X,$)},AQ=(D,$)=>{if(D===$)return!0;else return D.code===$.code&&D.size===$.size&&XQ(D.bytes,$.bytes)};class g8{constructor(D,$,B,w){this.code=D,this.size=$,this.digest=B,this.bytes=w}}var xB=({name:D,code:$,encode:B})=>new HQ(D,$,B);class HQ{constructor(D,$,B){this.name=D,this.code=$,this.encode=B}digest(D){if(D instanceof Uint8Array){let $=this.encode(D);return $ instanceof Uint8Array?q0(this.code,$):$.then((B)=>q0(this.code,B))}else throw Error("Unknown type, must be binary type")}}var fQ=(D)=>async($)=>new Uint8Array(await crypto.subtle.digest(D,$)),rz=xB({name:"sha2-256",code:18,encode:fQ("SHA-256")}),iz=xB({name:"sha2-512",code:19,encode:fQ("SHA-512")});var mB={};XD(mB,{identity:()=>sz});var UQ=0,lz="identity",MQ=$0,oz=(D)=>q0(UQ,MQ(D)),sz={code:UQ,name:lz,encode:MQ,digest:oz};class zD{constructor(D,$,B,w){this.code=$,this.version=D,this.multihash=B,this.bytes=w,this.byteOffset=w.byteOffset,this.byteLength=w.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:T$,byteLength:T$,code:q$,version:q$,multihash:q$,bytes:q$,_baseCache:T$,asCID:T$})}toV0(){switch(this.version){case 0:return this;default:{let{code:D,multihash:$}=this;if(D!==y8)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if($.code!==wV)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return zD.createV0($)}}}toV1(){switch(this.version){case 0:{let{code:D,digest:$}=this.multihash,B=q0(D,$);return zD.createV1(this.code,B)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(D){return D&&this.code===D.code&&this.version===D.version&&AQ(this.multihash,D.multihash)}toString(D){let{bytes:$,version:B,_baseCache:w}=this;switch(B){case 0:return DV($,w,D||rD.encoder);default:return $V($,w,D||t0.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(D){return YV(/^0\.0/,CV),!!(D&&(D[TQ]||D.asCID===D))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(D){if(D instanceof zD)return D;else if(D!=null&&D.asCID===D){let{version:$,code:B,multihash:w,bytes:Y}=D;return new zD($,B,w,Y||qQ($,B,w.bytes))}else if(D!=null&&D[TQ]===!0){let{version:$,multihash:B,code:w}=D,Y=OQ(B);return zD.create($,w,Y)}else return null}static create(D,$,B){if(typeof $!=="number")throw new Error("String codecs are no longer supported");switch(D){case 0:if($!==y8)throw new Error(`Version 0 CID must use dag-pb (code: ${y8}) block encoding`);else return new zD(D,$,B,B.bytes);case 1:{let w=qQ(D,$,B.bytes);return new zD(D,$,B,w)}default:throw new Error("Invalid version")}}static createV0(D){return zD.create(0,y8,D)}static createV1(D,$){return zD.create(1,D,$)}static decode(D){let[$,B]=zD.decodeFirst(D);if(B.length)throw new Error("Incorrect length");return $}static decodeFirst(D){let $=zD.inspectBytes(D),B=$.size-$.multihashSize,w=$0(D.subarray(B,B+$.multihashSize));if(w.byteLength!==$.multihashSize)throw new Error("Incorrect length");let Y=w.subarray($.multihashSize-$.digestSize),C=new g8($.multihashCode,$.digestSize,Y,w);return[$.version===0?zD.createV0(C):zD.createV1($.codec,C),D.subarray($.size)]}static inspectBytes(D){let $=0,B=()=>{let[E,J]=u8(D.subarray($));return $+=J,E},w=B(),Y=y8;if(w===18)w=0,$=0;else if(w===1)Y=B();if(w!==0&&w!==1)throw new RangeError(`Invalid CID version ${w}`);let C=$,X=B(),Q=B(),F=$+Q,Z=F-C;return{version:w,codec:Y,multihashCode:X,digestSize:Q,multihashSize:Z,size:F}}static parse(D,$){let[B,w]=ez(D,$),Y=zD.decode(w);return Y._baseCache.set(B,D),Y}}var ez=(D,$)=>{switch(D[0]){case"Q":{let B=$||rD;return[rD.prefix,B.decode(`${rD.prefix}${D}`)]}case rD.prefix:{let B=$||rD;return[rD.prefix,B.decode(D)]}case t0.prefix:{let B=$||t0;return[t0.prefix,B.decode(D)]}default:{if($==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[D[0],$.decode(D)]}}},DV=(D,$,B)=>{let{prefix:w}=B;if(w!==rD.prefix)throw Error(`Cannot string encode V0 in ${B.name} encoding`);let Y=$.get(w);if(Y==null){let C=B.encode(D).slice(1);return $.set(w,C),C}else return Y},$V=(D,$,B)=>{let{prefix:w}=B,Y=$.get(w);if(Y==null){let C=B.encode(D);return $.set(w,C),C}else return Y},y8=112,wV=18,qQ=(D,$,B)=>{let w=D8(D),Y=w+D8($),C=new Uint8Array(Y+B.byteLength);return e0(D,C,0),e0($,C,w),C.set(B,Y),C},TQ=Symbol.for("@ipld/js-cid/CID"),q$={writable:!1,configurable:!1,enumerable:!0},T$={writable:!1,enumerable:!1,configurable:!1},BV="0.0.0-dev",YV=(D,$)=>{if(D.test(BV))console.warn($);else throw new Error($)},CV=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;var uB={...HB,...IB,...fB,...UB,...MB,...qB,...TB,...RB,...SB,...LB},VU={..._B,...mB};function SQ(D,$,B,w){return{name:D,prefix:$,encoder:{name:D,prefix:$,encode:B},decoder:{decode:w}}}var RQ=SQ("utf8","u",(D)=>{return"u"+new TextDecoder("utf8").decode(D)},(D)=>{return new TextEncoder().encode(D.substring(1))}),gB=SQ("ascii","a",(D)=>{let $="a";for(let B=0;B<D.length;B++)$+=String.fromCharCode(D[B]);return $},(D)=>{D=D.substring(1);let $=_8(D.length);for(let B=0;B<D.length;B++)$[B]=D.charCodeAt(B);return $}),XV={utf8:RQ,"utf-8":RQ,hex:uB.base16,latin1:gB,ascii:gB,binary:gB,...uB},R$=XV;function GD(D,$="utf8"){let B=R$[$];if(!B)throw new Error(`Unsupported encoding "${$}"`);if(($==="utf8"||$==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null)return globalThis.Buffer.from(D.buffer,D.byteOffset,D.byteLength).toString("utf8");return B.encoder.encode(D).substring(1)}function VD(D,$="utf8"){let B=R$[$];if(!B)throw new Error(`Unsupported encoding "${$}"`);if(($==="utf8"||$==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null)return globalThis.Buffer.from(D,"utf8");return B.decoder.decode(`${B.prefix}${D}`)}function S$(D){return GD(VD(pD(D),aX),OB)}function L$(D){let $=VD(BQ,AB),B=wQ+GD(s0([$,D]),AB);return[DQ,$Q,B].join(eX)}function QV(D){return GD(D,OB)}function LQ(D){return VD([S$(D.header),S$(D.payload)].join(PB),tX)}function jQ(D){return[S$(D.header),S$(D.payload),QV(D.signature)].join(PB)}function kB(D=xQ.randomBytes(YQ)){return h8.generateKeyPairFromSeed(D)}async function mQ(D,$,B,w,Y=_Q.fromMiliseconds(Date.now())){let C={alg:oX,typ:sX},X=L$(w.publicKey),Q=Y+B,F={iss:X,sub:D,aud:$,iat:Y,exp:Q},Z=LQ({header:C,payload:F}),E=h8.sign(w.secretKey,Z);return jQ({header:C,payload:F,signature:E})}var oB=FD(oQ(),1),sZ=FD(YZ(),1),sB=FD(L8(),1),c8=FD(FZ(),1),p$=FD(NZ(),1);var zZ=function(D,$,B){if(B||arguments.length===2){for(var w=0,Y=$.length,C;w<Y;w++)if(C||!(w in $)){if(!C)C=Array.prototype.slice.call($,0,w);C[w]=$[w]}}return D.concat(C||Array.prototype.slice.call($))},CP=function(){function D($,B,w){this.name=$,this.version=B,this.os=w,this.type="browser"}return D}();var XP=function(){function D($){this.version=$,this.type="node",this.name="node",this.os=process.platform}return D}();var QP=function(){function D($,B,w,Y){this.name=$,this.version=B,this.os=w,this.bot=Y,this.type="bot-device"}return D}();var ZP=function(){function D(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return D}();var FP=function(){function D(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return D}();var EP=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,JP=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,VZ=3,WP=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",EP]],PZ=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function AZ(D){if(D)return OZ(D);if(typeof document==="undefined"&&typeof navigator!=="undefined"&&navigator.product==="ReactNative")return new FP;if(typeof navigator!=="undefined")return OZ(navigator.userAgent);return NP()}function KP(D){return D!==""&&WP.reduce(function($,B){var w=B[0],Y=B[1];if($)return $;var C=Y.exec(D);return!!C&&[w,C]},!1)}function OZ(D){var $=KP(D);if(!$)return null;var B=$[0],w=$[1];if(B==="searchbot")return new ZP;var Y=w[1]&&w[1].split(".").join("_").split("_").slice(0,3);if(Y){if(Y.length<VZ)Y=zZ(zZ([],Y,!0),zP(VZ-Y.length),!0)}else Y=[];var C=Y.join("."),X=GP(D),Q=JP.exec(D);if(Q&&Q[1])return new QP(B,C,X,Q[1]);return new CP(B,C,X)}function GP(D){for(var $=0,B=PZ.length;$<B;$++){var w=PZ[$],Y=w[0],C=w[1],X=C.exec(D);if(X)return Y}return null}function NP(){var D=typeof process!=="undefined"&&process.version;return D?new XP(process.version.slice(1)):null}function zP(D){var $=[];for(var B=0;B<D;B++)$.push("0");return $}var B0=FD(I0(),1),S0=FD(bB(),1),aZ=FD(qZ(),1);var nP=RZ(),pP=_Z(),cP=uZ(),PM=kZ(),bP=(D)=>D===null||D===void 0,OM=Symbol("encodeFragmentIdentifier");function vP(D){switch(D.arrayFormat){case"index":return($)=>(B,w)=>{let Y=B.length;if(w===void 0||D.skipNull&&w===null||D.skipEmptyString&&w==="")return B;if(w===null)return[...B,[ED($,D),"[",Y,"]"].join("")];return[...B,[ED($,D),"[",ED(Y,D),"]=",ED(w,D)].join("")]};case"bracket":return($)=>(B,w)=>{if(w===void 0||D.skipNull&&w===null||D.skipEmptyString&&w==="")return B;if(w===null)return[...B,[ED($,D),"[]"].join("")];return[...B,[ED($,D),"[]=",ED(w,D)].join("")]};case"colon-list-separator":return($)=>(B,w)=>{if(w===void 0||D.skipNull&&w===null||D.skipEmptyString&&w==="")return B;if(w===null)return[...B,[ED($,D),":list="].join("")];return[...B,[ED($,D),":list=",ED(w,D)].join("")]};case"comma":case"separator":case"bracket-separator":{let $=D.arrayFormat==="bracket-separator"?"[]=":"=";return(B)=>(w,Y)=>{if(Y===void 0||D.skipNull&&Y===null||D.skipEmptyString&&Y==="")return w;if(Y=Y===null?"":Y,w.length===0)return[[ED(B,D),$,ED(Y,D)].join("")];return[[w,ED(Y,D)].join(D.arrayFormatSeparator)]}}default:return($)=>(B,w)=>{if(w===void 0||D.skipNull&&w===null||D.skipEmptyString&&w==="")return B;if(w===null)return[...B,ED($,D)];return[...B,[ED($,D),"=",ED(w,D)].join("")]}}}function rP(D){let $;switch(D.arrayFormat){case"index":return(B,w,Y)=>{if($=/\[(\d*)\]$/.exec(B),B=B.replace(/\[\d*\]$/,""),!$){Y[B]=w;return}if(Y[B]===void 0)Y[B]={};Y[B][$[1]]=w};case"bracket":return(B,w,Y)=>{if($=/(\[\])$/.exec(B),B=B.replace(/\[\]$/,""),!$){Y[B]=w;return}if(Y[B]===void 0){Y[B]=[w];return}Y[B]=[].concat(Y[B],w)};case"colon-list-separator":return(B,w,Y)=>{if($=/(:list)$/.exec(B),B=B.replace(/:list$/,""),!$){Y[B]=w;return}if(Y[B]===void 0){Y[B]=[w];return}Y[B]=[].concat(Y[B],w)};case"comma":case"separator":return(B,w,Y)=>{let C=typeof w==="string"&&w.includes(D.arrayFormatSeparator),X=typeof w==="string"&&!C&&G0(w,D).includes(D.arrayFormatSeparator);w=X?G0(w,D):w;let Q=C||X?w.split(D.arrayFormatSeparator).map((F)=>G0(F,D)):w===null?w:G0(w,D);Y[B]=Q};case"bracket-separator":return(B,w,Y)=>{let C=/(\[\])$/.test(B);if(B=B.replace(/\[\]$/,""),!C){Y[B]=w?G0(w,D):w;return}let X=w===null?[]:w.split(D.arrayFormatSeparator).map((Q)=>G0(Q,D));if(Y[B]===void 0){Y[B]=X;return}Y[B]=[].concat(Y[B],X)};default:return(B,w,Y)=>{if(Y[B]===void 0){Y[B]=w;return}Y[B]=[].concat(Y[B],w)}}}function hZ(D){if(typeof D!=="string"||D.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function ED(D,$){if($.encode)return $.strict?nP(D):encodeURIComponent(D);return D}function G0(D,$){if($.decode)return pP(D);return D}function dZ(D){if(Array.isArray(D))return D.sort();if(typeof D==="object")return dZ(Object.keys(D)).sort(($,B)=>Number($)-Number(B)).map(($)=>D[$]);return D}function yZ(D,$){if($.parseNumbers&&!Number.isNaN(Number(D))&&(typeof D==="string"&&D.trim()!==""))D=Number(D);else if($.parseBooleans&&D!==null&&(D.toLowerCase()==="true"||D.toLowerCase()==="false"))D=D.toLowerCase()==="true";return D}function iP(D,$){$=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},$),hZ($.arrayFormatSeparator);let B=rP($),w=Object.create(null);if(typeof D!=="string")return w;if(D=D.trim().replace(/^[?#&]/,""),!D)return w;for(let Y of D.split("&")){if(Y==="")continue;let[C,X]=cP($.decode?Y.replace(/\+/g," "):Y,"=");X=X===void 0?null:["comma","separator","bracket-separator"].includes($.arrayFormat)?X:G0(X,$),B(G0(C,$),X,w)}for(let Y of Object.keys(w)){let C=w[Y];if(typeof C==="object"&&C!==null)for(let X of Object.keys(C))C[X]=yZ(C[X],$);else w[Y]=yZ(C,$)}if($.sort===!1)return w;return($.sort===!0?Object.keys(w).sort():Object.keys(w).sort($.sort)).reduce((Y,C)=>{let X=w[C];if(Boolean(X)&&typeof X==="object"&&!Array.isArray(X))Y[C]=dZ(X);else Y[C]=X;return Y},Object.create(null))}var h$=iP,d$=(D,$)=>{if(!D)return"";$=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},$),hZ($.arrayFormatSeparator);let B=(X)=>$.skipNull&&bP(D[X])||$.skipEmptyString&&D[X]==="",w=vP($),Y={};for(let X of Object.keys(D))if(!B(X))Y[X]=D[X];let C=Object.keys(Y);if($.sort!==!1)C.sort($.sort);return C.map((X)=>{let Q=D[X];if(Q===void 0)return"";if(Q===null)return ED(X,$);if(Array.isArray(Q)){if(Q.length===0&&$.arrayFormat==="bracket-separator")return ED(X,$)+"[]";return Q.reduce(w(X),[]).join("&")}return ED(X,$)+"="+ED(Q,$)}).filter((X)=>X.length>0).join("&")};var nZ={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};function tZ(D,$){return D.includes(":")?[D]:$.chains||[]}var eZ="base10",fD="base16",iB="base64pad",aB="utf8",DF=0,Y0=1,oP=0,pZ=1,lB=12,tB=32;function $F(){let D=p$.generateKeyPair();return{privateKey:GD(D.secretKey,fD),publicKey:GD(D.publicKey,fD)}}function c$(){let D=sB.randomBytes(tB);return GD(D,fD)}function wF(D,$){let B=p$.sharedKey(VD(D,fD),VD($,fD)),w=new sZ.HKDF(c8.SHA256,B).expand(tB);return GD(w,fD)}function BF(D){let $=c8.hash(VD(D,fD));return GD($,fD)}function N0(D){let $=c8.hash(VD(D,aB));return GD($,fD)}function sP(D){return VD(`${D}`,eZ)}function w8(D){return Number(GD(D,eZ))}function YF(D){let $=sP(typeof D.type<"u"?D.type:DF);if(w8($)===Y0&&typeof D.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");let B=typeof D.senderPublicKey<"u"?VD(D.senderPublicKey,fD):void 0,w=typeof D.iv<"u"?VD(D.iv,fD):sB.randomBytes(lB),Y=new oB.ChaCha20Poly1305(VD(D.symKey,fD)).seal(w,VD(D.message,aB));return aP({type:$,sealed:Y,iv:w,senderPublicKey:B})}function CF(D){let $=new oB.ChaCha20Poly1305(VD(D.symKey,fD)),{sealed:B,iv:w}=b8(D.encoded),Y=$.open(w,B);if(Y===null)throw new Error("Failed to decrypt");return GD(Y,aB)}function aP(D){if(w8(D.type)===Y0){if(typeof D.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return GD(s0([D.type,D.senderPublicKey,D.iv,D.sealed]),iB)}return GD(s0([D.type,D.iv,D.sealed]),iB)}function b8(D){let $=VD(D,iB),B=$.slice(oP,pZ),w=pZ;if(w8(B)===Y0){let Q=w+tB,F=Q+lB,Z=$.slice(w,Q),E=$.slice(Q,F),J=$.slice(F);return{type:B,sealed:J,iv:E,senderPublicKey:Z}}let Y=w+lB,C=$.slice(w,Y),X=$.slice(Y);return{type:B,sealed:X,iv:C}}function XF(D,$){let B=b8(D);return eB({type:w8(B.type),senderPublicKey:typeof B.senderPublicKey<"u"?GD(B.senderPublicKey,fD):void 0,receiverPublicKey:$?.receiverPublicKey})}function eB(D){let $=D?.type||DF;if($===Y0){if(typeof D?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof D?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:$,senderPublicKey:D?.senderPublicKey,receiverPublicKey:D?.receiverPublicKey}}function DY(D){return D.type===Y0&&typeof D.senderPublicKey=="string"&&typeof D.receiverPublicKey=="string"}var{defineProperty:tP,getOwnPropertySymbols:cZ}=Object,eP=Object.prototype.hasOwnProperty,DO=Object.prototype.propertyIsEnumerable,bZ=(D,$,B)=>($ in D)?tP(D,$,{enumerable:!0,configurable:!0,writable:!0,value:B}):D[$]=B,vZ=(D,$)=>{for(var B in $||($={}))eP.call($,B)&&bZ(D,B,$[B]);if(cZ)for(var B of cZ($))DO.call($,B)&&bZ(D,B,$[B]);return D},$O="ReactNative",_D={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};var wO="js";function b$(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function v8(){return!S0.getDocument()&&!!S0.getNavigator()&&navigator.product===$O}function L0(){return!b$()&&!!S0.getNavigator()}function r8(){return v8()?_D.reactNative:b$()?_D.node:L0()?_D.browser:_D.unknown}function BO(D,$){let B=h$(D);return B=vZ(vZ({},B),$),D=d$(B),D}function QF(){return aZ.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function YO(){if(r8()===_D.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){let{OS:B,Version:w}=global.Platform;return[B,w].join("-")}let D=AZ();if(D===null)return"unknown";let $=D.os?D.os.replace(" ","").toLowerCase():"unknown";return D.type==="browser"?[$,D.name,D.version].join("-"):[$,D.version].join("-")}function CO(){var D;let $=r8();return $===_D.browser?[$,((D=S0.getLocation())==null?void 0:D.host)||"unknown"].join(":"):$}function XO(D,$,B){let w=YO(),Y=CO();return[[D,$].join("-"),[wO,B].join("-"),w,Y].join("/")}function ZF({protocol:D,version:$,relayUrl:B,sdkVersion:w,auth:Y,projectId:C,useOnCloseEvent:X}){let Q=B.split("?"),F=XO(D,$,w),Z={auth:Y,ua:F,projectId:C,useOnCloseEvent:X||void 0},E=BO(Q[1]||"",Z);return Q[0]+"?"+E}function R0(D,$){return D.filter((B)=>$.includes(B)).length===D.length}function $Y(D){return Object.fromEntries(D.entries())}function wY(D){return new Map(Object.entries(D))}function z0(D=B0.FIVE_MINUTES,$){let B=B0.toMiliseconds(D||B0.FIVE_MINUTES),w,Y,C;return{resolve:(X)=>{C&&w&&(clearTimeout(C),w(X))},reject:(X)=>{C&&Y&&(clearTimeout(C),Y(X))},done:()=>new Promise((X,Q)=>{C=setTimeout(()=>{Q(new Error($))},B),w=X,Y=Q})}}function B8(D,$,B){return new Promise(async(w,Y)=>{let C=setTimeout(()=>Y(new Error(B)),$);try{let X=await D;w(X)}catch(X){Y(X)}clearTimeout(C)})}function FF(D,$){if(typeof $=="string"&&$.startsWith(`${D}:`))return $;if(D.toLowerCase()==="topic"){if(typeof $!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${$}`}else if(D.toLowerCase()==="id"){if(typeof $!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${$}`}throw new Error(`Unknown expirer target type: ${D}`)}function EF(D){return FF("topic",D)}function JF(D){return FF("id",D)}function v$(D){let[$,B]=D.split(":"),w={id:void 0,topic:void 0};if($==="topic"&&typeof B=="string")w.topic=B;else if($==="id"&&Number.isInteger(Number(B)))w.id=Number(B);else throw new Error(`Invalid target, expected id:number or topic:string, got ${$}:${B}`);return w}function uD(D,$){return B0.fromMiliseconds(($||Date.now())+B0.toMiliseconds(D))}function oD(D){return Date.now()>=B0.toMiliseconds(D)}function ZD(D,$){return`${D}${$?`:${$}`:""}`}async function WF({id:D,topic:$,wcDeepLink:B}){try{if(!B)return;let Y=(typeof B=="string"?JSON.parse(B):B)?.href;if(typeof Y!="string")return;Y.endsWith("/")&&(Y=Y.slice(0,-1));let C=`${Y}/wc?requestId=${D}&sessionTopic=${$}`,X=r8();X===_D.browser?C.startsWith("https://")?window.open(C,"_blank","noreferrer noopener"):window.open(C,"_self","noreferrer noopener"):X===_D.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(C)}catch(w){console.error(w)}}var QO="irn";function r$(D){return D?.relay||{protocol:QO}}function i8(D){let $=nZ[D];if(typeof $>"u")throw new Error(`Relay Protocol not supported: ${D}`);return $}var{defineProperty:ZO,getOwnPropertySymbols:rZ}=Object,FO=Object.prototype.hasOwnProperty,EO=Object.prototype.propertyIsEnumerable,iZ=(D,$,B)=>($ in D)?ZO(D,$,{enumerable:!0,configurable:!0,writable:!0,value:B}):D[$]=B,JO=(D,$)=>{for(var B in $||($={}))FO.call($,B)&&iZ(D,B,$[B]);if(rZ)for(var B of rZ($))EO.call($,B)&&iZ(D,B,$[B]);return D};function WO(D,$="-"){let B={},w="relay"+$;return Object.keys(D).forEach((Y)=>{if(Y.startsWith(w)){let C=Y.replace(w,""),X=D[Y];B[C]=X}}),B}function KF(D){let $=D.indexOf(":"),B=D.indexOf("?")!==-1?D.indexOf("?"):void 0,w=D.substring(0,$),Y=D.substring($+1,B).split("@"),C=typeof B<"u"?D.substring(B):"",X=h$(C);return{protocol:w,topic:KO(Y[0]),version:parseInt(Y[1],10),symKey:X.symKey,relay:WO(X)}}function KO(D){return D.startsWith("//")?D.substring(2):D}function GO(D,$="-"){let w={};return Object.keys(D).forEach((Y)=>{let C="relay"+$+Y;D[Y]&&(w[C]=D[Y])}),w}function GF(D){return`${D.protocol}:${D.topic}@${D.version}?`+d$(JO({symKey:D.symKey},GO(D.relay)))}function Y8(D){let $=[];return D.forEach((B)=>{let[w,Y]=B.split(":");$.push(`${w}:${Y}`)}),$}function NO(D){let $=[];return Object.values(D).forEach((B)=>{$.push(...Y8(B.accounts))}),$}function zO(D,$){let B=[];return Object.values(D).forEach((w)=>{Y8(w.accounts).includes($)&&B.push(...w.methods)}),B}function VO(D,$){let B=[];return Object.values(D).forEach((w)=>{Y8(w.accounts).includes($)&&B.push(...w.events)}),B}function NF(D,$){let B=l8(D,$);if(B)throw new Error(B.message);let w={};for(let[Y,C]of Object.entries(D))w[Y]={methods:C.methods,events:C.events,chains:C.accounts.map((X)=>`${X.split(":")[0]}:${X.split(":")[1]}`)};return w}var PO={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5000},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6000},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7000},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},OO={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function L(D,$){let{message:B,code:w}=OO[D];return{message:$?`${B} ${$}`:B,code:w}}function JD(D,$){let{message:B,code:w}=PO[D];return{message:$?`${B} ${$}`:B,code:w}}function C8(D,$){return Array.isArray(D)?typeof $<"u"&&D.length?D.every($):!0:!1}function X8(D){return Object.getPrototypeOf(D)===Object.prototype&&Object.keys(D).length}function PD(D){return typeof D>"u"}function WD(D,$){return $&&PD(D)?!0:typeof D=="string"&&!!D.trim().length}function BY(D,$){return $&&PD(D)?!0:typeof D=="number"&&!isNaN(D)}function zF(D,$){let{requiredNamespaces:B}=$,w=Object.keys(D.namespaces),Y=Object.keys(B),C=!0;return R0(Y,w)?(w.forEach((X)=>{let{accounts:Q,methods:F,events:Z}=D.namespaces[X],E=Y8(Q),J=B[X];(!R0(tZ(X,J),E)||!R0(J.methods,F)||!R0(J.events,Z))&&(C=!1)}),C):!1}function n$(D){return WD(D,!1)&&D.includes(":")?D.split(":").length===2:!1}function AO(D){if(WD(D,!1)&&D.includes(":")){let $=D.split(":");if($.length===3){let B=$[0]+":"+$[1];return!!$[2]&&n$(B)}}return!1}function VF(D){if(WD(D,!1))try{return typeof new URL(D)<"u"}catch{return!1}return!1}function PF(D){var $;return($=D?.proposer)==null?void 0:$.publicKey}function OF(D){return D?.topic}function AF(D,$){let B=null;return WD(D?.publicKey,!1)||(B=L("MISSING_OR_INVALID",`${$} controller public key should be a string`)),B}function lZ(D){let $=!0;return C8(D)?D.length&&($=D.every((B)=>WD(B,!1))):$=!1,$}function HO(D,$,B){let w=null;return C8($)&&$.length?$.forEach((Y)=>{w||n$(Y)||(w=JD("UNSUPPORTED_CHAINS",`${B}, chain ${Y} should be a string and conform to "namespace:chainId" format`))}):n$(D)||(w=JD("UNSUPPORTED_CHAINS",`${B}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),w}function IO(D,$,B){let w=null;return Object.entries(D).forEach(([Y,C])=>{if(w)return;let X=HO(Y,tZ(Y,C),`${$} ${B}`);X&&(w=X)}),w}function fO(D,$){let B=null;return C8(D)?D.forEach((w)=>{B||AO(w)||(B=JD("UNSUPPORTED_ACCOUNTS",`${$}, account ${w} should be a string and conform to "namespace:chainId:address" format`))}):B=JD("UNSUPPORTED_ACCOUNTS",`${$}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),B}function UO(D,$){let B=null;return Object.values(D).forEach((w)=>{if(B)return;let Y=fO(w?.accounts,`${$} namespace`);Y&&(B=Y)}),B}function MO(D,$){let B=null;return lZ(D?.methods)?lZ(D?.events)||(B=JD("UNSUPPORTED_EVENTS",`${$}, events should be an array of strings or empty array for no events`)):B=JD("UNSUPPORTED_METHODS",`${$}, methods should be an array of strings or empty array for no methods`),B}function HF(D,$){let B=null;return Object.values(D).forEach((w)=>{if(B)return;let Y=MO(w,`${$}, namespace`);Y&&(B=Y)}),B}function IF(D,$,B){let w=null;if(D&&X8(D)){let Y=HF(D,$);Y&&(w=Y);let C=IO(D,$,B);C&&(w=C)}else w=L("MISSING_OR_INVALID",`${$}, ${B} should be an object with data`);return w}function l8(D,$){let B=null;if(D&&X8(D)){let w=HF(D,$);w&&(B=w);let Y=UO(D,$);Y&&(B=Y)}else B=L("MISSING_OR_INVALID",`${$}, namespaces should be an object with data`);return B}function YY(D){return WD(D.protocol,!0)}function fF(D,$){let B=!1;return $&&!D?B=!0:D&&C8(D)&&D.length&&D.forEach((w)=>{B=YY(w)}),B}function UF(D){return typeof D=="number"}function UD(D){return typeof D<"u"&&typeof D!==null}function MF(D){return!(!D||typeof D!="object"||!D.code||!BY(D.code,!1)||!D.message||!WD(D.message,!1))}function qF(D){return!(PD(D)||!WD(D.method,!1))}function TF(D){return!(PD(D)||PD(D.result)&&PD(D.error)||!BY(D.id,!1)||!WD(D.jsonrpc,!1))}function RF(D){return!(PD(D)||!WD(D.name,!1))}function CY(D,$){return!(!n$($)||!NO(D).includes($))}function SF(D,$,B){return WD(B,!1)?zO(D,$).includes(B):!1}function LF(D,$,B){return WD(B,!1)?VO(D,$).includes(B):!1}function XY(D,$,B){let w=null,Y=qO(D),C=TO($),X=Object.keys(Y),Q=Object.keys(C),F=oZ(Object.keys(D)),Z=oZ(Object.keys($)),E=F.filter((J)=>!Z.includes(J));return E.length&&(w=L("NON_CONFORMING_NAMESPACES",`${B} namespaces keys don't satisfy requiredNamespaces.
      Required: ${E.toString()}
      Received: ${Object.keys($).toString()}`)),R0(X,Q)||(w=L("NON_CONFORMING_NAMESPACES",`${B} namespaces chains don't satisfy required namespaces.
      Required: ${X.toString()}
      Approved: ${Q.toString()}`)),Object.keys($).forEach((J)=>{if(!J.includes(":")||w)return;let G=Y8($[J].accounts);G.includes(J)||(w=L("NON_CONFORMING_NAMESPACES",`${B} namespaces accounts don't satisfy namespace accounts for ${J}
        Required: ${J}
        Approved: ${G.toString()}`))}),X.forEach((J)=>{w||(R0(Y[J].methods,C[J].methods)?R0(Y[J].events,C[J].events)||(w=L("NON_CONFORMING_NAMESPACES",`${B} namespaces events don't satisfy namespace events for ${J}`)):w=L("NON_CONFORMING_NAMESPACES",`${B} namespaces methods don't satisfy namespace methods for ${J}`))}),w}function qO(D){let $={};return Object.keys(D).forEach((B)=>{var w;B.includes(":")?$[B]=D[B]:(w=D[B].chains)==null||w.forEach((Y)=>{$[Y]={methods:D[B].methods,events:D[B].events}})}),$}function oZ(D){return[...new Set(D.map(($)=>$.includes(":")?$.split(":")[0]:$))]}function TO(D){let $={};return Object.keys(D).forEach((B)=>{if(B.includes(":"))$[B]=D[B];else Y8(D[B].accounts)?.forEach((Y)=>{$[Y]={accounts:D[B].accounts.filter((C)=>C.includes(`${Y}:`)),methods:D[B].methods,events:D[B].events}})}),$}function jF(D,$){return BY(D,!1)&&D<=$.max&&D>=$.min}function QY(){let D=r8();return new Promise(($)=>{switch(D){case _D.browser:$(RO());break;case _D.reactNative:$(SO());break;case _D.node:$(LO());break;default:$(!0)}})}function RO(){return L0()&&navigator?.onLine}async function SO(){if(v8()&&typeof global<"u"&&global!=null&&global.NetInfo)return(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected;return!0}function LO(){return!0}function xF(D){switch(r8()){case _D.browser:jO(D);break;case _D.reactNative:xO(D);break;case _D.node:break}}function jO(D){L0()&&(window.addEventListener("online",()=>D(!0)),window.addEventListener("offline",()=>D(!1)))}function xO(D){v8()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(($)=>D($?.isConnected))}var rB={};class Q8{static get(D){return rB[D]}static set(D,$){rB[D]=$}static delete(D){delete rB[D]}}var a=FD(I0(),1);p0();var nD={};XD(nD,{validateJsonRpcError:()=>hF,payloadId:()=>F8,parseConnectionError:()=>s$,isWsUrl:()=>B$,isValidWildcardRoute:()=>D$,isValidTrailingWildcardRoute:()=>wE,isValidRoute:()=>DE,isValidLeadingWildcardRoute:()=>$E,isValidErrorCode:()=>ZY,isValidDefaultRoute:()=>e8,isServerErrorCode:()=>yF,isReservedErrorCode:()=>s8,isNodeJs:()=>tF,isLocalhostUrl:()=>e$,isJsonRpcValidationInvalid:()=>ZE,isJsonRpcResult:()=>kD,isJsonRpcResponse:()=>X0,isJsonRpcRequest:()=>x0,isJsonRpcPayload:()=>Dw,isJsonRpcError:()=>MD,isHttpUrl:()=>XE,getErrorByCode:()=>t8,getError:()=>a8,getBigIntRpcId:()=>E8,formatJsonRpcResult:()=>j0,formatJsonRpcRequest:()=>sD,formatJsonRpcError:()=>V0,formatErrorMessage:()=>JY,STANDARD_ERROR_MAP:()=>C0,SERVER_ERROR_CODE_RANGE:()=>o8,SERVER_ERROR:()=>l$,RESERVED_ERROR_CODES:()=>o$,PARSE_ERROR:()=>_F,METHOD_NOT_FOUND:()=>uF,INVALID_REQUEST:()=>mF,INVALID_PARAMS:()=>gF,INTERNAL_ERROR:()=>i$,IJsonRpcProvider:()=>w$,IJsonRpcConnection:()=>WY,IEvents:()=>$$,IBaseJsonRpcProvider:()=>t$,DEFAULT_ERROR:()=>Z8});var kF={};XD(kF,{STANDARD_ERROR_MAP:()=>C0,SERVER_ERROR_CODE_RANGE:()=>o8,SERVER_ERROR:()=>l$,RESERVED_ERROR_CODES:()=>o$,PARSE_ERROR:()=>_F,METHOD_NOT_FOUND:()=>uF,INVALID_REQUEST:()=>mF,INVALID_PARAMS:()=>gF,INTERNAL_ERROR:()=>i$,DEFAULT_ERROR:()=>Z8});var _F="PARSE_ERROR",mF="INVALID_REQUEST",uF="METHOD_NOT_FOUND",gF="INVALID_PARAMS",i$="INTERNAL_ERROR",l$="SERVER_ERROR",o$=[-32700,-32600,-32601,-32602,-32603],o8=[-32000,-32099],C0={["PARSE_ERROR"]:{code:-32700,message:"Parse error"},["INVALID_REQUEST"]:{code:-32600,message:"Invalid Request"},["METHOD_NOT_FOUND"]:{code:-32601,message:"Method not found"},["INVALID_PARAMS"]:{code:-32602,message:"Invalid params"},["INTERNAL_ERROR"]:{code:-32603,message:"Internal error"},["SERVER_ERROR"]:{code:-32000,message:"Server error"}},Z8="SERVER_ERROR";var dF={};XD(dF,{validateJsonRpcError:()=>hF,parseConnectionError:()=>s$,isValidErrorCode:()=>ZY,isServerErrorCode:()=>yF,isReservedErrorCode:()=>s8,getErrorByCode:()=>t8,getError:()=>a8});function yF(D){return D<=o8[0]&&D>=o8[1]}function s8(D){return o$.includes(D)}function ZY(D){return typeof D==="number"}function a8(D){if(!Object.keys(C0).includes(D))return C0[Z8];return C0[D]}function t8(D){let $=Object.values(C0).find((B)=>B.code===D);if(!$)return C0[Z8];return $}function hF(D){if(typeof D.error.code==="undefined")return{valid:!1,error:"Missing code for JSON-RPC error"};if(typeof D.error.message==="undefined")return{valid:!1,error:"Missing message for JSON-RPC error"};if(!ZY(D.error.code))return{valid:!1,error:`Invalid error code type for JSON-RPC: ${D.error.code}`};if(s8(D.error.code)){let $=t8(D.error.code);if($.message!==C0[Z8].message&&D.error.message===$.message)return{valid:!1,error:`Invalid error code message for JSON-RPC: ${D.error.code}`}}return{valid:!0}}function s$(D,$,B){return D.message.includes("getaddrinfo ENOTFOUND")||D.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${B} RPC url at ${$}`):D}var LD={};XD(LD,{isNodeJs:()=>tF});var aF=FD(EY(),1);gD(LD,FD(EY(),1));var tF=aF.isNode;gD(nD,LD);var eF={};XD(eF,{payloadId:()=>F8,getBigIntRpcId:()=>E8,formatJsonRpcResult:()=>j0,formatJsonRpcRequest:()=>sD,formatJsonRpcError:()=>V0,formatErrorMessage:()=>JY});function F8(D=3){let $=Date.now()*Math.pow(10,D),B=Math.floor(Math.random()*Math.pow(10,D));return $+B}function E8(D=6){return BigInt(F8(D))}function sD(D,$,B){return{id:B||F8(),jsonrpc:"2.0",method:D,params:$}}function j0(D,$){return{id:D,jsonrpc:"2.0",result:$}}function V0(D,$,B){return{id:D,jsonrpc:"2.0",error:JY($,B)}}function JY(D,$){if(typeof D==="undefined")return a8(i$);if(typeof D==="string")D=Object.assign(Object.assign({},a8(l$)),{message:D});if(typeof $!=="undefined")D.data=$;if(s8(D.code))D=t8(D.code);return D}var BE={};XD(BE,{isValidWildcardRoute:()=>D$,isValidTrailingWildcardRoute:()=>wE,isValidRoute:()=>DE,isValidLeadingWildcardRoute:()=>$E,isValidDefaultRoute:()=>e8});function DE(D){if(D.includes("*"))return D$(D);if(/\W/g.test(D))return!1;return!0}function e8(D){return D==="*"}function D$(D){if(e8(D))return!0;if(!D.includes("*"))return!1;if(D.split("*").length!==2)return!1;if(D.split("*").filter(($)=>$.trim()==="").length!==1)return!1;return!0}function $E(D){return!e8(D)&&D$(D)&&!D.split("*")[0].trim()}function wE(D){return!e8(D)&&D$(D)&&!D.split("*")[1].trim()}var YE={};XD(YE,{IJsonRpcProvider:()=>w$,IJsonRpcConnection:()=>WY,IEvents:()=>$$,IBaseJsonRpcProvider:()=>t$});class $${}class WY extends $${constructor(D){super()}}class t$ extends $${constructor(){super()}}class w$ extends t${constructor(D){super()}}var QE={};XD(QE,{isWsUrl:()=>B$,isLocalhostUrl:()=>e$,isHttpUrl:()=>XE});function hO(D){let $=D.match(new RegExp(/^\w+:/,"gi"));if(!$||!$.length)return;return $[0]}function CE(D,$){let B=hO(D);if(typeof B==="undefined")return!1;return new RegExp($).test(B)}function XE(D){return CE(D,"^https?:")}function B$(D){return CE(D,"^wss?:")}function e$(D){return new RegExp("wss?://localhost(:d{2,5})?").test(D)}var FE={};XD(FE,{isJsonRpcValidationInvalid:()=>ZE,isJsonRpcResult:()=>kD,isJsonRpcResponse:()=>X0,isJsonRpcRequest:()=>x0,isJsonRpcPayload:()=>Dw,isJsonRpcError:()=>MD});function Dw(D){return typeof D==="object"&&"id"in D&&"jsonrpc"in D&&D.jsonrpc==="2.0"}function x0(D){return Dw(D)&&"method"in D}function X0(D){return Dw(D)&&(kD(D)||MD(D))}function kD(D){return"result"in D}function MD(D){return"error"in D}function ZE(D){return"error"in D&&D.valid===!1}class KY extends w${constructor(D){super(D);if(this.events=new xD,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(D),this.connection.connected)this.registerEventListeners()}async connect(D=this.connection){await this.open(D)}async disconnect(){await this.close()}on(D,$){this.events.on(D,$)}once(D,$){this.events.once(D,$)}off(D,$){this.events.off(D,$)}removeListener(D,$){this.events.removeListener(D,$)}async request(D,$){return this.requestStrict(sD(D.method,D.params||[],D.id||E8().toString()),$)}async requestStrict(D,$){return new Promise(async(B,w)=>{if(!this.connection.connected)try{await this.open()}catch(Y){w(Y)}this.events.on(`${D.id}`,(Y)=>{if(MD(Y))w(Y.error);else B(Y.result)});try{await this.connection.send(D,$)}catch(Y){w(Y)}})}setConnection(D=this.connection){return D}onPayload(D){if(this.events.emit("payload",D),X0(D))this.events.emit(`${D.id}`,D);else this.events.emit("message",{type:D.method,data:D.params})}onClose(D){if(D&&D.code===3000)this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${D.code} ${D.reason?`(${D.reason})`:""}`));this.events.emit("disconnect")}async open(D=this.connection){if(this.connection===D&&this.connection.connected)return;if(this.connection.connected)this.close();if(typeof D==="string")await this.connection.open(D),D=this.connection;this.connection=this.setConnection(D),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect")}async close(){await this.connection.close()}registerEventListeners(){if(this.hasRegisteredEventListeners)return;this.connection.on("payload",(D)=>this.onPayload(D)),this.connection.on("close",(D)=>this.onClose(D)),this.connection.on("error",(D)=>this.events.emit("error",D)),this.connection.on("register_error",(D)=>this.onClose()),this.hasRegisteredEventListeners=!0}}p0();var WE=()=>{if(typeof WebSocket!=="undefined")return WebSocket;else if(typeof global!=="undefined"&&typeof global.WebSocket!=="undefined")return global.WebSocket;else if(typeof window!=="undefined"&&typeof window.WebSocket!=="undefined")return window.WebSocket;else if(typeof self!=="undefined"&&typeof self.WebSocket!=="undefined")return self.WebSocket;return JE()},KE=()=>typeof WebSocket!=="undefined"||typeof global!=="undefined"&&typeof global.WebSocket!=="undefined"||typeof window!=="undefined"&&typeof window.WebSocket!=="undefined"||typeof self!=="undefined"&&typeof self.WebSocket!=="undefined";var GY=(D)=>D.split("?")[0];var GE=10,dO=WE();class NE{constructor(D){if(this.url=D,this.events=new xD,this.registering=!1,!B$(D))throw new Error(`Provided URL is not compatible with WebSocket connection: ${D}`);this.url=D}get connected(){return typeof this.socket!=="undefined"}get connecting(){return this.registering}on(D,$){this.events.on(D,$)}once(D,$){this.events.once(D,$)}off(D,$){this.events.off(D,$)}removeListener(D,$){this.events.removeListener(D,$)}async open(D=this.url){await this.register(D)}async close(){return new Promise((D,$)=>{if(typeof this.socket==="undefined"){$(new Error("Connection already closed"));return}this.socket.onclose=(B)=>{this.onClose(B),D()},this.socket.close()})}async send(D,$){if(typeof this.socket==="undefined")this.socket=await this.register();try{this.socket.send(pD(D))}catch(B){this.onError(D.id,B)}}register(D=this.url){if(!B$(D))throw new Error(`Provided URL is not compatible with WebSocket connection: ${D}`);if(this.registering){let $=this.events.getMaxListeners();if(this.events.listenerCount("register_error")>=$||this.events.listenerCount("open")>=$)this.events.setMaxListeners($+1);return new Promise((B,w)=>{this.events.once("register_error",(Y)=>{this.resetMaxListeners(),w(Y)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket==="undefined")return w(new Error("WebSocket connection is missing or invalid"));B(this.socket)})})}return this.url=D,this.registering=!0,new Promise(($,B)=>{let w=!nD.isReactNative()?{rejectUnauthorized:!e$(D)}:void 0,Y=new dO(D,[],w);if(KE())Y.onerror=(C)=>{let X=C;B(this.emitError(X.error))};else Y.on("error",(C)=>{B(this.emitError(C))});Y.onopen=()=>{this.onOpen(Y),$(Y)}})}onOpen(D){D.onmessage=($)=>this.onPayload($),D.onclose=($)=>this.onClose($),this.socket=D,this.registering=!1,this.events.emit("open")}onClose(D){this.socket=void 0,this.registering=!1,this.events.emit("close",D)}onPayload(D){if(typeof D.data==="undefined")return;let $=typeof D.data==="string"?J0(D.data):D.data;this.events.emit("payload",$)}onError(D,$){let B=this.parseError($),w=B.message||B.toString(),Y=V0(D,w);this.events.emit("payload",Y)}parseError(D,$=this.url){return s$(D,GY($),"WS")}resetMaxListeners(){if(this.events.getMaxListeners()>GE)this.events.setMaxListeners(GE)}emitError(D){let $=this.parseError(new Error((D===null||D===void 0?void 0:D.message)||`WebSocket connection failed for host: ${GY(this.url)}`));return this.events.emit("register_error",$),$}}var zE=NE;var VE=zE;var PJ=FD(tE(),1);function VH(D,$){if(D.length>=255)throw new TypeError("Alphabet too long");for(var B=new Uint8Array(256),w=0;w<B.length;w++)B[w]=255;for(var Y=0;Y<D.length;Y++){var C=D.charAt(Y),X=C.charCodeAt(0);if(B[X]!==255)throw new TypeError(C+" is ambiguous");B[X]=Y}var Q=D.length,F=D.charAt(0),Z=Math.log(Q)/Math.log(256),E=Math.log(256)/Math.log(Q);function J(K){if(K instanceof Uint8Array||(ArrayBuffer.isView(K)?K=new Uint8Array(K.buffer,K.byteOffset,K.byteLength):Array.isArray(K)&&(K=Uint8Array.from(K))),!(K instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(K.length===0)return"";for(var V=0,O=0,H=0,f=K.length;H!==f&&K[H]===0;)H++,V++;for(var P=(f-H)*E+1>>>0,A=new Uint8Array(P);H!==f;){for(var T=K[H],R=0,N=P-1;(T!==0||R<O)&&N!==-1;N--,R++)T+=256*A[N]>>>0,A[N]=T%Q>>>0,T=T/Q>>>0;if(T!==0)throw new Error("Non-zero carry");O=R,H++}for(var z=P-O;z!==P&&A[z]===0;)z++;for(var S=F.repeat(V);z<P;++z)S+=D.charAt(A[z]);return S}function G(K){if(typeof K!="string")throw new TypeError("Expected String");if(K.length===0)return new Uint8Array;var V=0;if(K[V]!==" "){for(var O=0,H=0;K[V]===F;)O++,V++;for(var f=(K.length-V)*Z+1>>>0,P=new Uint8Array(f);K[V];){var A=B[K.charCodeAt(V)];if(A===255)return;for(var T=0,R=f-1;(A!==0||T<H)&&R!==-1;R--,T++)A+=Q*P[R]>>>0,P[R]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");H=T,V++}if(K[V]!==" "){for(var N=f-H;N!==f&&P[N]===0;)N++;for(var z=new Uint8Array(O+(f-N)),S=O;N!==f;)z[S++]=P[N++];return z}}}function W(K){var V=G(K);if(V)return V;throw new Error(`Non-${$} character`)}return{encode:J,decodeUnsafe:G,decode:W}}var PH=VH,OH=PH,OJ=(D)=>{if(D instanceof Uint8Array&&D.constructor.name==="Uint8Array")return D;if(D instanceof ArrayBuffer)return new Uint8Array(D);if(ArrayBuffer.isView(D))return new Uint8Array(D.buffer,D.byteOffset,D.byteLength);throw new Error("Unknown type, must be binary type")},AH=(D)=>new TextEncoder().encode(D),HH=(D)=>new TextDecoder().decode(D);class AJ{constructor(D,$,B){this.name=D,this.prefix=$,this.baseEncode=B}encode(D){if(D instanceof Uint8Array)return`${this.prefix}${this.baseEncode(D)}`;throw Error("Unknown type, must be binary type")}}class HJ{constructor(D,$,B){if(this.name=D,this.prefix=$,$.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=$.codePointAt(0),this.baseDecode=B}decode(D){if(typeof D=="string"){if(D.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(D)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(D.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(D){return fJ(this,D)}}class IJ{constructor(D){this.decoders=D}or(D){return fJ(this,D)}decode(D){let $=D[0],B=this.decoders[$];if(B)return B.decode(D);throw RangeError(`Unable to decode multibase string ${JSON.stringify(D)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}var fJ=(D,$)=>new IJ({...D.decoders||{[D.prefix]:D},...$.decoders||{[$.prefix]:$}});class UJ{constructor(D,$,B,w){this.name=D,this.prefix=$,this.baseEncode=B,this.baseDecode=w,this.encoder=new AJ(D,$,B),this.decoder=new HJ(D,$,w)}encode(D){return this.encoder.encode(D)}decode(D){return this.decoder.decode(D)}}var Kw=({name:D,prefix:$,encode:B,decode:w})=>new UJ(D,$,B,w),J$=({prefix:D,name:$,alphabet:B})=>{let{encode:w,decode:Y}=OH(B,$);return Kw({prefix:D,name:$,encode:w,decode:(C)=>OJ(Y(C))})},IH=(D,$,B,w)=>{let Y={};for(let E=0;E<$.length;++E)Y[$[E]]=E;let C=D.length;for(;D[C-1]==="=";)--C;let X=new Uint8Array(C*B/8|0),Q=0,F=0,Z=0;for(let E=0;E<C;++E){let J=Y[D[E]];if(J===void 0)throw new SyntaxError(`Non-${w} character`);F=F<<B|J,Q+=B,Q>=8&&(Q-=8,X[Z++]=255&F>>Q)}if(Q>=B||255&F<<8-Q)throw new SyntaxError("Unexpected end of data");return X},fH=(D,$,B)=>{let w=$[$.length-1]==="=",Y=(1<<B)-1,C="",X=0,Q=0;for(let F=0;F<D.length;++F)for(Q=Q<<8|D[F],X+=8;X>B;)X-=B,C+=$[Y&Q>>X];if(X&&(C+=$[Y&Q<<B-X]),w)for(;C.length*B&7;)C+="=";return C},AD=({name:D,prefix:$,bitsPerChar:B,alphabet:w})=>Kw({prefix:$,name:D,encode(Y){return fH(Y,w,B)},decode(Y){return IH(Y,w,B,D)}}),UH=Kw({prefix:"\x00",name:"identity",encode:(D)=>HH(D),decode:(D)=>AH(D)}),MH=Object.freeze({__proto__:null,identity:UH}),qH=AD({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),TH=Object.freeze({__proto__:null,base2:qH}),RH=AD({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),SH=Object.freeze({__proto__:null,base8:RH}),LH=J$({prefix:"9",name:"base10",alphabet:"0123456789"}),jH=Object.freeze({__proto__:null,base10:LH}),xH=AD({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),_H=AD({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),mH=Object.freeze({__proto__:null,base16:xH,base16upper:_H}),uH=AD({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),gH=AD({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),kH=AD({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),yH=AD({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),hH=AD({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),dH=AD({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),nH=AD({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),pH=AD({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),cH=AD({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),bH=Object.freeze({__proto__:null,base32:uH,base32upper:gH,base32pad:kH,base32padupper:yH,base32hex:hH,base32hexupper:dH,base32hexpad:nH,base32hexpadupper:pH,base32z:cH}),vH=J$({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),rH=J$({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),iH=Object.freeze({__proto__:null,base36:vH,base36upper:rH}),lH=J$({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),oH=J$({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),sH=Object.freeze({__proto__:null,base58btc:lH,base58flickr:oH}),aH=AD({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),tH=AD({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),eH=AD({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),DI=AD({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),$I=Object.freeze({__proto__:null,base64:aH,base64pad:tH,base64url:eH,base64urlpad:DI}),MJ=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),wI=MJ.reduce((D,$,B)=>(D[B]=$,D),[]),BI=MJ.reduce((D,$,B)=>(D[$.codePointAt(0)]=B,D),[]);function YI(D){return D.reduce(($,B)=>($+=wI[B],$),"")}function CI(D){let $=[];for(let B of D){let w=BI[B.codePointAt(0)];if(w===void 0)throw new Error(`Non-base256emoji character: ${B}`);$.push(w)}return new Uint8Array($)}var XI=Kw({prefix:"\uD83D\uDE80",name:"base256emoji",encode:YI,decode:CI}),QI=Object.freeze({__proto__:null,base256emoji:XI}),ZI=qJ,eE=128,FI=127,EI=~FI,JI=Math.pow(2,31);function qJ(D,$,B){$=$||[],B=B||0;for(var w=B;D>=JI;)$[B++]=D&255|eE,D/=128;for(;D&EI;)$[B++]=D&255|eE,D>>>=7;return $[B]=D|0,qJ.bytes=B-w+1,$}var WI=SY,KI=128,DJ=127;function SY(D,w){var B=0,w=w||0,Y=0,C=w,X,Q=D.length;do{if(C>=Q)throw SY.bytes=0,new RangeError("Could not decode varint");X=D[C++],B+=Y<28?(X&DJ)<<Y:(X&DJ)*Math.pow(2,Y),Y+=7}while(X>=KI);return SY.bytes=C-w,B}var GI=Math.pow(2,7),NI=Math.pow(2,14),zI=Math.pow(2,21),VI=Math.pow(2,28),PI=Math.pow(2,35),OI=Math.pow(2,42),AI=Math.pow(2,49),HI=Math.pow(2,56),II=Math.pow(2,63),fI=function(D){return D<GI?1:D<NI?2:D<zI?3:D<VI?4:D<PI?5:D<OI?6:D<AI?7:D<HI?8:D<II?9:10},UI={encode:ZI,decode:WI,encodingLength:fI},TJ=UI,$J=(D,$,B=0)=>(TJ.encode(D,$,B),$),wJ=(D)=>TJ.encodingLength(D),LY=(D,$)=>{let B=$.byteLength,w=wJ(D),Y=w+wJ(B),C=new Uint8Array(Y+B);return $J(D,C,0),$J(B,C,w),C.set($,Y),new RJ(D,B,$,C)};class RJ{constructor(D,$,B,w){this.code=D,this.size=$,this.digest=B,this.bytes=w}}var SJ=({name:D,code:$,encode:B})=>new LJ(D,$,B);class LJ{constructor(D,$,B){this.name=D,this.code=$,this.encode=B}digest(D){if(D instanceof Uint8Array){let $=this.encode(D);return $ instanceof Uint8Array?LY(this.code,$):$.then((B)=>LY(this.code,B))}else throw Error("Unknown type, must be binary type")}}var jJ=(D)=>async($)=>new Uint8Array(await crypto.subtle.digest(D,$)),MI=SJ({name:"sha2-256",code:18,encode:jJ("SHA-256")}),qI=SJ({name:"sha2-512",code:19,encode:jJ("SHA-512")}),TI=Object.freeze({__proto__:null,sha256:MI,sha512:qI}),xJ=0,RI="identity",_J=OJ,SI=(D)=>LY(xJ,_J(D)),LI={code:xJ,name:RI,encode:_J,digest:SI},jI=Object.freeze({__proto__:null,identity:LI});var BJ={...MH,...TH,...SH,...jH,...mH,...bH,...iH,...sH,...$I,...QI};({...TI,...jI});function mJ(D){return globalThis.Buffer!=null?new Uint8Array(D.buffer,D.byteOffset,D.byteLength):D}function xI(D=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?mJ(globalThis.Buffer.allocUnsafe(D)):new Uint8Array(D)}function uJ(D,$,B,w){return{name:D,prefix:$,encoder:{name:D,prefix:$,encode:B},decoder:{decode:w}}}var YJ=uJ("utf8","u",(D)=>"u"+new TextDecoder("utf8").decode(D),(D)=>new TextEncoder().encode(D.substring(1))),qY=uJ("ascii","a",(D)=>{let $="a";for(let B=0;B<D.length;B++)$+=String.fromCharCode(D[B]);return $},(D)=>{D=D.substring(1);let $=xI(D.length);for(let B=0;B<D.length;B++)$[B]=D.charCodeAt(B);return $}),_I={utf8:YJ,"utf-8":YJ,hex:BJ.base16,latin1:qY,ascii:qY,binary:qY,...BJ};function mI(D,$="utf8"){let B=_I[$];if(!B)throw new Error(`Unsupported encoding "${$}"`);return($==="utf8"||$==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?mJ(globalThis.Buffer.from(D,"utf-8")):B.decoder.decode(`${B.prefix}${D}`)}var gJ="wc",uI=2,jY="core",A0=`${gJ}@2:${jY}:`,gI={name:jY,logger:"error"},kI={database:":memory:"},yI="crypto",CJ="client_ed25519_seed",hI=a.ONE_DAY,dI="keychain",nI="0.3",pI="messages",cI="0.3",bI=a.SIX_HOURS,vI="publisher",xY="irn",rI="error",kJ="wss://relay.walletconnect.com",XJ="wss://relay.walletconnect.org",iI="relayer",OD={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},lI="_subscription",F0={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},oI=a.ONE_SECOND;var sI="2.10.0",aI=1e4,tI="0.3",eI="WALLETCONNECT_CLIENT_ID",eD={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"};var D1="subscription",$1="0.3",w1=a.FIVE_SECONDS*1000,B1="pairing",Y1="0.3";var Z$={wc_pairingDelete:{req:{ttl:a.ONE_DAY,prompt:!1,tag:1000},res:{ttl:a.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:a.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:a.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:a.ONE_DAY,prompt:!1,tag:0},res:{ttl:a.ONE_DAY,prompt:!1,tag:0}}},tD={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},C1="history",X1="0.3",Q1="expirer",yD={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Z1="0.3";var TY="verify-api",E$="https://verify.walletconnect.com",QJ="https://verify.walletconnect.org";class yJ{constructor(D,$){this.core=D,this.logger=$,this.keychain=new Map,this.name=dI,this.version=nI,this.initialized=!1,this.storagePrefix=A0,this.init=async()=>{if(!this.initialized){let B=await this.getKeyChain();typeof B<"u"&&(this.keychain=B),this.initialized=!0}},this.has=(B)=>(this.isInitialized(),this.keychain.has(B)),this.set=async(B,w)=>{this.isInitialized(),this.keychain.set(B,w),await this.persist()},this.get=(B)=>{this.isInitialized();let w=this.keychain.get(B);if(typeof w>"u"){let{message:Y}=L("NO_MATCHING_KEY",`${this.name}: ${B}`);throw new Error(Y)}return w},this.del=async(B)=>{this.isInitialized(),this.keychain.delete(B),await this.persist()},this.core=D,this.logger=SD($,this.name)}get context(){return HD(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(D){await this.core.storage.setItem(this.storageKey,$Y(D))}async getKeyChain(){let D=await this.core.storage.getItem(this.storageKey);return typeof D<"u"?wY(D):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:D}=L("NOT_INITIALIZED",this.name);throw new Error(D)}}}class hJ{constructor(D,$,B){this.core=D,this.logger=$,this.name=yI,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=(w)=>(this.isInitialized(),this.keychain.has(w)),this.getClientId=async()=>{this.isInitialized();let w=await this.getClientSeed(),Y=kB(w);return L$(Y.publicKey)},this.generateKeyPair=()=>{this.isInitialized();let w=$F();return this.setPrivateKey(w.publicKey,w.privateKey)},this.signJWT=async(w)=>{this.isInitialized();let Y=await this.getClientSeed(),C=kB(Y),X=c$();return await mQ(X,w,hI,C)},this.generateSharedKey=(w,Y,C)=>{this.isInitialized();let X=this.getPrivateKey(w),Q=wF(X,Y);return this.setSymKey(Q,C)},this.setSymKey=async(w,Y)=>{this.isInitialized();let C=Y||BF(w);return await this.keychain.set(C,w),C},this.deleteKeyPair=async(w)=>{this.isInitialized(),await this.keychain.del(w)},this.deleteSymKey=async(w)=>{this.isInitialized(),await this.keychain.del(w)},this.encode=async(w,Y,C)=>{this.isInitialized();let X=eB(C),Q=pD(Y);if(DY(X)){let{senderPublicKey:J,receiverPublicKey:G}=X;w=await this.generateSharedKey(J,G)}let F=this.getSymKey(w),{type:Z,senderPublicKey:E}=X;return YF({type:Z,symKey:F,message:Q,senderPublicKey:E})},this.decode=async(w,Y,C)=>{this.isInitialized();let X=XF(Y,C);if(DY(X)){let{receiverPublicKey:Q,senderPublicKey:F}=X;w=await this.generateSharedKey(Q,F)}try{let Q=this.getSymKey(w),F=CF({symKey:Q,encoded:Y});return J0(F)}catch(Q){this.logger.error(`Failed to decode message from topic: '${w}', clientId: '${await this.getClientId()}'`),this.logger.error(Q)}},this.getPayloadType=(w)=>{let Y=b8(w);return w8(Y.type)},this.getPayloadSenderPublicKey=(w)=>{let Y=b8(w);return Y.senderPublicKey?GD(Y.senderPublicKey,fD):void 0},this.core=D,this.logger=SD($,this.name),this.keychain=B||new yJ(this.core,this.logger)}get context(){return HD(this.logger)}async setPrivateKey(D,$){return await this.keychain.set(D,$),D}getPrivateKey(D){return this.keychain.get(D)}async getClientSeed(){let D="";try{D=this.keychain.get(CJ)}catch{D=c$(),await this.keychain.set(CJ,D)}return mI(D,"base16")}getSymKey(D){return this.keychain.get(D)}isInitialized(){if(!this.initialized){let{message:D}=L("NOT_INITIALIZED",this.name);throw new Error(D)}}}class dJ extends vw{constructor(D,$){super(D,$),this.logger=D,this.core=$,this.messages=new Map,this.name=pI,this.version=cI,this.initialized=!1,this.storagePrefix=A0,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let B=await this.getRelayerMessages();typeof B<"u"&&(this.messages=B),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(B){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(B)}finally{this.initialized=!0}}},this.set=async(B,w)=>{this.isInitialized();let Y=N0(w),C=this.messages.get(B);return typeof C>"u"&&(C={}),typeof C[Y]<"u"||(C[Y]=w,this.messages.set(B,C),await this.persist()),Y},this.get=(B)=>{this.isInitialized();let w=this.messages.get(B);return typeof w>"u"&&(w={}),w},this.has=(B,w)=>{this.isInitialized();let Y=this.get(B),C=N0(w);return typeof Y[C]<"u"},this.del=async(B)=>{this.isInitialized(),this.messages.delete(B),await this.persist()},this.logger=SD(D,this.name),this.core=$}get context(){return HD(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(D){await this.core.storage.setItem(this.storageKey,$Y(D))}async getRelayerMessages(){let D=await this.core.storage.getItem(this.storageKey);return typeof D<"u"?wY(D):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){let{message:D}=L("NOT_INITIALIZED",this.name);throw new Error(D)}}}class nJ extends rw{constructor(D,$){super(D,$),this.relayer=D,this.logger=$,this.events=new xD,this.name=vI,this.queue=new Map,this.publishTimeout=a.toMiliseconds(a.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(B,w,Y)=>{var C;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:B,message:w,opts:Y}});try{let X=Y?.ttl||bI,Q=r$(Y),F=Y?.prompt||!1,Z=Y?.tag||0,E=Y?.id||E8().toString(),J={topic:B,message:w,opts:{ttl:X,relay:Q,prompt:F,tag:Z,id:E}},G=setTimeout(()=>this.queue.set(E,J),this.publishTimeout);try{await await B8(this.rpcPublish(B,w,X,Q,F,Z,E),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(E),this.relayer.events.emit(OD.publish,J)}catch(W){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(C=Y?.internal)!=null&&C.throwOnFailedPublish)throw this.removeRequestFromQueue(E),W;return}finally{clearTimeout(G)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:B,message:w,opts:Y}})}catch(X){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(X),X}},this.on=(B,w)=>{this.events.on(B,w)},this.once=(B,w)=>{this.events.once(B,w)},this.off=(B,w)=>{this.events.off(B,w)},this.removeListener=(B,w)=>{this.events.removeListener(B,w)},this.relayer=D,this.logger=SD($,this.name),this.registerEventListeners()}get context(){return HD(this.logger)}rpcPublish(D,$,B,w,Y,C,X){var Q,F,Z,E;let J={method:i8(w.protocol).publish,params:{topic:D,message:$,ttl:B,prompt:Y,tag:C},id:X};return PD((Q=J.params)==null?void 0:Q.prompt)&&((F=J.params)==null||delete F.prompt),PD((Z=J.params)==null?void 0:Z.tag)&&((E=J.params)==null||delete E.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:J}),this.relayer.request(J)}removeRequestFromQueue(D){this.queue.delete(D)}checkQueue(){this.queue.forEach(async(D)=>{let{topic:$,message:B,opts:w}=D;await this.publish($,B,w)})}registerEventListeners(){this.relayer.core.heartbeat.on(k0.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(OD.connection_stalled);return}this.checkQueue()}),this.relayer.on(OD.message_ack,(D)=>{this.removeRequestFromQueue(D.id.toString())})}}class pJ{constructor(){this.map=new Map,this.set=(D,$)=>{let B=this.get(D);this.exists(D,$)||this.map.set(D,[...B,$])},this.get=(D)=>this.map.get(D)||[],this.exists=(D,$)=>this.get(D).includes($),this.delete=(D,$)=>{if(typeof $>"u"){this.map.delete(D);return}if(!this.map.has(D))return;let B=this.get(D);if(!this.exists(D,$))return;let w=B.filter((Y)=>Y!==$);if(!w.length){this.map.delete(D);return}this.map.set(D,w)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var{defineProperty:F1,defineProperties:E1,getOwnPropertyDescriptors:J1,getOwnPropertySymbols:ZJ}=Object,W1=Object.prototype.hasOwnProperty,K1=Object.prototype.propertyIsEnumerable,FJ=(D,$,B)=>($ in D)?F1(D,$,{enumerable:!0,configurable:!0,writable:!0,value:B}):D[$]=B,F$=(D,$)=>{for(var B in $||($={}))W1.call($,B)&&FJ(D,B,$[B]);if(ZJ)for(var B of ZJ($))K1.call($,B)&&FJ(D,B,$[B]);return D},RY=(D,$)=>E1(D,J1($));class cJ extends ow{constructor(D,$){super(D,$),this.relayer=D,this.logger=$,this.subscriptions=new Map,this.topicMap=new pJ,this.events=new xD,this.name=D1,this.version=$1,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=A0,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(B,w)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:B,opts:w}});try{let Y=r$(w),C={topic:B,relay:Y};this.pending.set(B,C);let X=await this.rpcSubscribe(B,Y);return this.onSubscribe(X,C),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:B,opts:w}}),X}catch(Y){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(Y),Y}},this.unsubscribe=async(B,w)=>{await this.restartToComplete(),this.isInitialized(),typeof w?.id<"u"?await this.unsubscribeById(B,w.id,w):await this.unsubscribeByTopic(B,w)},this.isSubscribed=async(B)=>this.topics.includes(B)?!0:await new Promise((w,Y)=>{let C=new a.Watch;C.start(this.pendingSubscriptionWatchLabel);let X=setInterval(()=>{!this.pending.has(B)&&this.topics.includes(B)&&(clearInterval(X),C.stop(this.pendingSubscriptionWatchLabel),w(!0)),C.elapsed(this.pendingSubscriptionWatchLabel)>=w1&&(clearInterval(X),C.stop(this.pendingSubscriptionWatchLabel),Y(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(B,w)=>{this.events.on(B,w)},this.once=(B,w)=>{this.events.once(B,w)},this.off=(B,w)=>{this.events.off(B,w)},this.removeListener=(B,w)=>{this.events.removeListener(B,w)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=D,this.logger=SD($,this.name),this.clientId=""}get context(){return HD(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(D,$){let B=!1;try{B=this.getSubscription(D).topic===$}catch{}return B}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(D,$){let B=this.topicMap.get(D);await Promise.all(B.map(async(w)=>await this.unsubscribeById(D,w,$)))}async unsubscribeById(D,$,B){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:D,id:$,opts:B}});try{let w=r$(B);await this.rpcUnsubscribe(D,$,w);let Y=JD("USER_DISCONNECTED",`${this.name}, ${D}`);await this.onUnsubscribe(D,$,Y),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:D,id:$,opts:B}})}catch(w){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(w),w}}async rpcSubscribe(D,$){let B={method:i8($.protocol).subscribe,params:{topic:D}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:B});try{await await B8(this.relayer.request(B),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(OD.connection_stalled)}return N0(D+this.clientId)}async rpcBatchSubscribe(D){if(!D.length)return;let $=D[0].relay,B={method:i8($.protocol).batchSubscribe,params:{topics:D.map((w)=>w.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:B});try{return await await B8(this.relayer.request(B),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(OD.connection_stalled)}}rpcUnsubscribe(D,$,B){let w={method:i8(B.protocol).unsubscribe,params:{topic:D,id:$}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:w}),this.relayer.request(w)}onSubscribe(D,$){this.setSubscription(D,RY(F$({},$),{id:D})),this.pending.delete($.topic)}onBatchSubscribe(D){D.length&&D.forEach(($)=>{this.setSubscription($.id,F$({},$)),this.pending.delete($.topic)})}async onUnsubscribe(D,$,B){this.events.removeAllListeners($),this.hasSubscription($,D)&&this.deleteSubscription($,B),await this.relayer.messages.del(D)}async setRelayerSubscriptions(D){await this.relayer.core.storage.setItem(this.storageKey,D)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(D,$){this.subscriptions.has(D)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:D,subscription:$}),this.addSubscription(D,$))}addSubscription(D,$){this.subscriptions.set(D,F$({},$)),this.topicMap.set($.topic,D),this.events.emit(eD.created,$)}getSubscription(D){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:D});let $=this.subscriptions.get(D);if(!$){let{message:B}=L("NO_MATCHING_KEY",`${this.name}: ${D}`);throw new Error(B)}return $}deleteSubscription(D,$){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:D,reason:$});let B=this.getSubscription(D);this.subscriptions.delete(D),this.topicMap.delete(B.topic,D),this.events.emit(eD.deleted,RY(F$({},B),{reason:$}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(eD.sync)}async reset(){if(this.cached.length){let D=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let $=0;$<D;$++){let B=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(B)}}this.events.emit(eD.resubscribed)}async restore(){try{let D=await this.getRelayerSubscriptions();if(typeof D>"u"||!D.length)return;if(this.subscriptions.size){let{message:$}=L("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error($),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error($)}this.cached=D,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(D){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(D)}}async batchSubscribe(D){if(!D.length)return;let $=await this.rpcBatchSubscribe(D);C8($)&&this.onBatchSubscribe($.map((B,w)=>RY(F$({},D[w]),{id:B})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;let D=[];this.pending.forEach(($)=>{D.push($)}),await this.batchSubscribe(D)}registerEventListeners(){this.relayer.core.heartbeat.on(k0.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(OD.connect,async()=>{await this.onConnect()}),this.relayer.on(OD.disconnect,()=>{this.onDisconnect()}),this.events.on(eD.created,async(D)=>{let $=eD.created;this.logger.info(`Emitting ${$}`),this.logger.debug({type:"event",event:$,data:D}),await this.persist()}),this.events.on(eD.deleted,async(D)=>{let $=eD.deleted;this.logger.info(`Emitting ${$}`),this.logger.debug({type:"event",event:$,data:D}),await this.persist()})}isInitialized(){if(!this.initialized){let{message:D}=L("NOT_INITIALIZED",this.name);throw new Error(D)}}async restartToComplete(){this.restartInProgress&&await new Promise((D)=>{let $=setInterval(()=>{this.restartInProgress||(clearInterval($),D())},this.pollingInterval)})}}var{defineProperty:G1,getOwnPropertySymbols:EJ}=Object,N1=Object.prototype.hasOwnProperty,z1=Object.prototype.propertyIsEnumerable,JJ=(D,$,B)=>($ in D)?G1(D,$,{enumerable:!0,configurable:!0,writable:!0,value:B}):D[$]=B,V1=(D,$)=>{for(var B in $||($={}))N1.call($,B)&&JJ(D,B,$[B]);if(EJ)for(var B of EJ($))z1.call($,B)&&JJ(D,B,$[B]);return D};class bJ extends iw{constructor(D){super(D),this.protocol="wc",this.version=2,this.events=new xD,this.name=iI,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async($)=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request($)}catch(B){throw this.logger.debug("Failed to Publish Request"),this.logger.error(B),B}},this.onPayloadHandler=($)=>{this.onProviderPayload($)},this.onConnectHandler=()=>{this.events.emit(OD.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=($)=>{this.logger.error($),this.events.emit(OD.error,$)},this.registerProviderListeners=()=>{this.provider.on(F0.payload,this.onPayloadHandler),this.provider.on(F0.connect,this.onConnectHandler),this.provider.on(F0.disconnect,this.onDisconnectHandler),this.provider.on(F0.error,this.onProviderErrorHandler)},this.core=D.core,this.logger=typeof D.logger<"u"&&typeof D.logger!="string"?SD(D.logger,this.name):v0.default(T8({level:D.logger||rI})),this.messages=new dJ(this.logger,D.core),this.subscriber=new cJ(this,this.logger),this.publisher=new nJ(this,this.logger),this.relayUrl=D?.relayUrl||kJ,this.projectId=D.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${XJ}...`),await this.restartTransport(XJ)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},aI)}get context(){return HD(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(D,$,B){this.isInitialized(),await this.publisher.publish(D,$,B),await this.recordMessageEvent({topic:D,message:$,publishedAt:Date.now()})}async subscribe(D,$){var B;this.isInitialized();let w=((B=this.subscriber.topicMap.get(D))==null?void 0:B[0])||"";return w||(await Promise.all([new Promise((Y)=>{this.subscriber.once(eD.created,(C)=>{C.topic===D&&Y()})}),new Promise(async(Y)=>{w=await this.subscriber.subscribe(D,$),Y()})]),w)}async unsubscribe(D,$){this.isInitialized(),await this.subscriber.unsubscribe(D,$)}on(D,$){this.events.on(D,$)}once(D,$){this.events.once(D,$)}off(D,$){this.events.off(D,$)}removeListener(D,$){this.events.removeListener(D,$)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await B8(this.provider.disconnect(),1000,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(D){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){D&&D!==this.relayUrl&&(this.relayUrl=D,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(($)=>{if(!this.initialized)return $();this.subscriber.once(eD.resubscribed,()=>{$()})}),new Promise(async($,B)=>{try{await B8(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(w){B(w);return}$()})])}catch($){this.logger.error($);let B=$;if(!this.isConnectionStalled(B.message))throw $;this.provider.events.emit(F0.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(D){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=D||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await QY())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(D){return this.staleConnectionErrors.some(($)=>D.includes($))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let D=await this.core.crypto.signJWT(this.relayUrl);this.provider=new KY(new VE(ZF({sdkVersion:sI,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:D,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(D){let{topic:$,message:B}=D;await this.messages.set($,B)}async shouldIgnoreMessageEvent(D){let{topic:$,message:B}=D;if(!B||B.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${B}`),!0;if(!await this.subscriber.isSubscribed($))return this.logger.debug(`Ignoring message for non-subscribed topic ${$}`),!0;let w=this.messages.has($,B);return w&&this.logger.debug(`Ignoring duplicate message: ${B}`),w}async onProviderPayload(D){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:D}),x0(D)){if(!D.method.endsWith(lI))return;let $=D.params,{topic:B,message:w,publishedAt:Y}=$.data,C={topic:B,message:w,publishedAt:Y};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(V1({type:"event",event:$.id},C)),this.events.emit($.id,C),await this.acknowledgePayload(D),await this.onMessageEvent(C)}else X0(D)&&this.events.emit(OD.message_ack,D)}async onMessageEvent(D){await this.shouldIgnoreMessageEvent(D)||(this.events.emit(OD.message,D),await this.recordMessageEvent(D))}async acknowledgePayload(D){let $=j0(D.id,!0);await this.provider.connection.send($)}unregisterProviderListeners(){this.provider.off(F0.payload,this.onPayloadHandler),this.provider.off(F0.connect,this.onConnectHandler),this.provider.off(F0.disconnect,this.onDisconnectHandler),this.provider.off(F0.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(OD.connection_stalled,()=>{this.restartTransport().catch(($)=>this.logger.error($))});let D=await QY();xF(async($)=>{this.initialized&&D!==$&&(D=$,$?await this.restartTransport().catch((B)=>this.logger.error(B)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch((B)=>this.logger.error(B))))})}onProviderDisconnect(){this.events.emit(OD.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch((D)=>this.logger.error(D))},a.toMiliseconds(oI)))}isInitialized(){if(!this.initialized){let{message:D}=L("NOT_INITIALIZED",this.name);throw new Error(D)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise((D)=>{let $=setInterval(()=>{this.connected&&(clearInterval($),D())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var{defineProperty:P1,getOwnPropertySymbols:WJ}=Object,O1=Object.prototype.hasOwnProperty,A1=Object.prototype.propertyIsEnumerable,KJ=(D,$,B)=>($ in D)?P1(D,$,{enumerable:!0,configurable:!0,writable:!0,value:B}):D[$]=B,GJ=(D,$)=>{for(var B in $||($={}))O1.call($,B)&&KJ(D,B,$[B]);if(WJ)for(var B of WJ($))A1.call($,B)&&KJ(D,B,$[B]);return D};class G8 extends lw{constructor(D,$,B,w=A0,Y=void 0){super(D,$,B,w),this.core=D,this.logger=$,this.name=B,this.map=new Map,this.version=tI,this.cached=[],this.initialized=!1,this.storagePrefix=A0,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((C)=>{this.getKey&&C!==null&&!PD(C)?this.map.set(this.getKey(C),C):PF(C)?this.map.set(C.id,C):OF(C)&&this.map.set(C.topic,C)}),this.cached=[],this.initialized=!0)},this.set=async(C,X)=>{this.isInitialized(),this.map.has(C)?await this.update(C,X):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:C,value:X}),this.map.set(C,X),await this.persist())},this.get=(C)=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:C}),this.getData(C)),this.getAll=(C)=>(this.isInitialized(),C?this.values.filter((X)=>Object.keys(C).every((Q)=>PJ.default(X[Q],C[Q]))):this.values),this.update=async(C,X)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:C,update:X});let Q=GJ(GJ({},this.getData(C)),X);this.map.set(C,Q),await this.persist()},this.delete=async(C,X)=>{this.isInitialized(),this.map.has(C)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:C,reason:X}),this.map.delete(C),await this.persist())},this.logger=SD($,this.name),this.storagePrefix=w,this.getKey=Y}get context(){return HD(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(D){await this.core.storage.setItem(this.storageKey,D)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(D){let $=this.map.get(D);if(!$){let{message:B}=L("NO_MATCHING_KEY",`${this.name}: ${D}`);throw this.logger.error(B),new Error(B)}return $}async persist(){await this.setDataStore(this.values)}async restore(){try{let D=await this.getDataStore();if(typeof D>"u"||!D.length)return;if(this.map.size){let{message:$}=L("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error($),new Error($)}this.cached=D,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(D){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(D)}}isInitialized(){if(!this.initialized){let{message:D}=L("NOT_INITIALIZED",this.name);throw new Error(D)}}}class vJ{constructor(D,$){this.core=D,this.logger=$,this.name=B1,this.version=Y1,this.events=new R8,this.initialized=!1,this.storagePrefix=A0,this.ignoredPayloadTypes=[Y0],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:B})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...B])]},this.create=async()=>{this.isInitialized();let B=c$(),w=await this.core.crypto.setSymKey(B),Y=uD(a.FIVE_MINUTES),C={protocol:xY},X={topic:w,expiry:Y,relay:C,active:!1},Q=GF({protocol:this.core.protocol,version:this.core.version,topic:w,symKey:B,relay:C});return await this.pairings.set(w,X),await this.core.relayer.subscribe(w),this.core.expirer.set(w,Y),{topic:w,uri:Q}},this.pair=async(B)=>{this.isInitialized(),this.isValidPair(B);let{topic:w,symKey:Y,relay:C}=KF(B.uri);if(this.pairings.keys.includes(w))throw new Error(`Pairing already exists: ${w}`);if(this.core.crypto.hasKeys(w))throw new Error(`Keychain already exists: ${w}`);let X=uD(a.FIVE_MINUTES),Q={topic:w,relay:C,expiry:X,active:!1};return await this.pairings.set(w,Q),await this.core.crypto.setSymKey(Y,w),await this.core.relayer.subscribe(w,{relay:C}),this.core.expirer.set(w,X),B.activatePairing&&await this.activate({topic:w}),Q},this.activate=async({topic:B})=>{this.isInitialized();let w=uD(a.THIRTY_DAYS);await this.pairings.update(B,{active:!0,expiry:w}),this.core.expirer.set(B,w)},this.ping=async(B)=>{this.isInitialized(),await this.isValidPing(B);let{topic:w}=B;if(this.pairings.keys.includes(w)){let Y=await this.sendRequest(w,"wc_pairingPing",{}),{done:C,resolve:X,reject:Q}=z0();this.events.once(ZD("pairing_ping",Y),({error:F})=>{F?Q(F):X()}),await C()}},this.updateExpiry=async({topic:B,expiry:w})=>{this.isInitialized(),await this.pairings.update(B,{expiry:w})},this.updateMetadata=async({topic:B,metadata:w})=>{this.isInitialized(),await this.pairings.update(B,{peerMetadata:w})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async(B)=>{this.isInitialized(),await this.isValidDisconnect(B);let{topic:w}=B;this.pairings.keys.includes(w)&&(await this.sendRequest(w,"wc_pairingDelete",JD("USER_DISCONNECTED")),await this.deletePairing(w))},this.sendRequest=async(B,w,Y)=>{let C=sD(w,Y),X=await this.core.crypto.encode(B,C),Q=Z$[w].req;return this.core.history.set(B,C),this.core.relayer.publish(B,X,Q),C.id},this.sendResult=async(B,w,Y)=>{let C=j0(B,Y),X=await this.core.crypto.encode(w,C),Q=await this.core.history.get(w,B),F=Z$[Q.request.method].res;await this.core.relayer.publish(w,X,F),await this.core.history.resolve(C)},this.sendError=async(B,w,Y)=>{let C=V0(B,Y),X=await this.core.crypto.encode(w,C),Q=await this.core.history.get(w,B),F=Z$[Q.request.method]?Z$[Q.request.method].res:Z$.unregistered_method.res;await this.core.relayer.publish(w,X,F),await this.core.history.resolve(C)},this.deletePairing=async(B,w)=>{await this.core.relayer.unsubscribe(B),await Promise.all([this.pairings.delete(B,JD("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(B),w?Promise.resolve():this.core.expirer.del(B)])},this.cleanup=async()=>{let B=this.pairings.getAll().filter((w)=>oD(w.expiry));await Promise.all(B.map((w)=>this.deletePairing(w.topic)))},this.onRelayEventRequest=(B)=>{let{topic:w,payload:Y}=B;switch(Y.method){case"wc_pairingPing":return this.onPairingPingRequest(w,Y);case"wc_pairingDelete":return this.onPairingDeleteRequest(w,Y);default:return this.onUnknownRpcMethodRequest(w,Y)}},this.onRelayEventResponse=async(B)=>{let{topic:w,payload:Y}=B,C=(await this.core.history.get(w,Y.id)).request.method;switch(C){case"wc_pairingPing":return this.onPairingPingResponse(w,Y);default:return this.onUnknownRpcMethodResponse(C)}},this.onPairingPingRequest=async(B,w)=>{let{id:Y}=w;try{this.isValidPing({topic:B}),await this.sendResult(Y,B,!0),this.events.emit("pairing_ping",{id:Y,topic:B})}catch(C){await this.sendError(Y,B,C),this.logger.error(C)}},this.onPairingPingResponse=(B,w)=>{let{id:Y}=w;setTimeout(()=>{kD(w)?this.events.emit(ZD("pairing_ping",Y),{}):MD(w)&&this.events.emit(ZD("pairing_ping",Y),{error:w.error})},500)},this.onPairingDeleteRequest=async(B,w)=>{let{id:Y}=w;try{this.isValidDisconnect({topic:B}),await this.deletePairing(B),this.events.emit("pairing_delete",{id:Y,topic:B})}catch(C){await this.sendError(Y,B,C),this.logger.error(C)}},this.onUnknownRpcMethodRequest=async(B,w)=>{let{id:Y,method:C}=w;try{if(this.registeredMethods.includes(C))return;let X=JD("WC_METHOD_UNSUPPORTED",C);await this.sendError(Y,B,X),this.logger.error(X)}catch(X){await this.sendError(Y,B,X),this.logger.error(X)}},this.onUnknownRpcMethodResponse=(B)=>{this.registeredMethods.includes(B)||this.logger.error(JD("WC_METHOD_UNSUPPORTED",B))},this.isValidPair=(B)=>{if(!UD(B)){let{message:w}=L("MISSING_OR_INVALID",`pair() params: ${B}`);throw new Error(w)}if(!VF(B.uri)){let{message:w}=L("MISSING_OR_INVALID",`pair() uri: ${B.uri}`);throw new Error(w)}},this.isValidPing=async(B)=>{if(!UD(B)){let{message:Y}=L("MISSING_OR_INVALID",`ping() params: ${B}`);throw new Error(Y)}let{topic:w}=B;await this.isValidPairingTopic(w)},this.isValidDisconnect=async(B)=>{if(!UD(B)){let{message:Y}=L("MISSING_OR_INVALID",`disconnect() params: ${B}`);throw new Error(Y)}let{topic:w}=B;await this.isValidPairingTopic(w)},this.isValidPairingTopic=async(B)=>{if(!WD(B,!1)){let{message:w}=L("MISSING_OR_INVALID",`pairing topic should be a string: ${B}`);throw new Error(w)}if(!this.pairings.keys.includes(B)){let{message:w}=L("NO_MATCHING_KEY",`pairing topic doesn't exist: ${B}`);throw new Error(w)}if(oD(this.pairings.get(B).expiry)){await this.deletePairing(B);let{message:w}=L("EXPIRED",`pairing topic: ${B}`);throw new Error(w)}},this.core=D,this.logger=SD($,this.name),this.pairings=new G8(this.core,this.logger,this.name,this.storagePrefix)}get context(){return HD(this.logger)}isInitialized(){if(!this.initialized){let{message:D}=L("NOT_INITIALIZED",this.name);throw new Error(D)}}registerRelayerEvents(){this.core.relayer.on(OD.message,async(D)=>{let{topic:$,message:B}=D;if(!this.pairings.keys.includes($)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(B)))return;let w=await this.core.crypto.decode($,B);try{x0(w)?(this.core.history.set($,w),this.onRelayEventRequest({topic:$,payload:w})):X0(w)&&(await this.core.history.resolve(w),await this.onRelayEventResponse({topic:$,payload:w}),this.core.history.delete($,w.id))}catch(Y){this.logger.error(Y)}})}registerExpirerEvents(){this.core.expirer.on(yD.expired,async(D)=>{let{topic:$}=v$(D.target);$&&this.pairings.keys.includes($)&&(await this.deletePairing($,!0),this.events.emit("pairing_expire",{topic:$}))})}}class rJ extends bw{constructor(D,$){super(D,$),this.core=D,this.logger=$,this.records=new Map,this.events=new xD,this.name=C1,this.version=X1,this.cached=[],this.initialized=!1,this.storagePrefix=A0,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((B)=>this.records.set(B.id,B)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(B,w,Y)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:B,request:w,chainId:Y}),this.records.has(w.id))return;let C={id:w.id,topic:B,request:{method:w.method,params:w.params||null},chainId:Y,expiry:uD(a.THIRTY_DAYS)};this.records.set(C.id,C),this.events.emit(tD.created,C)},this.resolve=async(B)=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:B}),!this.records.has(B.id))return;let w=await this.getRecord(B.id);typeof w.response>"u"&&(w.response=MD(B)?{error:B.error}:{result:B.result},this.records.set(w.id,w),this.events.emit(tD.updated,w))},this.get=async(B,w)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:B,id:w}),await this.getRecord(w)),this.delete=(B,w)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:w}),this.values.forEach((Y)=>{if(Y.topic===B){if(typeof w<"u"&&Y.id!==w)return;this.records.delete(Y.id),this.events.emit(tD.deleted,Y)}})},this.exists=async(B,w)=>(this.isInitialized(),this.records.has(w)?(await this.getRecord(w)).topic===B:!1),this.on=(B,w)=>{this.events.on(B,w)},this.once=(B,w)=>{this.events.once(B,w)},this.off=(B,w)=>{this.events.off(B,w)},this.removeListener=(B,w)=>{this.events.removeListener(B,w)},this.logger=SD($,this.name)}get context(){return HD(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let D=[];return this.values.forEach(($)=>{if(typeof $.response<"u")return;let B={topic:$.topic,request:sD($.request.method,$.request.params,$.id),chainId:$.chainId};return D.push(B)}),D}async setJsonRpcRecords(D){await this.core.storage.setItem(this.storageKey,D)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(D){this.isInitialized();let $=this.records.get(D);if(!$){let{message:B}=L("NO_MATCHING_KEY",`${this.name}: ${D}`);throw new Error(B)}return $}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(tD.sync)}async restore(){try{let D=await this.getJsonRpcRecords();if(typeof D>"u"||!D.length)return;if(this.records.size){let{message:$}=L("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error($),new Error($)}this.cached=D,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(D){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(D)}}registerEventListeners(){this.events.on(tD.created,(D)=>{let $=tD.created;this.logger.info(`Emitting ${$}`),this.logger.debug({type:"event",event:$,record:D}),this.persist()}),this.events.on(tD.updated,(D)=>{let $=tD.updated;this.logger.info(`Emitting ${$}`),this.logger.debug({type:"event",event:$,record:D}),this.persist()}),this.events.on(tD.deleted,(D)=>{let $=tD.deleted;this.logger.info(`Emitting ${$}`),this.logger.debug({type:"event",event:$,record:D}),this.persist()}),this.core.heartbeat.on(k0.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach((D)=>{a.toMiliseconds(D.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${D.id}`),this.delete(D.topic,D.id))})}catch(D){this.logger.warn(D)}}isInitialized(){if(!this.initialized){let{message:D}=L("NOT_INITIALIZED",this.name);throw new Error(D)}}}class iJ extends sw{constructor(D,$){super(D,$),this.core=D,this.logger=$,this.expirations=new Map,this.events=new xD,this.name=Q1,this.version=Z1,this.cached=[],this.initialized=!1,this.storagePrefix=A0,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((B)=>this.expirations.set(B.target,B)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=(B)=>{try{let w=this.formatTarget(B);return typeof this.getExpiration(w)<"u"}catch{return!1}},this.set=(B,w)=>{this.isInitialized();let Y=this.formatTarget(B),C={target:Y,expiry:w};this.expirations.set(Y,C),this.checkExpiry(Y,C),this.events.emit(yD.created,{target:Y,expiration:C})},this.get=(B)=>{this.isInitialized();let w=this.formatTarget(B);return this.getExpiration(w)},this.del=(B)=>{if(this.isInitialized(),this.has(B)){let w=this.formatTarget(B),Y=this.getExpiration(w);this.expirations.delete(w),this.events.emit(yD.deleted,{target:w,expiration:Y})}},this.on=(B,w)=>{this.events.on(B,w)},this.once=(B,w)=>{this.events.once(B,w)},this.off=(B,w)=>{this.events.off(B,w)},this.removeListener=(B,w)=>{this.events.removeListener(B,w)},this.logger=SD($,this.name)}get context(){return HD(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(D){if(typeof D=="string")return EF(D);if(typeof D=="number")return JF(D);let{message:$}=L("UNKNOWN_TYPE",`Target type: ${typeof D}`);throw new Error($)}async setExpirations(D){await this.core.storage.setItem(this.storageKey,D)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(yD.sync)}async restore(){try{let D=await this.getExpirations();if(typeof D>"u"||!D.length)return;if(this.expirations.size){let{message:$}=L("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error($),new Error($)}this.cached=D,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(D){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(D)}}getExpiration(D){let $=this.expirations.get(D);if(!$){let{message:B}=L("NO_MATCHING_KEY",`${this.name}: ${D}`);throw this.logger.error(B),new Error(B)}return $}checkExpiry(D,$){let{expiry:B}=$;a.toMiliseconds(B)-Date.now()<=0&&this.expire(D,$)}expire(D,$){this.expirations.delete(D),this.events.emit(yD.expired,{target:D,expiration:$})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((D,$)=>this.checkExpiry($,D))}registerEventListeners(){this.core.heartbeat.on(k0.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(yD.created,(D)=>{let $=yD.created;this.logger.info(`Emitting ${$}`),this.logger.debug({type:"event",event:$,data:D}),this.persist()}),this.events.on(yD.expired,(D)=>{let $=yD.expired;this.logger.info(`Emitting ${$}`),this.logger.debug({type:"event",event:$,data:D}),this.persist()}),this.events.on(yD.deleted,(D)=>{let $=yD.deleted;this.logger.info(`Emitting ${$}`),this.logger.debug({type:"event",event:$,data:D}),this.persist()})}isInitialized(){if(!this.initialized){let{message:D}=L("NOT_INITIALIZED",this.name);throw new Error(D)}}}class lJ extends aw{constructor(D,$){super(D,$),this.projectId=D,this.logger=$,this.name=TY,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async(B)=>{if(this.verifyDisabled||v8()||!L0())return;let w=B?.verifyUrl||E$;this.verifyUrl!==w&&this.removeIframe(),this.verifyUrl=w;try{await this.createIframe()}catch(Y){this.logger.warn(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.warn(Y)}if(!this.initialized){this.removeIframe(),this.verifyUrl=QJ;try{await this.createIframe()}catch(Y){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(Y),this.verifyDisabled=!0}}},this.register=async(B)=>{this.initialized?this.sendPost(B.attestationId):(this.addToQueue(B.attestationId),await this.init())},this.resolve=async(B)=>{if(this.isDevEnv)return"";let w=B?.verifyUrl||E$,Y="";try{Y=await this.fetchAttestation(B.attestationId,w)}catch(C){this.logger.warn(`failed to resolve attestation: ${B.attestationId} from url: ${w}`),this.logger.warn(C),Y=await this.fetchAttestation(B.attestationId,QJ)}return Y},this.fetchAttestation=async(B,w)=>{var Y;this.logger.info(`resolving attestation: ${B} from url: ${w}`);let C=this.startAbortTimer(a.ONE_SECOND*2),X=await fetch(`${w}/attestation/${B}`,{signal:this.abortController.signal});return clearTimeout(C),X.status===200?(Y=await X.json())==null?void 0:Y.origin:""},this.addToQueue=(B)=>{this.queue.push(B)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach((B)=>this.sendPost(B)),this.queue=[])},this.sendPost=(B)=>{var w;try{if(!this.iframe)return;(w=this.iframe.contentWindow)==null||w.postMessage(B,"*"),this.logger.info(`postMessage sent: ${B} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let B,w=(Y)=>{Y.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",w),B())};await Promise.race([new Promise((Y)=>{if(document.getElementById(TY))return Y();window.addEventListener("message",w);let C=document.createElement("iframe");C.id=TY,C.src=`${this.verifyUrl}/${this.projectId}`,C.style.display="none",document.body.append(C),this.iframe=C,B=Y}),new Promise((Y,C)=>setTimeout(()=>{window.removeEventListener("message",w),C("verify iframe load timeout")},a.toMiliseconds(a.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=SD($,this.name),this.verifyUrl=E$,this.abortController=new AbortController,this.isDevEnv=b$()&&process.env.IS_VITEST}get context(){return HD(this.logger)}startAbortTimer(D){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),a.toMiliseconds(D))}}var{defineProperty:H1,getOwnPropertySymbols:NJ}=Object,I1=Object.prototype.hasOwnProperty,f1=Object.prototype.propertyIsEnumerable,zJ=(D,$,B)=>($ in D)?H1(D,$,{enumerable:!0,configurable:!0,writable:!0,value:B}):D[$]=B,VJ=(D,$)=>{for(var B in $||($={}))I1.call($,B)&&zJ(D,B,$[B]);if(NJ)for(var B of NJ($))f1.call($,B)&&zJ(D,B,$[B]);return D};class _Y extends cw{constructor(D){super(D),this.protocol=gJ,this.version=uI,this.name=jY,this.events=new xD,this.initialized=!1,this.on=(B,w)=>this.events.on(B,w),this.once=(B,w)=>this.events.once(B,w),this.off=(B,w)=>this.events.off(B,w),this.removeListener=(B,w)=>this.events.removeListener(B,w),this.projectId=D?.projectId,this.relayUrl=D?.relayUrl||kJ;let $=typeof D?.logger<"u"&&typeof D?.logger!="string"?D.logger:v0.default(T8({level:D?.logger||gI.logger}));this.logger=SD($,this.name),this.heartbeat=new k0.HeartBeat,this.crypto=new hJ(this,this.logger,D?.keychain),this.history=new rJ(this,this.logger),this.expirer=new iJ(this,this.logger),this.storage=D!=null&&D.storage?D.storage:new Uw(VJ(VJ({},kI),D?.storageOptions)),this.relayer=new bJ({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new vJ(this,this.logger),this.verify=new lJ(this.projectId||"",this.logger)}static async init(D){let $=new _Y(D);await $.initialize();let B=await $.crypto.getClientId();return await $.storage.setItem(eI,B),$}get context(){return HD(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(D){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,D),this.logger.error(D.message),D}}}var oJ=_Y;p0();var $D=FD(I0(),1);var eJ="wc",DW=2,$W="client",gY=`${eJ}@${DW}:${$W}:`,mY={name:$W,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"};var sJ="WALLETCONNECT_DEEPLINK_CHOICE";var U1="proposal";var M1="Proposal expired",q1="session",Gw=$D.SEVEN_DAYS,T1="engine",W$={wc_sessionPropose:{req:{ttl:$D.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:$D.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:$D.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:$D.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:$D.ONE_DAY,prompt:!1,tag:1104},res:{ttl:$D.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:$D.ONE_DAY,prompt:!1,tag:1106},res:{ttl:$D.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:$D.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:$D.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:$D.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:$D.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:$D.ONE_DAY,prompt:!1,tag:1112},res:{ttl:$D.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:$D.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:$D.THIRTY_SECONDS,prompt:!1,tag:1115}}},uY={min:$D.FIVE_MINUTES,max:$D.SEVEN_DAYS},E0={idle:"IDLE",active:"ACTIVE"},R1="request",S1=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"],L1=Object.defineProperty,j1=Object.defineProperties,x1=Object.getOwnPropertyDescriptors,aJ=Object.getOwnPropertySymbols,_1=Object.prototype.hasOwnProperty,m1=Object.prototype.propertyIsEnumerable,tJ=(D,$,B)=>($ in D)?L1(D,$,{enumerable:!0,configurable:!0,writable:!0,value:B}):D[$]=B,mD=(D,$)=>{for(var B in $||($={}))_1.call($,B)&&tJ(D,B,$[B]);if(aJ)for(var B of aJ($))m1.call($,B)&&tJ(D,B,$[B]);return D},K$=(D,$)=>j1(D,x1($));class wW extends ew{constructor(D){super(D),this.name=T1,this.events=new R8,this.initialized=!1,this.ignoredPayloadTypes=[Y0],this.requestQueue={state:E0.idle,queue:[]},this.sessionRequestQueue={state:E0.idle,queue:[]},this.requestQueueDelay=$D.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(W$)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},$D.toMiliseconds(this.requestQueueDelay)))},this.connect=async($)=>{await this.isInitialized();let B=K$(mD({},$),{requiredNamespaces:$.requiredNamespaces||{},optionalNamespaces:$.optionalNamespaces||{}});await this.isValidConnect(B);let{pairingTopic:w,requiredNamespaces:Y,optionalNamespaces:C,sessionProperties:X,relays:Q}=B,F=w,Z,E=!1;if(F&&(E=this.client.core.pairing.pairings.get(F).active),!F||!E){let{topic:f,uri:P}=await this.client.core.pairing.create();F=f,Z=P}let J=await this.client.core.crypto.generateKeyPair(),G=mD({requiredNamespaces:Y,optionalNamespaces:C,relays:Q??[{protocol:xY}],proposer:{publicKey:J,metadata:this.client.metadata}},X&&{sessionProperties:X}),{reject:W,resolve:K,done:V}=z0($D.FIVE_MINUTES,M1);if(this.events.once(ZD("session_connect"),async({error:f,session:P})=>{if(f)W(f);else if(P){P.self.publicKey=J;let A=K$(mD({},P),{requiredNamespaces:P.requiredNamespaces,optionalNamespaces:P.optionalNamespaces});await this.client.session.set(P.topic,A),await this.setExpiry(P.topic,P.expiry),F&&await this.client.core.pairing.updateMetadata({topic:F,metadata:P.peer.metadata}),K(A)}}),!F){let{message:f}=L("NO_MATCHING_KEY",`connect() pairing topic: ${F}`);throw new Error(f)}let O=await this.sendRequest({topic:F,method:"wc_sessionPropose",params:G}),H=uD($D.FIVE_MINUTES);return await this.setProposal(O,mD({id:O,expiry:H},G)),{uri:Z,approval:V}},this.pair=async($)=>(await this.isInitialized(),await this.client.core.pairing.pair($)),this.approve=async($)=>{await this.isInitialized(),await this.isValidApprove($);let{id:B,relayProtocol:w,namespaces:Y,sessionProperties:C}=$,X=this.client.proposal.get(B),{pairingTopic:Q,proposer:F,requiredNamespaces:Z,optionalNamespaces:E}=X;Q=Q||"",X8(Z)||(Z=NF(Y,"approve()"));let J=await this.client.core.crypto.generateKeyPair(),G=F.publicKey,W=await this.client.core.crypto.generateSharedKey(J,G);Q&&B&&(await this.client.core.pairing.updateMetadata({topic:Q,metadata:F.metadata}),await this.sendResult({id:B,topic:Q,result:{relay:{protocol:w??"irn"},responderPublicKey:J}}),await this.client.proposal.delete(B,JD("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:Q}));let K=mD({relay:{protocol:w??"irn"},namespaces:Y,requiredNamespaces:Z,optionalNamespaces:E,pairingTopic:Q,controller:{publicKey:J,metadata:this.client.metadata},expiry:uD(Gw)},C&&{sessionProperties:C});await this.client.core.relayer.subscribe(W),await this.sendRequest({topic:W,method:"wc_sessionSettle",params:K,throwOnFailedPublish:!0});let V=K$(mD({},K),{topic:W,pairingTopic:Q,acknowledged:!1,self:K.controller,peer:{publicKey:F.publicKey,metadata:F.metadata},controller:J});return await this.client.session.set(W,V),await this.setExpiry(W,uD(Gw)),{topic:W,acknowledged:()=>new Promise((O)=>setTimeout(()=>O(this.client.session.get(W)),500))}},this.reject=async($)=>{await this.isInitialized(),await this.isValidReject($);let{id:B,reason:w}=$,{pairingTopic:Y}=this.client.proposal.get(B);Y&&(await this.sendError(B,Y,w),await this.client.proposal.delete(B,JD("USER_DISCONNECTED")))},this.update=async($)=>{await this.isInitialized(),await this.isValidUpdate($);let{topic:B,namespaces:w}=$,Y=await this.sendRequest({topic:B,method:"wc_sessionUpdate",params:{namespaces:w}}),{done:C,resolve:X,reject:Q}=z0();return this.events.once(ZD("session_update",Y),({error:F})=>{F?Q(F):X()}),await this.client.session.update(B,{namespaces:w}),{acknowledged:C}},this.extend=async($)=>{await this.isInitialized(),await this.isValidExtend($);let{topic:B}=$,w=await this.sendRequest({topic:B,method:"wc_sessionExtend",params:{}}),{done:Y,resolve:C,reject:X}=z0();return this.events.once(ZD("session_extend",w),({error:Q})=>{Q?X(Q):C()}),await this.setExpiry(B,uD(Gw)),{acknowledged:Y}},this.request=async($)=>{await this.isInitialized(),await this.isValidRequest($);let{chainId:B,request:w,topic:Y,expiry:C}=$,X=F8(),{done:Q,resolve:F,reject:Z}=z0(C);return this.events.once(ZD("session_request",X),({error:E,result:J})=>{E?Z(E):F(J)}),await Promise.all([new Promise(async(E)=>{await this.sendRequest({clientRpcId:X,topic:Y,method:"wc_sessionRequest",params:{request:w,chainId:B},expiry:C,throwOnFailedPublish:!0}).catch((J)=>Z(J)),this.client.events.emit("session_request_sent",{topic:Y,request:w,chainId:B,id:X}),E()}),new Promise(async(E)=>{let J=await this.client.core.storage.getItem(sJ);WF({id:X,topic:Y,wcDeepLink:J}),E()}),Q()]).then((E)=>E[2])},this.respond=async($)=>{await this.isInitialized(),await this.isValidRespond($);let{topic:B,response:w}=$,{id:Y}=w;kD(w)?await this.sendResult({id:Y,topic:B,result:w.result,throwOnFailedPublish:!0}):MD(w)&&await this.sendError(Y,B,w.error),this.cleanupAfterResponse($)},this.ping=async($)=>{await this.isInitialized(),await this.isValidPing($);let{topic:B}=$;if(this.client.session.keys.includes(B)){let w=await this.sendRequest({topic:B,method:"wc_sessionPing",params:{}}),{done:Y,resolve:C,reject:X}=z0();this.events.once(ZD("session_ping",w),({error:Q})=>{Q?X(Q):C()}),await Y()}else this.client.core.pairing.pairings.keys.includes(B)&&await this.client.core.pairing.ping({topic:B})},this.emit=async($)=>{await this.isInitialized(),await this.isValidEmit($);let{topic:B,event:w,chainId:Y}=$;await this.sendRequest({topic:B,method:"wc_sessionEvent",params:{event:w,chainId:Y}})},this.disconnect=async($)=>{await this.isInitialized(),await this.isValidDisconnect($);let{topic:B}=$;this.client.session.keys.includes(B)?(await this.sendRequest({topic:B,method:"wc_sessionDelete",params:JD("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(B)):await this.client.core.pairing.disconnect({topic:B})},this.find=($)=>(this.isInitialized(),this.client.session.getAll().filter((B)=>zF(B,$))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async($)=>{if($.pairingTopic)try{let B=this.client.core.pairing.pairings.get($.pairingTopic),w=this.client.core.pairing.pairings.getAll().filter((Y)=>{var C,X;return((C=Y.peerMetadata)==null?void 0:C.url)&&((X=Y.peerMetadata)==null?void 0:X.url)===$.peer.metadata.url&&Y.topic&&Y.topic!==B.topic});if(w.length===0)return;this.client.logger.info(`Cleaning up ${w.length} duplicate pairing(s)`),await Promise.all(w.map((Y)=>this.client.core.pairing.disconnect({topic:Y.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(B){this.client.logger.error(B)}},this.deleteSession=async($,B)=>{let{self:w}=this.client.session.get($);await this.client.core.relayer.unsubscribe($),this.client.session.delete($,JD("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(w.publicKey)&&await this.client.core.crypto.deleteKeyPair(w.publicKey),this.client.core.crypto.keychain.has($)&&await this.client.core.crypto.deleteSymKey($),B||this.client.core.expirer.del($),this.client.core.storage.removeItem(sJ).catch((Y)=>this.client.logger.warn(Y))},this.deleteProposal=async($,B)=>{await Promise.all([this.client.proposal.delete($,JD("USER_DISCONNECTED")),B?Promise.resolve():this.client.core.expirer.del($)])},this.deletePendingSessionRequest=async($,B,w=!1)=>{await Promise.all([this.client.pendingRequest.delete($,B),w?Promise.resolve():this.client.core.expirer.del($)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter((Y)=>Y.id!==$),w&&(this.sessionRequestQueue.state=E0.idle)},this.setExpiry=async($,B)=>{this.client.session.keys.includes($)&&await this.client.session.update($,{expiry:B}),this.client.core.expirer.set($,B)},this.setProposal=async($,B)=>{await this.client.proposal.set($,B),this.client.core.expirer.set($,B.expiry)},this.setPendingSessionRequest=async($)=>{let B=W$.wc_sessionRequest.req.ttl,{id:w,topic:Y,params:C}=$;await this.client.pendingRequest.set(w,{id:w,topic:Y,params:C}),B&&this.client.core.expirer.set(w,uD(B))},this.sendRequest=async($)=>{let{topic:B,method:w,params:Y,expiry:C,relayRpcId:X,clientRpcId:Q,throwOnFailedPublish:F}=$,Z=sD(w,Y,Q);if(L0()&&S1.includes(w)){let G=N0(JSON.stringify(Z));this.client.core.verify.register({attestationId:G})}let E=await this.client.core.crypto.encode(B,Z),J=W$[w].req;return C&&(J.ttl=C),X&&(J.id=X),this.client.core.history.set(B,Z),F?(J.internal=K$(mD({},J.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(B,E,J)):this.client.core.relayer.publish(B,E,J).catch((G)=>this.client.logger.error(G)),Z.id},this.sendResult=async($)=>{let{id:B,topic:w,result:Y,throwOnFailedPublish:C}=$,X=j0(B,Y),Q=await this.client.core.crypto.encode(w,X),F=await this.client.core.history.get(w,B),Z=W$[F.request.method].res;C?(Z.internal=K$(mD({},Z.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(w,Q,Z)):this.client.core.relayer.publish(w,Q,Z).catch((E)=>this.client.logger.error(E)),await this.client.core.history.resolve(X)},this.sendError=async($,B,w)=>{let Y=V0($,w),C=await this.client.core.crypto.encode(B,Y),X=await this.client.core.history.get(B,$),Q=W$[X.request.method].res;this.client.core.relayer.publish(B,C,Q),await this.client.core.history.resolve(Y)},this.cleanup=async()=>{let $=[],B=[];this.client.session.getAll().forEach((w)=>{oD(w.expiry)&&$.push(w.topic)}),this.client.proposal.getAll().forEach((w)=>{oD(w.expiry)&&B.push(w.id)}),await Promise.all([...$.map((w)=>this.deleteSession(w)),...B.map((w)=>this.deleteProposal(w))])},this.onRelayEventRequest=async($)=>{this.requestQueue.queue.push($),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===E0.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=E0.active;let $=this.requestQueue.queue.shift();if($)try{this.processRequest($),await new Promise((B)=>setTimeout(B,300))}catch(B){this.client.logger.warn(B)}}this.requestQueue.state=E0.idle},this.processRequest=($)=>{let{topic:B,payload:w}=$,Y=w.method;switch(Y){case"wc_sessionPropose":return this.onSessionProposeRequest(B,w);case"wc_sessionSettle":return this.onSessionSettleRequest(B,w);case"wc_sessionUpdate":return this.onSessionUpdateRequest(B,w);case"wc_sessionExtend":return this.onSessionExtendRequest(B,w);case"wc_sessionPing":return this.onSessionPingRequest(B,w);case"wc_sessionDelete":return this.onSessionDeleteRequest(B,w);case"wc_sessionRequest":return this.onSessionRequest(B,w);case"wc_sessionEvent":return this.onSessionEventRequest(B,w);default:return this.client.logger.info(`Unsupported request method ${Y}`)}},this.onRelayEventResponse=async($)=>{let{topic:B,payload:w}=$,Y=(await this.client.core.history.get(B,w.id)).request.method;switch(Y){case"wc_sessionPropose":return this.onSessionProposeResponse(B,w);case"wc_sessionSettle":return this.onSessionSettleResponse(B,w);case"wc_sessionUpdate":return this.onSessionUpdateResponse(B,w);case"wc_sessionExtend":return this.onSessionExtendResponse(B,w);case"wc_sessionPing":return this.onSessionPingResponse(B,w);case"wc_sessionRequest":return this.onSessionRequestResponse(B,w);default:return this.client.logger.info(`Unsupported response method ${Y}`)}},this.onRelayEventUnknownPayload=($)=>{let{topic:B}=$,{message:w}=L("MISSING_OR_INVALID",`Decoded payload on topic ${B} is not identifiable as a JSON-RPC request or a response.`);throw new Error(w)},this.onSessionProposeRequest=async($,B)=>{let{params:w,id:Y}=B;try{this.isValidConnect(mD({},B.params));let C=uD($D.FIVE_MINUTES),X=mD({id:Y,pairingTopic:$,expiry:C},w);await this.setProposal(Y,X);let Q=N0(JSON.stringify(B)),F=await this.getVerifyContext(Q,X.proposer.metadata);this.client.events.emit("session_proposal",{id:Y,params:X,verifyContext:F})}catch(C){await this.sendError(Y,$,C),this.client.logger.error(C)}},this.onSessionProposeResponse=async($,B)=>{let{id:w}=B;if(kD(B)){let{result:Y}=B;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:Y});let C=this.client.proposal.get(w);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:C});let X=C.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:X});let Q=Y.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:Q});let F=await this.client.core.crypto.generateSharedKey(X,Q);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:F});let Z=await this.client.core.relayer.subscribe(F);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:Z}),await this.client.core.pairing.activate({topic:$})}else MD(B)&&(await this.client.proposal.delete(w,JD("USER_DISCONNECTED")),this.events.emit(ZD("session_connect"),{error:B.error}))},this.onSessionSettleRequest=async($,B)=>{let{id:w,params:Y}=B;try{this.isValidSessionSettleRequest(Y);let{relay:C,controller:X,expiry:Q,namespaces:F,requiredNamespaces:Z,optionalNamespaces:E,sessionProperties:J,pairingTopic:G}=B.params,W=mD({topic:$,relay:C,expiry:Q,namespaces:F,acknowledged:!0,pairingTopic:G,requiredNamespaces:Z,optionalNamespaces:E,controller:X.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:X.publicKey,metadata:X.metadata}},J&&{sessionProperties:J});await this.sendResult({id:B.id,topic:$,result:!0}),this.events.emit(ZD("session_connect"),{session:W}),this.cleanupDuplicatePairings(W)}catch(C){await this.sendError(w,$,C),this.client.logger.error(C)}},this.onSessionSettleResponse=async($,B)=>{let{id:w}=B;kD(B)?(await this.client.session.update($,{acknowledged:!0}),this.events.emit(ZD("session_approve",w),{})):MD(B)&&(await this.client.session.delete($,JD("USER_DISCONNECTED")),this.events.emit(ZD("session_approve",w),{error:B.error}))},this.onSessionUpdateRequest=async($,B)=>{let{params:w,id:Y}=B;try{let C=`${$}_session_update`,X=Q8.get(C);if(X&&this.isRequestOutOfSync(X,Y)){this.client.logger.info(`Discarding out of sync request - ${Y}`);return}this.isValidUpdate(mD({topic:$},w)),await this.client.session.update($,{namespaces:w.namespaces}),await this.sendResult({id:Y,topic:$,result:!0}),this.client.events.emit("session_update",{id:Y,topic:$,params:w}),Q8.set(C,Y)}catch(C){await this.sendError(Y,$,C),this.client.logger.error(C)}},this.isRequestOutOfSync=($,B)=>parseInt(B.toString().slice(0,-3))<=parseInt($.toString().slice(0,-3)),this.onSessionUpdateResponse=($,B)=>{let{id:w}=B;kD(B)?this.events.emit(ZD("session_update",w),{}):MD(B)&&this.events.emit(ZD("session_update",w),{error:B.error})},this.onSessionExtendRequest=async($,B)=>{let{id:w}=B;try{this.isValidExtend({topic:$}),await this.setExpiry($,uD(Gw)),await this.sendResult({id:w,topic:$,result:!0}),this.client.events.emit("session_extend",{id:w,topic:$})}catch(Y){await this.sendError(w,$,Y),this.client.logger.error(Y)}},this.onSessionExtendResponse=($,B)=>{let{id:w}=B;kD(B)?this.events.emit(ZD("session_extend",w),{}):MD(B)&&this.events.emit(ZD("session_extend",w),{error:B.error})},this.onSessionPingRequest=async($,B)=>{let{id:w}=B;try{this.isValidPing({topic:$}),await this.sendResult({id:w,topic:$,result:!0}),this.client.events.emit("session_ping",{id:w,topic:$})}catch(Y){await this.sendError(w,$,Y),this.client.logger.error(Y)}},this.onSessionPingResponse=($,B)=>{let{id:w}=B;setTimeout(()=>{kD(B)?this.events.emit(ZD("session_ping",w),{}):MD(B)&&this.events.emit(ZD("session_ping",w),{error:B.error})},500)},this.onSessionDeleteRequest=async($,B)=>{let{id:w}=B;try{this.isValidDisconnect({topic:$,reason:B.params}),await Promise.all([new Promise((Y)=>{this.client.core.relayer.once(OD.publish,async()=>{Y(await this.deleteSession($))})}),this.sendResult({id:w,topic:$,result:!0})]),this.client.events.emit("session_delete",{id:w,topic:$})}catch(Y){this.client.logger.error(Y)}},this.onSessionRequest=async($,B)=>{let{id:w,params:Y}=B;try{this.isValidRequest(mD({topic:$},Y)),await this.setPendingSessionRequest({id:w,topic:$,params:Y}),this.addSessionRequestToSessionRequestQueue({id:w,topic:$,params:Y}),await this.processSessionRequestQueue()}catch(C){await this.sendError(w,$,C),this.client.logger.error(C)}},this.onSessionRequestResponse=($,B)=>{let{id:w}=B;kD(B)?this.events.emit(ZD("session_request",w),{result:B.result}):MD(B)&&this.events.emit(ZD("session_request",w),{error:B.error})},this.onSessionEventRequest=async($,B)=>{let{id:w,params:Y}=B;try{let C=`${$}_session_event_${Y.event.name}`,X=Q8.get(C);if(X&&this.isRequestOutOfSync(X,w)){this.client.logger.info(`Discarding out of sync request - ${w}`);return}this.isValidEmit(mD({topic:$},Y)),this.client.events.emit("session_event",{id:w,topic:$,params:Y}),Q8.set(C,w)}catch(C){await this.sendError(w,$,C),this.client.logger.error(C)}},this.addSessionRequestToSessionRequestQueue=($)=>{this.sessionRequestQueue.queue.push($)},this.cleanupAfterResponse=($)=>{this.deletePendingSessionRequest($.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=E0.idle,this.processSessionRequestQueue()},$D.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=async()=>{if(this.sessionRequestQueue.state===E0.active){this.client.logger.info("session request queue is already active.");return}let $=this.sessionRequestQueue.queue[0];if(!$){this.client.logger.info("session request queue is empty.");return}try{let{id:B,topic:w,params:Y}=$,C=N0(JSON.stringify(sD("wc_sessionRequest",Y,B))),X=this.client.session.get(w),Q=await this.getVerifyContext(C,X.peer.metadata);this.sessionRequestQueue.state=E0.active,this.client.events.emit("session_request",{id:B,topic:w,params:Y,verifyContext:Q})}catch(B){this.client.logger.error(B)}},this.isValidConnect=async($)=>{if(!UD($)){let{message:Q}=L("MISSING_OR_INVALID",`connect() params: ${JSON.stringify($)}`);throw new Error(Q)}let{pairingTopic:B,requiredNamespaces:w,optionalNamespaces:Y,sessionProperties:C,relays:X}=$;if(PD(B)||await this.isValidPairingTopic(B),!fF(X,!0)){let{message:Q}=L("MISSING_OR_INVALID",`connect() relays: ${X}`);throw new Error(Q)}!PD(w)&&X8(w)!==0&&this.validateNamespaces(w,"requiredNamespaces"),!PD(Y)&&X8(Y)!==0&&this.validateNamespaces(Y,"optionalNamespaces"),PD(C)||this.validateSessionProps(C,"sessionProperties")},this.validateNamespaces=($,B)=>{let w=IF($,"connect()",B);if(w)throw new Error(w.message)},this.isValidApprove=async($)=>{if(!UD($))throw new Error(L("MISSING_OR_INVALID",`approve() params: ${$}`).message);let{id:B,namespaces:w,relayProtocol:Y,sessionProperties:C}=$;await this.isValidProposalId(B);let X=this.client.proposal.get(B),Q=l8(w,"approve()");if(Q)throw new Error(Q.message);let F=XY(X.requiredNamespaces,w,"approve()");if(F)throw new Error(F.message);if(!WD(Y,!0)){let{message:Z}=L("MISSING_OR_INVALID",`approve() relayProtocol: ${Y}`);throw new Error(Z)}PD(C)||this.validateSessionProps(C,"sessionProperties")},this.isValidReject=async($)=>{if(!UD($)){let{message:Y}=L("MISSING_OR_INVALID",`reject() params: ${$}`);throw new Error(Y)}let{id:B,reason:w}=$;if(await this.isValidProposalId(B),!MF(w)){let{message:Y}=L("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(w)}`);throw new Error(Y)}},this.isValidSessionSettleRequest=($)=>{if(!UD($)){let{message:F}=L("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${$}`);throw new Error(F)}let{relay:B,controller:w,namespaces:Y,expiry:C}=$;if(!YY(B)){let{message:F}=L("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(F)}let X=AF(w,"onSessionSettleRequest()");if(X)throw new Error(X.message);let Q=l8(Y,"onSessionSettleRequest()");if(Q)throw new Error(Q.message);if(oD(C)){let{message:F}=L("EXPIRED","onSessionSettleRequest()");throw new Error(F)}},this.isValidUpdate=async($)=>{if(!UD($)){let{message:Q}=L("MISSING_OR_INVALID",`update() params: ${$}`);throw new Error(Q)}let{topic:B,namespaces:w}=$;await this.isValidSessionTopic(B);let Y=this.client.session.get(B),C=l8(w,"update()");if(C)throw new Error(C.message);let X=XY(Y.requiredNamespaces,w,"update()");if(X)throw new Error(X.message)},this.isValidExtend=async($)=>{if(!UD($)){let{message:w}=L("MISSING_OR_INVALID",`extend() params: ${$}`);throw new Error(w)}let{topic:B}=$;await this.isValidSessionTopic(B)},this.isValidRequest=async($)=>{if(!UD($)){let{message:Q}=L("MISSING_OR_INVALID",`request() params: ${$}`);throw new Error(Q)}let{topic:B,request:w,chainId:Y,expiry:C}=$;await this.isValidSessionTopic(B);let{namespaces:X}=this.client.session.get(B);if(!CY(X,Y)){let{message:Q}=L("MISSING_OR_INVALID",`request() chainId: ${Y}`);throw new Error(Q)}if(!qF(w)){let{message:Q}=L("MISSING_OR_INVALID",`request() ${JSON.stringify(w)}`);throw new Error(Q)}if(!SF(X,Y,w.method)){let{message:Q}=L("MISSING_OR_INVALID",`request() method: ${w.method}`);throw new Error(Q)}if(C&&!jF(C,uY)){let{message:Q}=L("MISSING_OR_INVALID",`request() expiry: ${C}. Expiry must be a number (in seconds) between ${uY.min} and ${uY.max}`);throw new Error(Q)}},this.isValidRespond=async($)=>{if(!UD($)){let{message:Y}=L("MISSING_OR_INVALID",`respond() params: ${$}`);throw new Error(Y)}let{topic:B,response:w}=$;if(await this.isValidSessionTopic(B),!TF(w)){let{message:Y}=L("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(w)}`);throw new Error(Y)}},this.isValidPing=async($)=>{if(!UD($)){let{message:w}=L("MISSING_OR_INVALID",`ping() params: ${$}`);throw new Error(w)}let{topic:B}=$;await this.isValidSessionOrPairingTopic(B)},this.isValidEmit=async($)=>{if(!UD($)){let{message:X}=L("MISSING_OR_INVALID",`emit() params: ${$}`);throw new Error(X)}let{topic:B,event:w,chainId:Y}=$;await this.isValidSessionTopic(B);let{namespaces:C}=this.client.session.get(B);if(!CY(C,Y)){let{message:X}=L("MISSING_OR_INVALID",`emit() chainId: ${Y}`);throw new Error(X)}if(!RF(w)){let{message:X}=L("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(w)}`);throw new Error(X)}if(!LF(C,Y,w.name)){let{message:X}=L("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(w)}`);throw new Error(X)}},this.isValidDisconnect=async($)=>{if(!UD($)){let{message:w}=L("MISSING_OR_INVALID",`disconnect() params: ${$}`);throw new Error(w)}let{topic:B}=$;await this.isValidSessionOrPairingTopic(B)},this.getVerifyContext=async($,B)=>{let w={verified:{verifyUrl:B.verifyUrl||E$,validation:"UNKNOWN",origin:B.url||""}};try{let Y=await this.client.core.verify.resolve({attestationId:$,verifyUrl:B.verifyUrl});Y&&(w.verified.origin=Y,w.verified.validation=Y===new URL(B.url).origin?"VALID":"INVALID")}catch(Y){this.client.logger.error(Y)}return this.client.logger.info(`Verify context: ${JSON.stringify(w)}`),w},this.validateSessionProps=($,B)=>{Object.values($).forEach((w)=>{if(!WD(w,!1)){let{message:Y}=L("MISSING_OR_INVALID",`${B} must be in Record<string, string> format. Received: ${JSON.stringify(w)}`);throw new Error(Y)}})}}async isInitialized(){if(!this.initialized){let{message:D}=L("NOT_INITIALIZED",this.name);throw new Error(D)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(OD.message,async(D)=>{let{topic:$,message:B}=D;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(B)))return;let w=await this.client.core.crypto.decode($,B);try{x0(w)?(this.client.core.history.set($,w),this.onRelayEventRequest({topic:$,payload:w})):X0(w)?(await this.client.core.history.resolve(w),await this.onRelayEventResponse({topic:$,payload:w}),this.client.core.history.delete($,w.id)):this.onRelayEventUnknownPayload({topic:$,payload:w})}catch(Y){this.client.logger.error(Y)}})}registerExpirerEvents(){this.client.core.expirer.on(yD.expired,async(D)=>{let{topic:$,id:B}=v$(D.target);if(B&&this.client.pendingRequest.keys.includes(B))return await this.deletePendingSessionRequest(B,L("EXPIRED"),!0);$?this.client.session.keys.includes($)&&(await this.deleteSession($,!0),this.client.events.emit("session_expire",{topic:$})):B&&(await this.deleteProposal(B,!0),this.client.events.emit("proposal_expire",{id:B}))})}isValidPairingTopic(D){if(!WD(D,!1)){let{message:$}=L("MISSING_OR_INVALID",`pairing topic should be a string: ${D}`);throw new Error($)}if(!this.client.core.pairing.pairings.keys.includes(D)){let{message:$}=L("NO_MATCHING_KEY",`pairing topic doesn't exist: ${D}`);throw new Error($)}if(oD(this.client.core.pairing.pairings.get(D).expiry)){let{message:$}=L("EXPIRED",`pairing topic: ${D}`);throw new Error($)}}async isValidSessionTopic(D){if(!WD(D,!1)){let{message:$}=L("MISSING_OR_INVALID",`session topic should be a string: ${D}`);throw new Error($)}if(!this.client.session.keys.includes(D)){let{message:$}=L("NO_MATCHING_KEY",`session topic doesn't exist: ${D}`);throw new Error($)}if(oD(this.client.session.get(D).expiry)){await this.deleteSession(D);let{message:$}=L("EXPIRED",`session topic: ${D}`);throw new Error($)}}async isValidSessionOrPairingTopic(D){if(this.client.session.keys.includes(D))await this.isValidSessionTopic(D);else if(this.client.core.pairing.pairings.keys.includes(D))this.isValidPairingTopic(D);else if(WD(D,!1)){let{message:$}=L("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${D}`);throw new Error($)}else{let{message:$}=L("MISSING_OR_INVALID",`session or pairing topic should be a string: ${D}`);throw new Error($)}}async isValidProposalId(D){if(!UF(D)){let{message:$}=L("MISSING_OR_INVALID",`proposal id should be a number: ${D}`);throw new Error($)}if(!this.client.proposal.keys.includes(D)){let{message:$}=L("NO_MATCHING_KEY",`proposal id doesn't exist: ${D}`);throw new Error($)}if(oD(this.client.proposal.get(D).expiry)){await this.deleteProposal(D);let{message:$}=L("EXPIRED",`proposal id: ${D}`);throw new Error($)}}}class BW extends G8{constructor(D,$){super(D,$,U1,gY),this.core=D,this.logger=$}}class YW extends G8{constructor(D,$){super(D,$,q1,gY),this.core=D,this.logger=$}}class CW extends G8{constructor(D,$){super(D,$,R1,gY,(B)=>B.id),this.core=D,this.logger=$}}class Nw extends tw{constructor(D){super(D),this.protocol=eJ,this.version=DW,this.name=mY.name,this.events=new xD,this.on=(B,w)=>this.events.on(B,w),this.once=(B,w)=>this.events.once(B,w),this.off=(B,w)=>this.events.off(B,w),this.removeListener=(B,w)=>this.events.removeListener(B,w),this.removeAllListeners=(B)=>this.events.removeAllListeners(B),this.connect=async(B)=>{try{return await this.engine.connect(B)}catch(w){throw this.logger.error(w.message),w}},this.pair=async(B)=>{try{return await this.engine.pair(B)}catch(w){throw this.logger.error(w.message),w}},this.approve=async(B)=>{try{return await this.engine.approve(B)}catch(w){throw this.logger.error(w.message),w}},this.reject=async(B)=>{try{return await this.engine.reject(B)}catch(w){throw this.logger.error(w.message),w}},this.update=async(B)=>{try{return await this.engine.update(B)}catch(w){throw this.logger.error(w.message),w}},this.extend=async(B)=>{try{return await this.engine.extend(B)}catch(w){throw this.logger.error(w.message),w}},this.request=async(B)=>{try{return await this.engine.request(B)}catch(w){throw this.logger.error(w.message),w}},this.respond=async(B)=>{try{return await this.engine.respond(B)}catch(w){throw this.logger.error(w.message),w}},this.ping=async(B)=>{try{return await this.engine.ping(B)}catch(w){throw this.logger.error(w.message),w}},this.emit=async(B)=>{try{return await this.engine.emit(B)}catch(w){throw this.logger.error(w.message),w}},this.disconnect=async(B)=>{try{return await this.engine.disconnect(B)}catch(w){throw this.logger.error(w.message),w}},this.find=(B)=>{try{return this.engine.find(B)}catch(w){throw this.logger.error(w.message),w}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(B){throw this.logger.error(B.message),B}},this.name=D?.name||mY.name,this.metadata=D?.metadata||QF();let $=typeof D?.logger<"u"&&typeof D?.logger!="string"?D.logger:v0.default(T8({level:D?.logger||mY.logger}));this.core=D?.core||new oJ(D),this.logger=SD($,this.name),this.session=new YW(this.core,this.logger),this.proposal=new BW(this.core,this.logger),this.pendingRequest=new CW(this.core,this.logger),this.engine=new wW(this)}static async init(D){let $=new Nw(D);return await $.initialize(),$}get context(){return HD(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(D){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(D.message),D}}}var{defineProperty:u1,defineProperties:g1,getOwnPropertyDescriptors:k1,getOwnPropertySymbols:XW}=Object,y1=Object.prototype.hasOwnProperty,h1=Object.prototype.propertyIsEnumerable,QW=(D,$,B)=>($ in D)?u1(D,$,{enumerable:!0,configurable:!0,writable:!0,value:B}):D[$]=B,d1=(D,$)=>{for(var B in $||($={}))y1.call($,B)&&QW(D,B,$[B]);if(XW)for(var B of XW($))h1.call($,B)&&QW(D,B,$[B]);return D},n1=(D,$)=>g1(D,k1($)),hY=(D,$,B)=>{if(!$.has(D))throw TypeError("Cannot "+B)},CD=(D,$,B)=>(hY(D,$,"read from private field"),B?B.call(D):$.get(D)),y0=(D,$,B)=>{if($.has(D))throw TypeError("Cannot add the same private member more than once");$ instanceof WeakSet?$.add(D):$.set(D,B)},zw=(D,$,B,w)=>(hY(D,$,"write to private field"),w?w.call(D,B):$.set(D,B),B),qD=(D,$,B)=>(hY(D,$,"access private method"),B),h0,N8,G$,ND,kY,FW,TD,jD,yY,ZW;class p1{constructor(D){y0(this,kY),y0(this,TD),y0(this,yY),y0(this,h0,void 0),y0(this,N8,void 0),y0(this,G$,void 0),y0(this,ND,void 0),zw(this,h0,D),zw(this,N8,qD(this,kY,FW).call(this)),qD(this,TD,jD).call(this)}async connect(D){let{requiredNamespaces:$,optionalNamespaces:B}=D;return new Promise(async(w,Y)=>{await qD(this,TD,jD).call(this);let C=CD(this,N8).subscribeModal((F)=>{F.open||(C(),Y(new Error("Modal closed")))}),{uri:X,approval:Q}=await CD(this,ND).connect(D);if(X){let F=new Set;$&&Object.values($).forEach(({chains:Z})=>{Z&&Z.forEach((E)=>F.add(E))}),B&&Object.values(B).forEach(({chains:Z})=>{Z&&Z.forEach((E)=>F.add(E))}),await CD(this,N8).openModal({uri:X,chains:Array.from(F)})}try{let F=await Q();w(F)}catch(F){Y(F)}finally{C(),CD(this,N8).closeModal()}})}async disconnect(D){await qD(this,TD,jD).call(this),await CD(this,ND).disconnect(D)}async request(D){return await qD(this,TD,jD).call(this),await CD(this,ND).request(D)}async getSessions(){return await qD(this,TD,jD).call(this),CD(this,ND).session.getAll()}async getSession(){return await qD(this,TD,jD).call(this),CD(this,ND).session.getAll().at(-1)}async onSessionEvent(D){await qD(this,TD,jD).call(this),CD(this,ND).on("session_event",D)}async offSessionEvent(D){await qD(this,TD,jD).call(this),CD(this,ND).off("session_event",D)}async onSessionUpdate(D){await qD(this,TD,jD).call(this),CD(this,ND).on("session_update",D)}async offSessionUpdate(D){await qD(this,TD,jD).call(this),CD(this,ND).off("session_update",D)}async onSessionDelete(D){await qD(this,TD,jD).call(this),CD(this,ND).on("session_delete",D)}async offSessionDelete(D){await qD(this,TD,jD).call(this),CD(this,ND).off("session_delete",D)}async onSessionExpire(D){await qD(this,TD,jD).call(this),CD(this,ND).on("session_expire",D)}async offSessionExpire(D){await qD(this,TD,jD).call(this),CD(this,ND).off("session_expire",D)}}h0=new WeakMap,N8=new WeakMap,G$=new WeakMap,ND=new WeakMap,kY=new WeakSet,FW=function(){let{modalOptions:D,projectId:$}=CD(this,h0);return new Pw(n1(d1({},D),{projectId:$}))},TD=new WeakSet,jD=async function(){return CD(this,ND)?!0:(!CD(this,G$)&&typeof window<"u"&&zw(this,G$,qD(this,yY,ZW).call(this)),CD(this,G$))},yY=new WeakSet,ZW=async function(){zw(this,ND,await Nw.init({metadata:CD(this,h0).metadata,projectId:CD(this,h0).projectId,relayUrl:CD(this,h0).relayUrl}));let D=await CD(this,ND).core.crypto.getClientId();try{localStorage.setItem("WCM_WALLETCONNECT_CLIENT_ID",D)}catch{console.info("Unable to set client id")}};export{p1 as WalletConnectModalSign};

//# debugId=F087B86BA758B62B64756E2164756E21
