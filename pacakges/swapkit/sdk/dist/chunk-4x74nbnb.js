import{$d as tN,Rd as T0,Sd as k6,Td as XQ,Ud as OL,Vd as XL,Wd as XZ,Xd as R3,Yd as T3,Zd as tU,_d as lN,ae as eN}from"./chunk-8fzrxm50.js";import"./chunk-ft99sgw8.js";import"./chunk-ejx2s9rd.js";import{ne as wK,oe as HC,pe as TK,qe as x4,re as vK}from"./chunk-63fe47hr.js";import{se as n2,te as a2}from"./chunk-x00b5e79.js";import"./chunk-cc266kt3.js";import{Pe as z4}from"./chunk-5kpy40kf.js";import{Qe as F1}from"./chunk-kfwf4q2g.js";import{mf as nY}from"./chunk-kcet18sy.js";import{of as B4,pf as w4}from"./chunk-002j43qk.js";import{Af as lV,Cf as hV,Gf as cV,Kf as N8,Nf as T5,Qf as K6,_f as Aq,sf as L0,wf as yV}from"./chunk-0bt0m5cf.js";import{cg as V8,dg as C6,eg as y,fg as EX}from"./chunk-g7j062ka.js";var S1=y((wq)=>{Object.defineProperty(wq,"__esModule",{value:!0});wq.testnet=wq.regtest=wq.bitcoin=void 0;wq.bitcoin={messagePrefix:`\x18Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};wq.regtest={messagePrefix:`\x18Bitcoin Signed Message:
`,bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239};wq.testnet={messagePrefix:`\x18Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var F4=y((Iq)=>{Object.defineProperty(Iq,"__esModule",{value:!0});Iq.encode=Iq.decode=Iq.check=void 0;function Uj($){if($.length<8)return!1;if($.length>72)return!1;if($[0]!==48)return!1;if($[1]!==$.length-2)return!1;if($[2]!==2)return!1;let Y=$[3];if(Y===0)return!1;if(5+Y>=$.length)return!1;if($[4+Y]!==2)return!1;let q=$[5+Y];if(q===0)return!1;if(6+Y+q!==$.length)return!1;if($[4]&128)return!1;if(Y>1&&$[4]===0&&!($[5]&128))return!1;if($[Y+6]&128)return!1;if(q>1&&$[Y+6]===0&&!($[Y+7]&128))return!1;return!0}Iq.check=Uj;function Nj($){if($.length<8)throw new Error("DER sequence length is too short");if($.length>72)throw new Error("DER sequence length is too long");if($[0]!==48)throw new Error("Expected DER sequence");if($[1]!==$.length-2)throw new Error("DER sequence length is invalid");if($[2]!==2)throw new Error("Expected DER integer");let Y=$[3];if(Y===0)throw new Error("R length is zero");if(5+Y>=$.length)throw new Error("R length is too long");if($[4+Y]!==2)throw new Error("Expected DER integer (2)");let q=$[5+Y];if(q===0)throw new Error("S length is zero");if(6+Y+q!==$.length)throw new Error("S length is invalid");if($[4]&128)throw new Error("R value is negative");if(Y>1&&$[4]===0&&!($[5]&128))throw new Error("R value excessively padded");if($[Y+6]&128)throw new Error("S value is negative");if(q>1&&$[Y+6]===0&&!($[Y+7]&128))throw new Error("S value excessively padded");return{r:$.slice(4,4+Y),s:$.slice(6+Y)}}Iq.decode=Nj;function Mj($,Y){let q=$.length,J=Y.length;if(q===0)throw new Error("R length is zero");if(J===0)throw new Error("S length is zero");if(q>33)throw new Error("R length is too long");if(J>33)throw new Error("S length is too long");if($[0]&128)throw new Error("R value is negative");if(Y[0]&128)throw new Error("S value is negative");if(q>1&&$[0]===0&&!($[1]&128))throw new Error("R value excessively padded");if(J>1&&Y[0]===0&&!(Y[1]&128))throw new Error("S value excessively padded");let G=Buffer.allocUnsafe(6+q+J);return G[0]=48,G[1]=G.length-2,G[2]=2,G[3]=$.length,$.copy(G,4),G[4+q]=2,G[5+q]=Y.length,Y.copy(G,6+q),G}Iq.encode=Mj});var L6=y((Sq)=>{Object.defineProperty(Sq,"__esModule",{value:!0});Sq.REVERSE_OPS=Sq.OPS=void 0;var P4={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};Sq.OPS=P4;var _q={};Sq.REVERSE_OPS=_q;for(let $ of Object.keys(P4)){let Y=P4[$];_q[Y]=$}});var gq=y((fq)=>{Object.defineProperty(fq,"__esModule",{value:!0});fq.decode=fq.encode=fq.encodingLength=void 0;var I8=L6();function xq($){return $<I8.OPS.OP_PUSHDATA1?1:$<=255?2:$<=65535?3:5}fq.encodingLength=xq;function zj($,Y,q){let J=xq(Y);if(J===1)$.writeUInt8(Y,q);else if(J===2)$.writeUInt8(I8.OPS.OP_PUSHDATA1,q),$.writeUInt8(Y,q+1);else if(J===3)$.writeUInt8(I8.OPS.OP_PUSHDATA2,q),$.writeUInt16LE(Y,q+1);else $.writeUInt8(I8.OPS.OP_PUSHDATA4,q),$.writeUInt32LE(Y,q+1);return J}fq.encode=zj;function Wj($,Y){let q=$.readUInt8(Y),J,G;if(q<I8.OPS.OP_PUSHDATA1)J=q,G=1;else if(q===I8.OPS.OP_PUSHDATA1){if(Y+2>$.length)return null;J=$.readUInt8(Y+1),G=2}else if(q===I8.OPS.OP_PUSHDATA2){if(Y+3>$.length)return null;J=$.readUInt16LE(Y+1),G=3}else{if(Y+5>$.length)return null;if(q!==I8.OPS.OP_PUSHDATA4)throw new Error("Unexpected opcode");J=$.readUInt32LE(Y+1),G=5}return{opcode:q,number:J,size:G}}fq.decode=Wj});var yq=y((bq)=>{Object.defineProperty(bq,"__esModule",{value:!0});bq.encode=bq.decode=void 0;function Dj($,Y,q){Y=Y||4,q=q===void 0?!0:q;let J=$.length;if(J===0)return 0;if(J>Y)throw new TypeError("Script number overflow");if(q){if(($[J-1]&127)===0){if(J<=1||($[J-2]&128)===0)throw new Error("Non-minimally encoded script number")}}if(J===5){let Q=$.readUInt32LE(0),O=$.readUInt8(4);if(O&128)return-((O&-129)*4294967296+Q);return O*4294967296+Q}let G=0;for(let Q=0;Q<J;++Q)G|=$[Q]<<8*Q;if($[J-1]&128)return-(G&~(128<<8*(J-1)));return G}bq.decode=Dj;function Rj($){return $>2147483647?5:$>8388607?4:$>32767?3:$>127?2:$>0?1:0}function Aj($){let Y=Math.abs($),q=Rj(Y),J=Buffer.allocUnsafe(q),G=$<0;for(let Q=0;Q<q;++Q)J.writeUInt8(Y&255,Q),Y>>=8;if(J[q-1]&128)J.writeUInt8(G?128:0,q-1);else if(G)J[q-1]|=128;return J}bq.encode=Aj});var Q1=y((oq)=>{Object.defineProperty(oq,"__esModule",{value:!0});oq.oneOf=oq.Null=oq.BufferN=oq.Function=oq.UInt32=oq.UInt8=oq.tuple=oq.maybe=oq.Hex=oq.Buffer=oq.String=oq.Boolean=oq.Array=oq.Number=oq.Hash256bit=oq.Hash160bit=oq.Buffer256bit=oq.isTaptree=oq.isTapleaf=oq.TAPLEAF_VERSION_MASK=oq.Satoshi=oq.isPoint=oq.stacksEqual=oq.typeforce=void 0;var D6=(w4(),C6(B4));oq.typeforce=T0();var lq=D6.Buffer.alloc(32,0),hq=D6.Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex");function Hj($,Y){if($.length!==Y.length)return!1;return $.every((q,J)=>{return q.equals(Y[J])})}oq.stacksEqual=Hj;function Fj($){if(!D6.Buffer.isBuffer($))return!1;if($.length<33)return!1;let Y=$[0],q=$.slice(1,33);if(q.compare(lq)===0)return!1;if(q.compare(hq)>=0)return!1;if((Y===2||Y===3)&&$.length===33)return!0;let J=$.slice(33);if(J.compare(lq)===0)return!1;if(J.compare(hq)>=0)return!1;if(Y===4&&$.length===65)return!0;return!1}oq.isPoint=Fj;var Pj=2100000000000000;function Bj($){return oq.typeforce.UInt53($)&&$<=Pj}oq.Satoshi=Bj;oq.TAPLEAF_VERSION_MASK=254;function cq($){if(!$||!("output"in $))return!1;if(!D6.Buffer.isBuffer($.output))return!1;if($.version!==void 0)return($.version&oq.TAPLEAF_VERSION_MASK)===$.version;return!0}oq.isTapleaf=cq;function uq($){if(!oq.Array($))return cq($);if($.length!==2)return!1;return $.every((Y)=>uq(Y))}oq.isTaptree=uq;oq.Buffer256bit=oq.typeforce.BufferN(32);oq.Hash160bit=oq.typeforce.BufferN(20);oq.Hash256bit=oq.typeforce.BufferN(32);oq.Number=oq.typeforce.Number;oq.Array=oq.typeforce.Array;oq.Boolean=oq.typeforce.Boolean;oq.String=oq.typeforce.String;oq.Buffer=oq.typeforce.Buffer;oq.Hex=oq.typeforce.Hex;oq.maybe=oq.typeforce.maybe;oq.tuple=oq.typeforce.tuple;oq.UInt8=oq.typeforce.UInt8;oq.UInt32=oq.typeforce.UInt32;oq.Function=oq.typeforce.Function;oq.BufferN=oq.typeforce.BufferN;oq.Null=oq.typeforce.Null;oq.oneOf=oq.typeforce.oneOf});var qJ=y(($J)=>{Object.defineProperty($J,"__esModule",{value:!0});$J.encode=$J.decode=void 0;var tq=F4(),eq=X1(),T4=Q1(),{typeforce:nj}=T4,iq=Buffer.alloc(1,0);function sq($){let Y=0;while($[Y]===0)++Y;if(Y===$.length)return iq;if($=$.slice(Y),$[0]&128)return Buffer.concat([iq,$],1+$.length);return $}function rq($){if($[0]===0)$=$.slice(1);let Y=Buffer.alloc(32,0),q=Math.max(0,32-$.length);return $.copy(Y,q),Y}function aj($){let Y=$.readUInt8($.length-1);if(!eq.isDefinedHashType(Y))throw new Error("Invalid hashType "+Y);let q=tq.decode($.slice(0,-1)),J=rq(q.r),G=rq(q.s);return{signature:Buffer.concat([J,G],64),hashType:Y}}$J.decode=aj;function ij($,Y){if(nj({signature:T4.BufferN(64),hashType:T4.UInt8},{signature:$,hashType:Y}),!eq.isDefinedHashType(Y))throw new Error("Invalid hashType "+Y);let q=Buffer.allocUnsafe(1);q.writeUInt8(Y,0);let J=sq($.slice(0,32)),G=sq($.slice(32,64));return Buffer.concat([tq.encode(J,G),q])}$J.encode=ij});var X1=y((_4)=>{Object.defineProperty(_4,"__esModule",{value:!0});_4.signature=_4.number=_4.isCanonicalScriptSignature=_4.isDefinedHashType=_4.isCanonicalPubKey=_4.toStack=_4.fromASM=_4.toASM=_4.decompile=_4.compile=_4.countNonPushOnlyOPs=_4.isPushOnly=_4.OPS=void 0;var rj=F4(),L1=L6();Object.defineProperty(_4,"OPS",{enumerable:!0,get:function(){return L1.OPS}});var I4=gq(),JJ=yq(),tj=qJ(),s1=Q1(),{typeforce:I5}=s1,GJ=L1.OPS.OP_RESERVED;function ej($){return s1.Number($)&&($===L1.OPS.OP_0||$>=L1.OPS.OP_1&&$<=L1.OPS.OP_16||$===L1.OPS.OP_1NEGATE)}function QJ($){return s1.Buffer($)||ej($)}function OJ($){return s1.Array($)&&$.every(QJ)}_4.isPushOnly=OJ;function $K($){return $.length-$.filter(QJ).length}_4.countNonPushOnlyOPs=$K;function R6($){if($.length===0)return L1.OPS.OP_0;if($.length!==1)return;if($[0]>=1&&$[0]<=16)return GJ+$[0];if($[0]===129)return L1.OPS.OP_1NEGATE}function XJ($){return Buffer.isBuffer($)}function YK($){return s1.Array($)}function A6($){return Buffer.isBuffer($)}function ZJ($){if(XJ($))return $;I5(s1.Array,$);let Y=$.reduce((G,Q)=>{if(A6(Q)){if(Q.length===1&&R6(Q)!==void 0)return G+1;return G+I4.encodingLength(Q.length)+Q.length}return G+1},0),q=Buffer.allocUnsafe(Y),J=0;if($.forEach((G)=>{if(A6(G)){let Q=R6(G);if(Q!==void 0){q.writeUInt8(Q,J),J+=1;return}J+=I4.encode(q,G.length,J),G.copy(q,J),J+=G.length}else q.writeUInt8(G,J),J+=1}),J!==q.length)throw new Error("Could not decode chunks");return q}_4.compile=ZJ;function v4($){if(YK($))return $;I5(s1.Buffer,$);let Y=[],q=0;while(q<$.length){let J=$[q];if(J>L1.OPS.OP_0&&J<=L1.OPS.OP_PUSHDATA4){let G=I4.decode($,q);if(G===null)return null;if(q+=G.size,q+G.number>$.length)return null;let Q=$.slice(q,q+G.number);q+=G.number;let O=R6(Q);if(O!==void 0)Y.push(O);else Y.push(Q)}else Y.push(J),q+=1}return Y}_4.decompile=v4;function qK($){if(XJ($))$=v4($);if(!$)throw new Error("Could not convert invalid chunks to ASM");return $.map((Y)=>{if(A6(Y)){let q=R6(Y);if(q===void 0)return Y.toString("hex");Y=q}return L1.REVERSE_OPS[Y]}).join(" ")}_4.toASM=qK;function JK($){return I5(s1.String,$),ZJ($.split(" ").map((Y)=>{if(L1.OPS[Y]!==void 0)return L1.OPS[Y];return I5(s1.Hex,Y),Buffer.from(Y,"hex")}))}_4.fromASM=JK;function GK($){return $=v4($),I5(OJ,$),$.map((Y)=>{if(A6(Y))return Y;if(Y===L1.OPS.OP_0)return Buffer.allocUnsafe(0);return JJ.encode(Y-GJ)})}_4.toStack=GK;function QK($){return s1.isPoint($)}_4.isCanonicalPubKey=QK;function UJ($){let Y=$&-129;return Y>0&&Y<4}_4.isDefinedHashType=UJ;function OK($){if(!Buffer.isBuffer($))return!1;if(!UJ($[$.length-1]))return!1;return rj.check($.slice(0,-1))}_4.isCanonicalScriptSignature=OK;_4.number=JJ;_4.signature=tj});var W8=y((MJ)=>{Object.defineProperty(MJ,"__esModule",{value:!0});MJ.value=MJ.prop=void 0;function CK($,Y,q){Object.defineProperty($,Y,{configurable:!0,enumerable:!0,get(){let J=q.call(this);return this[Y]=J,J},set(J){Object.defineProperty(this,Y,{configurable:!0,enumerable:!0,value:J,writable:!0})}})}MJ.prop=CK;function DK($){let Y;return()=>{if(Y!==void 0)return Y;return Y=$(),Y}}MJ.value=DK});var LJ=y((zJ)=>{Object.defineProperty(zJ,"__esModule",{value:!0});zJ.p2data=void 0;var AK=S1(),E6=X1(),r1=Q1(),jJ=W8(),KJ=E6.OPS;function EK($,Y){if(!$.data&&!$.output)throw new TypeError("Not enough data");Y=Object.assign({validate:!0},Y||{}),r1.typeforce({network:r1.typeforce.maybe(r1.typeforce.Object),output:r1.typeforce.maybe(r1.typeforce.Buffer),data:r1.typeforce.maybe(r1.typeforce.arrayOf(r1.typeforce.Buffer))},$);let J={name:"embed",network:$.network||AK.bitcoin};if(jJ.prop(J,"output",()=>{if(!$.data)return;return E6.compile([KJ.OP_RETURN].concat($.data))}),jJ.prop(J,"data",()=>{if(!$.output)return;return E6.decompile($.output).slice(1)}),Y.validate){if($.output){let G=E6.decompile($.output);if(G[0]!==KJ.OP_RETURN)throw new TypeError("Output is invalid");if(!G.slice(1).every(r1.typeforce.Buffer))throw new TypeError("Output is invalid");if($.data&&!r1.stacksEqual($.data,J.data))throw new TypeError("Data mismatch")}}return Object.assign(J,$)}zJ.p2data=EK});var RJ=y((CJ)=>{Object.defineProperty(CJ,"__esModule",{value:!0});CJ.p2ms=void 0;var HK=S1(),u9=X1(),l0=Q1(),v8=W8(),o9=u9.OPS,H6=o9.OP_RESERVED;function FK($,Y){if(!$.input&&!$.output&&!($.pubkeys&&$.m!==void 0)&&!$.signatures)throw new TypeError("Not enough data");Y=Object.assign({validate:!0},Y||{});function q(Z){return u9.isCanonicalScriptSignature(Z)||(Y.allowIncomplete&&Z===o9.OP_0)!==void 0}l0.typeforce({network:l0.typeforce.maybe(l0.typeforce.Object),m:l0.typeforce.maybe(l0.typeforce.Number),n:l0.typeforce.maybe(l0.typeforce.Number),output:l0.typeforce.maybe(l0.typeforce.Buffer),pubkeys:l0.typeforce.maybe(l0.typeforce.arrayOf(l0.isPoint)),signatures:l0.typeforce.maybe(l0.typeforce.arrayOf(q)),input:l0.typeforce.maybe(l0.typeforce.Buffer)},$);let G={network:$.network||HK.bitcoin},Q=[],O=!1;function X(Z){if(O)return;O=!0,Q=u9.decompile(Z),G.m=Q[0]-H6,G.n=Q[Q.length-2]-H6,G.pubkeys=Q.slice(1,-2)}if(v8.prop(G,"output",()=>{if(!$.m)return;if(!G.n)return;if(!$.pubkeys)return;return u9.compile([].concat(H6+$.m,$.pubkeys,H6+G.n,o9.OP_CHECKMULTISIG))}),v8.prop(G,"m",()=>{if(!G.output)return;return X(G.output),G.m}),v8.prop(G,"n",()=>{if(!G.pubkeys)return;return G.pubkeys.length}),v8.prop(G,"pubkeys",()=>{if(!$.output)return;return X($.output),G.pubkeys}),v8.prop(G,"signatures",()=>{if(!$.input)return;return u9.decompile($.input).slice(1)}),v8.prop(G,"input",()=>{if(!$.signatures)return;return u9.compile([o9.OP_0].concat($.signatures))}),v8.prop(G,"witness",()=>{if(!G.input)return;return[]}),v8.prop(G,"name",()=>{if(!G.m||!G.n)return;return`p2ms(${G.m} of ${G.n})`}),Y.validate){if($.output){if(X($.output),!l0.typeforce.Number(Q[0]))throw new TypeError("Output is invalid");if(!l0.typeforce.Number(Q[Q.length-2]))throw new TypeError("Output is invalid");if(Q[Q.length-1]!==o9.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(G.m<=0||G.n>16||G.m>G.n||G.n!==Q.length-3)throw new TypeError("Output is invalid");if(!G.pubkeys.every((Z)=>l0.isPoint(Z)))throw new TypeError("Output is invalid");if($.m!==void 0&&$.m!==G.m)throw new TypeError("m mismatch");if($.n!==void 0&&$.n!==G.n)throw new TypeError("n mismatch");if($.pubkeys&&!l0.stacksEqual($.pubkeys,G.pubkeys))throw new TypeError("Pubkeys mismatch")}if($.pubkeys){if($.n!==void 0&&$.n!==$.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(G.n=$.pubkeys.length,G.n<G.m)throw new TypeError("Pubkey count cannot be less than m")}if($.signatures){if($.signatures.length<G.m)throw new TypeError("Not enough signatures provided");if($.signatures.length>G.m)throw new TypeError("Too many signatures provided")}if($.input){if($.input[0]!==o9.OP_0)throw new TypeError("Input is invalid");if(G.signatures.length===0||!G.signatures.every(q))throw new TypeError("Input has invalid signature(s)");if($.signatures&&!l0.stacksEqual($.signatures,G.signatures))throw new TypeError("Signature mismatch");if($.m!==void 0&&$.m!==$.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(G,$)}CJ.p2ms=FK});var FJ=y((EJ)=>{Object.defineProperty(EJ,"__esModule",{value:!0});EJ.p2pk=void 0;var PK=S1(),n9=X1(),h1=Q1(),p9=W8(),AJ=n9.OPS;function BK($,Y){if(!$.input&&!$.output&&!$.pubkey&&!$.input&&!$.signature)throw new TypeError("Not enough data");Y=Object.assign({validate:!0},Y||{}),h1.typeforce({network:h1.typeforce.maybe(h1.typeforce.Object),output:h1.typeforce.maybe(h1.typeforce.Buffer),pubkey:h1.typeforce.maybe(h1.isPoint),signature:h1.typeforce.maybe(n9.isCanonicalScriptSignature),input:h1.typeforce.maybe(h1.typeforce.Buffer)},$);let q=p9.value(()=>{return n9.decompile($.input)}),G={name:"p2pk",network:$.network||PK.bitcoin};if(p9.prop(G,"output",()=>{if(!$.pubkey)return;return n9.compile([$.pubkey,AJ.OP_CHECKSIG])}),p9.prop(G,"pubkey",()=>{if(!$.output)return;return $.output.slice(1,-1)}),p9.prop(G,"signature",()=>{if(!$.input)return;return q()[0]}),p9.prop(G,"input",()=>{if(!$.signature)return;return n9.compile([$.signature])}),p9.prop(G,"witness",()=>{if(!G.input)return;return[]}),Y.validate){if($.output){if($.output[$.output.length-1]!==AJ.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!h1.isPoint(G.pubkey))throw new TypeError("Output pubkey is invalid");if($.pubkey&&!$.pubkey.equals(G.pubkey))throw new TypeError("Pubkey mismatch")}if($.signature){if($.input&&!$.input.equals(G.input))throw new TypeError("Signature mismatch")}if($.input){if(q().length!==1)throw new TypeError("Input is invalid");if(!n9.isCanonicalScriptSignature(G.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(G,$)}EJ.p2pk=BK});var wJ=y((PJ)=>{Object.defineProperty(PJ,"__esModule",{value:!0});PJ.sha1=PJ.SHA1=void 0;var S4=TK(),F6=wK(),v5=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),_8=new Uint32Array(80);class k4 extends S4.HashMD{constructor(){super(64,20,8,!1);this.A=v5[0]|0,this.B=v5[1]|0,this.C=v5[2]|0,this.D=v5[3]|0,this.E=v5[4]|0}get(){let{A:$,B:Y,C:q,D:J,E:G}=this;return[$,Y,q,J,G]}set($,Y,q,J,G){this.A=$|0,this.B=Y|0,this.C=q|0,this.D=J|0,this.E=G|0}process($,Y){for(let X=0;X<16;X++,Y+=4)_8[X]=$.getUint32(Y,!1);for(let X=16;X<80;X++)_8[X]=F6.rotl(_8[X-3]^_8[X-8]^_8[X-14]^_8[X-16],1);let{A:q,B:J,C:G,D:Q,E:O}=this;for(let X=0;X<80;X++){let Z,U;if(X<20)Z=S4.Chi(J,G,Q),U=1518500249;else if(X<40)Z=J^G^Q,U=1859775393;else if(X<60)Z=S4.Maj(J,G,Q),U=2400959708;else Z=J^G^Q,U=3395469782;let N=F6.rotl(q,5)+Z+O+U+_8[X]|0;O=Q,Q=G,G=F6.rotl(J,30),J=q,q=N}q=q+this.A|0,J=J+this.B|0,G=G+this.C|0,Q=Q+this.D|0,O=O+this.E|0,this.set(q,J,G,Q,O)}roundClean(){_8.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}}PJ.SHA1=k4;PJ.sha1=F6.wrapConstructor(()=>new k4)});var t1=y((vJ)=>{Object.defineProperty(vJ,"__esModule",{value:!0});vJ.taggedHash=vJ.TAGGED_HASH_PREFIXES=vJ.TAGS=vJ.hash256=vJ.hash160=vJ.sha256=vJ.sha1=vJ.ripemd160=void 0;var TJ=vK(),_K=wJ(),P6=x4();function SK($){return Buffer.from(TJ.ripemd160(Uint8Array.from($)))}vJ.ripemd160=SK;function kK($){return Buffer.from(_K.sha1(Uint8Array.from($)))}vJ.sha1=kK;function IJ($){return Buffer.from(P6.sha256(Uint8Array.from($)))}vJ.sha256=IJ;function xK($){return Buffer.from(TJ.ripemd160(P6.sha256(Uint8Array.from($))))}vJ.hash160=xK;function fK($){return Buffer.from(P6.sha256(P6.sha256(Uint8Array.from($))))}vJ.hash256=fK;vJ.TAGS=["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"];vJ.TAGGED_HASH_PREFIXES={"BIP0340/challenge":Buffer.from([123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124,123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124]),"BIP0340/aux":Buffer.from([241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144,241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144]),"BIP0340/nonce":Buffer.from([7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47,7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47]),TapLeaf:Buffer.from([174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238,174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238]),TapBranch:Buffer.from([25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21,25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21]),TapSighash:Buffer.from([244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49,244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49]),TapTweak:Buffer.from([232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233,232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233]),"KeyAgg list":Buffer.from([72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240,72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240]),"KeyAgg coefficient":Buffer.from([191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129,191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129])};function mK($,Y){return IJ(Buffer.concat([vJ.TAGGED_HASH_PREFIXES[$],Y]))}vJ.taggedHash=mK});var xJ=y((xP,kJ)=>{function cK($){if($.length>=255)throw new TypeError("Alphabet too long");var Y=new Uint8Array(256);for(var q=0;q<Y.length;q++)Y[q]=255;for(var J=0;J<$.length;J++){var G=$.charAt(J),Q=G.charCodeAt(0);if(Y[Q]!==255)throw new TypeError(G+" is ambiguous");Y[Q]=J}var O=$.length,X=$.charAt(0),Z=Math.log(O)/Math.log(256),U=Math.log(256)/Math.log(O);function N(L){if(L instanceof Uint8Array);else if(ArrayBuffer.isView(L))L=new Uint8Array(L.buffer,L.byteOffset,L.byteLength);else if(Array.isArray(L))L=Uint8Array.from(L);if(!(L instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(L.length===0)return"";var j=0,D=0,B=0,R=L.length;while(B!==R&&L[B]===0)B++,j++;var A=(R-B)*U+1>>>0,w=new Uint8Array(A);while(B!==R){var I=L[B],k=0;for(var p=A-1;(I!==0||k<D)&&p!==-1;p--,k++)I+=256*w[p]>>>0,w[p]=I%O>>>0,I=I/O>>>0;if(I!==0)throw new Error("Non-zero carry");D=k,B++}var x=A-D;while(x!==A&&w[x]===0)x++;var G0=X.repeat(j);for(;x<A;++x)G0+=$.charAt(w[x]);return G0}function V(L){if(typeof L!=="string")throw new TypeError("Expected String");if(L.length===0)return new Uint8Array;var j=0,D=0,B=0;while(L[j]===X)D++,j++;var R=(L.length-j)*Z+1>>>0,A=new Uint8Array(R);while(L[j]){var w=Y[L.charCodeAt(j)];if(w===255)return;var I=0;for(var k=R-1;(w!==0||I<B)&&k!==-1;k--,I++)w+=O*A[k]>>>0,A[k]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");B=I,j++}var p=R-B;while(p!==R&&A[p]===0)p++;var x=new Uint8Array(D+(R-p)),G0=D;while(p!==R)x[G0++]=A[p++];return x}function z(L){var j=V(L);if(j)return j;throw new Error("Non-base"+O+" character")}return{encode:N,decodeUnsafe:V,decode:z}}kJ.exports=cK});var mJ=y((fP,fJ)=>{var uK=xJ();fJ.exports=uK("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")});var bJ=y((mP,gJ)=>{var f4=mJ();gJ.exports=function($){function Y(Q){var O=Uint8Array.from(Q),X=$(O),Z=O.length+4,U=new Uint8Array(Z);return U.set(O,0),U.set(X.subarray(0,4),O.length),f4.encode(U,Z)}function q(Q){var O=Q.slice(0,-4),X=Q.slice(-4),Z=$(O);if(X[0]^Z[0]|X[1]^Z[1]|X[2]^Z[2]|X[3]^Z[3])return;return O}function J(Q){var O=f4.decodeUnsafe(Q);if(!O)return;return q(O)}function G(Q){var O=f4.decode(Q),X=q(O,$);if(!X)throw new Error("Invalid checksum");return X}return{encode:Y,decode:G,decodeUnsafe:J}}});var B6=y((gP,yJ)=>{var{sha256:dJ}=x4(),oK=bJ();function pK($){return dJ(dJ($))}yJ.exports=oK(pK)});var uJ=y((hJ)=>{Object.defineProperty(hJ,"__esModule",{value:!0});hJ.p2pkh=void 0;var m4=t1(),nK=S1(),a9=X1(),M1=Q1(),L8=W8(),lJ=B6(),S8=a9.OPS;function aK($,Y){if(!$.address&&!$.hash&&!$.output&&!$.pubkey&&!$.input)throw new TypeError("Not enough data");Y=Object.assign({validate:!0},Y||{}),M1.typeforce({network:M1.typeforce.maybe(M1.typeforce.Object),address:M1.typeforce.maybe(M1.typeforce.String),hash:M1.typeforce.maybe(M1.typeforce.BufferN(20)),output:M1.typeforce.maybe(M1.typeforce.BufferN(25)),pubkey:M1.typeforce.maybe(M1.isPoint),signature:M1.typeforce.maybe(a9.isCanonicalScriptSignature),input:M1.typeforce.maybe(M1.typeforce.Buffer)},$);let q=L8.value(()=>{let O=Buffer.from(lJ.decode($.address)),X=O.readUInt8(0),Z=O.slice(1);return{version:X,hash:Z}}),J=L8.value(()=>{return a9.decompile($.input)}),G=$.network||nK.bitcoin,Q={name:"p2pkh",network:G};if(L8.prop(Q,"address",()=>{if(!Q.hash)return;let O=Buffer.allocUnsafe(21);return O.writeUInt8(G.pubKeyHash,0),Q.hash.copy(O,1),lJ.encode(O)}),L8.prop(Q,"hash",()=>{if($.output)return $.output.slice(3,23);if($.address)return q().hash;if($.pubkey||Q.pubkey)return m4.hash160($.pubkey||Q.pubkey)}),L8.prop(Q,"output",()=>{if(!Q.hash)return;return a9.compile([S8.OP_DUP,S8.OP_HASH160,Q.hash,S8.OP_EQUALVERIFY,S8.OP_CHECKSIG])}),L8.prop(Q,"pubkey",()=>{if(!$.input)return;return J()[1]}),L8.prop(Q,"signature",()=>{if(!$.input)return;return J()[0]}),L8.prop(Q,"input",()=>{if(!$.pubkey)return;if(!$.signature)return;return a9.compile([$.signature,$.pubkey])}),L8.prop(Q,"witness",()=>{if(!Q.input)return;return[]}),Y.validate){let O=Buffer.from([]);if($.address){if(q().version!==G.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(q().hash.length!==20)throw new TypeError("Invalid address");O=q().hash}if($.hash)if(O.length>0&&!O.equals($.hash))throw new TypeError("Hash mismatch");else O=$.hash;if($.output){if($.output.length!==25||$.output[0]!==S8.OP_DUP||$.output[1]!==S8.OP_HASH160||$.output[2]!==20||$.output[23]!==S8.OP_EQUALVERIFY||$.output[24]!==S8.OP_CHECKSIG)throw new TypeError("Output is invalid");let X=$.output.slice(3,23);if(O.length>0&&!O.equals(X))throw new TypeError("Hash mismatch");else O=X}if($.pubkey){let X=m4.hash160($.pubkey);if(O.length>0&&!O.equals(X))throw new TypeError("Hash mismatch");else O=X}if($.input){let X=J();if(X.length!==2)throw new TypeError("Input is invalid");if(!a9.isCanonicalScriptSignature(X[0]))throw new TypeError("Input has invalid signature");if(!M1.isPoint(X[1]))throw new TypeError("Input has invalid pubkey");if($.signature&&!$.signature.equals(X[0]))throw new TypeError("Signature mismatch");if($.pubkey&&!$.pubkey.equals(X[1]))throw new TypeError("Pubkey mismatch");let Z=m4.hash160(X[1]);if(O.length>0&&!O.equals(Z))throw new TypeError("Hash mismatch")}}return Object.assign(Q,$)}hJ.p2pkh=aK});var iJ=y((nJ)=>{Object.defineProperty(nJ,"__esModule",{value:!0});nJ.p2sh=void 0;var oJ=t1(),iK=S1(),$8=X1(),x0=Q1(),e1=W8(),pJ=B6(),_5=$8.OPS;function sK($,Y){if(!$.address&&!$.hash&&!$.output&&!$.redeem&&!$.input)throw new TypeError("Not enough data");Y=Object.assign({validate:!0},Y||{}),x0.typeforce({network:x0.typeforce.maybe(x0.typeforce.Object),address:x0.typeforce.maybe(x0.typeforce.String),hash:x0.typeforce.maybe(x0.typeforce.BufferN(20)),output:x0.typeforce.maybe(x0.typeforce.BufferN(23)),redeem:x0.typeforce.maybe({network:x0.typeforce.maybe(x0.typeforce.Object),output:x0.typeforce.maybe(x0.typeforce.Buffer),input:x0.typeforce.maybe(x0.typeforce.Buffer),witness:x0.typeforce.maybe(x0.typeforce.arrayOf(x0.typeforce.Buffer))}),input:x0.typeforce.maybe(x0.typeforce.Buffer),witness:x0.typeforce.maybe(x0.typeforce.arrayOf(x0.typeforce.Buffer))},$);let q=$.network;if(!q)q=$.redeem&&$.redeem.network||iK.bitcoin;let J={network:q},G=e1.value(()=>{let X=Buffer.from(pJ.decode($.address)),Z=X.readUInt8(0),U=X.slice(1);return{version:Z,hash:U}}),Q=e1.value(()=>{return $8.decompile($.input)}),O=e1.value(()=>{let X=Q(),Z=X[X.length-1];return{network:q,output:Z===_5.OP_FALSE?Buffer.from([]):Z,input:$8.compile(X.slice(0,-1)),witness:$.witness||[]}});if(e1.prop(J,"address",()=>{if(!J.hash)return;let X=Buffer.allocUnsafe(21);return X.writeUInt8(J.network.scriptHash,0),J.hash.copy(X,1),pJ.encode(X)}),e1.prop(J,"hash",()=>{if($.output)return $.output.slice(2,22);if($.address)return G().hash;if(J.redeem&&J.redeem.output)return oJ.hash160(J.redeem.output)}),e1.prop(J,"output",()=>{if(!J.hash)return;return $8.compile([_5.OP_HASH160,J.hash,_5.OP_EQUAL])}),e1.prop(J,"redeem",()=>{if(!$.input)return;return O()}),e1.prop(J,"input",()=>{if(!$.redeem||!$.redeem.input||!$.redeem.output)return;return $8.compile([].concat($8.decompile($.redeem.input),$.redeem.output))}),e1.prop(J,"witness",()=>{if(J.redeem&&J.redeem.witness)return J.redeem.witness;if(J.input)return[]}),e1.prop(J,"name",()=>{let X=["p2sh"];if(J.redeem!==void 0&&J.redeem.name!==void 0)X.push(J.redeem.name);return X.join("-")}),Y.validate){let X=Buffer.from([]);if($.address){if(G().version!==q.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(G().hash.length!==20)throw new TypeError("Invalid address");X=G().hash}if($.hash)if(X.length>0&&!X.equals($.hash))throw new TypeError("Hash mismatch");else X=$.hash;if($.output){if($.output.length!==23||$.output[0]!==_5.OP_HASH160||$.output[1]!==20||$.output[22]!==_5.OP_EQUAL)throw new TypeError("Output is invalid");let U=$.output.slice(2,22);if(X.length>0&&!X.equals(U))throw new TypeError("Hash mismatch");else X=U}let Z=(U)=>{if(U.output){let N=$8.decompile(U.output);if(!N||N.length<1)throw new TypeError("Redeem.output too short");if(U.output.byteLength>520)throw new TypeError("Redeem.output unspendable if larger than 520 bytes");if($8.countNonPushOnlyOPs(N)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");let V=oJ.hash160(U.output);if(X.length>0&&!X.equals(V))throw new TypeError("Hash mismatch");else X=V}if(U.input){let N=U.input.length>0,V=U.witness&&U.witness.length>0;if(!N&&!V)throw new TypeError("Empty input");if(N&&V)throw new TypeError("Input and witness provided");if(N){let z=$8.decompile(U.input);if(!$8.isPushOnly(z))throw new TypeError("Non push-only scriptSig")}}};if($.input){let U=Q();if(!U||U.length<1)throw new TypeError("Input too short");if(!Buffer.isBuffer(O().output))throw new TypeError("Input is invalid");Z(O())}if($.redeem){if($.redeem.network&&$.redeem.network!==q)throw new TypeError("Network mismatch");if($.input){let U=O();if($.redeem.output&&!$.redeem.output.equals(U.output))throw new TypeError("Redeem.output mismatch");if($.redeem.input&&!$.redeem.input.equals(U.input))throw new TypeError("Redeem.input mismatch")}Z($.redeem)}if($.witness){if($.redeem&&$.redeem.witness&&!x0.stacksEqual($.redeem.witness,$.witness))throw new TypeError("Witness and redeem.witness mismatch")}}return Object.assign(J,$)}nJ.p2sh=sK});var S5=y((eJ)=>{Object.defineProperty(eJ,"__esModule",{value:!0});eJ.bech32m=eJ.bech32=void 0;var w6="qpzry9x8gf2tvdw0s3jn54khce6mua7l",rJ={};for(let $=0;$<w6.length;$++){let Y=w6.charAt($);rJ[Y]=$}function i9($){let Y=$>>25;return($&33554431)<<5^-(Y>>0&1)&996825010^-(Y>>1&1)&642813549^-(Y>>2&1)&513874426^-(Y>>3&1)&1027748829^-(Y>>4&1)&705979059}function sJ($){let Y=1;for(let q=0;q<$.length;++q){let J=$.charCodeAt(q);if(J<33||J>126)return"Invalid prefix ("+$+")";Y=i9(Y)^J>>5}Y=i9(Y);for(let q=0;q<$.length;++q){let J=$.charCodeAt(q);Y=i9(Y)^J&31}return Y}function g4($,Y,q,J){let G=0,Q=0,O=(1<<q)-1,X=[];for(let Z=0;Z<$.length;++Z){G=G<<Y|$[Z],Q+=Y;while(Q>=q)Q-=q,X.push(G>>Q&O)}if(J){if(Q>0)X.push(G<<q-Q&O)}else{if(Q>=Y)return"Excess padding";if(G<<q-Q&O)return"Non-zero padding"}return X}function rK($){return g4($,8,5,!0)}function tK($){let Y=g4($,5,8,!1);if(Array.isArray(Y))return Y}function eK($){let Y=g4($,5,8,!1);if(Array.isArray(Y))return Y;throw new Error(Y)}function tJ($){let Y;if($==="bech32")Y=1;else Y=734539939;function q(O,X,Z){if(Z=Z||90,O.length+7+X.length>Z)throw new TypeError("Exceeds length limit");O=O.toLowerCase();let U=sJ(O);if(typeof U==="string")throw new Error(U);let N=O+"1";for(let V=0;V<X.length;++V){let z=X[V];if(z>>5!==0)throw new Error("Non 5-bit word");U=i9(U)^z,N+=w6.charAt(z)}for(let V=0;V<6;++V)U=i9(U);U^=Y;for(let V=0;V<6;++V){let z=U>>(5-V)*5&31;N+=w6.charAt(z)}return N}function J(O,X){if(X=X||90,O.length<8)return O+" too short";if(O.length>X)return"Exceeds length limit";let Z=O.toLowerCase(),U=O.toUpperCase();if(O!==Z&&O!==U)return"Mixed-case string "+O;O=Z;let N=O.lastIndexOf("1");if(N===-1)return"No separator character for "+O;if(N===0)return"Missing prefix for "+O;let V=O.slice(0,N),z=O.slice(N+1);if(z.length<6)return"Data too short";let L=sJ(V);if(typeof L==="string")return L;let j=[];for(let D=0;D<z.length;++D){let B=z.charAt(D),R=rJ[B];if(R===void 0)return"Unknown character "+B;if(L=i9(L)^R,D+6>=z.length)continue;j.push(R)}if(L!==Y)return"Invalid checksum for "+O;return{prefix:V,words:j}}function G(O,X){let Z=J(O,X);if(typeof Z==="object")return Z}function Q(O,X){let Z=J(O,X);if(typeof Z==="object")return Z;throw new Error(Z)}return{decodeUnsafe:G,decode:Q,encode:q,toWords:rK,fromWordsUnsafe:tK,fromWords:eK}}eJ.bech32=tJ("bech32");eJ.bech32m=tJ("bech32m")});var GG=y((qG)=>{Object.defineProperty(qG,"__esModule",{value:!0});qG.p2wpkh=void 0;var b4=t1(),Yz=S1(),I6=X1(),r0=Q1(),k8=W8(),T6=S5(),YG=I6.OPS,qz=Buffer.alloc(0);function Jz($,Y){if(!$.address&&!$.hash&&!$.output&&!$.pubkey&&!$.witness)throw new TypeError("Not enough data");Y=Object.assign({validate:!0},Y||{}),r0.typeforce({address:r0.typeforce.maybe(r0.typeforce.String),hash:r0.typeforce.maybe(r0.typeforce.BufferN(20)),input:r0.typeforce.maybe(r0.typeforce.BufferN(0)),network:r0.typeforce.maybe(r0.typeforce.Object),output:r0.typeforce.maybe(r0.typeforce.BufferN(22)),pubkey:r0.typeforce.maybe(r0.isPoint),signature:r0.typeforce.maybe(I6.isCanonicalScriptSignature),witness:r0.typeforce.maybe(r0.typeforce.arrayOf(r0.typeforce.Buffer))},$);let q=k8.value(()=>{let Q=T6.bech32.decode($.address),O=Q.words.shift(),X=T6.bech32.fromWords(Q.words);return{version:O,prefix:Q.prefix,data:Buffer.from(X)}}),J=$.network||Yz.bitcoin,G={name:"p2wpkh",network:J};if(k8.prop(G,"address",()=>{if(!G.hash)return;let Q=T6.bech32.toWords(G.hash);return Q.unshift(0),T6.bech32.encode(J.bech32,Q)}),k8.prop(G,"hash",()=>{if($.output)return $.output.slice(2,22);if($.address)return q().data;if($.pubkey||G.pubkey)return b4.hash160($.pubkey||G.pubkey)}),k8.prop(G,"output",()=>{if(!G.hash)return;return I6.compile([YG.OP_0,G.hash])}),k8.prop(G,"pubkey",()=>{if($.pubkey)return $.pubkey;if(!$.witness)return;return $.witness[1]}),k8.prop(G,"signature",()=>{if(!$.witness)return;return $.witness[0]}),k8.prop(G,"input",()=>{if(!G.witness)return;return qz}),k8.prop(G,"witness",()=>{if(!$.pubkey)return;if(!$.signature)return;return[$.signature,$.pubkey]}),Y.validate){let Q=Buffer.from([]);if($.address){if(J&&J.bech32!==q().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(q().version!==0)throw new TypeError("Invalid address version");if(q().data.length!==20)throw new TypeError("Invalid address data");Q=q().data}if($.hash)if(Q.length>0&&!Q.equals($.hash))throw new TypeError("Hash mismatch");else Q=$.hash;if($.output){if($.output.length!==22||$.output[0]!==YG.OP_0||$.output[1]!==20)throw new TypeError("Output is invalid");if(Q.length>0&&!Q.equals($.output.slice(2)))throw new TypeError("Hash mismatch");else Q=$.output.slice(2)}if($.pubkey){let O=b4.hash160($.pubkey);if(Q.length>0&&!Q.equals(O))throw new TypeError("Hash mismatch");else Q=O;if(!r0.isPoint($.pubkey)||$.pubkey.length!==33)throw new TypeError("Invalid pubkey for p2wpkh")}if($.witness){if($.witness.length!==2)throw new TypeError("Witness is invalid");if(!I6.isCanonicalScriptSignature($.witness[0]))throw new TypeError("Witness has invalid signature");if(!r0.isPoint($.witness[1])||$.witness[1].length!==33)throw new TypeError("Witness has invalid pubkey");if($.signature&&!$.signature.equals($.witness[0]))throw new TypeError("Signature mismatch");if($.pubkey&&!$.pubkey.equals($.witness[1]))throw new TypeError("Pubkey mismatch");let O=b4.hash160($.witness[1]);if(Q.length>0&&!Q.equals(O))throw new TypeError("Hash mismatch")}}return Object.assign(G,$)}qG.p2wpkh=Jz});var UG=y((XG)=>{Object.defineProperty(XG,"__esModule",{value:!0});XG.p2wsh=void 0;var QG=t1(),Gz=S1(),D8=X1(),k0=Q1(),C8=W8(),v6=S5(),OG=D8.OPS,d4=Buffer.alloc(0);function _6($){if(Buffer.isBuffer($)&&$.length===65&&$[0]===4&&k0.isPoint($))return!0;else return!1}function Qz($,Y){if(!$.address&&!$.hash&&!$.output&&!$.redeem&&!$.witness)throw new TypeError("Not enough data");Y=Object.assign({validate:!0},Y||{}),k0.typeforce({network:k0.typeforce.maybe(k0.typeforce.Object),address:k0.typeforce.maybe(k0.typeforce.String),hash:k0.typeforce.maybe(k0.typeforce.BufferN(32)),output:k0.typeforce.maybe(k0.typeforce.BufferN(34)),redeem:k0.typeforce.maybe({input:k0.typeforce.maybe(k0.typeforce.Buffer),network:k0.typeforce.maybe(k0.typeforce.Object),output:k0.typeforce.maybe(k0.typeforce.Buffer),witness:k0.typeforce.maybe(k0.typeforce.arrayOf(k0.typeforce.Buffer))}),input:k0.typeforce.maybe(k0.typeforce.BufferN(0)),witness:k0.typeforce.maybe(k0.typeforce.arrayOf(k0.typeforce.Buffer))},$);let q=C8.value(()=>{let O=v6.bech32.decode($.address),X=O.words.shift(),Z=v6.bech32.fromWords(O.words);return{version:X,prefix:O.prefix,data:Buffer.from(Z)}}),J=C8.value(()=>{return D8.decompile($.redeem.input)}),G=$.network;if(!G)G=$.redeem&&$.redeem.network||Gz.bitcoin;let Q={network:G};if(C8.prop(Q,"address",()=>{if(!Q.hash)return;let O=v6.bech32.toWords(Q.hash);return O.unshift(0),v6.bech32.encode(G.bech32,O)}),C8.prop(Q,"hash",()=>{if($.output)return $.output.slice(2);if($.address)return q().data;if(Q.redeem&&Q.redeem.output)return QG.sha256(Q.redeem.output)}),C8.prop(Q,"output",()=>{if(!Q.hash)return;return D8.compile([OG.OP_0,Q.hash])}),C8.prop(Q,"redeem",()=>{if(!$.witness)return;return{output:$.witness[$.witness.length-1],input:d4,witness:$.witness.slice(0,-1)}}),C8.prop(Q,"input",()=>{if(!Q.witness)return;return d4}),C8.prop(Q,"witness",()=>{if($.redeem&&$.redeem.input&&$.redeem.input.length>0&&$.redeem.output&&$.redeem.output.length>0){let O=D8.toStack(J());return Q.redeem=Object.assign({witness:O},$.redeem),Q.redeem.input=d4,[].concat(O,$.redeem.output)}if(!$.redeem)return;if(!$.redeem.output)return;if(!$.redeem.witness)return;return[].concat($.redeem.witness,$.redeem.output)}),C8.prop(Q,"name",()=>{let O=["p2wsh"];if(Q.redeem!==void 0&&Q.redeem.name!==void 0)O.push(Q.redeem.name);return O.join("-")}),Y.validate){let O=Buffer.from([]);if($.address){if(q().prefix!==G.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(q().version!==0)throw new TypeError("Invalid address version");if(q().data.length!==32)throw new TypeError("Invalid address data");O=q().data}if($.hash)if(O.length>0&&!O.equals($.hash))throw new TypeError("Hash mismatch");else O=$.hash;if($.output){if($.output.length!==34||$.output[0]!==OG.OP_0||$.output[1]!==32)throw new TypeError("Output is invalid");let X=$.output.slice(2);if(O.length>0&&!O.equals(X))throw new TypeError("Hash mismatch");else O=X}if($.redeem){if($.redeem.network&&$.redeem.network!==G)throw new TypeError("Network mismatch");if($.redeem.input&&$.redeem.input.length>0&&$.redeem.witness&&$.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if($.redeem.output){let X=D8.decompile($.redeem.output);if(!X||X.length<1)throw new TypeError("Redeem.output is invalid");if($.redeem.output.byteLength>3600)throw new TypeError("Redeem.output unspendable if larger than 3600 bytes");if(D8.countNonPushOnlyOPs(X)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");let Z=QG.sha256($.redeem.output);if(O.length>0&&!O.equals(Z))throw new TypeError("Hash mismatch");else O=Z}if($.redeem.input&&!D8.isPushOnly(J()))throw new TypeError("Non push-only scriptSig");if($.witness&&$.redeem.witness&&!k0.stacksEqual($.witness,$.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if($.redeem.input&&J().some(_6)||$.redeem.output&&(D8.decompile($.redeem.output)||[]).some(_6))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if($.witness&&$.witness.length>0){let X=$.witness[$.witness.length-1];if($.redeem&&$.redeem.output&&!$.redeem.output.equals(X))throw new TypeError("Witness and redeem.output mismatch");if($.witness.some(_6)||(D8.decompile(X)||[]).some(_6))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(Q,$)}XG.p2wsh=Qz});var S6=y((NG)=>{Object.defineProperty(NG,"__esModule",{value:!0});NG.getEccLib=NG.initEccLib=void 0;var k5={};function Oz($){if(!$)k5.eccLib=$;else if($!==k5.eccLib)Zz($),k5.eccLib=$}NG.initEccLib=Oz;function Xz(){if(!k5.eccLib)throw new Error("No ECC Library provided. You must call initEccLib() with a valid TinySecp256k1Interface instance");return k5.eccLib}NG.getEccLib=Xz;var R8=($)=>Buffer.from($,"hex");function Zz($){k1(typeof $.isXOnlyPoint==="function"),k1($.isXOnlyPoint(R8("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),k1($.isXOnlyPoint(R8("fffffffffffffffffffffffffffffffffffffffffffffffffffffffeeffffc2e"))),k1($.isXOnlyPoint(R8("f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9"))),k1($.isXOnlyPoint(R8("0000000000000000000000000000000000000000000000000000000000000001"))),k1(!$.isXOnlyPoint(R8("0000000000000000000000000000000000000000000000000000000000000000"))),k1(!$.isXOnlyPoint(R8("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"))),k1(typeof $.xOnlyPointAddTweak==="function"),Uz.forEach((Y)=>{let q=$.xOnlyPointAddTweak(R8(Y.pubkey),R8(Y.tweak));if(Y.result===null)k1(q===null);else k1(q!==null),k1(q.parity===Y.parity),k1(Buffer.from(q.xOnlyPubkey).equals(R8(Y.result)))})}function k1($){if(!$)throw new Error("ecc library invalid")}var Uz=[{pubkey:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",tweak:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140",parity:-1,result:null},{pubkey:"1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b",tweak:"a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac",parity:1,result:"e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"},{pubkey:"2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991",tweak:"823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47",parity:0,result:"9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"}]});var f5=y((LG)=>{Object.defineProperty(LG,"__esModule",{value:!0});LG.BufferReader=LG.BufferWriter=LG.cloneBuffer=LG.reverseBuffer=LG.writeUInt64LE=LG.readUInt64LE=LG.varuint=void 0;var V9=Q1(),{typeforce:VG}=V9,x5=k6();LG.varuint=x5;function jG($,Y){if(typeof $!=="number")throw new Error("cannot write a non-number as a number");if($<0)throw new Error("specified a negative value for writing an unsigned value");if($>Y)throw new Error("RangeError: value out of range");if(Math.floor($)!==$)throw new Error("value has a fractional component")}function KG($,Y){let q=$.readUInt32LE(Y),J=$.readUInt32LE(Y+4);return J*=4294967296,jG(J+q,9007199254740991),J+q}LG.readUInt64LE=KG;function zG($,Y,q){return jG(Y,9007199254740991),$.writeInt32LE(Y&-1,q),$.writeUInt32LE(Math.floor(Y/4294967296),q+4),q+8}LG.writeUInt64LE=zG;function Mz($){if($.length<1)return $;let Y=$.length-1,q=0;for(let J=0;J<$.length/2;J++)q=$[J],$[J]=$[Y],$[Y]=q,Y--;return $}LG.reverseBuffer=Mz;function Vz($){let Y=Buffer.allocUnsafe($.length);return $.copy(Y),Y}LG.cloneBuffer=Vz;class y4{static withCapacity($){return new y4(Buffer.alloc($))}constructor($,Y=0){this.buffer=$,this.offset=Y,VG(V9.tuple(V9.Buffer,V9.UInt32),[$,Y])}writeUInt8($){this.offset=this.buffer.writeUInt8($,this.offset)}writeInt32($){this.offset=this.buffer.writeInt32LE($,this.offset)}writeUInt32($){this.offset=this.buffer.writeUInt32LE($,this.offset)}writeUInt64($){this.offset=zG(this.buffer,$,this.offset)}writeVarInt($){x5.encode($,this.buffer,this.offset),this.offset+=x5.encode.bytes}writeSlice($){if(this.buffer.length<this.offset+$.length)throw new Error("Cannot write slice out of bounds");this.offset+=$.copy(this.buffer,this.offset)}writeVarSlice($){this.writeVarInt($.length),this.writeSlice($)}writeVector($){this.writeVarInt($.length),$.forEach((Y)=>this.writeVarSlice(Y))}end(){if(this.buffer.length===this.offset)return this.buffer;throw new Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}}LG.BufferWriter=y4;class WG{constructor($,Y=0){this.buffer=$,this.offset=Y,VG(V9.tuple(V9.Buffer,V9.UInt32),[$,Y])}readUInt8(){let $=this.buffer.readUInt8(this.offset);return this.offset++,$}readInt32(){let $=this.buffer.readInt32LE(this.offset);return this.offset+=4,$}readUInt32(){let $=this.buffer.readUInt32LE(this.offset);return this.offset+=4,$}readUInt64(){let $=KG(this.buffer,this.offset);return this.offset+=8,$}readVarInt(){let $=x5.decode(this.buffer,this.offset);return this.offset+=x5.decode.bytes,$}readSlice($){if(this.buffer.length<this.offset+$)throw new Error("Cannot read slice out of bounds");let Y=this.buffer.slice(this.offset,this.offset+$);return this.offset+=$,Y}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){let $=this.readVarInt(),Y=[];for(let q=0;q<$;q++)Y.push(this.readVarSlice());return Y}}LG.BufferReader=WG});var x6=y((EG)=>{Object.defineProperty(EG,"__esModule",{value:!0});EG.tweakKey=EG.tapTweakHash=EG.tapleafHash=EG.findScriptPath=EG.toHashTree=EG.rootHashFromPath=EG.MAX_TAPTREE_DEPTH=EG.LEAF_VERSION_TAPSCRIPT=void 0;var x8=(w4(),C6(B4)),Dz=S6(),u4=t1(),DG=f5(),Rz=Q1();EG.LEAF_VERSION_TAPSCRIPT=192;EG.MAX_TAPTREE_DEPTH=128;var Az=($)=>("left"in $)&&("right"in $);function Ez($,Y){if($.length<33)throw new TypeError(`The control-block length is too small. Got ${$.length}, expected min 33.`);let q=($.length-33)/32,J=Y;for(let G=0;G<q;G++){let Q=$.slice(33+32*G,65+32*G);if(J.compare(Q)<0)J=c4(J,Q);else J=c4(Q,J)}return J}EG.rootHashFromPath=Ez;function l4($){if(Rz.isTapleaf($))return{hash:RG($)};let Y=[l4($[0]),l4($[1])];Y.sort((G,Q)=>G.hash.compare(Q.hash));let[q,J]=Y;return{hash:c4(q.hash,J.hash),left:q,right:J}}EG.toHashTree=l4;function h4($,Y){if(Az($)){let q=h4($.left,Y);if(q!==void 0)return[...q,$.right.hash];let J=h4($.right,Y);if(J!==void 0)return[...J,$.left.hash]}else if($.hash.equals(Y))return[];return}EG.findScriptPath=h4;function RG($){let Y=$.version||EG.LEAF_VERSION_TAPSCRIPT;return u4.taggedHash("TapLeaf",x8.Buffer.concat([x8.Buffer.from([Y]),Fz($.output)]))}EG.tapleafHash=RG;function AG($,Y){return u4.taggedHash("TapTweak",x8.Buffer.concat(Y?[$,Y]:[$]))}EG.tapTweakHash=AG;function Hz($,Y){if(!x8.Buffer.isBuffer($))return null;if($.length!==32)return null;if(Y&&Y.length!==32)return null;let q=AG($,Y),J=Dz.getEccLib().xOnlyPointAddTweak($,q);if(!J||J.xOnlyPubkey===null)return null;return{parity:J.parity,x:x8.Buffer.from(J.xOnlyPubkey)}}EG.tweakKey=Hz;function c4($,Y){return u4.taggedHash("TapBranch",x8.Buffer.concat([$,Y]))}function Fz($){let Y=DG.varuint.encodingLength($.length),q=x8.Buffer.allocUnsafe(Y);return DG.varuint.encode($.length,q),x8.Buffer.concat([q,$])}});var _G=y((IG)=>{Object.defineProperty(IG,"__esModule",{value:!0});IG.p2tr=void 0;var o4=(w4(),C6(B4)),_z=S1(),p4=X1(),D0=Q1(),PG=S6(),C1=x6(),x1=W8(),BG=S5(),Sz=f6(),wG=p4.OPS,TG=1,kz=80;function xz($,Y){if(!$.address&&!$.output&&!$.pubkey&&!$.internalPubkey&&!($.witness&&$.witness.length>1))throw new TypeError("Not enough data");Y=Object.assign({validate:!0},Y||{}),D0.typeforce({address:D0.typeforce.maybe(D0.typeforce.String),input:D0.typeforce.maybe(D0.typeforce.BufferN(0)),network:D0.typeforce.maybe(D0.typeforce.Object),output:D0.typeforce.maybe(D0.typeforce.BufferN(34)),internalPubkey:D0.typeforce.maybe(D0.typeforce.BufferN(32)),hash:D0.typeforce.maybe(D0.typeforce.BufferN(32)),pubkey:D0.typeforce.maybe(D0.typeforce.BufferN(32)),signature:D0.typeforce.maybe(D0.typeforce.anyOf(D0.typeforce.BufferN(64),D0.typeforce.BufferN(65))),witness:D0.typeforce.maybe(D0.typeforce.arrayOf(D0.typeforce.Buffer)),scriptTree:D0.typeforce.maybe(D0.isTaptree),redeem:D0.typeforce.maybe({output:D0.typeforce.maybe(D0.typeforce.Buffer),redeemVersion:D0.typeforce.maybe(D0.typeforce.Number),witness:D0.typeforce.maybe(D0.typeforce.arrayOf(D0.typeforce.Buffer))}),redeemVersion:D0.typeforce.maybe(D0.typeforce.Number)},$);let q=x1.value(()=>{return Sz.fromBech32($.address)}),J=x1.value(()=>{if(!$.witness||!$.witness.length)return;if($.witness.length>=2&&$.witness[$.witness.length-1][0]===kz)return $.witness.slice(0,-1);return $.witness.slice()}),G=x1.value(()=>{if($.scriptTree)return C1.toHashTree($.scriptTree);if($.hash)return{hash:$.hash};return}),Q=$.network||_z.bitcoin,O={name:"p2tr",network:Q};if(x1.prop(O,"address",()=>{if(!O.pubkey)return;let X=BG.bech32m.toWords(O.pubkey);return X.unshift(TG),BG.bech32m.encode(Q.bech32,X)}),x1.prop(O,"hash",()=>{let X=G();if(X)return X.hash;let Z=J();if(Z&&Z.length>1){let U=Z[Z.length-1],N=U[0]&D0.TAPLEAF_VERSION_MASK,V=Z[Z.length-2],z=C1.tapleafHash({output:V,version:N});return C1.rootHashFromPath(U,z)}return null}),x1.prop(O,"output",()=>{if(!O.pubkey)return;return p4.compile([wG.OP_1,O.pubkey])}),x1.prop(O,"redeemVersion",()=>{if($.redeemVersion)return $.redeemVersion;if($.redeem&&$.redeem.redeemVersion!==void 0&&$.redeem.redeemVersion!==null)return $.redeem.redeemVersion;return C1.LEAF_VERSION_TAPSCRIPT}),x1.prop(O,"redeem",()=>{let X=J();if(!X||X.length<2)return;return{output:X[X.length-2],witness:X.slice(0,-2),redeemVersion:X[X.length-1][0]&D0.TAPLEAF_VERSION_MASK}}),x1.prop(O,"pubkey",()=>{if($.pubkey)return $.pubkey;if($.output)return $.output.slice(2);if($.address)return q().data;if(O.internalPubkey){let X=C1.tweakKey(O.internalPubkey,O.hash);if(X)return X.x}}),x1.prop(O,"internalPubkey",()=>{if($.internalPubkey)return $.internalPubkey;let X=J();if(X&&X.length>1)return X[X.length-1].slice(1,33)}),x1.prop(O,"signature",()=>{if($.signature)return $.signature;let X=J();if(!X||X.length!==1)return;return X[0]}),x1.prop(O,"witness",()=>{if($.witness)return $.witness;let X=G();if(X&&$.redeem&&$.redeem.output&&$.internalPubkey){let Z=C1.tapleafHash({output:$.redeem.output,version:O.redeemVersion}),U=C1.findScriptPath(X,Z);if(!U)return;let N=C1.tweakKey($.internalPubkey,X.hash);if(!N)return;let V=o4.Buffer.concat([o4.Buffer.from([O.redeemVersion|N.parity]),$.internalPubkey].concat(U));return[$.redeem.output,V]}if($.signature)return[$.signature]}),Y.validate){let X=o4.Buffer.from([]);if($.address){if(Q&&Q.bech32!==q().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(q().version!==TG)throw new TypeError("Invalid address version");if(q().data.length!==32)throw new TypeError("Invalid address data");X=q().data}if($.pubkey)if(X.length>0&&!X.equals($.pubkey))throw new TypeError("Pubkey mismatch");else X=$.pubkey;if($.output){if($.output.length!==34||$.output[0]!==wG.OP_1||$.output[1]!==32)throw new TypeError("Output is invalid");if(X.length>0&&!X.equals($.output.slice(2)))throw new TypeError("Pubkey mismatch");else X=$.output.slice(2)}if($.internalPubkey){let N=C1.tweakKey($.internalPubkey,O.hash);if(X.length>0&&!X.equals(N.x))throw new TypeError("Pubkey mismatch");else X=N.x}if(X&&X.length){if(!PG.getEccLib().isXOnlyPoint(X))throw new TypeError("Invalid pubkey for p2tr")}let Z=G();if($.hash&&Z){if(!$.hash.equals(Z.hash))throw new TypeError("Hash mismatch")}if($.redeem&&$.redeem.output&&Z){let N=C1.tapleafHash({output:$.redeem.output,version:O.redeemVersion});if(!C1.findScriptPath(Z,N))throw new TypeError("Redeem script not in tree")}let U=J();if($.redeem&&O.redeem){if($.redeem.redeemVersion){if($.redeem.redeemVersion!==O.redeem.redeemVersion)throw new TypeError("Redeem.redeemVersion and witness mismatch")}if($.redeem.output){if(p4.decompile($.redeem.output).length===0)throw new TypeError("Redeem.output is invalid");if(O.redeem.output&&!$.redeem.output.equals(O.redeem.output))throw new TypeError("Redeem.output and witness mismatch")}if($.redeem.witness){if(O.redeem.witness&&!D0.stacksEqual($.redeem.witness,O.redeem.witness))throw new TypeError("Redeem.witness and witness mismatch")}}if(U&&U.length)if(U.length===1){if($.signature&&!$.signature.equals(U[0]))throw new TypeError("Signature mismatch")}else{let N=U[U.length-1];if(N.length<33)throw new TypeError(`The control-block length is too small. Got ${N.length}, expected min 33.`);if((N.length-33)%32!==0)throw new TypeError(`The control-block length of ${N.length} is incorrect!`);let V=(N.length-33)/32;if(V>128)throw new TypeError(`The script path is too long. Got ${V}, expected max 128.`);let z=N.slice(1,33);if($.internalPubkey&&!$.internalPubkey.equals(z))throw new TypeError("Internal pubkey mismatch");if(!PG.getEccLib().isXOnlyPoint(z))throw new TypeError("Invalid internalPubkey for p2tr witness");let L=N[0]&D0.TAPLEAF_VERSION_MASK,j=U[U.length-2],D=C1.tapleafHash({output:j,version:L}),B=C1.rootHashFromPath(N,D),R=C1.tweakKey(z,B);if(!R)throw new TypeError("Invalid outputKey for p2tr witness");if(X.length&&!X.equals(R.x))throw new TypeError("Pubkey mismatch for p2tr witness");if(R.parity!==(N[0]&1))throw new Error("Incorrect parity")}}return Object.assign(O,$)}IG.p2tr=xz});var s9=y((Y8)=>{Object.defineProperty(Y8,"__esModule",{value:!0});Y8.p2tr=Y8.p2wsh=Y8.p2wpkh=Y8.p2sh=Y8.p2pkh=Y8.p2pk=Y8.p2ms=Y8.embed=void 0;var fz=LJ();Object.defineProperty(Y8,"embed",{enumerable:!0,get:function(){return fz.p2data}});var mz=RJ();Object.defineProperty(Y8,"p2ms",{enumerable:!0,get:function(){return mz.p2ms}});var gz=FJ();Object.defineProperty(Y8,"p2pk",{enumerable:!0,get:function(){return gz.p2pk}});var bz=uJ();Object.defineProperty(Y8,"p2pkh",{enumerable:!0,get:function(){return bz.p2pkh}});var dz=iJ();Object.defineProperty(Y8,"p2sh",{enumerable:!0,get:function(){return dz.p2sh}});var yz=GG();Object.defineProperty(Y8,"p2wpkh",{enumerable:!0,get:function(){return yz.p2wpkh}});var lz=UG();Object.defineProperty(Y8,"p2wsh",{enumerable:!0,get:function(){return lz.p2wsh}});var hz=_G();Object.defineProperty(Y8,"p2tr",{enumerable:!0,get:function(){return hz.p2tr}})});var f6=y((uG)=>{Object.defineProperty(uG,"__esModule",{value:!0});uG.toOutputScript=uG.fromOutputScript=uG.toBech32=uG.toBase58Check=uG.fromBech32=uG.fromBase58Check=void 0;var SG=S1(),q8=s9(),kG=X1(),m6=Q1(),r9=S5(),xG=B6(),fG=40,mG=2,gG=16,bG=2,dG=80,yG="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function uz($,Y){let q=$.slice(2);if(q.length<mG||q.length>fG)throw new TypeError("Invalid program length for segwit address");let J=$[0]-dG;if(J<bG||J>gG)throw new TypeError("Invalid version for segwit address");if($[1]!==q.length)throw new TypeError("Invalid script for segwit address");return console.warn(yG),cG(q,J,Y.bech32)}function lG($){let Y=Buffer.from(xG.decode($));if(Y.length<21)throw new TypeError($+" is too short");if(Y.length>21)throw new TypeError($+" is too long");let q=Y.readUInt8(0),J=Y.slice(1);return{version:q,hash:J}}uG.fromBase58Check=lG;function hG($){let Y,q;try{Y=r9.bech32.decode($)}catch(G){}if(Y){if(q=Y.words[0],q!==0)throw new TypeError($+" uses wrong encoding")}else if(Y=r9.bech32m.decode($),q=Y.words[0],q===0)throw new TypeError($+" uses wrong encoding");let J=r9.bech32.fromWords(Y.words.slice(1));return{version:q,prefix:Y.prefix,data:Buffer.from(J)}}uG.fromBech32=hG;function oz($,Y){m6.typeforce(m6.tuple(m6.Hash160bit,m6.UInt8),arguments);let q=Buffer.allocUnsafe(21);return q.writeUInt8(Y,0),$.copy(q,1),xG.encode(q)}uG.toBase58Check=oz;function cG($,Y,q){let J=r9.bech32.toWords($);return J.unshift(Y),Y===0?r9.bech32.encode(q,J):r9.bech32m.encode(q,J)}uG.toBech32=cG;function pz($,Y){Y=Y||SG.bitcoin;try{return q8.p2pkh({output:$,network:Y}).address}catch(q){}try{return q8.p2sh({output:$,network:Y}).address}catch(q){}try{return q8.p2wpkh({output:$,network:Y}).address}catch(q){}try{return q8.p2wsh({output:$,network:Y}).address}catch(q){}try{return q8.p2tr({output:$,network:Y}).address}catch(q){}try{return uz($,Y)}catch(q){}throw new Error(kG.toASM($)+" has no matching Address")}uG.fromOutputScript=pz;function nz($,Y){Y=Y||SG.bitcoin;let q,J;try{q=lG($)}catch(G){}if(q){if(q.version===Y.pubKeyHash)return q8.p2pkh({hash:q.hash}).output;if(q.version===Y.scriptHash)return q8.p2sh({hash:q.hash}).output}else{try{J=hG($)}catch(G){}if(J){if(J.prefix!==Y.bech32)throw new Error($+" has an invalid prefix");if(J.version===0){if(J.data.length===20)return q8.p2wpkh({hash:J.data}).output;if(J.data.length===32)return q8.p2wsh({hash:J.data}).output}else if(J.version===1){if(J.data.length===32)return q8.p2tr({pubkey:J.data}).output}else if(J.version>=bG&&J.version<=gG&&J.data.length>=mG&&J.data.length<=fG)return console.warn(yG),kG.compile([J.version+dG,J.data])}}throw new Error($+" has no matching Script")}uG.toOutputScript=nz});var aG=y((pG)=>{Object.defineProperty(pG,"__esModule",{value:!0});pG.fastMerkleRoot=void 0;function ez($,Y){if(!Array.isArray($))throw TypeError("Expected values Array");if(typeof Y!=="function")throw TypeError("Expected digest Function");let q=$.length,J=$.concat();while(q>1){let G=0;for(let Q=0;Q<q;Q+=2,++G){let O=J[Q],X=Q+1===q?O:J[Q+1],Z=Buffer.concat([O,X]);J[G]=Y(Z)}q=G}return J[0]}pG.fastMerkleRoot=ez});var t9=y((tG)=>{Object.defineProperty(tG,"__esModule",{value:!0});tG.Transaction=void 0;var c0=f5(),V1=t1(),iG=X1(),$W=X1(),H0=Q1(),{typeforce:J8}=H0;function G8($){let Y=$.length;return c0.varuint.encodingLength(Y)+Y}function YW($){let Y=$.length;return c0.varuint.encodingLength(Y)+$.reduce((q,J)=>{return q+G8(J)},0)}var f8=Buffer.allocUnsafe(0),sG=[],n4=Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),rG=Buffer.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),qW=Buffer.from("ffffffffffffffff","hex"),JW={script:f8,valueBuffer:qW};function GW($){return $.value!==void 0}class R0{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer($,Y){let q=new c0.BufferReader($),J=new R0;J.version=q.readInt32();let G=q.readUInt8(),Q=q.readUInt8(),O=!1;if(G===R0.ADVANCED_TRANSACTION_MARKER&&Q===R0.ADVANCED_TRANSACTION_FLAG)O=!0;else q.offset-=2;let X=q.readVarInt();for(let U=0;U<X;++U)J.ins.push({hash:q.readSlice(32),index:q.readUInt32(),script:q.readVarSlice(),sequence:q.readUInt32(),witness:sG});let Z=q.readVarInt();for(let U=0;U<Z;++U)J.outs.push({value:q.readUInt64(),script:q.readVarSlice()});if(O){for(let U=0;U<X;++U)J.ins[U].witness=q.readVector();if(!J.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(J.locktime=q.readUInt32(),Y)return J;if(q.offset!==$.length)throw new Error("Transaction has unexpected data");return J}static fromHex($){return R0.fromBuffer(Buffer.from($,"hex"),!1)}static isCoinbaseHash($){J8(H0.Hash256bit,$);for(let Y=0;Y<32;++Y)if($[Y]!==0)return!1;return!0}isCoinbase(){return this.ins.length===1&&R0.isCoinbaseHash(this.ins[0].hash)}addInput($,Y,q,J){if(J8(H0.tuple(H0.Hash256bit,H0.UInt32,H0.maybe(H0.UInt32),H0.maybe(H0.Buffer)),arguments),H0.Null(q))q=R0.DEFAULT_SEQUENCE;return this.ins.push({hash:$,index:Y,script:J||f8,sequence:q,witness:sG})-1}addOutput($,Y){return J8(H0.tuple(H0.Buffer,H0.Satoshi),arguments),this.outs.push({script:$,value:Y})-1}hasWitnesses(){return this.ins.some(($)=>{return $.witness.length!==0})}weight(){let $=this.byteLength(!1),Y=this.byteLength(!0);return $*3+Y}virtualSize(){return Math.ceil(this.weight()/4)}byteLength($=!0){let Y=$&&this.hasWitnesses();return(Y?10:8)+c0.varuint.encodingLength(this.ins.length)+c0.varuint.encodingLength(this.outs.length)+this.ins.reduce((q,J)=>{return q+40+G8(J.script)},0)+this.outs.reduce((q,J)=>{return q+8+G8(J.script)},0)+(Y?this.ins.reduce((q,J)=>{return q+YW(J.witness)},0):0)}clone(){let $=new R0;return $.version=this.version,$.locktime=this.locktime,$.ins=this.ins.map((Y)=>{return{hash:Y.hash,index:Y.index,script:Y.script,sequence:Y.sequence,witness:Y.witness}}),$.outs=this.outs.map((Y)=>{return{script:Y.script,value:Y.value}}),$}hashForSignature($,Y,q){if(J8(H0.tuple(H0.UInt32,H0.Buffer,H0.Number),arguments),$>=this.ins.length)return rG;let J=iG.compile(iG.decompile(Y).filter((O)=>{return O!==$W.OPS.OP_CODESEPARATOR})),G=this.clone();if((q&31)===R0.SIGHASH_NONE)G.outs=[],G.ins.forEach((O,X)=>{if(X===$)return;O.sequence=0});else if((q&31)===R0.SIGHASH_SINGLE){if($>=this.outs.length)return rG;G.outs.length=$+1;for(let O=0;O<$;O++)G.outs[O]=JW;G.ins.forEach((O,X)=>{if(X===$)return;O.sequence=0})}if(q&R0.SIGHASH_ANYONECANPAY)G.ins=[G.ins[$]],G.ins[0].script=J;else G.ins.forEach((O)=>{O.script=f8}),G.ins[$].script=J;let Q=Buffer.allocUnsafe(G.byteLength(!1)+4);return Q.writeInt32LE(q,Q.length-4),G.__toBuffer(Q,0,!1),V1.hash256(Q)}hashForWitnessV1($,Y,q,J,G,Q){if(J8(H0.tuple(H0.UInt32,J8.arrayOf(H0.Buffer),J8.arrayOf(H0.Satoshi),H0.UInt32),arguments),q.length!==this.ins.length||Y.length!==this.ins.length)throw new Error("Must supply prevout script and value for all inputs");let O=J===R0.SIGHASH_DEFAULT?R0.SIGHASH_ALL:J&R0.SIGHASH_OUTPUT_MASK,Z=(J&R0.SIGHASH_INPUT_MASK)===R0.SIGHASH_ANYONECANPAY,U=O===R0.SIGHASH_NONE,N=O===R0.SIGHASH_SINGLE,V=f8,z=f8,L=f8,j=f8,D=f8;if(!Z){let w=c0.BufferWriter.withCapacity(36*this.ins.length);this.ins.forEach((I)=>{w.writeSlice(I.hash),w.writeUInt32(I.index)}),V=V1.sha256(w.end()),w=c0.BufferWriter.withCapacity(8*this.ins.length),q.forEach((I)=>w.writeUInt64(I)),z=V1.sha256(w.end()),w=c0.BufferWriter.withCapacity(Y.map(G8).reduce((I,k)=>I+k)),Y.forEach((I)=>w.writeVarSlice(I)),L=V1.sha256(w.end()),w=c0.BufferWriter.withCapacity(4*this.ins.length),this.ins.forEach((I)=>w.writeUInt32(I.sequence)),j=V1.sha256(w.end())}if(!(U||N)){let w=this.outs.map((k)=>8+G8(k.script)).reduce((k,p)=>k+p),I=c0.BufferWriter.withCapacity(w);this.outs.forEach((k)=>{I.writeUInt64(k.value),I.writeVarSlice(k.script)}),D=V1.sha256(I.end())}else if(N&&$<this.outs.length){let w=this.outs[$],I=c0.BufferWriter.withCapacity(8+G8(w.script));I.writeUInt64(w.value),I.writeVarSlice(w.script),D=V1.sha256(I.end())}let B=(G?2:0)+(Q?1:0),R=174-(Z?49:0)-(U?32:0)+(Q?32:0)+(G?37:0),A=c0.BufferWriter.withCapacity(R);if(A.writeUInt8(J),A.writeInt32(this.version),A.writeUInt32(this.locktime),A.writeSlice(V),A.writeSlice(z),A.writeSlice(L),A.writeSlice(j),!(U||N))A.writeSlice(D);if(A.writeUInt8(B),Z){let w=this.ins[$];A.writeSlice(w.hash),A.writeUInt32(w.index),A.writeUInt64(q[$]),A.writeVarSlice(Y[$]),A.writeUInt32(w.sequence)}else A.writeUInt32($);if(Q){let w=c0.BufferWriter.withCapacity(G8(Q));w.writeVarSlice(Q),A.writeSlice(V1.sha256(w.end()))}if(N)A.writeSlice(D);if(G)A.writeSlice(G),A.writeUInt8(0),A.writeUInt32(4294967295);return V1.taggedHash("TapSighash",Buffer.concat([Buffer.from([0]),A.end()]))}hashForWitnessV0($,Y,q,J){J8(H0.tuple(H0.UInt32,H0.Buffer,H0.Satoshi,H0.UInt32),arguments);let G=Buffer.from([]),Q,O=n4,X=n4,Z=n4;if(!(J&R0.SIGHASH_ANYONECANPAY))G=Buffer.allocUnsafe(36*this.ins.length),Q=new c0.BufferWriter(G,0),this.ins.forEach((N)=>{Q.writeSlice(N.hash),Q.writeUInt32(N.index)}),X=V1.hash256(G);if(!(J&R0.SIGHASH_ANYONECANPAY)&&(J&31)!==R0.SIGHASH_SINGLE&&(J&31)!==R0.SIGHASH_NONE)G=Buffer.allocUnsafe(4*this.ins.length),Q=new c0.BufferWriter(G,0),this.ins.forEach((N)=>{Q.writeUInt32(N.sequence)}),Z=V1.hash256(G);if((J&31)!==R0.SIGHASH_SINGLE&&(J&31)!==R0.SIGHASH_NONE){let N=this.outs.reduce((V,z)=>{return V+8+G8(z.script)},0);G=Buffer.allocUnsafe(N),Q=new c0.BufferWriter(G,0),this.outs.forEach((V)=>{Q.writeUInt64(V.value),Q.writeVarSlice(V.script)}),O=V1.hash256(G)}else if((J&31)===R0.SIGHASH_SINGLE&&$<this.outs.length){let N=this.outs[$];G=Buffer.allocUnsafe(8+G8(N.script)),Q=new c0.BufferWriter(G,0),Q.writeUInt64(N.value),Q.writeVarSlice(N.script),O=V1.hash256(G)}G=Buffer.allocUnsafe(156+G8(Y)),Q=new c0.BufferWriter(G,0);let U=this.ins[$];return Q.writeInt32(this.version),Q.writeSlice(X),Q.writeSlice(Z),Q.writeSlice(U.hash),Q.writeUInt32(U.index),Q.writeVarSlice(Y),Q.writeUInt64(q),Q.writeUInt32(U.sequence),Q.writeSlice(O),Q.writeUInt32(this.locktime),Q.writeUInt32(J),V1.hash256(G)}getHash($){if($&&this.isCoinbase())return Buffer.alloc(32,0);return V1.hash256(this.__toBuffer(void 0,void 0,$))}getId(){return c0.reverseBuffer(this.getHash(!1)).toString("hex")}toBuffer($,Y){return this.__toBuffer($,Y,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript($,Y){J8(H0.tuple(H0.Number,H0.Buffer),arguments),this.ins[$].script=Y}setWitness($,Y){J8(H0.tuple(H0.Number,[H0.Buffer]),arguments),this.ins[$].witness=Y}__toBuffer($,Y,q=!1){if(!$)$=Buffer.allocUnsafe(this.byteLength(q));let J=new c0.BufferWriter($,Y||0);J.writeInt32(this.version);let G=q&&this.hasWitnesses();if(G)J.writeUInt8(R0.ADVANCED_TRANSACTION_MARKER),J.writeUInt8(R0.ADVANCED_TRANSACTION_FLAG);if(J.writeVarInt(this.ins.length),this.ins.forEach((Q)=>{J.writeSlice(Q.hash),J.writeUInt32(Q.index),J.writeVarSlice(Q.script),J.writeUInt32(Q.sequence)}),J.writeVarInt(this.outs.length),this.outs.forEach((Q)=>{if(GW(Q))J.writeUInt64(Q.value);else J.writeSlice(Q.valueBuffer);J.writeVarSlice(Q.script)}),G)this.ins.forEach((Q)=>{J.writeVector(Q.witness)});if(J.writeUInt32(this.locktime),Y!==void 0)return $.slice(Y,J.offset);return $}}tG.Transaction=R0;R0.DEFAULT_SEQUENCE=4294967295;R0.SIGHASH_DEFAULT=0;R0.SIGHASH_ALL=1;R0.SIGHASH_NONE=2;R0.SIGHASH_SINGLE=3;R0.SIGHASH_ANYONECANPAY=128;R0.SIGHASH_OUTPUT_MASK=3;R0.SIGHASH_INPUT_MASK=128;R0.ADVANCED_TRANSACTION_MARKER=0;R0.ADVANCED_TRANSACTION_FLAG=1});var QQ=y((JQ)=>{Object.defineProperty(JQ,"__esModule",{value:!0});JQ.Block=void 0;var j9=f5(),a4=t1(),QW=aG(),OW=t9(),qQ=Q1(),{typeforce:XW}=qQ,i4=new TypeError("Cannot compute merkle root for zero transactions"),$Q=new TypeError("Cannot compute witness commit for non-segwit block");class K9{constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}static fromBuffer($){if($.length<80)throw new Error("Buffer too small (< 80 bytes)");let Y=new j9.BufferReader($),q=new K9;if(q.version=Y.readInt32(),q.prevHash=Y.readSlice(32),q.merkleRoot=Y.readSlice(32),q.timestamp=Y.readUInt32(),q.bits=Y.readUInt32(),q.nonce=Y.readUInt32(),$.length===80)return q;let J=()=>{let O=OW.Transaction.fromBuffer(Y.buffer.slice(Y.offset),!0);return Y.offset+=O.byteLength(),O},G=Y.readVarInt();q.transactions=[];for(let O=0;O<G;++O){let X=J();q.transactions.push(X)}let Q=q.getWitnessCommit();if(Q)q.witnessCommit=Q;return q}static fromHex($){return K9.fromBuffer(Buffer.from($,"hex"))}static calculateTarget($){let Y=(($&4278190080)>>24)-3,q=$&8388607,J=Buffer.alloc(32,0);return J.writeUIntBE(q,29-Y,3),J}static calculateMerkleRoot($,Y){if(XW([{getHash:qQ.Function}],$),$.length===0)throw i4;if(Y&&!YQ($))throw $Q;let q=$.map((G)=>G.getHash(Y)),J=QW.fastMerkleRoot(q,a4.hash256);return Y?a4.hash256(Buffer.concat([J,$[0].ins[0].witness[0]])):J}getWitnessCommit(){if(!YQ(this.transactions))return null;let $=this.transactions[0].outs.filter((q)=>q.script.slice(0,6).equals(Buffer.from("6a24aa21a9ed","hex"))).map((q)=>q.script.slice(6,38));if($.length===0)return null;let Y=$[$.length-1];if(!(Y instanceof Buffer&&Y.length===32))return null;return Y}hasWitnessCommit(){if(this.witnessCommit instanceof Buffer&&this.witnessCommit.length===32)return!0;if(this.getWitnessCommit()!==null)return!0;return!1}hasWitness(){return ZW(this.transactions)}weight(){let $=this.byteLength(!1,!1),Y=this.byteLength(!1,!0);return $*3+Y}byteLength($,Y=!0){if($||!this.transactions)return 80;return 80+j9.varuint.encodingLength(this.transactions.length)+this.transactions.reduce((q,J)=>q+J.byteLength(Y),0)}getHash(){return a4.hash256(this.toBuffer(!0))}getId(){return j9.reverseBuffer(this.getHash()).toString("hex")}getUTCDate(){let $=new Date(0);return $.setUTCSeconds(this.timestamp),$}toBuffer($){let Y=Buffer.allocUnsafe(this.byteLength($)),q=new j9.BufferWriter(Y);if(q.writeInt32(this.version),q.writeSlice(this.prevHash),q.writeSlice(this.merkleRoot),q.writeUInt32(this.timestamp),q.writeUInt32(this.bits),q.writeUInt32(this.nonce),$||!this.transactions)return Y;return j9.varuint.encode(this.transactions.length,Y,q.offset),q.offset+=j9.varuint.encode.bytes,this.transactions.forEach((J)=>{let G=J.byteLength();J.toBuffer(Y,q.offset),q.offset+=G}),Y}toHex($){return this.toBuffer($).toString("hex")}checkTxRoots(){let $=this.hasWitnessCommit();if(!$&&this.hasWitness())return!1;return this.__checkMerkleRoot()&&($?this.__checkWitnessCommit():!0)}checkProofOfWork(){let $=j9.reverseBuffer(this.getHash()),Y=K9.calculateTarget(this.bits);return $.compare(Y)<=0}__checkMerkleRoot(){if(!this.transactions)throw i4;let $=K9.calculateMerkleRoot(this.transactions);return this.merkleRoot.compare($)===0}__checkWitnessCommit(){if(!this.transactions)throw i4;if(!this.hasWitnessCommit())throw $Q;let $=K9.calculateMerkleRoot(this.transactions,!0);return this.witnessCommit.compare($)===0}}JQ.Block=K9;function YQ($){return $ instanceof Array&&$[0]&&$[0].ins&&$[0].ins instanceof Array&&$[0].ins[0]&&$[0].ins[0].witness&&$[0].ins[0].witness instanceof Array&&$[0].ins[0].witness.length>0}function ZW($){return $ instanceof Array&&$.some((Y)=>typeof Y==="object"&&Y.ins instanceof Array&&Y.ins.some((q)=>typeof q==="object"&&q.witness instanceof Array&&q.witness.length>0))}});var b6=y((NQ)=>{Object.defineProperty(NQ,"__esModule",{value:!0});NQ.signatureBlocksAction=NQ.checkInputForSig=NQ.pubkeyInScript=NQ.pubkeyPositionInScript=NQ.witnessStackToScriptWitness=NQ.isP2TR=NQ.isP2SHScript=NQ.isP2WSHScript=NQ.isP2WPKH=NQ.isP2PKH=NQ.isP2PK=NQ.isP2MS=void 0;var OQ=XQ(),m5=X1(),g6=t9(),UW=t1(),z9=s9();function W9($){return(Y)=>{try{return $({output:Y}),!0}catch(q){return!1}}}NQ.isP2MS=W9(z9.p2ms);NQ.isP2PK=W9(z9.p2pk);NQ.isP2PKH=W9(z9.p2pkh);NQ.isP2WPKH=W9(z9.p2wpkh);NQ.isP2WSHScript=W9(z9.p2wsh);NQ.isP2SHScript=W9(z9.p2sh);NQ.isP2TR=W9(z9.p2tr);function NW($){let Y=Buffer.allocUnsafe(0);function q(O){Y=Buffer.concat([Y,Buffer.from(O)])}function J(O){let X=Y.length,Z=OQ.encodingLength(O);Y=Buffer.concat([Y,Buffer.allocUnsafe(Z)]),OQ.encode(O,Y,X)}function G(O){J(O.length),q(O)}function Q(O){J(O.length),O.forEach(G)}return Q($),Y}NQ.witnessStackToScriptWitness=NW;function ZQ($,Y){let q=UW.hash160($),J=$.slice(1,33),G=m5.decompile(Y);if(G===null)throw new Error("Unknown script error");return G.findIndex((Q)=>{if(typeof Q==="number")return!1;return Q.equals($)||Q.equals(q)||Q.equals(J)})}NQ.pubkeyPositionInScript=ZQ;function MW($,Y){return ZQ($,Y)!==-1}NQ.pubkeyInScript=MW;function VW($,Y){return jW($).some((J)=>UQ(J,m5.signature.decode,Y))}NQ.checkInputForSig=VW;function UQ($,Y,q){let{hashType:J}=Y($),G=[];if(J&g6.Transaction.SIGHASH_ANYONECANPAY)G.push("addInput");switch(J&31){case g6.Transaction.SIGHASH_ALL:break;case g6.Transaction.SIGHASH_SINGLE:case g6.Transaction.SIGHASH_NONE:G.push("addOutput"),G.push("setInputSequence");break}if(G.indexOf(q)===-1)return!0;return!1}NQ.signatureBlocksAction=UQ;function jW($){let Y=[];if(($.partialSig||[]).length===0){if(!$.finalScriptSig&&!$.finalScriptWitness)return[];Y=KW($)}else Y=$.partialSig;return Y.map((q)=>q.signature)}function KW($){let Y=!$.finalScriptSig?[]:m5.decompile($.finalScriptSig)||[],q=!$.finalScriptWitness?[]:m5.decompile($.finalScriptWitness)||[];return Y.concat(q).filter((J)=>{return Buffer.isBuffer(J)&&m5.isCanonicalScriptSignature(J)}).map((J)=>({signature:J}))}});var zQ=y((jQ)=>{Object.defineProperty(jQ,"__esModule",{value:!0});jQ.checkTaprootInputForSigs=jQ.tapTreeFromList=jQ.tapTreeToList=jQ.tweakInternalPubKey=jQ.checkTaprootOutputFields=jQ.checkTaprootInputFields=jQ.isTaprootOutput=jQ.isTaprootInput=jQ.serializeTaprootSignature=jQ.tapScriptFinalizer=jQ.toXOnly=void 0;var e4=Q1(),BW=t9(),l6=b6(),m8=x6(),wW=s9(),TW=b6(),IW=($)=>$.length===32?$:$.slice(1,33);jQ.toXOnly=IW;function vW($,Y,q){let J=aW(Y,$,q);try{let Q=pW(Y,J).concat(J.script).concat(J.controlBlock);return{finalScriptWitness:l6.witnessStackToScriptWitness(Q)}}catch(G){throw new Error(`Can not finalize taproot input #${$}: ${G}`)}}jQ.tapScriptFinalizer=vW;function _W($,Y){let q=Y?Buffer.from([Y]):Buffer.from([]);return Buffer.concat([$,q])}jQ.serializeTaprootSignature=_W;function d6($){return $&&!!($.tapInternalKey||$.tapMerkleRoot||$.tapLeafScript&&$.tapLeafScript.length||$.tapBip32Derivation&&$.tapBip32Derivation.length||$.witnessUtxo&&l6.isP2TR($.witnessUtxo.script))}jQ.isTaprootInput=d6;function y6($,Y){return $&&!!($.tapInternalKey||$.tapTree||$.tapBip32Derivation&&$.tapBip32Derivation.length||Y&&l6.isP2TR(Y))}jQ.isTaprootOutput=y6;function SW($,Y,q){cW($,Y,q),oW($,Y,q)}jQ.checkTaprootInputFields=SW;function kW($,Y,q){uW($,Y,q),xW($,Y)}jQ.checkTaprootOutputFields=kW;function xW($,Y){if(!Y.tapTree&&!Y.tapInternalKey)return;let q=Y.tapInternalKey||$.tapInternalKey,J=Y.tapTree||$.tapTree;if(q){let{script:G}=$,Q=fW(q,J);if(G&&!G.equals(Q))throw new Error("Error adding output. Script or address missmatch.")}}function fW($,Y){let q=Y&&VQ(Y.leaves),{output:J}=wW.p2tr({internalPubkey:$,scriptTree:q});return J}function mW($,Y){let q=Y.tapInternalKey,J=q&&m8.tweakKey(q,Y.tapMerkleRoot);if(!J)throw new Error(`Cannot tweak tap internal key for input #${$}. Public key: ${q&&q.toString("hex")}`);return J.x}jQ.tweakInternalPubKey=mW;function gW($){if(!e4.isTaptree($))throw new Error("Cannot convert taptree to tapleaf list. Expecting a tapree structure.");return r4($)}jQ.tapTreeToList=gW;function VQ($=[]){if($.length===1&&$[0].depth===0)return{output:$[0].script,version:$[0].leafVersion};return hW($)}jQ.tapTreeFromList=VQ;function bW($,Y){return yW($).some((J)=>TW.signatureBlocksAction(J,dW,Y))}jQ.checkTaprootInputForSigs=bW;function dW($){return{signature:$.slice(0,64),hashType:$.slice(64)[0]||BW.Transaction.SIGHASH_DEFAULT}}function yW($){let Y=[];if($.tapKeySig)Y.push($.tapKeySig);if($.tapScriptSig)Y.push(...$.tapScriptSig.map((q)=>q.signature));if(!Y.length){let q=lW($.finalScriptWitness);if(q)Y.push(q)}return Y}function lW($){if(!$)return;let Y=$.slice(2);if(Y.length===64||Y.length===65)return Y}function r4($,Y=[],q=0){if(q>m8.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");if(!$)return[];if(e4.isTapleaf($))return Y.push({depth:q,leafVersion:$.version||m8.LEAF_VERSION_TAPSCRIPT,script:$.output}),Y;if($[0])r4($[0],Y,q+1);if($[1])r4($[1],Y,q+1);return Y}function hW($){let Y;for(let q of $)if(Y=t4(q,Y),!Y)throw new Error("No room left to insert tapleaf in tree");return Y}function t4($,Y,q=0){if(q>m8.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");if($.depth===q){if(!Y)return{output:$.script,version:$.leafVersion};return}if(e4.isTapleaf(Y))return;let J=t4($,Y&&Y[0],q+1);if(J)return[J,Y&&Y[1]];let G=t4($,Y&&Y[1],q+1);if(G)return[Y&&Y[0],G]}function cW($,Y,q){let J=d6($)&&e9(Y),G=e9($)&&d6(Y),Q=$===Y&&d6(Y)&&e9(Y);if(J||G||Q)throw new Error(`Invalid arguments for Psbt.${q}. Cannot use both taproot and non-taproot fields.`)}function uW($,Y,q){let J=y6($)&&e9(Y),G=e9($)&&y6(Y),Q=$===Y&&y6(Y)&&e9(Y);if(J||G||Q)throw new Error(`Invalid arguments for Psbt.${q}. Cannot use both taproot and non-taproot fields.`)}function oW($,Y,q){if(Y.tapMerkleRoot){let J=(Y.tapLeafScript||[]).every((Q)=>s4(Q,Y.tapMerkleRoot)),G=($.tapLeafScript||[]).every((Q)=>s4(Q,Y.tapMerkleRoot));if(!J||!G)throw new Error(`Invalid arguments for Psbt.${q}. Tapleaf not part of taptree.`)}else if($.tapMerkleRoot){if(!(Y.tapLeafScript||[]).every((G)=>s4(G,$.tapMerkleRoot)))throw new Error(`Invalid arguments for Psbt.${q}. Tapleaf not part of taptree.`)}}function s4($,Y){if(!Y)return!0;let q=m8.tapleafHash({output:$.script,version:$.leafVersion});return m8.rootHashFromPath($.controlBlock,q).equals(Y)}function pW($,Y){let q=m8.tapleafHash({output:Y.script,version:Y.leafVersion});return($.tapScriptSig||[]).filter((J)=>J.leafHash.equals(q)).map((J)=>nW(Y.script,J)).sort((J,G)=>G.positionInScript-J.positionInScript).map((J)=>J.signature)}function nW($,Y){return Object.assign({positionInScript:l6.pubkeyPositionInScript(Y.pubkey,$)},Y)}function aW($,Y,q){if(!$.tapScriptSig||!$.tapScriptSig.length)throw new Error(`Can not finalize taproot input #${Y}. No tapleaf script signature provided.`);let J=($.tapLeafScript||[]).sort((G,Q)=>G.controlBlock.length-Q.controlBlock.length).find((G)=>iW(G,$.tapScriptSig,q));if(!J)throw new Error(`Can not finalize taproot input #${Y}. Signature for tapleaf script not found.`);return J}function iW($,Y,q){let J=m8.tapleafHash({output:$.script,version:$.leafVersion});return(!q||q.equals(J))&&Y.find((Q)=>Q.leafHash.equals(J))!==void 0}function e9($){return $&&!!($.redeemScript||$.witnessScript||$.bip32Derivation&&$.bip32Derivation.length)}});var lQ=y((dQ)=>{Object.defineProperty(dQ,"__esModule",{value:!0});dQ.Psbt=void 0;var WQ=XL(),LQ=XQ(),j1=OL(),CQ=f6(),c6=f5(),ZL=S1(),f1=s9(),UL=x6(),A8=X1(),Z1=t9(),d0=zQ(),u0=b6(),NL={network:ZL.bitcoin,maximumFeeRate:5000};class u6{static fromBase64($,Y={}){let q=Buffer.from($,"base64");return this.fromBuffer(q,Y)}static fromHex($,Y={}){let q=Buffer.from($,"hex");return this.fromBuffer(q,Y)}static fromBuffer($,Y={}){let q=WQ.Psbt.fromBuffer($,ML),J=new u6(Y,q);return WL(J.__CACHE.__TX,J.__CACHE),J}constructor($={},Y=new WQ.Psbt(new J$)){if(this.data=Y,this.opts=Object.assign({},NL,$),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},this.data.inputs.length===0)this.setVersion(2);let q=(J,G,Q,O)=>Object.defineProperty(J,G,{enumerable:Q,writable:O});q(this,"__CACHE",!1,!0),q(this,"opts",!1,!0)}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version($){this.setVersion($)}get locktime(){return this.__CACHE.__TX.locktime}set locktime($){this.setLocktime($)}get txInputs(){return this.__CACHE.__TX.ins.map(($)=>({hash:c6.cloneBuffer($.hash),index:$.index,sequence:$.sequence}))}get txOutputs(){return this.__CACHE.__TX.outs.map(($)=>{let Y;try{Y=CQ.fromOutputScript($.script,this.opts.network)}catch(q){}return{script:c6.cloneBuffer($.script),value:$.value,address:Y}})}combine(...$){return this.data.combine(...$.map((Y)=>Y.data)),this}clone(){let $=u6.fromBuffer(this.data.toBuffer());return $.opts=JSON.parse(JSON.stringify(this.opts)),$}setMaximumFeeRate($){h6($),this.opts.maximumFeeRate=$}setVersion($){h6($),g5(this.data.inputs,"setVersion");let Y=this.__CACHE;return Y.__TX.version=$,Y.__EXTRACTED_TX=void 0,this}setLocktime($){h6($),g5(this.data.inputs,"setLocktime");let Y=this.__CACHE;return Y.__TX.locktime=$,Y.__EXTRACTED_TX=void 0,this}setInputSequence($,Y){h6(Y),g5(this.data.inputs,"setInputSequence");let q=this.__CACHE;if(q.__TX.ins.length<=$)throw new Error("Input index too high");return q.__TX.ins[$].sequence=Y,q.__EXTRACTED_TX=void 0,this}addInputs($){return $.forEach((Y)=>this.addInput(Y)),this}addInput($){if(arguments.length>1||!$||$.hash===void 0||$.index===void 0)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");if(d0.checkTaprootInputFields($,$,"addInput"),g5(this.data.inputs,"addInput"),$.witnessScript)o6($.witnessScript);let Y=this.__CACHE;this.data.addInput($);let q=Y.__TX.ins[Y.__TX.ins.length-1];IQ(Y,q);let J=this.data.inputs.length-1,G=this.data.inputs[J];if(G.nonWitnessUtxo)q$(this.__CACHE,G,J);return Y.__FEE=void 0,Y.__FEE_RATE=void 0,Y.__EXTRACTED_TX=void 0,this}addOutputs($){return $.forEach((Y)=>this.addOutput(Y)),this}addOutput($){if(arguments.length>1||!$||$.value===void 0||$.address===void 0&&$.script===void 0)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");g5(this.data.inputs,"addOutput");let{address:Y}=$;if(typeof Y==="string"){let{network:J}=this.opts,G=CQ.toOutputScript(Y,J);$=Object.assign({},$,{script:G})}d0.checkTaprootOutputFields($,$,"addOutput");let q=this.__CACHE;return this.data.addOutput($),q.__FEE=void 0,q.__FEE_RATE=void 0,q.__EXTRACTED_TX=void 0,this}extractTransaction($){if(!this.data.inputs.every(wQ))throw new Error("Not finalized");let Y=this.__CACHE;if(!$)jL(this,Y,this.opts);if(Y.__EXTRACTED_TX)return Y.__EXTRACTED_TX;let q=Y.__TX.clone();return fQ(this.data.inputs,q,Y,!0),q}getFeeRate(){return HQ("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return HQ("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return j1.checkForInput(this.data.inputs,0),b5(this.data.inputs.length).forEach(($)=>this.finalizeInput($)),this}finalizeInput($,Y){let q=j1.checkForInput(this.data.inputs,$);if(d0.isTaprootInput(q))return this._finalizeTaprootInput($,q,void 0,Y);return this._finalizeInput($,q,Y)}finalizeTaprootInput($,Y,q=d0.tapScriptFinalizer){let J=j1.checkForInput(this.data.inputs,$);if(d0.isTaprootInput(J))return this._finalizeTaprootInput($,J,Y,q);throw new Error(`Cannot finalize input #${$}. Not Taproot.`)}_finalizeInput($,Y,q=LL){let{script:J,isP2SH:G,isP2WSH:Q,isSegwit:O}=AL($,Y,this.__CACHE);if(!J)throw new Error(`No script found for input #${$}`);KL(Y);let{finalScriptSig:X,finalScriptWitness:Z}=q($,Y,J,O,G,Q);if(X)this.data.updateInput($,{finalScriptSig:X});if(Z)this.data.updateInput($,{finalScriptWitness:Z});if(!X&&!Z)throw new Error(`Unknown error finalizing input #${$}`);return this.data.clearFinalizedInput($),this}_finalizeTaprootInput($,Y,q,J=d0.tapScriptFinalizer){if(!Y.witnessUtxo)throw new Error(`Cannot finalize input #${$}. Missing withness utxo.`);if(Y.tapKeySig){let G=f1.p2tr({output:Y.witnessUtxo.script,signature:Y.tapKeySig}),Q=u0.witnessStackToScriptWitness(G.witness);this.data.updateInput($,{finalScriptWitness:Q})}else{let{finalScriptWitness:G}=J($,Y,q);this.data.updateInput($,{finalScriptWitness:G})}return this.data.clearFinalizedInput($),this}getInputType($){let Y=j1.checkForInput(this.data.inputs,$),q=mQ($,Y,this.__CACHE),J=n6(q,$,"input",Y.redeemScript||BL(Y.finalScriptSig),Y.witnessScript||wL(Y.finalScriptWitness)),G=J.type==="raw"?"":J.type+"-",Q=bQ(J.meaningfulScript);return G+Q}inputHasPubkey($,Y){let q=j1.checkForInput(this.data.inputs,$);return FL(Y,q,$,this.__CACHE)}inputHasHDKey($,Y){let q=j1.checkForInput(this.data.inputs,$),J=RQ(Y);return!!q.bip32Derivation&&q.bip32Derivation.some(J)}outputHasPubkey($,Y){let q=j1.checkForOutput(this.data.outputs,$);return PL(Y,q,$,this.__CACHE)}outputHasHDKey($,Y){let q=j1.checkForOutput(this.data.outputs,$),J=RQ(Y);return!!q.bip32Derivation&&q.bip32Derivation.some(J)}validateSignaturesOfAllInputs($){return j1.checkForInput(this.data.inputs,0),b5(this.data.inputs.length).map((q)=>this.validateSignaturesOfInput(q,$)).reduce((q,J)=>J===!0&&q,!0)}validateSignaturesOfInput($,Y,q){let J=this.data.inputs[$];if(d0.isTaprootInput(J))return this.validateSignaturesOfTaprootInput($,Y,q);return this._validateSignaturesOfInput($,Y,q)}_validateSignaturesOfInput($,Y,q){let J=this.data.inputs[$],G=(J||{}).partialSig;if(!J||!G||G.length<1)throw new Error("No signatures to validate");if(typeof Y!=="function")throw new Error("Need validator function to validate signatures");let Q=q?G.filter((N)=>N.pubkey.equals(q)):G;if(Q.length<1)throw new Error("No signatures for this pubkey");let O=[],X,Z,U;for(let N of Q){let V=A8.signature.decode(N.signature),{hash:z,script:L}=U!==V.hashType?_Q($,Object.assign({},J,{sighashType:V.hashType}),this.__CACHE,!0):{hash:X,script:Z};U=V.hashType,X=z,Z=L,TQ(N.pubkey,L,"verify"),O.push(Y(N.pubkey,z,V.signature))}return O.every((N)=>N===!0)}validateSignaturesOfTaprootInput($,Y,q){let J=this.data.inputs[$],G=(J||{}).tapKeySig,Q=(J||{}).tapScriptSig;if(!J&&!G&&!(Q&&!Q.length))throw new Error("No signatures to validate");if(typeof Y!=="function")throw new Error("Need validator function to validate signatures");q=q&&d0.toXOnly(q);let O=q?Y$($,J,this.data.inputs,q,this.__CACHE):DL($,J,this.data.inputs,this.__CACHE);if(!O.length)throw new Error("No signatures for this pubkey");let X=O.find((U)=>!U.leafHash),Z=0;if(G&&X){if(!Y(X.pubkey,X.hash,PQ(G)))return!1;Z++}if(Q)for(let U of Q){let N=O.find((V)=>U.pubkey.equals(V.pubkey));if(N){if(!Y(U.pubkey,N.hash,PQ(U.signature)))return!1;Z++}}return Z>0}signAllInputsHD($,Y=[Z1.Transaction.SIGHASH_ALL]){if(!$||!$.publicKey||!$.fingerprint)throw new Error("Need HDSigner to sign input");let q=[];for(let J of b5(this.data.inputs.length))try{this.signInputHD(J,$,Y),q.push(!0)}catch(G){q.push(!1)}if(q.every((J)=>J===!1))throw new Error("No inputs were signed");return this}signAllInputsHDAsync($,Y=[Z1.Transaction.SIGHASH_ALL]){return new Promise((q,J)=>{if(!$||!$.publicKey||!$.fingerprint)return J(new Error("Need HDSigner to sign input"));let G=[],Q=[];for(let O of b5(this.data.inputs.length))Q.push(this.signInputHDAsync(O,$,Y).then(()=>{G.push(!0)},()=>{G.push(!1)}));return Promise.all(Q).then(()=>{if(G.every((O)=>O===!1))return J(new Error("No inputs were signed"));q()})})}signInputHD($,Y,q=[Z1.Transaction.SIGHASH_ALL]){if(!Y||!Y.publicKey||!Y.fingerprint)throw new Error("Need HDSigner to sign input");return BQ($,this.data.inputs,Y).forEach((G)=>this.signInput($,G,q)),this}signInputHDAsync($,Y,q=[Z1.Transaction.SIGHASH_ALL]){return new Promise((J,G)=>{if(!Y||!Y.publicKey||!Y.fingerprint)return G(new Error("Need HDSigner to sign input"));let O=BQ($,this.data.inputs,Y).map((X)=>this.signInputAsync($,X,q));return Promise.all(O).then(()=>{J()}).catch(G)})}signAllInputs($,Y){if(!$||!$.publicKey)throw new Error("Need Signer to sign input");let q=[];for(let J of b5(this.data.inputs.length))try{this.signInput(J,$,Y),q.push(!0)}catch(G){q.push(!1)}if(q.every((J)=>J===!1))throw new Error("No inputs were signed");return this}signAllInputsAsync($,Y){return new Promise((q,J)=>{if(!$||!$.publicKey)return J(new Error("Need Signer to sign input"));let G=[],Q=[];for(let[O]of this.data.inputs.entries())Q.push(this.signInputAsync(O,$,Y).then(()=>{G.push(!0)},()=>{G.push(!1)}));return Promise.all(Q).then(()=>{if(G.every((O)=>O===!1))return J(new Error("No inputs were signed"));q()})})}signInput($,Y,q){if(!Y||!Y.publicKey)throw new Error("Need Signer to sign input");let J=j1.checkForInput(this.data.inputs,$);if(d0.isTaprootInput(J))return this._signTaprootInput($,J,Y,void 0,q);return this._signInput($,Y,q)}signTaprootInput($,Y,q,J){if(!Y||!Y.publicKey)throw new Error("Need Signer to sign input");let G=j1.checkForInput(this.data.inputs,$);if(d0.isTaprootInput(G))return this._signTaprootInput($,G,Y,q,J);throw new Error(`Input #${$} is not of type Taproot.`)}_signInput($,Y,q=[Z1.Transaction.SIGHASH_ALL]){let{hash:J,sighashType:G}=FQ(this.data.inputs,$,Y.publicKey,this.__CACHE,q),Q=[{pubkey:Y.publicKey,signature:A8.signature.encode(Y.sign(J),G)}];return this.data.updateInput($,{partialSig:Q}),this}_signTaprootInput($,Y,q,J,G=[Z1.Transaction.SIGHASH_DEFAULT]){let Q=this.checkTaprootHashesForSig($,Y,q,J,G),O=Q.filter((Z)=>!Z.leafHash).map((Z)=>d0.serializeTaprootSignature(q.signSchnorr(Z.hash),Y.sighashType))[0],X=Q.filter((Z)=>!!Z.leafHash).map((Z)=>({pubkey:d0.toXOnly(q.publicKey),signature:d0.serializeTaprootSignature(q.signSchnorr(Z.hash),Y.sighashType),leafHash:Z.leafHash}));if(O)this.data.updateInput($,{tapKeySig:O});if(X.length)this.data.updateInput($,{tapScriptSig:X});return this}signInputAsync($,Y,q){return Promise.resolve().then(()=>{if(!Y||!Y.publicKey)throw new Error("Need Signer to sign input");let J=j1.checkForInput(this.data.inputs,$);if(d0.isTaprootInput(J))return this._signTaprootInputAsync($,J,Y,void 0,q);return this._signInputAsync($,Y,q)})}signTaprootInputAsync($,Y,q,J){return Promise.resolve().then(()=>{if(!Y||!Y.publicKey)throw new Error("Need Signer to sign input");let G=j1.checkForInput(this.data.inputs,$);if(d0.isTaprootInput(G))return this._signTaprootInputAsync($,G,Y,q,J);throw new Error(`Input #${$} is not of type Taproot.`)})}_signInputAsync($,Y,q=[Z1.Transaction.SIGHASH_ALL]){let{hash:J,sighashType:G}=FQ(this.data.inputs,$,Y.publicKey,this.__CACHE,q);return Promise.resolve(Y.sign(J)).then((Q)=>{let O=[{pubkey:Y.publicKey,signature:A8.signature.encode(Q,G)}];this.data.updateInput($,{partialSig:O})})}async _signTaprootInputAsync($,Y,q,J,G=[Z1.Transaction.SIGHASH_DEFAULT]){let Q=this.checkTaprootHashesForSig($,Y,q,J,G),O=[],X=Q.filter((U)=>!U.leafHash)[0];if(X){let U=Promise.resolve(q.signSchnorr(X.hash)).then((N)=>{return{tapKeySig:d0.serializeTaprootSignature(N,Y.sighashType)}});O.push(U)}let Z=Q.filter((U)=>!!U.leafHash);if(Z.length){let U=Z.map((N)=>{return Promise.resolve(q.signSchnorr(N.hash)).then((V)=>{return{tapScriptSig:[{pubkey:d0.toXOnly(q.publicKey),signature:d0.serializeTaprootSignature(V,Y.sighashType),leafHash:N.leafHash}]}})});O.push(...U)}return Promise.all(O).then((U)=>{U.forEach((N)=>this.data.updateInput($,N))})}checkTaprootHashesForSig($,Y,q,J,G){if(typeof q.signSchnorr!=="function")throw new Error(`Need Schnorr Signer to sign taproot input #${$}.`);let Q=Y$($,Y,this.data.inputs,q.publicKey,this.__CACHE,J,G);if(!Q||!Q.length)throw new Error(`Can not sign for input #${$} with the key ${q.publicKey.toString("hex")}`);return Q}toBuffer(){return $$(this.__CACHE),this.data.toBuffer()}toHex(){return $$(this.__CACHE),this.data.toHex()}toBase64(){return $$(this.__CACHE),this.data.toBase64()}updateGlobal($){return this.data.updateGlobal($),this}updateInput($,Y){if(Y.witnessScript)o6(Y.witnessScript);if(d0.checkTaprootInputFields(this.data.inputs[$],Y,"updateInput"),this.data.updateInput($,Y),Y.nonWitnessUtxo)q$(this.__CACHE,this.data.inputs[$],$);return this}updateOutput($,Y){let q=this.data.outputs[$];return d0.checkTaprootOutputFields(q,Y,"updateOutput"),this.data.updateOutput($,Y),this}addUnknownKeyValToGlobal($){return this.data.addUnknownKeyValToGlobal($),this}addUnknownKeyValToInput($,Y){return this.data.addUnknownKeyValToInput($,Y),this}addUnknownKeyValToOutput($,Y){return this.data.addUnknownKeyValToOutput($,Y),this}clearFinalizedInput($){return this.data.clearFinalizedInput($),this}}dQ.Psbt=u6;var ML=($)=>new J$($);class J${constructor($=Buffer.from([2,0,0,0,0,0,0,0,0,0])){this.tx=Z1.Transaction.fromBuffer($),zL(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput($){if($.hash===void 0||$.index===void 0||!Buffer.isBuffer($.hash)&&typeof $.hash!=="string"||typeof $.index!=="number")throw new Error("Error adding input.");let Y=typeof $.hash==="string"?c6.reverseBuffer(Buffer.from($.hash,"hex")):$.hash;this.tx.addInput(Y,$.index,$.sequence)}addOutput($){if($.script===void 0||$.value===void 0||!Buffer.isBuffer($.script)||typeof $.value!=="number")throw new Error("Error adding output.");this.tx.addOutput($.script,$.value)}toBuffer(){return this.tx.toBuffer()}}function VL($,Y,q){switch(q){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return DQ(1,$.partialSig);case"multisig":let J=f1.p2ms({output:Y});return DQ(J.m,$.partialSig,J.pubkeys);default:return!1}}function $$($){if($.__UNSAFE_SIGN_NONSEGWIT!==!1)throw new Error("Not BIP174 compliant, can not export")}function DQ($,Y,q){if(!Y)return!1;let J;if(q)J=q.map((G)=>{let Q=TL(G);return Y.find((O)=>O.pubkey.equals(Q))}).filter((G)=>!!G);else J=Y;if(J.length>$)throw new Error("Too many signatures");return J.length===$}function wQ($){return!!$.finalScriptSig||!!$.finalScriptWitness}function RQ($){return(Y)=>{if(!Y.masterFingerprint.equals($.fingerprint))return!1;if(!$.derivePath(Y.path).publicKey.equals(Y.pubkey))return!1;return!0}}function h6($){if(typeof $!=="number"||$!==Math.floor($)||$>4294967295||$<0)throw new Error("Invalid 32 bit integer")}function jL($,Y,q){let J=Y.__FEE_RATE||$.getFeeRate(),G=Y.__EXTRACTED_TX.virtualSize(),Q=J*G;if(J>=q.maximumFeeRate)throw new Error(`Warning: You are paying around ${(Q/1e8).toFixed(8)} in fees, which is ${J} satoshi per byte for a transaction with a VSize of ${G} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}function g5($,Y){$.forEach((q)=>{if(d0.isTaprootInput(q)?d0.checkTaprootInputForSigs(q,Y):u0.checkInputForSig(q,Y))throw new Error("Can not modify transaction, signatures exist.")})}function KL($){if(!$.sighashType||!$.partialSig)return;let{partialSig:Y,sighashType:q}=$;Y.forEach((J)=>{let{hashType:G}=A8.signature.decode(J.signature);if(q!==G)throw new Error("Signature sighash does not match input sighash type")})}function TQ($,Y,q){if(!u0.pubkeyInScript($,Y))throw new Error(`Can not ${q} for this input with the key ${$.toString("hex")}`)}function zL($){if(!$.ins.every((q)=>q.script&&q.script.length===0&&q.witness&&q.witness.length===0))throw new Error("Format Error: Transaction ScriptSigs are not empty")}function WL($,Y){$.ins.forEach((q)=>{IQ(Y,q)})}function IQ($,Y){let q=c6.reverseBuffer(Buffer.from(Y.hash)).toString("hex")+":"+Y.index;if($.__TX_IN_CACHE[q])throw new Error("Duplicate input detected.");$.__TX_IN_CACHE[q]=1}function vQ($,Y){return(q,J,G,Q)=>{let O=$({redeem:{output:G}}).output;if(!J.equals(O))throw new Error(`${Y} for ${Q} #${q} doesn't match the scriptPubKey in the prevout`)}}var AQ=vQ(f1.p2sh,"Redeem script"),EQ=vQ(f1.p2wsh,"Witness script");function HQ($,Y,q,J){if(!q.every(wQ))throw new Error(`PSBT must be finalized to calculate ${Y}`);if($==="__FEE_RATE"&&J.__FEE_RATE)return J.__FEE_RATE;if($==="__FEE"&&J.__FEE)return J.__FEE;let G,Q=!0;if(J.__EXTRACTED_TX)G=J.__EXTRACTED_TX,Q=!1;else G=J.__TX.clone();if(fQ(q,G,J,Q),$==="__FEE_RATE")return J.__FEE_RATE;else if($==="__FEE")return J.__FEE}function LL($,Y,q,J,G,Q){let O=bQ(q);if(!VL(Y,q,O))throw new Error(`Can not finalize input #${$}`);return CL(q,O,Y.partialSig,J,G,Q)}function CL($,Y,q,J,G,Q){let O,X,Z=RL($,Y,q),U=!Q?null:f1.p2wsh({redeem:Z}),N=!G?null:f1.p2sh({redeem:U||Z});if(J){if(U)X=u0.witnessStackToScriptWitness(U.witness);else X=u0.witnessStackToScriptWitness(Z.witness);if(N)O=N.input}else if(N)O=N.input;else O=Z.input;return{finalScriptSig:O,finalScriptWitness:X}}function FQ($,Y,q,J,G){let Q=j1.checkForInput($,Y),{hash:O,sighashType:X,script:Z}=_Q(Y,Q,J,!1,G);return TQ(q,Z,"sign"),{hash:O,sighashType:X}}function _Q($,Y,q,J,G){let Q=q.__TX,O=Y.sighashType||Z1.Transaction.SIGHASH_ALL;kQ(O,G);let X,Z;if(Y.nonWitnessUtxo){let V=p6(q,Y,$),z=Q.ins[$].hash,L=V.getHash();if(!z.equals(L))throw new Error(`Non-witness UTXO hash for input #${$} doesn't match the hash specified in the prevout`);let j=Q.ins[$].index;Z=V.outs[j]}else if(Y.witnessUtxo)Z=Y.witnessUtxo;else throw new Error("Need a Utxo input item for signing");let{meaningfulScript:U,type:N}=n6(Z.script,$,"input",Y.redeemScript,Y.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(N)>=0)X=Q.hashForWitnessV0($,U,Z.value,O);else if(u0.isP2WPKH(U)){let V=f1.p2pkh({hash:U.slice(2)}).output;X=Q.hashForWitnessV0($,V,Z.value,O)}else{if(Y.nonWitnessUtxo===void 0&&q.__UNSAFE_SIGN_NONSEGWIT===!1)throw new Error(`Input #${$} has witnessUtxo but non-segwit script: ${U.toString("hex")}`);if(!J&&q.__UNSAFE_SIGN_NONSEGWIT!==!1)console.warn(`Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as Psbt's predecessor (TransactionBuilder - now removed) when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.
*********************
PROCEED WITH CAUTION!
*********************`);X=Q.hashForSignature($,U,O)}return{script:U,sighashType:O,hash:X}}function DL($,Y,q,J){let G=[];if(Y.tapInternalKey){let O=SQ($,Y,J);if(O)G.push(O)}if(Y.tapScriptSig){let O=Y.tapScriptSig.map((X)=>X.pubkey);G.push(...O)}return G.map((O)=>Y$($,Y,q,O,J)).flat()}function SQ($,Y,q){let{script:J}=G$($,Y,q);return u0.isP2TR(J)?J.subarray(2,34):null}function PQ($){return $.length===64?$:$.subarray(0,64)}function Y$($,Y,q,J,G,Q,O){let X=G.__TX,Z=Y.sighashType||Z1.Transaction.SIGHASH_DEFAULT;kQ(Z,O);let U=q.map((j,D)=>G$(D,j,G)),N=U.map((j)=>j.script),V=U.map((j)=>j.value),z=[];if(Y.tapInternalKey&&!Q){let j=SQ($,Y,G)||Buffer.from([]);if(d0.toXOnly(J).equals(j)){let D=X.hashForWitnessV1($,N,V,Z);z.push({pubkey:J,hash:D})}}let L=(Y.tapLeafScript||[]).filter((j)=>u0.pubkeyInScript(J,j.script)).map((j)=>{let D=UL.tapleafHash({output:j.script,version:j.leafVersion});return Object.assign({hash:D},j)}).filter((j)=>!Q||Q.equals(j.hash)).map((j)=>{let D=X.hashForWitnessV1($,N,V,Z,j.hash);return{pubkey:J,hash:D,leafHash:j.hash}});return z.concat(L)}function kQ($,Y){if(Y&&Y.indexOf($)<0){let q=HL($);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${q}`)}}function RL($,Y,q){let J;switch(Y){case"multisig":let G=EL($,q);J=f1.p2ms({output:$,signatures:G});break;case"pubkey":J=f1.p2pk({output:$,signature:q[0].signature});break;case"pubkeyhash":J=f1.p2pkh({output:$,pubkey:q[0].pubkey,signature:q[0].signature});break;case"witnesspubkeyhash":J=f1.p2wpkh({output:$,pubkey:q[0].pubkey,signature:q[0].signature});break}return J}function AL($,Y,q){let J=q.__TX,G={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(G.isP2SH=!!Y.redeemScript,G.isP2WSH=!!Y.witnessScript,Y.witnessScript)G.script=Y.witnessScript;else if(Y.redeemScript)G.script=Y.redeemScript;else if(Y.nonWitnessUtxo){let Q=p6(q,Y,$),O=J.ins[$].index;G.script=Q.outs[O].script}else if(Y.witnessUtxo)G.script=Y.witnessUtxo.script;if(Y.witnessScript||u0.isP2WPKH(G.script))G.isSegwit=!0;return G}function BQ($,Y,q){let J=j1.checkForInput(Y,$);if(!J.bip32Derivation||J.bip32Derivation.length===0)throw new Error("Need bip32Derivation to sign with HD");let G=J.bip32Derivation.map((O)=>{if(O.masterFingerprint.equals(q.fingerprint))return O;else return}).filter((O)=>!!O);if(G.length===0)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return G.map((O)=>{let X=q.derivePath(O.path);if(!O.pubkey.equals(X.publicKey))throw new Error("pubkey did not match bip32Derivation");return X})}function EL($,Y){return f1.p2ms({output:$}).pubkeys.map((J)=>{return(Y.filter((G)=>{return G.pubkey.equals(J)})[0]||{}).signature}).filter((J)=>!!J)}function xQ($){let Y=0;function q(O){return Y+=O,$.slice(Y-O,Y)}function J(){let O=LQ.decode($,Y);return Y+=LQ.decode.bytes,O}function G(){return q(J())}function Q(){let O=J(),X=[];for(let Z=0;Z<O;Z++)X.push(G());return X}return Q()}function HL($){let Y=$&Z1.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch($&31){case Z1.Transaction.SIGHASH_ALL:Y+="SIGHASH_ALL";break;case Z1.Transaction.SIGHASH_SINGLE:Y+="SIGHASH_SINGLE";break;case Z1.Transaction.SIGHASH_NONE:Y+="SIGHASH_NONE";break}return Y}function q$($,Y,q){$.__NON_WITNESS_UTXO_BUF_CACHE[q]=Y.nonWitnessUtxo;let J=Z1.Transaction.fromBuffer(Y.nonWitnessUtxo);$.__NON_WITNESS_UTXO_TX_CACHE[q]=J;let G=$,Q=q;delete Y.nonWitnessUtxo,Object.defineProperty(Y,"nonWitnessUtxo",{enumerable:!0,get(){let O=G.__NON_WITNESS_UTXO_BUF_CACHE[Q],X=G.__NON_WITNESS_UTXO_TX_CACHE[Q];if(O!==void 0)return O;else{let Z=X.toBuffer();return G.__NON_WITNESS_UTXO_BUF_CACHE[Q]=Z,Z}},set(O){G.__NON_WITNESS_UTXO_BUF_CACHE[Q]=O}})}function fQ($,Y,q,J){let G=0;$.forEach((Z,U)=>{if(J&&Z.finalScriptSig)Y.ins[U].script=Z.finalScriptSig;if(J&&Z.finalScriptWitness)Y.ins[U].witness=xQ(Z.finalScriptWitness);if(Z.witnessUtxo)G+=Z.witnessUtxo.value;else if(Z.nonWitnessUtxo){let N=p6(q,Z,U),V=Y.ins[U].index,z=N.outs[V];G+=z.value}});let Q=Y.outs.reduce((Z,U)=>Z+U.value,0),O=G-Q;if(O<0)throw new Error("Outputs are spending more than Inputs");let X=Y.virtualSize();q.__FEE=O,q.__EXTRACTED_TX=Y,q.__FEE_RATE=Math.floor(O/X)}function p6($,Y,q){let J=$.__NON_WITNESS_UTXO_TX_CACHE;if(!J[q])q$($,Y,q);return J[q]}function mQ($,Y,q){let{script:J}=G$($,Y,q);return J}function G$($,Y,q){if(Y.witnessUtxo!==void 0)return{script:Y.witnessUtxo.script,value:Y.witnessUtxo.value};else if(Y.nonWitnessUtxo!==void 0){let G=p6(q,Y,$).outs[q.__TX.ins[$].index];return{script:G.script,value:G.value}}else throw new Error("Can't find pubkey in input without Utxo data")}function FL($,Y,q,J){let G=mQ(q,Y,J),{meaningfulScript:Q}=n6(G,q,"input",Y.redeemScript,Y.witnessScript);return u0.pubkeyInScript($,Q)}function PL($,Y,q,J){let G=J.__TX.outs[q].script,{meaningfulScript:Q}=n6(G,q,"output",Y.redeemScript,Y.witnessScript);return u0.pubkeyInScript($,Q)}function BL($){if(!$)return;let Y=A8.decompile($);if(!Y)return;let q=Y[Y.length-1];if(!Buffer.isBuffer(q)||gQ(q)||IL(q))return;if(!A8.decompile(q))return;return q}function wL($){if(!$)return;let Y=xQ($),q=Y[Y.length-1];if(gQ(q))return;if(!A8.decompile(q))return;return q}function TL($){if($.length===65){let Y=$[64]&1,q=$.slice(0,33);return q[0]=2|Y,q}return $.slice()}function gQ($){return $.length===33&&A8.isCanonicalPubKey($)}function IL($){return A8.isCanonicalScriptSignature($)}function n6($,Y,q,J,G){let Q=u0.isP2SHScript($),O=Q&&J&&u0.isP2WSHScript(J),X=u0.isP2WSHScript($);if(Q&&J===void 0)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((X||O)&&G===void 0)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");let Z;if(O)Z=G,AQ(Y,$,J,q),EQ(Y,J,G,q),o6(Z);else if(X)Z=G,EQ(Y,$,G,q),o6(Z);else if(Q)Z=J,AQ(Y,$,J,q);else Z=$;return{meaningfulScript:Z,type:O?"p2sh-p2wsh":Q?"p2sh":X?"p2wsh":"raw"}}function o6($){if(u0.isP2WPKH($)||u0.isP2SHScript($))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function bQ($){if(u0.isP2WPKH($))return"witnesspubkeyhash";if(u0.isP2PKH($))return"pubkeyhash";if(u0.isP2MS($))return"multisig";if(u0.isP2PK($))return"pubkey";return"nonstandard"}function b5($){return[...Array($).keys()]}});var $5=y((L9)=>{Object.defineProperty(L9,"__esModule",{value:!0});L9.initEccLib=L9.Transaction=L9.opcodes=L9.Psbt=L9.Block=L9.script=L9.payments=L9.networks=L9.crypto=L9.address=void 0;var vL=f6();L9.address=vL;var _L=t1();L9.crypto=_L;var SL=S1();L9.networks=SL;var kL=s9();L9.payments=kL;var xL=X1();L9.script=xL;var fL=QQ();Object.defineProperty(L9,"Block",{enumerable:!0,get:function(){return fL.Block}});var mL=lQ();Object.defineProperty(L9,"Psbt",{enumerable:!0,get:function(){return mL.Psbt}});var gL=L6();Object.defineProperty(L9,"opcodes",{enumerable:!0,get:function(){return gL.OPS}});var bL=t9();Object.defineProperty(L9,"Transaction",{enumerable:!0,get:function(){return bL.Transaction}});var dL=S6();Object.defineProperty(L9,"initEccLib",{enumerable:!0,get:function(){return dL.initEccLib}})});var cQ=y((jB,hQ)=>{var Q$={name:"BitcoinCash",per1:1e8,unit:"BCH"},pL=Object.assign({},{hashGenesisBlock:"000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f",port:8333,portRpc:8332,protocol:{magic:3908297187},seedsDns:["seed.bitcoinabc.org","seed-abc.bitcoinforks.org","btccash-seeder.bitcoinunlimited.info","seed.bitprim.org","seed.deadalnix.me","seeder.criptolayer.net"],versions:{bip32:{private:76066276,public:76067358},bip44:145,private:128,public:0,scripthash:5}},Q$),nL=Object.assign({},{hashGenesisBlock:"000000000933ea01ad0ee984209779baaec3ced90fa3f408719526f8d77f4943",port:18333,portRpc:18332,protocol:{magic:4109624820},seedsDns:["testnet-seed.bitcoinabc.org","testnet-seed-abc.bitcoinforks.org","testnet-seed.bitprim.org","testnet-seed.deadalnix.me","testnet-seeder.criptolayer.net"],versions:{bip32:{private:70615956,public:70617039},bip44:1,private:239,public:111,scripthash:196}},Q$),aL=Object.assign({},{hashGenesisBlock:"0f9188f13cb7b2c71f2a335e3a4fc328bf5beb436012afca590b1a11466e2206",port:18444,portRpc:18332,protocol:{magic:4206867930},seedsDns:[],versions:{bip32:{private:70615956,public:70617039},bip44:1,private:239,public:111,scripthash:196}},Q$);hQ.exports={main:pL,test:nL,regtest:aL}});var oQ=y((KB,uQ)=>{var iL={name:"BlackCoin",per1:1e8,unit:"BLK"},sL=Object.assign({},{hashGenesisBlock:"000001faef25dec4fbcf906e6242621df2c183bf232f263d0ba5b101911e4563",port:15714,portRpc:15715,protocol:{magic:86127984},seedsDns:["rat4.blackcoin.co","seed.blackcoin.co","archon.darkfox.id.au","foxy.seeds.darkfox.id.au","6.syllabear.us.to","bcseed.syllabear.us.to"],versions:{bip32:{private:76066276,public:76067358},bip44:10,private:153,public:25,scripthash:85}},iL);uQ.exports={main:sL,test:null}});var nQ=y((zB,pQ)=>{var a6={name:"Bitcoin",per1:1e8,unit:"BTC",messagePrefix:`\x18Bitcoin Signed Message:
`},rL=Object.assign({},{hashGenesisBlock:"000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f",port:8333,portRpc:8332,protocol:{magic:3652501241},bech32:"bc",seedsDns:["seed.bitcoin.sipa.be","dnsseed.bluematt.me","seed.bitcoinstats.com","seed.bitcoin.jonasschnelli.ch","seed.btc.petertodd.org","seed.bitcoin.sprovoost.nl","dnsseed.emzy.de"],versions:{bip32:{private:76066276,public:76067358},bip44:0,private:128,public:0,scripthash:5}},a6),tL=Object.assign({},{hashGenesisBlock:"000000000933ea01ad0ee984209779baaec3ced90fa3f408719526f8d77f4943",port:18333,portRpc:18332,protocol:{magic:118034699},bech32:"tb",seedsDns:["testnet-seed.alexykot.me","testnet-seed.bitcoin.schildbach.de","testnet-seed.bitcoin.petertodd.org","testnet-seed.bluematt.me"],versions:{bip32:{private:70615956,public:70617039},bip44:1,private:239,public:111,scripthash:196}},a6),eL=Object.assign({},{hashGenesisBlock:"0f9188f13cb7b2c71f2a335e3a4fc328bf5beb436012afca590b1a11466e2206",port:18444,portRpc:18332,protocol:{magic:3669344250},bech32:"bcrt",seedsDns:[],versions:{bip32:{private:70615956,public:70617039},bip44:1,private:239,public:111,scripthash:196}},a6),$2=Object.assign({},{hashGenesisBlock:"f67ad7695d9b662a72ff3d8edbbb2de0bfa67b13974bb9910d116d5cbd863e68",port:18555,portRpc:18556,protocol:{magic:303307798},bech32:"sb",seedsDns:[],versions:{bip32:{private:69253376,public:69254458},bip44:115,private:100,public:63,scripthash:123}},a6);pQ.exports={main:rL,test:tL,regtest:eL,simnet:$2}});var sQ=y((WB,iQ)=>{var aQ={name:"Bitcoin Gold",unit:"BTG"},Y2=Object.assign({},{hashGenesisBlock:"000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f",port:8338,protocol:{magic:1148012513},bech32:"btg",seedsDns:["eu-dnsseed.bitcoingold-official.org","dnsseed.bitcoingold.org","dnsseed.btcgpu.org"],versions:{bip32:{private:76066276,public:76067358},bip44:156,private:128,public:38,scripthash:23}},aQ),q2=Object.assign({},{hashGenesisBlock:"0x00000000e0781ebe24b91eedc293adfea2f557b53ec379e78959de3853e6f9f6",port:18338,portRpc:18332,protocol:{magic:1164855522},bech32:"tbtg",seedsDns:["test-dnsseed.bitcoingold.org","test-dnsseed.btcgpu.org","eu-test-dnsseed.bitcoingold-official.org"],versions:{bip32:{private:70615956,public:70617039},bip44:156,private:239,public:111,scripthash:196}},aQ);iQ.exports={main:Y2,test:q2}});var tQ=y((LB,rQ)=>{var O$={name:"c0ban",unit:"RYO"},J2=Object.assign({},{hashGenesisBlock:"000000005184ffce04351e687a3965b300ee011d26b2089232cd039273be4a67",port:3881,portRpc:3882,protocol:{magic:1851928675},seedsDns:["jp01.dnsseed.c0ban.com","kr01.dnsseed.c0ban.com"],versions:{bip32:{private:76066276,public:76067358},bip44:88888,private:136,public:18,scripthash:28}},O$),G2=Object.assign({},{hashGenesisBlock:"000000005184ffce04351e687a3965b300ee011d26b2089232cd039273be4a67",port:13881,portRpc:13882,protocol:{magic:2390917251},seedsDns:[],versions:{bip32:{private:70812552,public:72910728},bip44:1,private:238,public:118,scripthash:198}},O$),Q2=Object.assign({},{hashGenesisBlock:"3249e44acac8fc67e6b94e882525cea6f5a9853e1ff7b4a1d5f470b23ff8ae11",port:23881,portRpc:23882,protocol:{magic:3669344250},seedsDns:[],versions:{bip32:{private:70617039,public:70615956},bip44:1,private:239,public:111,scripthash:196}},O$);rQ.exports={main:J2,test:G2,regtest:Q2}});var YO=y((CB,$O)=>{var eQ={name:"CityCoin",isProofOfStake:!0},O2=Object.assign({},{unit:"CITY",hashGenesisBlock:"00000b0517068e602ed5279c20168cfa1e69884ee4e784909652da34c361bff2",port:4333,portRpc:4334,protocol:{magic:1129601281},seedsDns:["seed.city-chain.org","seed.city-coin.org","seed.citychain.foundation","seed.liberstad.com"],versions:{bip32:{private:76066276,public:76067358},bip44:1926,private:237,public:28,scripthash:88}},eQ),X2=Object.assign({},{unit:"TCITY",hashGenesisBlock:"00077765f625cc2cb6266544ff7d5a462f25be14ea1116dc2bd2fec17e40a5e3",port:24333,portRpc:24334,protocol:{magic:1129600001},seedsDns:["testseed.city-chain.org","testseed.city-coin.org","testseed.citychain.foundation"],versions:{bip32:{private:76066276,public:76067358},bip44:1926,private:194,public:66,scripthash:196}},eQ);$O.exports={main:O2,test:X2}});var GO=y((DB,JO)=>{var qO={name:"Dash",unit:"DASH"},Z2=Object.assign({},{hashGenesisBlock:"00000ffd590b1485b3caadc19b22e6379c733355108f107a430458cdf3407ab6",port:9999,portRpc:9998,protocol:{magic:3177909439},seedsDns:["dash.org","dnsseed.dash.org","dashdot.io","dnsseed.dashdot.io","masternode.io","dnsseed.masternode.io","dashpay.io","dnsseed.dashpay.io"],versions:{bip32:{private:76066276,public:76067358},bip44:5,private:204,public:76,scripthash:16}},qO),U2=Object.assign({},{hashGenesisBlock:"00000bafbc94add76cb75e2ec92894837288a481e5c005f6563d91623bf8bc2c",port:19999,portRpc:19998,seedsDns:["dashdot.io","testnet-seed.dashdot.io","masternode.io","test.dnsseed.masternode.io"],versions:{bip32:{private:70615956,public:70617039},bip44:1,private:239,public:140,scripthash:19}},qO);JO.exports={main:Z2,test:U2}});var XO=y((RB,OO)=>{var QO={name:"Denarius",unit:"DNR"},N2=Object.assign({},{hashGenesisBlock:"00000d5dbbda01621cfc16bbc1f9bf3264d641a5dbf0de89fd0182c2c4828fcd",port:33339,portRpc:32339,protocol:{magic:3035624186},seedsDns:["denariusexplorer.org","denarius.host","denarius.tech","denarius.network"],versions:{bip32:{private:76066276,public:76067358},bip44:116,private:158,public:30,scripthash:90}},QO),M2=Object.assign({},{hashGenesisBlock:"000086bfe8264d241f7f8e5393f747784b8ca2aa98bdd066278d590462a4fdb4",versions:{bip44:1,private:140,public:18,scripthash:116}},QO);OO.exports={main:N2,test:M2}});var NO=y((AB,UO)=>{var ZO={name:"Decred",unit:"DCR"},V2=Object.assign({},{hashGenesisBlock:"298e5cc3d985bfe7f81dc135f360abe089edd4396b86d2de66b0cef42b21d980",port:9108,portRpc:9109,protocol:{magic:4177573081},seedsDns:["mainnet-seed.decred.mindcry.org","mainnet-seed.decred.netpurgatory.com","mainnet.decredseed.org","mainnet-seed.decred.org"],versions:{bip32:{private:50177256,public:50178342},bip44:42,private:8926,public:1855,scripthash:1818}},ZO),j2=Object.assign({},{hashGenesisBlock:"5b7466edf6739adc9b32aaedc54e24bdc59a05f0ced855088835fe3cbe58375f",port:19108,portRpc:19109,protocol:{magic:1223139429},seedsDns:["testnet-seed.decred.mindcry.org","testnet-seed.decred.netpurgatory.org","testnet.decredseed.org","testnet-seed.decred.org"],versions:{bip32:{private:70615959,public:70617041},bip44:42,private:8974,public:3873,scripthash:3836}},ZO);UO.exports={main:V2,test:j2}});var VO=y((EB,MO)=>{var K2={name:"DigiByte",per1:1e8,unit:"DGB"},z2=Object.assign({},{hashGenesisBlock:"000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f",port:12024,portRpc:14022,protocol:{magic:4207130330},bech32:"dgb",seedsDns:["seed.digibyte.io","digiexplorer.info","digihash.co"],versions:{bip44:2147483668,private:128,public:30,scripthash:63,scripthash2:5}},K2);MO.exports={main:z2}});var zO=y((HB,KO)=>{var jO={name:"Dogecoin",unit:"DOGE"},W2=Object.assign({},{hashGenesisBlock:"1a91e3dace36e2be3bf030a65679fe821aa1d6ef92e7c9902eb318182c355691",port:22556,protocol:{magic:3233857728},seedsDns:["seed.multidoge.org","seed2.multidoge.org"],versions:{bip32:{private:49988504,public:49990397},bip44:3,private:158,public:30,scripthash:22}},jO),L2=Object.assign({},{hashGenesisBlock:"bb0a78264637406b6360aad926284d544d7049f45189db5664f3c4d07350559e",port:44556,protocol:{magic:4240553948},seedsDns:["testseed.jrn.me.uk"],versions:{bip32:{private:70615956,public:70617039},bip44:1,private:241,public:113,scripthash:196}},jO);KO.exports={main:W2,test:L2}});var LO=y((FB,WO)=>{var X$={name:"Groestlcoin",per1:1e8,unit:"GRS",messagePrefix:`\x1CGroestlCoin Signed Message:
`},C2=Object.assign({},{hashGenesisBlock:"00000ac5927c594d49cc0bdb81759d0da8297eb614683d3acb62f0703b639023",port:1331,portRpc:1441,protocol:{magic:3568615161},bech32:"grs",seedsDns:["dnsseed1.groestlcoin.org","dnsseed2.groestlcoin.org","dnsseed3.groestlcoin.org","dnsseed4.groestlcoin.org"],versions:{bip32:{private:76066276,public:76067358},bip44:17,private:128,public:36,scripthash:5}},X$),D2=Object.assign({},{hashGenesisBlock:"0x000000ffbb50fc9898cdd36ec163e6ba23230164c0052a28876255b7dcf2cd36",port:17777,portRpc:17766,protocol:{magic:118034699},bech32:"tgrs",seedsDns:["testnet-seed1.groestlcoin.org","testnet-seed2.groestlcoin.org"],versions:{bip32:{private:70615956,public:70617039},bip44:1,private:239,public:111,scripthash:196}},X$),R2=Object.assign({},{hashGenesisBlock:"0x000000ffbb50fc9898cdd36ec163e6ba23230164c0052a28876255b7dcf2cd36",port:18888,portRpc:18443,protocol:{magic:3669344250},bech32:"grsrt",seedsDns:[],versions:{bip32:{private:70615956,public:70617039},bip44:1,private:239,public:111,scripthash:196}},X$);WO.exports={main:C2,test:D2,regtest:R2}});var RO=y((PB,DO)=>{var CO={name:"Litecoin",unit:"LTC"},A2=Object.assign({},{hashGenesisBlock:"12a765e31ffd4059bada1e25190f6e98c99d9714d334efa41a195a7e7e04bfe2",port:9333,protocol:{magic:3686187259},bech32:"ltc",seedsDns:["dnsseed.litecointools.com","dnsseed.litecoinpool.org","dnsseed.ltc.xurious.com","dnsseed.koin-project.com","dnsseed.weminemnc.com"],versions:{bip32:{private:27106558,public:27108450},bip44:2,private:176,public:48,scripthash:50,scripthash2:5}},CO),E2=Object.assign({},{hashGenesisBlock:"f5ae71e26c74beacc88382716aced69cddf3dffff24f384e1808905e0188f68f",bech32:"tltc",versions:{bip32:{private:70709117,public:70711009},bip44:1,private:239,public:111,scripthash:58,scripthash2:196}},CO);DO.exports={main:A2,test:E2}});var HO=y((BB,EO)=>{var AO={name:"Viacoin",unit:"VIA"},H2=Object.assign({},{hashGenesisBlock:"4e9b54001f9976049830128ec0331515eaabe35a70970d79971da1539a400ba1",port:5223,protocol:{magic:3418777615},seedsDns:["seed.viacoin.net","viaseeder.barbatos.fr","mainnet.viacoin.net"],versions:{bip32:{private:76066276,public:76067358},bip44:14,private:199,public:71,scripthash:33}},AO),F2=Object.assign({},{hashGenesisBlock:"770aa712aa08fdcbdecc1c8df1b3e2d4e17a7cf6e63a28b785b32e74c96cb27d",port:25223,protocol:{magic:2465187241},seedsDns:["testnet.viacoin.net","seed-testnet.viacoin.net"],versions:{bip32:{private:70615956,public:70617039},bip44:1,private:255,public:127,scripthash:196}},AO);EO.exports={main:H2,test:F2}});var BO=y((wB,PO)=>{var FO={name:"Monacoin",unit:"MONA"},P2=Object.assign({},{hashGenesisBlock:"ff9f1c0116d19de7c9963845e129f9ed1bfc0b376eb54fd7afa42e0d418c8bb6",port:9401,portRpc:9402,protocol:{magic:3686187259},bech32:"mona",seedsDns:["dnsseed.monacoin.org"],versions:{bip32:{private:76066276,public:76067358},bip44:22,private:176,private2:178,public:50,scripthash:55,scripthash2:5}},FO),B2=Object.assign({},{hashGenesisBlock:"a2b106ceba3be0c6d097b2a6a6aacf9d638ba8258ae478158f449c321061e0b2",port:19403,portRpc:19402,protocol:{magic:4056470269},bech32:"tmona",seedsDns:["testnet-dnsseed.monacoin.org"],versions:{bip32:{private:70615956,public:70617039},bip44:1,private:239,public:111,scripthash:117,scripthash2:196}},FO);PO.exports={main:P2,test:B2}});var TO=y((TB,wO)=>{var w2={name:"NuBits",per1:1e6,unit:"NBT"},T2=Object.assign({},{hashGenesisBlock:"000003cc2da5a0a289ad0a590c20a8b975219ddc1204efd169e947dd4cbad73f",port:7890,portRpc:14002,protocol:{magic:3652501241},seedsDns:[],versions:{bip32:{private:76066276,public:76067358},bip44:12,private:150,public:25,scripthash:26}},w2);wO.exports={main:T2}});var vO=y((IB,IO)=>{var I2={name:"Namecoin",unit:"NMC"},v2=Object.assign({},{hashGenesisBlock:"000000000062b72c5e2ceb45fbc8587e807c155b0da735e6483dfba2f0a9c770",versions:{bip44:7,private:180,public:52,scripthash:5}},I2);IO.exports={main:v2,test:null}});var kO=y((vB,SO)=>{var _O={name:"Peercoin",per1:1e6,unit:"PPC",messagePrefix:`\x18Peercoin Signed Message:
`},_2=Object.assign({},{hashGenesisBlock:"0000000032fe677166d54963b62a4677d8957e87c508eaa4fd7eb1c880cd27e3",port:9901,portRpc:9902,protocol:{magic:3857311974},seedsDns:["seed.peercoin.net","seed2.peercoin.net","seed.peercoin-library.org","ppcseed.ns.7server.net"],versions:{bip32:{private:76066276,public:76067358},bip44:6,private:183,public:55,scripthash:117}},_O),S2=Object.assign({},{hashGenesisBlock:"00000001f757bb737f6596503e17cd17b0658ce630cc727c0cca81aec47c9f06",port:9903,portRpc:9904,protocol:{magic:4022399691},seedsDns:["tseed.peercoin.net","tseed2.peercoin.net","tseed.peercoin-library.org"],versions:{bip32:{private:70615956,public:70617039},bip44:1,private:239,public:111,scripthash:196}},_O);SO.exports={main:_2,test:S2}});var fO=y((_B,xO)=>{var k2={name:"Qtum",unit:"QTUM"},x2=Object.assign({},{hashGenesisBlock:"000075aef83cf2853580f8ae8ce6f8c3096cfa21d98334d6e3f95e5582ed986c",port:3888,protocol:{magic:3550924785},bech32:"qc",seedsDns:["qtum3.dynu.net"],versions:{bip32:{private:76066276,public:76067358},bip44:2301,private:128,public:58,scripthash:50}},k2);xO.exports={main:x2}});var bO=y((SB,gO)=>{var mO={name:"Ravencoin",unit:"RVN"},f2=Object.assign({},{hashGenesisBlock:"0000006b444bc2f2ffe627be9d9e7e7a0730000870ef6eb6da46c8eae389df90",port:8767,protocol:{magic:1314275666},bech32:"rc",seedsDns:["seed-raven.bitactivate.com","seed-raven.ravencoin.com","seed-raven.ravencoin.org"],versions:{bip32:{private:76066276,public:76067358},bip44:175,private:128,public:60,scripthash:122}},mO),m2=Object.assign({},{hashGenesisBlock:"000000ecfc5e6324a079542221d00e10362bdc894d56500c414060eea8a3ad5a",port:18770,protocol:{magic:1414420050},bech32:"tr",seedsDns:["seed-testnet-raven.bitactivate.com","seed-testnet-raven.ravencoin.com","seed-testnet-raven.ravencoin.org"],versions:{bip32:{private:70615956,public:70617039},bip44:1,private:239,public:111,scripthash:196}},mO);gO.exports={main:f2,test:m2}});var lO=y((kB,yO)=>{var dO={name:"ReddCoin",unit:"RDD"},g2=Object.assign({},{hashGenesisBlock:"b868e0d95a3c3c0e0dadc67ee587aaf9dc8acbf99e3b4b3110fad4eb74c1decc",versions:{bip44:4,private:189,public:61,scripthash:5}},dO),b2=Object.assign({},{hashGenesisBlock:"a12ac9bd4cd26262c53a6277aafc61fe9dfe1e2b05eaa1ca148a5be8b394e35a",versions:{bip44:1,private:239,public:111,scripthash:196}},dO);yO.exports={main:g2,test:b2}});var cO=y((xB,hO)=>{var Z$={name:"Vertcoin",unit:"VTC"},d2=Object.assign({},{hashGenesisBlock:"4d96a915f49d40b1e5c2844d1ee2dccb90013a990ccea12c492d22110489f0c4",port:5889,protocol:{magic:3669344250},bech32:"vtc",seedsDns:["useast1.vtconline.org","vtc.gertjaap.org","seed.vtc.bryangoodson.org","dnsseed.pknight.ca","seed.orderofthetaco.org","seed.alexturek.org","vertcoin.mbl.cash"],versions:{bip32:{private:76066276,public:76067358},bip44:28,private:128,public:71,scripthash:5}},Z$),y2=Object.assign({},{hashGenesisBlock:"cee8f24feb7a64c8f07916976aa4855decac79b6741a8ec2e32e2747497ad2c9",port:15889,protocol:{magic:1953654134},bech32:"tvtc",seedsDns:["jlovejoy.mit.edu","gertjaap.ddns.net","fr1.vtconline.org","tvtc.vertcoin.org"],versions:{bip32:{private:70615956,public:70617039},private:239,public:74,scripthash:196}},Z$),l2=Object.assign({},{hashGenesisBlock:"0f9188f13cb7b2c71f2a335e3a4fc328bf5beb436012afca590b1a11466e2206",port:18444,protocol:{magic:3669344250},seedsDns:[],versions:{bip32:{private:70615956,public:70617039},private:239,public:111,scripthash:196}},Z$);hO.exports={main:d2,test:y2,regtest:l2}});var pO=y((fB,oO)=>{var uO={name:"x42",isProofOfStake:!0},h2=Object.assign({},{unit:"x42",hashGenesisBlock:"04ffe583707a96c1c2eb54af33a4b1dc6d9d8e09fea8c9a7b097ba88f0cb64c4",port:52342,portRpc:52343,protocol:{magic:55731778},seedsDns:["mainnet1.x42seed.host","mainnetnode1.x42seed.host","tech.x42.cloud","x42.seed.blockcore.net"],versions:{bip32:{private:76066276,public:76067358},bip44:424242,private:203,public:75,scripthash:125}},uO),c2=Object.assign({},{unit:"Tx42",hashGenesisBlock:"a92bf124a1e6f237015440d5f1e1999bdef8e321f2d3fdc367eb2f7733b17854",port:62342,portRpc:62343,protocol:{magic:72508994},seedsDns:["testnet1.x42seed.host"],versions:{bip32:{private:76066276,public:76067358},bip44:424242,private:193,public:65,scripthash:196}},uO);oO.exports={main:h2,test:c2}});var iO=y((mB,aO)=>{var nO={name:"Zcash",unit:"ZEC"},u2=Object.assign({},{hashGenesisBlock:"00040fe8ec8471911baa1db1266ea15dd06b4a8a5c453883c000b031973dce08",port:8233,portRpc:8232,protocol:{magic:1680337188},seedsDns:["dnsseed.z.cash","dnsseed.str4d.xyz","dnsseed.znodes.org"],versions:{bip32:{private:76066276,public:76067358},bip44:133,private:128,public:7352,scripthash:7357}},nO),o2=Object.assign({},{hashGenesisBlock:"0x05a60a92d99d85997cce3b87616c089f6124d7342af37106edc76126334a2c38",port:18233,portRpc:18232,protocol:{magic:3220773626},seedsDns:["dnsseed.testnet.z.cash"],versions:{bip32:{private:70615956,public:70617039},bip44:133,private:239,public:7461,scripthash:7354}},nO);aO.exports={main:u2,test:o2}});var eO=y((gB,tO)=>{var p2=F1().Buffer,sO=[cQ(),oQ(),nQ(),sQ(),tQ(),YO(),GO(),XO(),NO(),VO(),zO(),LO(),RO(),HO(),BO(),TO(),vO(),kO(),fO(),bO(),lO(),cO(),pO(),iO()],Q8={};sO.forEach(function($){var Y=$.main.unit.toLowerCase(),q=$.main.name.toLowerCase();if($.main.testnet=!1,$.main.toBitcoinJS=i6.bind($.main),$.main.toBitcore=s6.bind($.main),Q8[Y]=$.main,Q8[q]=$.main,$.test)$.test.testnet=!0,$.test.toBitcoinJS=i6.bind($.test),$.test.toBitcore=s6.bind($.test),Q8[Y+"-test"]=$.test,Q8[q+"-test"]=$.test;if($.regtest)$.regtest.testnet=!0,$.regtest.toBitcoinJS=i6.bind($.regtest),$.regtest.toBitcore=s6.bind($.regtest),Q8[Y+"-regtest"]=$.regtest,Q8[q+"-regtest"]=$.regtest;if($.simnet)$.simnet.testnet=!0,$.simnet.toBitcoinJS=i6.bind($.simnet),$.simnet.toBitcore=s6.bind($.simnet),Q8[Y+"-simnet"]=$.simnet,Q8[q+"-simnet"]=$.simnet});function rO($){var Y=$.toLowerCase();if(!(Y in Q8))return null;else return Q8[Y]}sO.forEach(function($){rO[$.main.name.toLowerCase()]=$});function i6(){return Object.assign({},this,{messagePrefix:this.messagePrefix||"\x19"+this.name+` Signed Message:
`,bech32:this.bech32,bip32:{public:(this.versions.bip32||{}).public,private:(this.versions.bip32||{}).private},pubKeyHash:this.versions.public,scriptHash:this.versions.scripthash,wif:this.versions.private,dustThreshold:null})}function s6(){var $=p2.allocUnsafe(4);return $.writeUInt32BE(this.protocol?this.protocol.magic:0,0),$=$.readUInt32LE(0),Object.assign({},this,{name:this.testnet?"testnet":"livenet",alias:this.testnet?"testnet":"mainnet",pubkeyhash:this.versions.public,privatekey:this.versions.private,scripthash:this.versions.scripthash,xpubkey:(this.versions.bip32||{}).public,xprivkey:(this.versions.bip32||{}).private,networkMagic:$,port:this.port,dnsSeeds:this.seedsDns||[]})}tO.exports=rO});var RX=y((DX)=>{/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */Object.defineProperty(DX,"__esModule",{value:!0});DX.utils=DX.schnorr=DX.verify=DX.signSync=DX.sign=DX.getSharedSecret=DX.recoverPublicKey=DX.getPublicKey=DX.Signature=DX.Point=DX.CURVE=void 0;var i2=(a2(),C6(n2)),A0=BigInt(0),f0=BigInt(1),d8=BigInt(2),y5=BigInt(3),$X=BigInt(8),I0=Object.freeze({a:A0,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:f0,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});DX.CURVE=I0;var YX=($,Y)=>($+Y/d8)/Y,r6={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar($){let{n:Y}=I0,q=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),J=-f0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),G=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),Q=q,O=BigInt("0x100000000000000000000000000000000"),X=YX(Q*$,Y),Z=YX(-J*$,Y),U=r($-X*q-Z*G,Y),N=r(-X*J-Z*Q,Y),V=U>O,z=N>O;if(V)U=Y-U;if(z)N=Y-N;if(U>O||N>O)throw new Error("splitScalarEndo: Endomorphism failed, k="+$);return{k1neg:V,k1:U,k2neg:z,k2:N}}},c1=32,C9=32,ZX=32,q7=c1+1,J7=2*c1+1;function qX($){let{a:Y,b:q}=I0,J=r($*$),G=r(J*$);return r(G+Y*$+q)}var t6=I0.a===A0;class O7 extends Error{constructor($){super($)}}function JX($){if(!($ instanceof w0))throw new TypeError("JacobianPoint expected")}class w0{constructor($,Y,q){this.x=$,this.y=Y,this.z=q}static fromAffine($){if(!($ instanceof B0))throw new TypeError("JacobianPoint#fromAffine: expected Point");if($.equals(B0.ZERO))return w0.ZERO;return new w0($.x,$.y,f0)}static toAffineBatch($){let Y=$C($.map((q)=>q.z));return $.map((q,J)=>q.toAffine(Y[J]))}static normalizeZ($){return w0.toAffineBatch($).map(w0.fromAffine)}equals($){JX($);let{x:Y,y:q,z:J}=this,{x:G,y:Q,z:O}=$,X=r(J*J),Z=r(O*O),U=r(Y*Z),N=r(G*X),V=r(r(q*O)*Z),z=r(r(Q*J)*X);return U===N&&V===z}negate(){return new w0(this.x,r(-this.y),this.z)}double(){let{x:$,y:Y,z:q}=this,J=r($*$),G=r(Y*Y),Q=r(G*G),O=$+G,X=r(d8*(r(O*O)-J-Q)),Z=r(y5*J),U=r(Z*Z),N=r(U-d8*X),V=r(Z*(X-N)-$X*Q),z=r(d8*Y*q);return new w0(N,V,z)}add($){JX($);let{x:Y,y:q,z:J}=this,{x:G,y:Q,z:O}=$;if(G===A0||Q===A0)return this;if(Y===A0||q===A0)return $;let X=r(J*J),Z=r(O*O),U=r(Y*Z),N=r(G*X),V=r(r(q*O)*Z),z=r(r(Q*J)*X),L=r(N-U),j=r(z-V);if(L===A0)if(j===A0)return this.double();else return w0.ZERO;let D=r(L*L),B=r(L*D),R=r(U*D),A=r(j*j-B-d8*R),w=r(j*(R-A)-V*B),I=r(J*O*L);return new w0(A,w,I)}subtract($){return this.add($.negate())}multiplyUnsafe($){let Y=w0.ZERO;if(typeof $==="bigint"&&$===A0)return Y;let q=OX($);if(q===f0)return this;if(!t6){let N=Y,V=this;while(q>A0){if(q&f0)N=N.add(V);V=V.double(),q>>=f0}return N}let{k1neg:J,k1:G,k2neg:Q,k2:O}=r6.splitScalar(q),X=Y,Z=Y,U=this;while(G>A0||O>A0){if(G&f0)X=X.add(U);if(O&f0)Z=Z.add(U);U=U.double(),G>>=f0,O>>=f0}if(J)X=X.negate();if(Q)Z=Z.negate();return Z=new w0(r(Z.x*r6.beta),Z.y,Z.z),X.add(Z)}precomputeWindow($){let Y=t6?128/$+1:256/$+1,q=[],J=this,G=J;for(let Q=0;Q<Y;Q++){G=J,q.push(G);for(let O=1;O<2**($-1);O++)G=G.add(J),q.push(G);J=G.double()}return q}wNAF($,Y){if(!Y&&this.equals(w0.BASE))Y=B0.BASE;let q=Y&&Y._WINDOW_SIZE||1;if(256%q)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let J=Y&&U$.get(Y);if(!J){if(J=this.precomputeWindow(q),Y&&q!==1)J=w0.normalizeZ(J),U$.set(Y,J)}let{ZERO:G,BASE:Q}=w0,O=1+(t6?128/q:256/q),X=2**(q-1),Z=BigInt(2**q-1),U=2**q,N=BigInt(q);for(let V=0;V<O;V++){let z=V*X,L=Number($&Z);if($>>=N,L>X)L-=U,$+=f0;let j=z,D=z+Math.abs(L)-1,B=V%2!==0,R=L<0;if(L===0)Q=Q.add(e6(B,J[j]));else G=G.add(e6(R,J[D]))}return{p:G,f:Q}}multiply($,Y){let q=OX($),J,G;if(t6){let{k1neg:Q,k1:O,k2neg:X,k2:Z}=r6.splitScalar(q),{p:U,f:N}=this.wNAF(O,Y),{p:V,f:z}=this.wNAF(Z,Y);U=e6(Q,U),V=e6(X,V),V=new w0(r(V.x*r6.beta),V.y,V.z),J=U.add(V),G=N.add(z)}else{let{p:Q,f:O}=this.wNAF(q,Y);J=Q,G=O}return w0.normalizeZ([J,G])[0]}toAffine($){let{x:Y,y:q,z:J}=this,G=this.equals(w0.ZERO);if($==null)$=G?$X:O5(J);let Q=$,O=r(Q*Q),X=r(O*Q),Z=r(Y*O),U=r(q*X),N=r(J*Q);if(G)return B0.ZERO;if(N!==f0)throw new Error("invZ was invalid");return new B0(Z,U)}}w0.BASE=new w0(I0.Gx,I0.Gy,f0);w0.ZERO=new w0(A0,f0,A0);function e6($,Y){let q=Y.negate();return $?q:Y}var U$=new WeakMap;class B0{constructor($,Y){this.x=$,this.y=Y}_setWindowSize($){this._WINDOW_SIZE=$,U$.delete(this)}hasEvenY(){return this.y%d8===A0}static fromCompressedHex($){let Y=$.length===32,q=B1(Y?$:$.subarray(1));if(!Y7(q))throw new Error("Point is not on curve");let J=qX(q),G=e2(J),Q=(G&f0)===f0;if(Y){if(Q)G=r(-G)}else if(($[0]&1)===1!==Q)G=r(-G);let O=new B0(q,G);return O.assertValidity(),O}static fromUncompressedHex($){let Y=B1($.subarray(1,c1+1)),q=B1($.subarray(c1+1,c1*2+1)),J=new B0(Y,q);return J.assertValidity(),J}static fromHex($){let Y=O8($),q=Y.length,J=Y[0];if(q===c1)return this.fromCompressedHex(Y);if(q===q7&&(J===2||J===3))return this.fromCompressedHex(Y);if(q===J7&&J===4)return this.fromUncompressedHex(Y);throw new Error(`Point.fromHex: received invalid point. Expected 32-${q7} compressed bytes or ${J7} uncompressed bytes, not ${q}`)}static fromPrivateKey($){return B0.BASE.multiply(D9($))}static fromSignature($,Y,q){let{r:J,s:G}=NX(Y);if(![0,1,2,3].includes(q))throw new Error("Cannot recover: invalid recovery bit");let Q=N$(O8($)),{n:O}=I0,X=q===2||q===3?J+O:J,Z=O5(X,O),U=r(-Q*Z,O),N=r(G*Z,O),V=q&1?"03":"02",z=B0.fromHex(V+y8(X)),L=B0.BASE.multiplyAndAddUnsafe(z,U,N);if(!L)throw new Error("Cannot recover signature: point at infinify");return L.assertValidity(),L}toRawBytes($=!1){return l8(this.toHex($))}toHex($=!1){let Y=y8(this.x);if($)return`${this.hasEvenY()?"02":"03"}${Y}`;else return`04${Y}${y8(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let{x:Y,y:q}=this;if(!Y7(Y)||!Y7(q))throw new Error("Point is not on elliptic curve");let J=r(q*q),G=qX(Y);if(r(J-G)!==A0)throw new Error("Point is not on elliptic curve")}equals($){return this.x===$.x&&this.y===$.y}negate(){return new B0(this.x,r(-this.y))}double(){return w0.fromAffine(this).double().toAffine()}add($){return w0.fromAffine(this).add(w0.fromAffine($)).toAffine()}subtract($){return this.add($.negate())}multiply($){return w0.fromAffine(this).multiply($,this).toAffine()}multiplyAndAddUnsafe($,Y,q){let J=w0.fromAffine(this),G=Y===A0||Y===f0||this!==B0.BASE?J.multiplyUnsafe(Y):J.multiply(Y),Q=w0.fromAffine($).multiplyUnsafe(q),O=G.add(Q);return O.equals(w0.ZERO)?void 0:O.toAffine()}}DX.Point=B0;B0.BASE=new B0(I0.Gx,I0.Gy);B0.ZERO=new B0(A0,A0);function GX($){return Number.parseInt($[0],16)>=8?"00"+$:$}function QX($){if($.length<2||$[0]!==2)throw new Error(`Invalid signature integer tag: ${q5($)}`);let Y=$[1],q=$.subarray(2,Y+2);if(!Y||q.length!==Y)throw new Error("Invalid signature integer: wrong length");if(q[0]===0&&q[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:B1(q),left:$.subarray(Y+2)}}function s2($){if($.length<2||$[0]!=48)throw new Error(`Invalid signature tag: ${q5($)}`);if($[1]!==$.length-2)throw new Error("Invalid signature: incorrect length");let{data:Y,left:q}=QX($.subarray(2)),{data:J,left:G}=QX(q);if(G.length)throw new Error(`Invalid signature: left bytes after parsing: ${q5(G)}`);return{r:Y,s:J}}class E8{constructor($,Y){this.r=$,this.s=Y,this.assertValidity()}static fromCompact($){let Y=$ instanceof Uint8Array,q="Signature.fromCompact";if(typeof $!=="string"&&!Y)throw new TypeError("Signature.fromCompact: Expected string or Uint8Array");let J=Y?q5($):$;if(J.length!==128)throw new Error("Signature.fromCompact: Expected 64-byte hex");return new E8(G7(J.slice(0,64)),G7(J.slice(64,128)))}static fromDER($){let Y=$ instanceof Uint8Array;if(typeof $!=="string"&&!Y)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:q,s:J}=s2(Y?$:l8($));return new E8(q,J)}static fromHex($){return this.fromDER($)}assertValidity(){let{r:$,s:Y}=this;if(!G5($))throw new Error("Invalid Signature: r must be 0 < r < n");if(!G5(Y))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let $=I0.n>>f0;return this.s>$}normalizeS(){return this.hasHighS()?new E8(this.r,r(-this.s,I0.n)):this}toDERRawBytes(){return l8(this.toDERHex())}toDERHex(){let $=GX(d5(this.s)),Y=GX(d5(this.r)),q=$.length/2,J=Y.length/2,G=d5(q),Q=d5(J);return`30${d5(J+q+4)}02${Q}${Y}02${G}${$}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return l8(this.toCompactHex())}toCompactHex(){return y8(this.r)+y8(this.s)}}DX.Signature=E8;function b8(...$){if(!$.every((J)=>J instanceof Uint8Array))throw new Error("Uint8Array list expected");if($.length===1)return $[0];let Y=$.reduce((J,G)=>J+G.length,0),q=new Uint8Array(Y);for(let J=0,G=0;J<$.length;J++){let Q=$[J];q.set(Q,G),G+=Q.length}return q}var r2=Array.from({length:256},($,Y)=>Y.toString(16).padStart(2,"0"));function q5($){if(!($ instanceof Uint8Array))throw new Error("Expected Uint8Array");let Y="";for(let q=0;q<$.length;q++)Y+=r2[$[q]];return Y}var t2=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function y8($){if(typeof $!=="bigint")throw new Error("Expected bigint");if(!(A0<=$&&$<t2))throw new Error("Expected number 0 <= n < 2^256");return $.toString(16).padStart(64,"0")}function J5($){let Y=l8(y8($));if(Y.length!==32)throw new Error("Error: expected 32 bytes");return Y}function d5($){let Y=$.toString(16);return Y.length&1?`0${Y}`:Y}function G7($){if(typeof $!=="string")throw new TypeError("hexToNumber: expected string, got "+typeof $);return BigInt(`0x${$}`)}function l8($){if(typeof $!=="string")throw new TypeError("hexToBytes: expected string, got "+typeof $);if($.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+$.length);let Y=new Uint8Array($.length/2);for(let q=0;q<Y.length;q++){let J=q*2,G=$.slice(J,J+2),Q=Number.parseInt(G,16);if(Number.isNaN(Q)||Q<0)throw new Error("Invalid byte sequence");Y[q]=Q}return Y}function B1($){return G7(q5($))}function O8($){return $ instanceof Uint8Array?Uint8Array.from($):l8($)}function OX($){if(typeof $==="number"&&Number.isSafeInteger($)&&$>0)return BigInt($);if(typeof $==="bigint"&&G5($))return $;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function r($,Y=I0.P){let q=$%Y;return q>=A0?q:Y+q}function m1($,Y){let{P:q}=I0,J=$;while(Y-- >A0)J*=J,J%=q;return J}function e2($){let{P:Y}=I0,q=BigInt(6),J=BigInt(11),G=BigInt(22),Q=BigInt(23),O=BigInt(44),X=BigInt(88),Z=$*$*$%Y,U=Z*Z*$%Y,N=m1(U,y5)*U%Y,V=m1(N,y5)*U%Y,z=m1(V,d8)*Z%Y,L=m1(z,J)*z%Y,j=m1(L,G)*L%Y,D=m1(j,O)*j%Y,B=m1(D,X)*D%Y,R=m1(B,O)*j%Y,A=m1(R,y5)*U%Y,w=m1(A,Q)*L%Y,I=m1(w,q)*Z%Y,k=m1(I,d8);if(k*k%Y!==$)throw new Error("Cannot find square root");return k}function O5($,Y=I0.P){if($===A0||Y<=A0)throw new Error(`invert: expected positive integers, got n=${$} mod=${Y}`);let q=r($,Y),J=Y,G=A0,Q=f0,O=f0,X=A0;while(q!==A0){let U=J/q,N=J%q,V=G-O*U,z=Q-X*U;J=q,q=N,G=O,Q=X,O=V,X=z}if(J!==f0)throw new Error("invert: does not exist");return r(G,Y)}function $C($,Y=I0.P){let q=new Array($.length),J=$.reduce((Q,O,X)=>{if(O===A0)return Q;return q[X]=Q,r(Q*O,Y)},f0),G=O5(J,Y);return $.reduceRight((Q,O,X)=>{if(O===A0)return Q;return q[X]=r(Q*q[X],Y),r(Q*O,Y)},G),q}function YC($){let Y=$.length*8-C9*8,q=B1($);return Y>0?q>>BigInt(Y):q}function N$($,Y=!1){let q=YC($);if(Y)return q;let{n:J}=I0;return q>=J?q-J:q}var Y5,l5;class M${constructor($,Y){if(this.hashLen=$,this.qByteLen=Y,typeof $!=="number"||$<2)throw new Error("hashLen must be a number");if(typeof Y!=="number"||Y<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array($).fill(1),this.k=new Uint8Array($).fill(0),this.counter=0}hmac(...$){return DX.utils.hmacSha256(this.k,...$)}hmacSync(...$){return l5(this.k,...$)}checkSync(){if(typeof l5!=="function")throw new O7("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1000)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed($=new Uint8Array){if(this.k=await this.hmac(this.v,Uint8Array.from([0]),$),this.v=await this.hmac(this.v),$.length===0)return;this.k=await this.hmac(this.v,Uint8Array.from([1]),$),this.v=await this.hmac(this.v)}reseedSync($=new Uint8Array){if(this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),$),this.v=this.hmacSync(this.v),$.length===0)return;this.k=this.hmacSync(this.v,Uint8Array.from([1]),$),this.v=this.hmacSync(this.v)}async generate(){this.incr();let $=0,Y=[];while($<this.qByteLen){this.v=await this.hmac(this.v);let q=this.v.slice();Y.push(q),$+=this.v.length}return b8(...Y)}generateSync(){this.checkSync(),this.incr();let $=0,Y=[];while($<this.qByteLen){this.v=this.hmacSync(this.v);let q=this.v.slice();Y.push(q),$+=this.v.length}return b8(...Y)}}function G5($){return A0<$&&$<I0.n}function Y7($){return A0<$&&$<I0.P}function UX($,Y,q,J=!0){let{n:G}=I0,Q=N$($,!0);if(!G5(Q))return;let O=O5(Q,G),X=B0.BASE.multiply(Q),Z=r(X.x,G);if(Z===A0)return;let U=r(O*r(Y+q*Z,G),G);if(U===A0)return;let N=new E8(Z,U),V=(X.x===N.r?0:2)|Number(X.y&f0);if(J&&N.hasHighS())N=N.normalizeS(),V^=1;return{sig:N,recovery:V}}function D9($){let Y;if(typeof $==="bigint")Y=$;else if(typeof $==="number"&&Number.isSafeInteger($)&&$>0)Y=BigInt($);else if(typeof $==="string"){if($.length!==2*C9)throw new Error("Expected 32 bytes of private key");Y=G7($)}else if($ instanceof Uint8Array){if($.length!==C9)throw new Error("Expected 32 bytes of private key");Y=B1($)}else throw new TypeError("Expected valid private key");if(!G5(Y))throw new Error("Expected private key: 0 < key < n");return Y}function V$($){if($ instanceof B0)return $.assertValidity(),$;else return B0.fromHex($)}function NX($){if($ instanceof E8)return $.assertValidity(),$;try{return E8.fromDER($)}catch(Y){return E8.fromCompact($)}}function qC($,Y=!1){return B0.fromPrivateKey($).toRawBytes(Y)}DX.getPublicKey=qC;function JC($,Y,q,J=!1){return B0.fromSignature($,Y,q).toRawBytes(J)}DX.recoverPublicKey=JC;function XX($){let Y=$ instanceof Uint8Array,q=typeof $==="string",J=(Y||q)&&$.length;if(Y)return J===q7||J===J7;if(q)return J===q7*2||J===J7*2;if($ instanceof B0)return!0;return!1}function GC($,Y,q=!1){if(XX($))throw new TypeError("getSharedSecret: first arg must be private key");if(!XX(Y))throw new TypeError("getSharedSecret: second arg must be public key");let J=V$(Y);return J.assertValidity(),J.multiply(D9($)).toRawBytes(q)}DX.getSharedSecret=GC;function MX($){let Y=$.length>c1?$.slice(0,c1):$;return B1(Y)}function QC($){let Y=MX($),q=r(Y,I0.n);return VX(q<A0?Y:q)}function VX($){return J5($)}function jX($,Y,q){if($==null)throw new Error(`sign: expected valid message hash, not "${$}"`);let J=O8($),G=D9(Y),Q=[VX(G),QC(J)];if(q!=null){if(q===!0)q=DX.utils.randomBytes(c1);let Z=O8(q);if(Z.length!==c1)throw new Error(`sign: Expected ${c1} bytes of extra data`);Q.push(Z)}let O=b8(...Q),X=MX(J);return{seed:O,m:X,d:G}}function KX($,Y){let{sig:q,recovery:J}=$,{der:G,recovered:Q}=Object.assign({canonical:!0,der:!0},Y),O=G?q.toDERRawBytes():q.toCompactRawBytes();return Q?[O,J]:O}async function OC($,Y,q={}){let{seed:J,m:G,d:Q}=jX($,Y,q.extraEntropy),O=new M$(ZX,C9);await O.reseed(J);let X;while(!(X=UX(await O.generate(),G,Q,q.canonical)))await O.reseed();return KX(X,q)}DX.sign=OC;function XC($,Y,q={}){let{seed:J,m:G,d:Q}=jX($,Y,q.extraEntropy),O=new M$(ZX,C9);O.reseedSync(J);let X;while(!(X=UX(O.generateSync(),G,Q,q.canonical)))O.reseedSync();return KX(X,q)}DX.signSync=XC;var ZC={strict:!0};function UC($,Y,q,J=ZC){let G;try{G=NX($),Y=O8(Y)}catch(D){return!1}let{r:Q,s:O}=G;if(J.strict&&G.hasHighS())return!1;let X=N$(Y),Z;try{Z=V$(q)}catch(D){return!1}let{n:U}=I0,N=O5(O,U),V=r(X*N,U),z=r(Q*N,U),L=B0.BASE.multiplyAndAddUnsafe(Z,V,z);if(!L)return!1;return r(L.x,U)===Q}DX.verify=UC;function Q7($){return r(B1($),I0.n)}class Q5{constructor($,Y){this.r=$,this.s=Y,this.assertValidity()}static fromHex($){let Y=O8($);if(Y.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${Y.length}`);let q=B1(Y.subarray(0,32)),J=B1(Y.subarray(32,64));return new Q5(q,J)}assertValidity(){let{r:$,s:Y}=this;if(!Y7($)||!G5(Y))throw new Error("Invalid signature")}toHex(){return y8(this.r)+y8(this.s)}toRawBytes(){return l8(this.toHex())}}function NC($){return B0.fromPrivateKey($).toRawX()}class j${constructor($,Y,q=DX.utils.randomBytes()){if($==null)throw new TypeError(`sign: Expected valid message, not "${$}"`);this.m=O8($);let{x:J,scalar:G}=this.getScalar(D9(Y));if(this.px=J,this.d=G,this.rand=O8(q),this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar($){let Y=B0.fromPrivateKey($),q=Y.hasEvenY()?$:I0.n-$;return{point:Y,scalar:q,x:Y.toRawX()}}initNonce($,Y){return J5($^B1(Y))}finalizeNonce($){let Y=r(B1($),I0.n);if(Y===A0)throw new Error("sign: Creation of signature failed. k is zero");let{point:q,x:J,scalar:G}=this.getScalar(Y);return{R:q,rx:J,k:G}}finalizeSig($,Y,q,J){return new Q5($.x,r(Y+q*J,I0.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){let{m:$,d:Y,px:q,rand:J}=this,G=DX.utils.taggedHash,Q=this.initNonce(Y,await G(g8.aux,J)),{R:O,rx:X,k:Z}=this.finalizeNonce(await G(g8.nonce,Q,q,$)),U=Q7(await G(g8.challenge,X,q,$)),N=this.finalizeSig(O,Z,U,Y);if(!await LX(N,$,q))this.error();return N}calcSync(){let{m:$,d:Y,px:q,rand:J}=this,G=DX.utils.taggedHashSync,Q=this.initNonce(Y,G(g8.aux,J)),{R:O,rx:X,k:Z}=this.finalizeNonce(G(g8.nonce,Q,q,$)),U=Q7(G(g8.challenge,X,q,$)),N=this.finalizeSig(O,Z,U,Y);if(!CX(N,$,q))this.error();return N}}async function MC($,Y,q){return new j$($,Y,q).calc()}function VC($,Y,q){return new j$($,Y,q).calcSync()}function zX($,Y,q){let J=$ instanceof Q5,G=J?$:Q5.fromHex($);if(J)G.assertValidity();return{...G,m:O8(Y),P:V$(q)}}function WX($,Y,q,J){let G=B0.BASE.multiplyAndAddUnsafe(Y,D9(q),r(-J,I0.n));if(!G||!G.hasEvenY()||G.x!==$)return!1;return!0}async function LX($,Y,q){try{let{r:J,s:G,m:Q,P:O}=zX($,Y,q),X=Q7(await DX.utils.taggedHash(g8.challenge,J5(J),O.toRawX(),Q));return WX(J,O,G,X)}catch(J){return!1}}function CX($,Y,q){try{let{r:J,s:G,m:Q,P:O}=zX($,Y,q),X=Q7(DX.utils.taggedHashSync(g8.challenge,J5(J),O.toRawX(),Q));return WX(J,O,G,X)}catch(J){if(J instanceof O7)throw J;return!1}}DX.schnorr={Signature:Q5,getPublicKey:NC,sign:MC,verify:LX,signSync:VC,verifySync:CX};B0.BASE._setWindowSize(8);var P1={node:i2,web:typeof self==="object"&&"crypto"in self?self.crypto:void 0},g8={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},$7={};DX.utils={bytesToHex:q5,hexToBytes:l8,concatBytes:b8,mod:r,invert:O5,isValidPrivateKey($){try{return D9($),!0}catch(Y){return!1}},_bigintTo32Bytes:J5,_normalizePrivateKey:D9,hashToPrivateKey:($)=>{$=O8($);let Y=C9+8;if($.length<Y||$.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");let q=r(B1($),I0.n-f0)+f0;return J5(q)},randomBytes:($=32)=>{if(P1.web)return P1.web.getRandomValues(new Uint8Array($));else if(P1.node){let{randomBytes:Y}=P1.node;return Uint8Array.from(Y($))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>DX.utils.hashToPrivateKey(DX.utils.randomBytes(C9+8)),precompute($=8,Y=B0.BASE){let q=Y===B0.BASE?Y:new B0(Y.x,Y.y);return q._setWindowSize($),q.multiply(y5),q},sha256:async(...$)=>{if(P1.web){let Y=await P1.web.subtle.digest("SHA-256",b8(...$));return new Uint8Array(Y)}else if(P1.node){let{createHash:Y}=P1.node,q=Y("sha256");return $.forEach((J)=>q.update(J)),Uint8Array.from(q.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async($,...Y)=>{if(P1.web){let q=await P1.web.subtle.importKey("raw",$,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),J=b8(...Y),G=await P1.web.subtle.sign("HMAC",q,J);return new Uint8Array(G)}else if(P1.node){let{createHmac:q}=P1.node,J=q("sha256",$);return Y.forEach((G)=>J.update(G)),Uint8Array.from(J.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async($,...Y)=>{let q=$7[$];if(q===void 0){let J=await DX.utils.sha256(Uint8Array.from($,(G)=>G.charCodeAt(0)));q=b8(J,J),$7[$]=q}return DX.utils.sha256(q,...Y)},taggedHashSync:($,...Y)=>{if(typeof Y5!=="function")throw new O7("sha256Sync is undefined, you need to set it");let q=$7[$];if(q===void 0){let J=Y5(Uint8Array.from($,(G)=>G.charCodeAt(0)));q=b8(J,J),$7[$]=q}return Y5(q,...Y)},_JacobianPoint:w0};Object.defineProperties(DX.utils,{sha256Sync:{configurable:!1,get(){return Y5},set($){if(!Y5)Y5=$}},hmacSha256Sync:{configurable:!1,get(){return l5},set($){if(!l5)l5=$}}})});var U1=y((dB,JD)=>{JD.exports={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SPLIT:127,OP_NUM2BIN:128,OP_BIN2NUM:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKDATASIG:186,OP_CHECKDATASIGVERIFY:187,OP_REVERSEBYTES:188,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255}});var A$=y((yB,rX)=>{var o8=U1();function sX($){return $<o8.OP_PUSHDATA1?1:$<=255?2:$<=65535?3:5}function GD($,Y,q){var J=sX(Y);if(J===1)$.writeUInt8(Y,q);else if(J===2)$.writeUInt8(o8.OP_PUSHDATA1,q),$.writeUInt8(Y,q+1);else if(J===3)$.writeUInt8(o8.OP_PUSHDATA2,q),$.writeUInt16LE(Y,q+1);else $.writeUInt8(o8.OP_PUSHDATA4,q),$.writeUInt32LE(Y,q+1);return J}function QD($,Y){var q=$.readUInt8(Y),J,G;if(q<o8.OP_PUSHDATA1)J=q,G=1;else if(q===o8.OP_PUSHDATA1){if(Y+2>$.length)return null;J=$.readUInt8(Y+1),G=2}else if(q===o8.OP_PUSHDATA2){if(Y+3>$.length)return null;J=$.readUInt16LE(Y+1),G=3}else{if(Y+5>$.length)return null;if(q!==o8.OP_PUSHDATA4)throw new Error("Unexpected opcode");J=$.readUInt32LE(Y+1),G=5}return{opcode:q,number:J,size:G}}rX.exports={encodingLength:sX,encode:GD,decode:QD}});var p0=y((lB,$Z)=>{var o0=T0(),OD=Math.pow(2,31)-1;function XD($){return o0.UInt32($)&&$<=OD}function tX($){return o0.String($)&&$.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}tX.toJSON=function(){return"BIP32 derivation path"};var ZD=2100000000000000;function UD($){return o0.UInt53($)&&$<=ZD}var H$=o0.quacksLike("BigInteger"),ND=o0.quacksLike("Point"),MD=o0.compile({r:H$,s:H$}),VD=o0.compile({messagePrefix:o0.oneOf(o0.Buffer,o0.String),bip32:{public:o0.UInt32,private:o0.UInt32},pubKeyHash:o0.UInt8,scriptHash:o0.UInt8,wif:o0.UInt8}),eX={BigInt:H$,BIP32Path:tX,Buffer256bit:o0.BufferN(32),ECPoint:ND,ECSignature:MD,Hash160bit:o0.BufferN(20),Hash256bit:o0.BufferN(32),Network:VD,Satoshi:UD,UInt31:XD};for(E$ in o0)eX[E$]=o0[E$];var E$;$Z.exports=eX});var F$=y((hB,YZ)=>{var jD=F1().Buffer;function KD($,Y,q){Y=Y||4,q=q===void 0?!0:q;var J=$.length;if(J===0)return 0;if(J>Y)throw new TypeError("Script number overflow");if(q){if(($[J-1]&127)===0){if(J<=1||($[J-2]&128)===0)throw new Error("Non-minimally encoded script number")}}if(J===5){var G=$.readUInt32LE(0),Q=$.readUInt8(4);if(Q&128)return-((Q&-129)*4294967296+G);return Q*4294967296+G}var O=0;for(var X=0;X<J;++X)O|=$[X]<<8*X;if($[J-1]&128)return-(O&~(128<<8*(J-1)));return O}function zD($){return $>2147483647?5:$>8388607?4:$>32767?3:$>127?2:$>0?1:0}function WD($){var Y=Math.abs($),q=zD(Y),J=jD.allocUnsafe(q),G=$<0;for(var Q=0;Q<q;++Q)J.writeUInt8(Y&255,Q),Y>>=8;if(J[q-1]&128)J.writeUInt8(G?128:0,q-1);else if(G)J[q-1]|=128;return J}YZ.exports={decode:KD,encode:WD}});var OZ=y((cB,QZ)=>{var qZ=U1(),GZ={};for(P$ in qZ)JZ=qZ[P$],GZ[JZ]=P$;var JZ,P$;QZ.exports=GZ});var n0=y((uB,VZ)=>{var K1=F1().Buffer,LD=XZ(),p5=A$(),N7=T0(),E9=p0(),CD=F$(),g1=U1(),DD=OZ(),ZZ=g1.OP_RESERVED;function RD($){return E9.Number($)&&($===g1.OP_0||$>=g1.OP_1&&$<=g1.OP_16||$===g1.OP_1NEGATE)}function AD($){return E9.Buffer($)||RD($)}function UZ($){return E9.Array($)&&$.every(AD)}function U7($){if($.length===0)return g1.OP_0;if($.length!==1)return;if($[0]>=1&&$[0]<=16)return ZZ+$[0];if($[0]===129)return g1.OP_1NEGATE}function NZ($){if(K1.isBuffer($))return $;N7(E9.Array,$);var Y=$.reduce(function(G,Q){if(K1.isBuffer(Q)){if(Q.length===1&&U7(Q)!==void 0)return G+1;return G+p5.encodingLength(Q.length)+Q.length}return G+1},0),q=K1.allocUnsafe(Y),J=0;if($.forEach(function(G){if(K1.isBuffer(G)){var Q=U7(G);if(Q!==void 0){q.writeUInt8(Q,J),J+=1;return}J+=p5.encode(q,G.length,J),G.copy(q,J),J+=G.length}else q.writeUInt8(G,J),J+=1}),J!==q.length)throw new Error("Could not decode chunks");return q}function ED($){if(K1.isBuffer($))return $;var Y=$.reduce(function(G,Q){if(K1.isBuffer(Q))return G+p5.encodingLength(Q.length)+Q.length;return G+1},0),q=K1.allocUnsafe(Y),J=0;if($.forEach(function(G,Q){if(K1.isBuffer(G))J+=p5.encode(q,G.length,J),G.copy(q,J),J+=G.length;else q.writeUInt8(G,J),J+=1}),J!==q.length)throw new Error("Could not decode chunks");return q}function B$($){if(E9.Array($))return $;N7(E9.Buffer,$);var Y=[],q=0;while(q<$.length){var J=$[q];if(J>g1.OP_0&&J<=g1.OP_PUSHDATA4){var G=p5.decode($,q);if(G===null)return[];q+=G.size;var Q=$.slice(q,q+G.number);q+=G.number;var O=U7(Q);if(O!==void 0)Y.push(O);else Y.push(Q)}else Y.push(J),q+=1}return Y}function HD($){if(K1.isBuffer($))$=B$($);return $.map(function(Y){if(K1.isBuffer(Y)){var q=U7(Y);if(q===void 0)return Y.toString("hex");Y=q}return DD[Y]}).join(" ")}function FD($){return N7(E9.String,$),NZ($.split(" ").map(function(Y){if(g1[Y]!==void 0)return g1[Y];return K1.from(Y,"hex")}))}function PD($){return $=B$($),N7(UZ,$),$.map(function(Y){if(K1.isBuffer(Y))return Y;if(Y===g1.OP_0)return K1.allocUnsafe(0);return CD.encode(Y-ZZ)})}function BD($){if(!K1.isBuffer($))return!1;if($.length<33)return!1;switch($[0]){case 2:case 3:return $.length===33;case 4:return $.length===65}return!1}function MZ($){var Y=$&-193;return Y>0&&Y<4}function wD($){if(!K1.isBuffer($))return!1;if(!MZ($[$.length-1]))return!1;if($.length===65)return!0;return LD.check($.slice(0,-1))}VZ.exports={compile:NZ,compile2:ED,decompile:B$,fromASM:FD,toASM:HD,toStack:PD,number:F$(),isCanonicalPubKey:BD,isCanonicalSignature:wD,isPushOnly:UZ,isDefinedHashType:MZ}});var v$=y((oB,KZ)=>{var n5=n0(),w$=p0(),jZ=T0(),T$=U1(),a5=T$.OP_RESERVED;function I$($,Y){var q=n5.decompile($);if(q.length<4)return!1;if(q[q.length-1]!==T$.OP_CHECKMULTISIG)return!1;if(!w$.Number(q[0]))return!1;if(!w$.Number(q[q.length-2]))return!1;var J=q[0]-a5,G=q[q.length-2]-a5;if(J<=0)return!1;if(G>16)return!1;if(J>G)return!1;if(G!==q.length-3)return!1;if(Y)return!0;var Q=q.slice(1,-2);return Q.every(n5.isCanonicalPubKey)}I$.toJSON=function(){return"multi-sig output"};function TD($,Y){jZ({m:w$.Number,pubKeys:[n5.isCanonicalPubKey]},{m:$,pubKeys:Y});var q=Y.length;if(q<$)throw new TypeError("Not enough pubKeys provided");return n5.compile([].concat(a5+$,Y,a5+q,T$.OP_CHECKMULTISIG))}function ID($,Y){var q=n5.decompile($);return jZ(I$,q,Y),{m:q[0]-a5,pubKeys:q.slice(1,-2)}}KZ.exports={check:I$,decode:ID,encode:TD}});var RZ=y((pB,DZ)=>{var vD=F1().Buffer,i5=n0(),_D=v$(),M7=T0(),_$=U1();function WZ($){return $===_$.OP_0||i5.isCanonicalSignature($)}function S$($,Y){var q=i5.decompile($);if(q.length<2)return!1;if(q[0]!==_$.OP_0)return!1;if(Y)return q.slice(1).every(WZ);return q.slice(1).every(i5.isCanonicalSignature)}S$.toJSON=function(){return"multisig input"};var zZ=vD.allocUnsafe(0);function LZ($,Y){if(M7([WZ],$),Y){var q=_D.decode(Y);if($.length<q.m)throw new TypeError("Not enough signatures provided");if($.length>q.pubKeys.length)throw new TypeError("Too many signatures provided")}return[].concat(zZ,$.map(function(J){if(J===_$.OP_0)return zZ;return J}))}function SD($,Y){return i5.compile(LZ($,Y))}function CZ($,Y){return M7(M7.Array,$),M7(S$,$,Y),$.slice(1)}function kD($,Y){var q=i5.decompile($);return CZ(q,Y)}DZ.exports={check:S$,decode:kD,decodeStack:CZ,encode:SD,encodeStack:LZ}});var V7=y((nB,AZ)=>{AZ.exports={input:RZ(),output:v$()}});var BZ=y((aB,PZ)=>{var EZ=n0(),xD=p0(),HZ=T0(),FZ=U1();function k$($){var Y=EZ.compile($);return Y.length>1&&Y[0]===FZ.OP_RETURN}k$.toJSON=function(){return"null data output"};function fD($){return HZ(xD.Buffer,$),EZ.compile([FZ.OP_RETURN,$])}function mD($){return HZ(k$,$),$.slice(2)}PZ.exports={output:{check:k$,decode:mD,encode:fD}}});var vZ=y((iB,IZ)=>{var s5=n0(),j7=T0();function x$($){var Y=s5.decompile($);return Y.length===1&&s5.isCanonicalSignature(Y[0])}x$.toJSON=function(){return"pubKey input"};function wZ($){return j7(s5.isCanonicalSignature,$),[$]}function gD($){return s5.compile(wZ($))}function TZ($){return j7(j7.Array,$),j7(x$,$),$[0]}function bD($){var Y=s5.decompile($);return TZ(Y)}IZ.exports={check:x$,decode:bD,decodeStack:TZ,encode:gD,encodeStack:wZ}});var xZ=y((sB,kZ)=>{var r5=n0(),_Z=T0(),SZ=U1();function f$($){var Y=r5.decompile($);return Y.length===2&&r5.isCanonicalPubKey(Y[0])&&Y[1]===SZ.OP_CHECKSIG}f$.toJSON=function(){return"pubKey output"};function dD($){return _Z(r5.isCanonicalPubKey,$),r5.compile([$,SZ.OP_CHECKSIG])}function yD($){var Y=r5.decompile($);return _Z(f$,Y),Y[0]}kZ.exports={check:f$,decode:yD,encode:dD}});var K7=y((rB,fZ)=>{fZ.exports={input:vZ(),output:xZ()}});var dZ=y((tB,bZ)=>{var H9=n0(),z7=T0();function m$($){var Y=H9.decompile($);return Y.length===2&&H9.isCanonicalSignature(Y[0])&&H9.isCanonicalPubKey(Y[1])}m$.toJSON=function(){return"pubKeyHash input"};function mZ($,Y){return z7({signature:H9.isCanonicalSignature,pubKey:H9.isCanonicalPubKey},{signature:$,pubKey:Y}),[$,Y]}function lD($,Y){return H9.compile(mZ($,Y))}function gZ($){return z7(z7.Array,$),z7(m$,$),{signature:$[0],pubKey:$[1]}}function hD($){var Y=H9.decompile($);return gZ(Y)}bZ.exports={check:m$,decode:hD,decodeStack:gZ,encode:lD,encodeStack:mZ}});var cZ=y((eB,hZ)=>{var yZ=n0(),cD=p0(),lZ=T0(),p8=U1();function g$($){var Y=yZ.compile($);return Y.length===25&&Y[0]===p8.OP_DUP&&Y[1]===p8.OP_HASH160&&Y[2]===20&&Y[23]===p8.OP_EQUALVERIFY&&Y[24]===p8.OP_CHECKSIG}g$.toJSON=function(){return"pubKeyHash output"};function uD($){return lZ(cD.Hash160bit,$),yZ.compile([p8.OP_DUP,p8.OP_HASH160,$,p8.OP_EQUALVERIFY,p8.OP_CHECKSIG])}function oD($){return lZ(g$,$),$.slice(3,23)}hZ.exports={check:g$,decode:oD,encode:uD}});var W7=y(($w,uZ)=>{uZ.exports={input:dZ(),output:cZ()}});var d$=y((Yw,aZ)=>{var oZ=n0(),pD=p0(),pZ=T0(),nZ=U1();function b$($){var Y=oZ.compile($);return Y.length===22&&Y[0]===nZ.OP_0&&Y[1]===20}b$.toJSON=function(){return"Witness pubKeyHash output"};function nD($){return pZ(pD.Hash160bit,$),oZ.compile([nZ.OP_0,$])}function aD($){return pZ(b$,$),$.slice(2)}aZ.exports={check:b$,decode:aD,encode:nD}});var l$=y((qw,tZ)=>{var iZ=n0(),iD=p0(),sZ=T0(),rZ=U1();function y$($){var Y=iZ.compile($);return Y.length===34&&Y[0]===rZ.OP_0&&Y[1]===32}y$.toJSON=function(){return"Witness scriptHash output"};function sD($){return sZ(iD.Hash256bit,$),iZ.compile([rZ.OP_0,$])}function rD($){return sZ(y$,$),$.slice(2)}tZ.exports={check:y$,decode:rD,encode:sD}});var QU=y((Jw,GU)=>{var tD=F1().Buffer,X8=n0(),h$=T0(),eZ=V7(),$U=K7(),YU=W7(),eD=d$(),$3=l$();function c$($,Y){var q=X8.decompile($);if(q.length<1)return!1;var J=q[q.length-1];if(!tD.isBuffer(J))return!1;var G=X8.decompile(X8.compile(q.slice(0,-1))),Q=X8.decompile(J);if(Q.length===0)return!1;if(!X8.isPushOnly(G))return!1;if(q.length===1)return $3.check(Q)||eD.check(Q);if(YU.input.check(G)&&YU.output.check(Q))return!0;if(eZ.input.check(G,Y)&&eZ.output.check(Q))return!0;if($U.input.check(G)&&$U.output.check(Q))return!0;return!1}c$.toJSON=function(){return"scriptHash input"};function qU($,Y){var q=X8.compile(Y);return[].concat($,q)}function Y3($,Y){var q=X8.decompile($);return X8.compile(qU(q,Y))}function JU($){return h$(h$.Array,$),h$(c$,$),{redeemScriptStack:$.slice(0,-1),redeemScript:$[$.length-1]}}function q3($){var Y=X8.decompile($),q=JU(Y);return q.redeemScriptSig=X8.compile(q.redeemScriptStack),delete q.redeemScriptStack,q}GU.exports={check:c$,decode:q3,decodeStack:JU,encode:Y3,encodeStack:qU}});var UU=y((Gw,ZU)=>{var OU=n0(),J3=p0(),XU=T0(),L7=U1();function u$($){var Y=OU.compile($);return Y.length===23&&Y[0]===L7.OP_HASH160&&Y[1]===20&&Y[22]===L7.OP_EQUAL}u$.toJSON=function(){return"scriptHash output"};function G3($){return XU(J3.Hash160bit,$),OU.compile([L7.OP_HASH160,$,L7.OP_EQUAL])}function Q3($){return XU(u$,$),$.slice(2,22)}ZU.exports={check:u$,decode:Q3,encode:G3}});var MU=y((Qw,NU)=>{NU.exports={input:QU(),output:UU()}});var KU=y((Ow,jU)=>{var D7=n0(),C7=T0();function VU($){return D7.isCanonicalPubKey($)&&$.length===33}function o$($){var Y=D7.decompile($);return Y.length===2&&D7.isCanonicalSignature(Y[0])&&VU(Y[1])}o$.toJSON=function(){return"witnessPubKeyHash input"};function O3($,Y){return C7({signature:D7.isCanonicalSignature,pubKey:VU},{signature:$,pubKey:Y}),[$,Y]}function X3($){return C7(C7.Array,$),C7(o$,$),{signature:$[0],pubKey:$[1]}}jU.exports={check:o$,decodeStack:X3,encodeStack:O3}});var WU=y((Xw,zU)=>{zU.exports={input:KU(),output:d$()}});var EU=y((Zw,AU)=>{var LU=n0(),p$=p0(),t5=T0(),CU=V7(),DU=K7(),RU=W7();function n$($,Y){if(t5(p$.Array,$),$.length<1)return!1;var q=$[$.length-1];if(!Buffer.isBuffer(q))return!1;var J=LU.decompile(q);if(J.length===0)return!1;var G=LU.compile($.slice(0,-1));if(RU.input.check(G)&&RU.output.check(J))return!0;if(CU.input.check(G,Y)&&CU.output.check(J))return!0;if(DU.input.check(G)&&DU.output.check(J))return!0;return!1}n$.toJSON=function(){return"witnessScriptHash input"};function Z3($,Y){return t5({witnessData:[p$.Buffer],witnessScript:p$.Buffer},{witnessData:$,witnessScript:Y}),[].concat($,Y)}function U3($){return t5(t5.Array,$),t5(n$,$),{witnessData:$.slice(0,-1),witnessScript:$[$.length-1]}}AU.exports={check:n$,decodeStack:U3,encodeStack:Z3}});var FU=y((Uw,HU)=>{HU.exports={input:EU(),output:l$()}});var vU=y((Nw,IU)=>{var PU=F1().Buffer,a$=n0(),N3=p0(),BU=T0(),wU=U1(),TU=PU.from("aa21a9ed","hex");function i$($){var Y=a$.compile($);return Y.length>37&&Y[0]===wU.OP_RETURN&&Y[1]===36&&Y.slice(2,6).equals(TU)}i$.toJSON=function(){return"Witness commitment output"};function M3($){BU(N3.Hash256bit,$);var Y=PU.allocUnsafe(36);return TU.copy(Y,0),$.copy(Y,4),a$.compile([wU.OP_RETURN,Y])}function V3($){return BU(i$,$),a$.decompile($)[1].slice(4,36)}IU.exports={check:i$,decode:V3,encode:M3}});var SU=y((Mw,_U)=>{_U.exports={output:vU()}});var R7=y((Vw,fU)=>{var s$=n0().decompile,r$=V7(),kU=BZ(),t$=K7(),e$=W7(),$Y=MU(),YY=WU(),qY=FU(),xU=SU(),Y1={MULTISIG:"multisig",NONSTANDARD:"nonstandard",NULLDATA:"nulldata",P2PK:"pubkey",P2PKH:"pubkeyhash",P2SH:"scripthash",P2WPKH:"witnesspubkeyhash",P2WSH:"witnessscripthash",WITNESS_COMMITMENT:"witnesscommitment"};function j3($){if(YY.output.check($))return Y1.P2WPKH;if(qY.output.check($))return Y1.P2WSH;if(e$.output.check($))return Y1.P2PKH;if($Y.output.check($))return Y1.P2SH;var Y=s$($);if(r$.output.check(Y))return Y1.MULTISIG;if(t$.output.check(Y))return Y1.P2PK;if(xU.output.check(Y))return Y1.WITNESS_COMMITMENT;if(kU.output.check(Y))return Y1.NULLDATA;return Y1.NONSTANDARD}function K3($,Y){var q=s$($);if(e$.input.check(q))return Y1.P2PKH;if($Y.input.check(q,Y))return Y1.P2SH;if(r$.input.check(q,Y))return Y1.MULTISIG;if(t$.input.check(q))return Y1.P2PK;return Y1.NONSTANDARD}function z3($,Y){var q=s$($);if(YY.input.check(q))return Y1.P2WPKH;if(qY.input.check(q,Y))return Y1.P2WSH;return Y1.NONSTANDARD}fU.exports={classifyInput:K3,classifyOutput:j3,classifyWitness:z3,multisig:r$,nullData:kU,pubKey:t$,pubKeyHash:e$,scriptHash:$Y,witnessPubKeyHash:YY,witnessScriptHash:qY,witnessCommitment:xU,types:Y1}});var GY=y((jw,gU)=>{var JY=A$(),U5=k6();function mU($,Y){if(typeof $!=="number")throw new Error("cannot write a non-number as a number");if($<0)throw new Error("specified a negative value for writing an unsigned value");if($>Y)throw new Error("RangeError: value out of range");if(Math.floor($)!==$)throw new Error("value has a fractional component")}function W3($,Y){var q=$.readUInt32LE(Y),J=$.readUInt32LE(Y+4);return J*=4294967296,mU(J+q,9007199254740991),J+q}function L3($,Y,q){return mU(Y,9007199254740991),$.writeInt32LE(Y&-1,q),$.writeUInt32LE(Math.floor(Y/4294967296),q+4),q+8}function C3($,Y){var q=U5.decode($,Y);return{number:q,size:U5.decode.bytes}}function D3($,Y,q){return U5.encode(Y,$,q),U5.encode.bytes}gU.exports={pushDataSize:JY.encodingLength,readPushDataInt:JY.decode,readUInt64LE:W3,readVarInt:C3,varIntBuffer:U5.encode,varIntSize:U5.encodingLength,writePushDataInt:JY.encode,writeUInt64LE:L3,writeVarInt:D3}});var n8=y((Kw,dU)=>{var QY=R3();function bU($){return QY("ripemd160").update($).digest()}function A3($){return QY("sha1").update($).digest()}function A7($){return QY("sha256").update($).digest()}function E3($){return bU(A7($))}function H3($){return A7(A7($))}dU.exports={hash160:E3,hash256:H3,ripemd160:bU,sha1:A3,sha256:A7}});var E7=y((zw,cU)=>{var b1=F1().Buffer,F9=n8(),yU=n0(),XY=GY(),F3=U1(),a8=T0(),E0=p0(),Z8=k6();function N5($){var Y=$.length;return Z8.encodingLength(Y)+Y}function P3($){var Y=$.length;return Z8.encodingLength(Y)+$.reduce(function(q,J){return q+N5(J)},0)}function Z0(){this.version=2,this.locktime=0,this.ins=[],this.outs=[]}Z0.DEFAULT_SEQUENCE=4294967295;Z0.SIGHASH_ALL=1;Z0.SIGHASH_NONE=2;Z0.SIGHASH_SINGLE=3;Z0.SIGHASH_ANYONECANPAY=128;Z0.SIGHASH_BITCOINCASHBIP143=64;Z0.ADVANCED_TRANSACTION_MARKER=0;Z0.ADVANCED_TRANSACTION_FLAG=1;var ZY=b1.allocUnsafe(0),hU=[],OY=b1.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),lU=b1.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),B3=b1.from("ffffffffffffffff","hex"),w3={script:ZY,valueBuffer:B3};Z0.fromBuffer=function($,Y){var q=0;function J(R){return q+=R,$.slice(q-R,q)}function G(){var R=$.readUInt32LE(q);return q+=4,R}function Q(){var R=$.readInt32LE(q);return q+=4,R}function O(){var R=XY.readUInt64LE($,q);return q+=8,R}function X(){var R=Z8.decode($,q);return q+=Z8.decode.bytes,R}function Z(){return J(X())}function U(){var R=X(),A=[];for(var w=0;w<R;w++)A.push(Z());return A}var N=new Z0;N.version=Q();var V=$.readUInt8(q),z=$.readUInt8(q+1),L=!1;if(V===Z0.ADVANCED_TRANSACTION_MARKER&&z===Z0.ADVANCED_TRANSACTION_FLAG)q+=2,L=!0;var j=X();for(var D=0;D<j;++D)N.ins.push({hash:J(32),index:G(),script:Z(),sequence:G(),witness:hU});var B=X();for(D=0;D<B;++D)N.outs.push({value:O(),script:Z()});if(L){for(D=0;D<j;++D)N.ins[D].witness=U();if(!N.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(N.locktime=G(),Y)return N;if(q!==$.length)throw new Error("Transaction has unexpected data");return N};Z0.fromHex=function($){return Z0.fromBuffer(b1.from($,"hex"))};Z0.isCoinbaseHash=function($){a8(E0.Hash256bit,$);for(var Y=0;Y<32;++Y)if($[Y]!==0)return!1;return!0};Z0.prototype.isCoinbase=function(){return this.ins.length===1&&Z0.isCoinbaseHash(this.ins[0].hash)};Z0.prototype.addInput=function($,Y,q,J){if(a8(E0.tuple(E0.Hash256bit,E0.UInt32,E0.maybe(E0.UInt32),E0.maybe(E0.Buffer)),arguments),E0.Null(q))q=Z0.DEFAULT_SEQUENCE;return this.ins.push({hash:$,index:Y,script:J||ZY,sequence:q,witness:hU})-1};Z0.prototype.addOutput=function($,Y){return a8(E0.tuple(E0.Buffer,E0.Satoshi),arguments),this.outs.push({script:$,value:Y})-1};Z0.prototype.hasWitnesses=function(){return this.ins.some(function($){return $.witness.length!==0})};Z0.prototype.weight=function(){var $=this.__byteLength(!1),Y=this.__byteLength(!0);return $*3+Y};Z0.prototype.virtualSize=function(){return Math.ceil(this.weight()/4)};Z0.prototype.byteLength=function(){return this.__byteLength(!0)};Z0.prototype.__byteLength=function($){var Y=$&&this.hasWitnesses();return(Y?10:8)+Z8.encodingLength(this.ins.length)+Z8.encodingLength(this.outs.length)+this.ins.reduce(function(q,J){return q+40+N5(J.script)},0)+this.outs.reduce(function(q,J){return q+8+N5(J.script)},0)+(Y?this.ins.reduce(function(q,J){return q+P3(J.witness)},0):0)};Z0.prototype.clone=function(){var $=new Z0;return $.version=this.version,$.locktime=this.locktime,$.ins=this.ins.map(function(Y){return{hash:Y.hash,index:Y.index,script:Y.script,sequence:Y.sequence,witness:Y.witness}}),$.outs=this.outs.map(function(Y){return{script:Y.script,value:Y.value}}),$};Z0.prototype.hashForSignature=function($,Y,q){if(a8(E0.tuple(E0.UInt32,E0.Buffer,E0.Number),arguments),$>=this.ins.length)return lU;var J=yU.compile(yU.decompile(Y).filter(function(X){return X!==F3.OP_CODESEPARATOR})),G=this.clone();if((q&31)===Z0.SIGHASH_NONE)G.outs=[],G.ins.forEach(function(X,Z){if(Z===$)return;X.sequence=0});else if((q&31)===Z0.SIGHASH_SINGLE){if($>=this.outs.length)return lU;G.outs.length=$+1;for(var Q=0;Q<$;Q++)G.outs[Q]=w3;G.ins.forEach(function(X,Z){if(Z===$)return;X.sequence=0})}if(q&Z0.SIGHASH_ANYONECANPAY)G.ins=[G.ins[$]],G.ins[0].script=J;else G.ins.forEach(function(X){X.script=ZY}),G.ins[$].script=J;var O=b1.allocUnsafe(G.__byteLength(!1)+4);return O.writeInt32LE(q,O.length-4),G.__toBuffer(O,0,!1),F9.hash256(O)};Z0.prototype.hashForWitnessV0=function($,Y,q,J){a8(E0.tuple(E0.UInt32,E0.Buffer,E0.Satoshi,E0.UInt32),arguments);var G,Q;function O(R){Q+=R.copy(G,Q)}function X(R){Q=G.writeUInt32LE(R,Q)}function Z(R){Q=XY.writeUInt64LE(G,R,Q)}function U(R){Z8.encode(R,G,Q),Q+=Z8.encode.bytes}function N(R){U(R.length),O(R)}var V=OY,z=OY,L=OY;if(!(J&Z0.SIGHASH_ANYONECANPAY))G=b1.allocUnsafe(36*this.ins.length),Q=0,this.ins.forEach(function(R){O(R.hash),X(R.index)}),z=F9.hash256(G);if(!(J&Z0.SIGHASH_ANYONECANPAY)&&(J&31)!==Z0.SIGHASH_SINGLE&&(J&31)!==Z0.SIGHASH_NONE)G=b1.allocUnsafe(4*this.ins.length),Q=0,this.ins.forEach(function(R){X(R.sequence)}),L=F9.hash256(G);if((J&31)!==Z0.SIGHASH_SINGLE&&(J&31)!==Z0.SIGHASH_NONE){var j=this.outs.reduce(function(R,A){return R+8+N5(A.script)},0);G=b1.allocUnsafe(j),Q=0,this.outs.forEach(function(R){Z(R.value),N(R.script)}),V=F9.hash256(G)}else if((J&31)===Z0.SIGHASH_SINGLE&&$<this.outs.length){var D=this.outs[$];G=b1.allocUnsafe(8+N5(D.script)),Q=0,Z(D.value),N(D.script),V=F9.hash256(G)}G=b1.allocUnsafe(156+N5(Y)),Q=0;var B=this.ins[$];return X(this.version),O(z),O(L),O(B.hash),X(B.index),N(Y),Z(q),X(B.sequence),O(V),X(this.locktime),X(J),F9.hash256(G)};Z0.prototype.hashForCashSignature=function($,Y,q,J){if(a8(E0.tuple(E0.UInt32,E0.Buffer,E0.Number,E0.maybe(E0.UInt53)),arguments),J&Z0.SIGHASH_BITCOINCASHBIP143){if(E0.Null(q))throw new Error("Bitcoin Cash sighash requires value of input to be signed.");return this.hashForWitnessV0($,Y,q,J)}else return this.hashForSignature($,Y,J)};Z0.prototype.getHash=function(){return F9.hash256(this.__toBuffer(void 0,void 0,!1))};Z0.prototype.getId=function(){return this.getHash().reverse().toString("hex")};Z0.prototype.toBuffer=function($,Y){return this.__toBuffer($,Y,!0)};Z0.prototype.__toBuffer=function($,Y,q){if(!$)$=b1.allocUnsafe(this.__byteLength(q));var J=Y||0;function G(L){J+=L.copy($,J)}function Q(L){J=$.writeUInt8(L,J)}function O(L){J=$.writeUInt32LE(L,J)}function X(L){J=$.writeInt32LE(L,J)}function Z(L){J=XY.writeUInt64LE($,L,J)}function U(L){Z8.encode(L,$,J),J+=Z8.encode.bytes}function N(L){U(L.length),G(L)}function V(L){U(L.length),L.forEach(N)}X(this.version);var z=q&&this.hasWitnesses();if(z)Q(Z0.ADVANCED_TRANSACTION_MARKER),Q(Z0.ADVANCED_TRANSACTION_FLAG);if(U(this.ins.length),this.ins.forEach(function(L){G(L.hash),O(L.index),N(L.script),O(L.sequence)}),U(this.outs.length),this.outs.forEach(function(L){if(!L.valueBuffer)Z(L.value);else G(L.valueBuffer);N(L.script)}),z)this.ins.forEach(function(L){V(L.witness)});if(O(this.locktime),Y!==void 0)return $.slice(Y,J);return $};Z0.prototype.toHex=function(){return this.toBuffer().toString("hex")};Z0.prototype.setInputScript=function($,Y){a8(E0.tuple(E0.Number,E0.Buffer),arguments),this.ins[$].script=Y};Z0.prototype.setWitness=function($,Y){a8(E0.tuple(E0.Number,[E0.Buffer]),arguments),this.ins[$].witness=Y};cU.exports=Z0});var pU=y((Ww,oU)=>{var UY=F1().Buffer,uU=n8(),I3=T3(),v3=T0(),_3=p0(),e5=k6(),S3=E7();function O1(){this.version=1,this.prevHash=null,this.merkleRoot=null,this.timestamp=0,this.bits=0,this.nonce=0}O1.fromBuffer=function($){if($.length<80)throw new Error("Buffer too small (< 80 bytes)");var Y=0;function q(V){return Y+=V,$.slice(Y-V,Y)}function J(){var V=$.readUInt32LE(Y);return Y+=4,V}function G(){var V=$.readInt32LE(Y);return Y+=4,V}var Q=new O1;if(Q.version=G(),Q.prevHash=q(32),Q.merkleRoot=q(32),Q.timestamp=J(),Q.bits=J(),Q.nonce=J(),$.length===80)return Q;function O(){var V=e5.decode($,Y);return Y+=e5.decode.bytes,V}function X(){var V=S3.fromBuffer($.slice(Y),!0);return Y+=V.byteLength(),V}var Z=O();Q.transactions=[];for(var U=0;U<Z;++U){var N=X();Q.transactions.push(N)}return Q};O1.prototype.byteLength=function($){if($||!this.transactions)return 80;return 80+e5.encodingLength(this.transactions.length)+this.transactions.reduce(function(Y,q){return Y+q.byteLength()},0)};O1.fromHex=function($){return O1.fromBuffer(UY.from($,"hex"))};O1.prototype.getHash=function(){return uU.hash256(this.toBuffer(!0))};O1.prototype.getId=function(){return this.getHash().reverse().toString("hex")};O1.prototype.getUTCDate=function(){var $=new Date(0);return $.setUTCSeconds(this.timestamp),$};O1.prototype.toBuffer=function($){var Y=UY.allocUnsafe(this.byteLength($)),q=0;function J(O){O.copy(Y,q),q+=O.length}function G(O){Y.writeInt32LE(O,q),q+=4}function Q(O){Y.writeUInt32LE(O,q),q+=4}if(G(this.version),J(this.prevHash),J(this.merkleRoot),Q(this.timestamp),Q(this.bits),Q(this.nonce),$||!this.transactions)return Y;return e5.encode(this.transactions.length,Y,q),q+=e5.encode.bytes,this.transactions.forEach(function(O){var X=O.byteLength();O.toBuffer(Y,q),q+=X}),Y};O1.prototype.toHex=function($){return this.toBuffer($).toString("hex")};O1.calculateTarget=function($){var Y=(($&4278190080)>>24)-3,q=$&8388607,J=UY.alloc(32,0);return J.writeUInt32BE(q,28-Y),J};O1.calculateMerkleRoot=function($){if(v3([{getHash:_3.Function}],$),$.length===0)throw TypeError("Cannot compute merkle root for zero transactions");var Y=$.map(function(q){return q.getHash()});return I3(Y,uU.hash256)};O1.prototype.checkMerkleRoot=function(){if(!this.transactions)return!1;var $=O1.calculateMerkleRoot(this.transactions);return this.merkleRoot.compare($)===0};O1.prototype.checkProofOfWork=function(){var $=this.getHash().reverse(),Y=O1.calculateTarget(this.bits);return $.compare(Y)<=0};oU.exports=O1});var sU=y((Lw,iU)=>{var F7="qpzry9x8gf2tvdw0s3jn54khce6mua7l",NY={};for($6=0;$6<F7.length;$6++){if(H7=F7.charAt($6),NY[H7]!==void 0)throw new TypeError(H7+" is ambiguous");NY[H7]=$6}var H7,$6;function M5($){var Y=$>>25;return($&33554431)<<5^-(Y>>0&1)&996825010^-(Y>>1&1)&642813549^-(Y>>2&1)&513874426^-(Y>>3&1)&1027748829^-(Y>>4&1)&705979059}function nU($){var Y=1;for(var q=0;q<$.length;++q){var J=$.charCodeAt(q);if(J<33||J>126)return"Invalid prefix ("+$+")";Y=M5(Y)^J>>5}Y=M5(Y);for(q=0;q<$.length;++q){var G=$.charCodeAt(q);Y=M5(Y)^G&31}return Y}function k3($,Y,q){if(q=q||90,$.length+7+Y.length>q)throw new TypeError("Exceeds length limit");$=$.toLowerCase();var J=nU($);if(typeof J==="string")throw new Error(J);var G=$+"1";for(var Q=0;Q<Y.length;++Q){var O=Y[Q];if(O>>5!==0)throw new Error("Non 5-bit word");J=M5(J)^O,G+=F7.charAt(O)}for(Q=0;Q<6;++Q)J=M5(J);J^=1;for(Q=0;Q<6;++Q){var X=J>>(5-Q)*5&31;G+=F7.charAt(X)}return G}function aU($,Y){if(Y=Y||90,$.length<8)return $+" too short";if($.length>Y)return"Exceeds length limit";var q=$.toLowerCase(),J=$.toUpperCase();if($!==q&&$!==J)return"Mixed-case string "+$;$=q;var G=$.lastIndexOf("1");if(G===-1)return"No separator character for "+$;if(G===0)return"Missing prefix for "+$;var Q=$.slice(0,G),O=$.slice(G+1);if(O.length<6)return"Data too short";var X=nU(Q);if(typeof X==="string")return X;var Z=[];for(var U=0;U<O.length;++U){var N=O.charAt(U),V=NY[N];if(V===void 0)return"Unknown character "+N;if(X=M5(X)^V,U+6>=O.length)continue;Z.push(V)}if(X!==1)return"Invalid checksum for "+$;return{prefix:Q,words:Z}}function x3(){var $=aU.apply(null,arguments);if(typeof $==="object")return $}function f3($){var Y=aU.apply(null,arguments);if(typeof Y==="object")return Y;throw new Error(Y)}function P7($,Y,q,J){var G=0,Q=0,O=(1<<q)-1,X=[];for(var Z=0;Z<$.length;++Z){G=G<<Y|$[Z],Q+=Y;while(Q>=q)Q-=q,X.push(G>>Q&O)}if(J){if(Q>0)X.push(G<<q-Q&O)}else{if(Q>=Y)return"Excess padding";if(G<<q-Q&O)return"Non-zero padding"}return X}function m3($){var Y=P7($,8,5,!0);if(Array.isArray(Y))return Y}function g3($){var Y=P7($,8,5,!0);if(Array.isArray(Y))return Y;throw new Error(Y)}function b3($){var Y=P7($,5,8,!1);if(Array.isArray(Y))return Y}function d3($){var Y=P7($,5,8,!1);if(Array.isArray(Y))return Y;throw new Error(Y)}iU.exports={decodeUnsafe:x3,decode:f3,encode:k3,toWordsUnsafe:m3,toWords:g3,fromWordsUnsafe:b3,fromWords:d3}});var V5=y((Cw,rU)=>{rU.exports={bitcoin:{messagePrefix:`\x18Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},testnet:{messagePrefix:`\x18Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},litecoin:{messagePrefix:`\x19Litecoin Signed Message:
`,bip32:{public:27108450,private:27106558},pubKeyHash:48,scriptHash:50,wif:176}}});var w7=y((Dw,GN)=>{var eU=F1().Buffer,B7=sU(),$N=tU(),Y6=n0(),i8=R7(),YN=V5(),y3=T0(),MY=p0();function qN($){var Y=$N.decode($);if(Y.length<21)throw new TypeError($+" is too short");if(Y.length>21)throw new TypeError($+" is too long");var q=Y.readUInt8(0),J=Y.slice(1);return{version:q,hash:J}}function JN($){var Y=B7.decode($),q=B7.fromWords(Y.words.slice(1));return{version:Y.words[0],prefix:Y.prefix,data:eU.from(q)}}function VY($,Y){y3(MY.tuple(MY.Hash160bit,MY.UInt8),arguments);var q=eU.allocUnsafe(21);return q.writeUInt8(Y,0),$.copy(q,1),$N.encode(q)}function jY($,Y,q){var J=B7.toWords($);return J.unshift(Y),B7.encode(q,J)}function l3($,Y){if(Y=Y||YN.bitcoin,i8.pubKeyHash.output.check($))return VY(Y6.compile($).slice(3,23),Y.pubKeyHash);if(i8.scriptHash.output.check($))return VY(Y6.compile($).slice(2,22),Y.scriptHash);if(i8.witnessPubKeyHash.output.check($))return jY(Y6.compile($).slice(2,22),0,Y.bech32);if(i8.witnessScriptHash.output.check($))return jY(Y6.compile($).slice(2,34),0,Y.bech32);throw new Error(Y6.toASM($)+" has no matching Address")}function h3($,Y){Y=Y||YN.bitcoin;var q;try{q=qN($)}catch(J){}if(q){if(q.version===Y.pubKeyHash)return i8.pubKeyHash.output.encode(q.hash);if(q.version===Y.scriptHash)return i8.scriptHash.output.encode(q.hash)}else{try{q=JN($)}catch(J){}if(q){if(q.prefix!==Y.bech32)throw new Error($+" has an invalid prefix");if(q.version===0){if(q.data.length===20)return i8.witnessPubKeyHash.output.encode(q.data);if(q.data.length===32)return i8.witnessScriptHash.output.encode(q.data)}}}throw new Error($+" has no matching Script")}GN.exports={fromBase58Check:qN,fromBech32:JN,fromOutputScript:l3,toBase58Check:VY,toBech32:jY,toOutputScript:h3}});var QN=y((Rw,c3)=>{c3.exports={name:"bigi",version:"1.4.2",description:"Big integers.",keywords:["cryptography","math","bitcoin","arbitrary","precision","arithmetic","big","integer","int","number","biginteger","bigint","bignumber","decimal","float"],devDependencies:{coveralls:"^2.11.2",istanbul:"^0.3.5",jshint:"^2.5.1",mocha:"^2.1.0",mochify:"^2.1.0"},repository:{url:"https://github.com/cryptocoinjs/bigi",type:"git"},main:"./lib/index.js",scripts:{"browser-test":"./node_modules/.bin/mochify --wd -R spec",test:"./node_modules/.bin/_mocha -- test/*.js",jshint:"./node_modules/.bin/jshint --config jshint.json lib/*.js ; true",unit:"./node_modules/.bin/mocha",coverage:"./node_modules/.bin/istanbul cover ./node_modules/.bin/_mocha -- --reporter list test/*.js",coveralls:"npm run-script coverage && node ./node_modules/.bin/coveralls < coverage/lcov.info"},dependencies:{},testling:{files:"test/*.js",harness:"mocha",browsers:["ie/9..latest","firefox/latest","chrome/latest","safari/6.0..latest","iphone/6.0..latest","android-browser/4.2..latest"]}}});var WY=y((Aw,MN)=>{function Y0($,Y,q){if(!(this instanceof Y0))return new Y0($,Y,q);if($!=null)if(typeof $=="number")this.fromNumber($,Y,q);else if(Y==null&&typeof $!="string")this.fromString($,256);else this.fromString($,Y)}var t=Y0.prototype;t.__bigi=QN().version;Y0.isBigInteger=function($,Y){return $&&$.__bigi&&(!Y||$.__bigi===t.__bigi)};var j5;function u3($,Y,q,J,G,Q){while(--Q>=0){var O=Y*this[$++]+q[J]+G;G=Math.floor(O/67108864),q[J++]=O&67108863}return G}Y0.prototype.am=u3;j5=26;Y0.prototype.DB=j5;Y0.prototype.DM=(1<<j5)-1;var o3=Y0.prototype.DV=1<<j5,KY=52;Y0.prototype.FV=Math.pow(2,KY);Y0.prototype.F1=KY-j5;Y0.prototype.F2=2*j5-KY;var p3="0123456789abcdefghijklmnopqrstuvwxyz",T7=new Array,K5,d1;K5=48;for(d1=0;d1<=9;++d1)T7[K5++]=d1;K5=97;for(d1=10;d1<36;++d1)T7[K5++]=d1;K5=65;for(d1=10;d1<36;++d1)T7[K5++]=d1;function ON($){return p3.charAt($)}function XN($,Y){var q=T7[$.charCodeAt(Y)];return q==null?-1:q}function n3($){for(var Y=this.t-1;Y>=0;--Y)$[Y]=this[Y];$.t=this.t,$.s=this.s}function a3($){if(this.t=1,this.s=$<0?-1:0,$>0)this[0]=$;else if($<-1)this[0]=$+o3;else this.t=0}function F8($){var Y=new Y0;return Y.fromInt($),Y}function i3($,Y){var q=this,J;if(Y==16)J=4;else if(Y==8)J=3;else if(Y==256)J=8;else if(Y==2)J=1;else if(Y==32)J=5;else if(Y==4)J=2;else{q.fromRadix($,Y);return}q.t=0,q.s=0;var G=$.length,Q=!1,O=0;while(--G>=0){var X=J==8?$[G]&255:XN($,G);if(X<0){if($.charAt(G)=="-")Q=!0;continue}if(Q=!1,O==0)q[q.t++]=X;else if(O+J>q.DB)q[q.t-1]|=(X&(1<<q.DB-O)-1)<<O,q[q.t++]=X>>q.DB-O;else q[q.t-1]|=X<<O;if(O+=J,O>=q.DB)O-=q.DB}if(J==8&&($[0]&128)!=0){if(q.s=-1,O>0)q[q.t-1]|=(1<<q.DB-O)-1<<O}if(q.clamp(),Q)Y0.ZERO.subTo(q,q)}function s3(){var $=this.s&this.DM;while(this.t>0&&this[this.t-1]==$)--this.t}function r3($){var Y=this;if(Y.s<0)return"-"+Y.negate().toString($);var q;if($==16)q=4;else if($==8)q=3;else if($==2)q=1;else if($==32)q=5;else if($==4)q=2;else return Y.toRadix($);var J=(1<<q)-1,G,Q=!1,O="",X=Y.t,Z=Y.DB-X*Y.DB%q;if(X-- >0){if(Z<Y.DB&&(G=Y[X]>>Z)>0)Q=!0,O=ON(G);while(X>=0){if(Z<q)G=(Y[X]&(1<<Z)-1)<<q-Z,G|=Y[--X]>>(Z+=Y.DB-q);else if(G=Y[X]>>(Z-=q)&J,Z<=0)Z+=Y.DB,--X;if(G>0)Q=!0;if(Q)O+=ON(G)}}return Q?O:"0"}function t3(){var $=new Y0;return Y0.ZERO.subTo(this,$),$}function e3(){return this.s<0?this.negate():this}function $R($){var Y=this.s-$.s;if(Y!=0)return Y;var q=this.t;if(Y=q-$.t,Y!=0)return this.s<0?-Y:Y;while(--q>=0)if((Y=this[q]-$[q])!=0)return Y;return 0}function I7($){var Y=1,q;if((q=$>>>16)!=0)$=q,Y+=16;if((q=$>>8)!=0)$=q,Y+=8;if((q=$>>4)!=0)$=q,Y+=4;if((q=$>>2)!=0)$=q,Y+=2;if((q=$>>1)!=0)$=q,Y+=1;return Y}function YR(){if(this.t<=0)return 0;return this.DB*(this.t-1)+I7(this[this.t-1]^this.s&this.DM)}function qR(){return this.bitLength()>>3}function JR($,Y){var q;for(q=this.t-1;q>=0;--q)Y[q+$]=this[q];for(q=$-1;q>=0;--q)Y[q]=0;Y.t=this.t+$,Y.s=this.s}function GR($,Y){for(var q=$;q<this.t;++q)Y[q-$]=this[q];Y.t=Math.max(this.t-$,0),Y.s=this.s}function QR($,Y){var q=this,J=$%q.DB,G=q.DB-J,Q=(1<<G)-1,O=Math.floor($/q.DB),X=q.s<<J&q.DM,Z;for(Z=q.t-1;Z>=0;--Z)Y[Z+O+1]=q[Z]>>G|X,X=(q[Z]&Q)<<J;for(Z=O-1;Z>=0;--Z)Y[Z]=0;Y[O]=X,Y.t=q.t+O+1,Y.s=q.s,Y.clamp()}function OR($,Y){var q=this;Y.s=q.s;var J=Math.floor($/q.DB);if(J>=q.t){Y.t=0;return}var G=$%q.DB,Q=q.DB-G,O=(1<<G)-1;Y[0]=q[J]>>G;for(var X=J+1;X<q.t;++X)Y[X-J-1]|=(q[X]&O)<<Q,Y[X-J]=q[X]>>G;if(G>0)Y[q.t-J-1]|=(q.s&O)<<Q;Y.t=q.t-J,Y.clamp()}function XR($,Y){var q=this,J=0,G=0,Q=Math.min($.t,q.t);while(J<Q)G+=q[J]-$[J],Y[J++]=G&q.DM,G>>=q.DB;if($.t<q.t){G-=$.s;while(J<q.t)G+=q[J],Y[J++]=G&q.DM,G>>=q.DB;G+=q.s}else{G+=q.s;while(J<$.t)G-=$[J],Y[J++]=G&q.DM,G>>=q.DB;G-=$.s}if(Y.s=G<0?-1:0,G<-1)Y[J++]=q.DV+G;else if(G>0)Y[J++]=G;Y.t=J,Y.clamp()}function ZR($,Y){var q=this.abs(),J=$.abs(),G=q.t;Y.t=G+J.t;while(--G>=0)Y[G]=0;for(G=0;G<J.t;++G)Y[G+q.t]=q.am(0,J[G],Y,G,0,q.t);if(Y.s=0,Y.clamp(),this.s!=$.s)Y0.ZERO.subTo(Y,Y)}function UR($){var Y=this.abs(),q=$.t=2*Y.t;while(--q>=0)$[q]=0;for(q=0;q<Y.t-1;++q){var J=Y.am(q,Y[q],$,2*q,0,1);if(($[q+Y.t]+=Y.am(q+1,2*Y[q],$,2*q+1,J,Y.t-q-1))>=Y.DV)$[q+Y.t]-=Y.DV,$[q+Y.t+1]=1}if($.t>0)$[$.t-1]+=Y.am(q,Y[q],$,2*q,0,1);$.s=0,$.clamp()}function NR($,Y,q){var J=this,G=$.abs();if(G.t<=0)return;var Q=J.abs();if(Q.t<G.t){if(Y!=null)Y.fromInt(0);if(q!=null)J.copyTo(q);return}if(q==null)q=new Y0;var O=new Y0,X=J.s,Z=$.s,U=J.DB-I7(G[G.t-1]);if(U>0)G.lShiftTo(U,O),Q.lShiftTo(U,q);else G.copyTo(O),Q.copyTo(q);var N=O.t,V=O[N-1];if(V==0)return;var z=V*(1<<J.F1)+(N>1?O[N-2]>>J.F2:0),L=J.FV/z,j=(1<<J.F1)/z,D=1<<J.F2,B=q.t,R=B-N,A=Y==null?new Y0:Y;if(O.dlShiftTo(R,A),q.compareTo(A)>=0)q[q.t++]=1,q.subTo(A,q);Y0.ONE.dlShiftTo(N,A),A.subTo(O,O);while(O.t<N)O[O.t++]=0;while(--R>=0){var w=q[--B]==V?J.DM:Math.floor(q[B]*L+(q[B-1]+D)*j);if((q[B]+=O.am(0,w,q,R,0,N))<w){O.dlShiftTo(R,A),q.subTo(A,q);while(q[B]<--w)q.subTo(A,q)}}if(Y!=null){if(q.drShiftTo(N,Y),X!=Z)Y0.ZERO.subTo(Y,Y)}if(q.t=N,q.clamp(),U>0)q.rShiftTo(U,q);if(X<0)Y0.ZERO.subTo(q,q)}function MR($){var Y=new Y0;if(this.abs().divRemTo($,null,Y),this.s<0&&Y.compareTo(Y0.ZERO)>0)$.subTo(Y,Y);return Y}function P9($){this.m=$}function VR($){if($.s<0||$.compareTo(this.m)>=0)return $.mod(this.m);else return $}function jR($){return $}function KR($){$.divRemTo(this.m,null,$)}function zR($,Y,q){$.multiplyTo(Y,q),this.reduce(q)}function WR($,Y){$.squareTo(Y),this.reduce(Y)}P9.prototype.convert=VR;P9.prototype.revert=jR;P9.prototype.reduce=KR;P9.prototype.mulTo=zR;P9.prototype.sqrTo=WR;function LR(){if(this.t<1)return 0;var $=this[0];if(($&1)==0)return 0;var Y=$&3;return Y=Y*(2-($&15)*Y)&15,Y=Y*(2-($&255)*Y)&255,Y=Y*(2-(($&65535)*Y&65535))&65535,Y=Y*(2-$*Y%this.DV)%this.DV,Y>0?this.DV-Y:-Y}function B9($){this.m=$,this.mp=$.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<$.DB-15)-1,this.mt2=2*$.t}function CR($){var Y=new Y0;if($.abs().dlShiftTo(this.m.t,Y),Y.divRemTo(this.m,null,Y),$.s<0&&Y.compareTo(Y0.ZERO)>0)this.m.subTo(Y,Y);return Y}function DR($){var Y=new Y0;return $.copyTo(Y),this.reduce(Y),Y}function RR($){while($.t<=this.mt2)$[$.t++]=0;for(var Y=0;Y<this.m.t;++Y){var q=$[Y]&32767,J=q*this.mpl+((q*this.mph+($[Y]>>15)*this.mpl&this.um)<<15)&$.DM;q=Y+this.m.t,$[q]+=this.m.am(0,J,$,Y,0,this.m.t);while($[q]>=$.DV)$[q]-=$.DV,$[++q]++}if($.clamp(),$.drShiftTo(this.m.t,$),$.compareTo(this.m)>=0)$.subTo(this.m,$)}function AR($,Y){$.squareTo(Y),this.reduce(Y)}function ER($,Y,q){$.multiplyTo(Y,q),this.reduce(q)}B9.prototype.convert=CR;B9.prototype.revert=DR;B9.prototype.reduce=RR;B9.prototype.mulTo=ER;B9.prototype.sqrTo=AR;function HR(){return(this.t>0?this[0]&1:this.s)==0}function FR($,Y){if($>4294967295||$<1)return Y0.ONE;var q=new Y0,J=new Y0,G=Y.convert(this),Q=I7($)-1;G.copyTo(q);while(--Q>=0)if(Y.sqrTo(q,J),($&1<<Q)>0)Y.mulTo(J,G,q);else{var O=q;q=J,J=O}return Y.revert(q)}function PR($,Y){var q;if($<256||Y.isEven())q=new P9(Y);else q=new B9(Y);return this.exp($,q)}t.copyTo=n3;t.fromInt=a3;t.fromString=i3;t.clamp=s3;t.dlShiftTo=JR;t.drShiftTo=GR;t.lShiftTo=QR;t.rShiftTo=OR;t.subTo=XR;t.multiplyTo=ZR;t.squareTo=UR;t.divRemTo=NR;t.invDigit=LR;t.isEven=HR;t.exp=FR;t.toString=r3;t.negate=t3;t.abs=e3;t.compareTo=$R;t.bitLength=YR;t.byteLength=qR;t.mod=MR;t.modPowInt=PR;function BR(){var $=new Y0;return this.copyTo($),$}function wR(){if(this.s<0){if(this.t==1)return this[0]-this.DV;else if(this.t==0)return-1}else if(this.t==1)return this[0];else if(this.t==0)return 0;return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function TR(){return this.t==0?this.s:this[0]<<24>>24}function IR(){return this.t==0?this.s:this[0]<<16>>16}function vR($){return Math.floor(Math.LN2*this.DB/Math.log($))}function _R(){if(this.s<0)return-1;else if(this.t<=0||this.t==1&&this[0]<=0)return 0;else return 1}function SR($){if($==null)$=10;if(this.signum()==0||$<2||$>36)return"0";var Y=this.chunkSize($),q=Math.pow($,Y),J=F8(q),G=new Y0,Q=new Y0,O="";this.divRemTo(J,G,Q);while(G.signum()>0)O=(q+Q.intValue()).toString($).substr(1)+O,G.divRemTo(J,G,Q);return Q.intValue().toString($)+O}function kR($,Y){var q=this;if(q.fromInt(0),Y==null)Y=10;var J=q.chunkSize(Y),G=Math.pow(Y,J),Q=!1,O=0,X=0;for(var Z=0;Z<$.length;++Z){var U=XN($,Z);if(U<0){if($.charAt(Z)=="-"&&q.signum()==0)Q=!0;continue}if(X=Y*X+U,++O>=J)q.dMultiply(G),q.dAddOffset(X,0),O=0,X=0}if(O>0)q.dMultiply(Math.pow(Y,O)),q.dAddOffset(X,0);if(Q)Y0.ZERO.subTo(q,q)}function xR($,Y,q){var J=this;if(typeof Y=="number")if($<2)J.fromInt(1);else{if(J.fromNumber($,q),!J.testBit($-1))J.bitwiseTo(Y0.ONE.shiftLeft($-1),zY,J);if(J.isEven())J.dAddOffset(1,0);while(!J.isProbablePrime(Y))if(J.dAddOffset(2,0),J.bitLength()>$)J.subTo(Y0.ONE.shiftLeft($-1),J)}else{var G=new Array,Q=$&7;if(G.length=($>>3)+1,Y.nextBytes(G),Q>0)G[0]&=(1<<Q)-1;else G[0]=0;J.fromString(G,256)}}function fR(){var $=this,Y=$.t,q=new Array;q[0]=$.s;var J=$.DB-Y*$.DB%8,G,Q=0;if(Y-- >0){if(J<$.DB&&(G=$[Y]>>J)!=($.s&$.DM)>>J)q[Q++]=G|$.s<<$.DB-J;while(Y>=0){if(J<8)G=($[Y]&(1<<J)-1)<<8-J,G|=$[--Y]>>(J+=$.DB-8);else if(G=$[Y]>>(J-=8)&255,J<=0)J+=$.DB,--Y;if((G&128)!=0)G|=-256;if(Q===0&&($.s&128)!=(G&128))++Q;if(Q>0||G!=$.s)q[Q++]=G}}return q}function mR($){return this.compareTo($)==0}function gR($){return this.compareTo($)<0?this:$}function bR($){return this.compareTo($)>0?this:$}function dR($,Y,q){var J=this,G,Q,O=Math.min($.t,J.t);for(G=0;G<O;++G)q[G]=Y(J[G],$[G]);if($.t<J.t){Q=$.s&J.DM;for(G=O;G<J.t;++G)q[G]=Y(J[G],Q);q.t=J.t}else{Q=J.s&J.DM;for(G=O;G<$.t;++G)q[G]=Y(Q,$[G]);q.t=$.t}q.s=Y(J.s,$.s),q.clamp()}function yR($,Y){return $&Y}function lR($){var Y=new Y0;return this.bitwiseTo($,yR,Y),Y}function zY($,Y){return $|Y}function hR($){var Y=new Y0;return this.bitwiseTo($,zY,Y),Y}function ZN($,Y){return $^Y}function cR($){var Y=new Y0;return this.bitwiseTo($,ZN,Y),Y}function UN($,Y){return $&~Y}function uR($){var Y=new Y0;return this.bitwiseTo($,UN,Y),Y}function oR(){var $=new Y0;for(var Y=0;Y<this.t;++Y)$[Y]=this.DM&~this[Y];return $.t=this.t,$.s=~this.s,$}function pR($){var Y=new Y0;if($<0)this.rShiftTo(-$,Y);else this.lShiftTo($,Y);return Y}function nR($){var Y=new Y0;if($<0)this.lShiftTo(-$,Y);else this.rShiftTo($,Y);return Y}function aR($){if($==0)return-1;var Y=0;if(($&65535)==0)$>>=16,Y+=16;if(($&255)==0)$>>=8,Y+=8;if(($&15)==0)$>>=4,Y+=4;if(($&3)==0)$>>=2,Y+=2;if(($&1)==0)++Y;return Y}function iR(){for(var $=0;$<this.t;++$)if(this[$]!=0)return $*this.DB+aR(this[$]);if(this.s<0)return this.t*this.DB;return-1}function sR($){var Y=0;while($!=0)$&=$-1,++Y;return Y}function rR(){var $=0,Y=this.s&this.DM;for(var q=0;q<this.t;++q)$+=sR(this[q]^Y);return $}function tR($){var Y=Math.floor($/this.DB);if(Y>=this.t)return this.s!=0;return(this[Y]&1<<$%this.DB)!=0}function eR($,Y){var q=Y0.ONE.shiftLeft($);return this.bitwiseTo(q,Y,q),q}function $A($){return this.changeBit($,zY)}function YA($){return this.changeBit($,UN)}function qA($){return this.changeBit($,ZN)}function JA($,Y){var q=this,J=0,G=0,Q=Math.min($.t,q.t);while(J<Q)G+=q[J]+$[J],Y[J++]=G&q.DM,G>>=q.DB;if($.t<q.t){G+=$.s;while(J<q.t)G+=q[J],Y[J++]=G&q.DM,G>>=q.DB;G+=q.s}else{G+=q.s;while(J<$.t)G+=$[J],Y[J++]=G&q.DM,G>>=q.DB;G+=$.s}if(Y.s=G<0?-1:0,G>0)Y[J++]=G;else if(G<-1)Y[J++]=q.DV+G;Y.t=J,Y.clamp()}function GA($){var Y=new Y0;return this.addTo($,Y),Y}function QA($){var Y=new Y0;return this.subTo($,Y),Y}function OA($){var Y=new Y0;return this.multiplyTo($,Y),Y}function XA(){var $=new Y0;return this.squareTo($),$}function ZA($){var Y=new Y0;return this.divRemTo($,Y,null),Y}function UA($){var Y=new Y0;return this.divRemTo($,null,Y),Y}function NA($){var Y=new Y0,q=new Y0;return this.divRemTo($,Y,q),new Array(Y,q)}function MA($){this[this.t]=this.am(0,$-1,this,0,0,this.t),++this.t,this.clamp()}function VA($,Y){if($==0)return;while(this.t<=Y)this[this.t++]=0;this[Y]+=$;while(this[Y]>=this.DV){if(this[Y]-=this.DV,++Y>=this.t)this[this.t++]=0;++this[Y]}}function q6(){}function NN($){return $}function jA($,Y,q){$.multiplyTo(Y,q)}function KA($,Y){$.squareTo(Y)}q6.prototype.convert=NN;q6.prototype.revert=NN;q6.prototype.mulTo=jA;q6.prototype.sqrTo=KA;function zA($){return this.exp($,new q6)}function WA($,Y,q){var J=Math.min(this.t+$.t,Y);q.s=0,q.t=J;while(J>0)q[--J]=0;var G;for(G=q.t-this.t;J<G;++J)q[J+this.t]=this.am(0,$[J],q,J,0,this.t);for(G=Math.min($.t,Y);J<G;++J)this.am(0,$[J],q,J,0,Y-J);q.clamp()}function LA($,Y,q){--Y;var J=q.t=this.t+$.t-Y;q.s=0;while(--J>=0)q[J]=0;for(J=Math.max(Y-this.t,0);J<$.t;++J)q[this.t+J-Y]=this.am(Y-J,$[J],q,0,0,this.t+J-Y);q.clamp(),q.drShiftTo(1,q)}function z5($){this.r2=new Y0,this.q3=new Y0,Y0.ONE.dlShiftTo(2*$.t,this.r2),this.mu=this.r2.divide($),this.m=$}function CA($){if($.s<0||$.t>2*this.m.t)return $.mod(this.m);else if($.compareTo(this.m)<0)return $;else{var Y=new Y0;return $.copyTo(Y),this.reduce(Y),Y}}function DA($){return $}function RA($){var Y=this;if($.drShiftTo(Y.m.t-1,Y.r2),$.t>Y.m.t+1)$.t=Y.m.t+1,$.clamp();Y.mu.multiplyUpperTo(Y.r2,Y.m.t+1,Y.q3),Y.m.multiplyLowerTo(Y.q3,Y.m.t+1,Y.r2);while($.compareTo(Y.r2)<0)$.dAddOffset(1,Y.m.t+1);$.subTo(Y.r2,$);while($.compareTo(Y.m)>=0)$.subTo(Y.m,$)}function AA($,Y){$.squareTo(Y),this.reduce(Y)}function EA($,Y,q){$.multiplyTo(Y,q),this.reduce(q)}z5.prototype.convert=CA;z5.prototype.revert=DA;z5.prototype.reduce=RA;z5.prototype.mulTo=EA;z5.prototype.sqrTo=AA;function HA($,Y){var q=$.bitLength(),J,G=F8(1),Q;if(q<=0)return G;else if(q<18)J=1;else if(q<48)J=3;else if(q<144)J=4;else if(q<768)J=5;else J=6;if(q<8)Q=new P9(Y);else if(Y.isEven())Q=new z5(Y);else Q=new B9(Y);var O=new Array,X=3,Z=J-1,U=(1<<J)-1;if(O[1]=Q.convert(this),J>1){var N=new Y0;Q.sqrTo(O[1],N);while(X<=U)O[X]=new Y0,Q.mulTo(N,O[X-2],O[X]),X+=2}var V=$.t-1,z,L=!0,j=new Y0,D;q=I7($[V])-1;while(V>=0){if(q>=Z)z=$[V]>>q-Z&U;else if(z=($[V]&(1<<q+1)-1)<<Z-q,V>0)z|=$[V-1]>>this.DB+q-Z;X=J;while((z&1)==0)z>>=1,--X;if((q-=X)<0)q+=this.DB,--V;if(L)O[z].copyTo(G),L=!1;else{while(X>1)Q.sqrTo(G,j),Q.sqrTo(j,G),X-=2;if(X>0)Q.sqrTo(G,j);else D=G,G=j,j=D;Q.mulTo(j,O[z],G)}while(V>=0&&($[V]&1<<q)==0)if(Q.sqrTo(G,j),D=G,G=j,j=D,--q<0)q=this.DB-1,--V}return Q.revert(G)}function FA($){var Y=this.s<0?this.negate():this.clone(),q=$.s<0?$.negate():$.clone();if(Y.compareTo(q)<0){var J=Y;Y=q,q=J}var G=Y.getLowestSetBit(),Q=q.getLowestSetBit();if(Q<0)return Y;if(G<Q)Q=G;if(Q>0)Y.rShiftTo(Q,Y),q.rShiftTo(Q,q);while(Y.signum()>0){if((G=Y.getLowestSetBit())>0)Y.rShiftTo(G,Y);if((G=q.getLowestSetBit())>0)q.rShiftTo(G,q);if(Y.compareTo(q)>=0)Y.subTo(q,Y),Y.rShiftTo(1,Y);else q.subTo(Y,q),q.rShiftTo(1,q)}if(Q>0)q.lShiftTo(Q,q);return q}function PA($){if($<=0)return 0;var Y=this.DV%$,q=this.s<0?$-1:0;if(this.t>0)if(Y==0)q=this[0]%$;else for(var J=this.t-1;J>=0;--J)q=(Y*q+this[J])%$;return q}function BA($){var Y=$.isEven();if(this.signum()===0)throw new Error("division by zero");if(this.isEven()&&Y||$.signum()==0)return Y0.ZERO;var q=$.clone(),J=this.clone(),G=F8(1),Q=F8(0),O=F8(0),X=F8(1);while(q.signum()!=0){while(q.isEven()){if(q.rShiftTo(1,q),Y){if(!G.isEven()||!Q.isEven())G.addTo(this,G),Q.subTo($,Q);G.rShiftTo(1,G)}else if(!Q.isEven())Q.subTo($,Q);Q.rShiftTo(1,Q)}while(J.isEven()){if(J.rShiftTo(1,J),Y){if(!O.isEven()||!X.isEven())O.addTo(this,O),X.subTo($,X);O.rShiftTo(1,O)}else if(!X.isEven())X.subTo($,X);X.rShiftTo(1,X)}if(q.compareTo(J)>=0){if(q.subTo(J,q),Y)G.subTo(O,G);Q.subTo(X,Q)}else{if(J.subTo(q,J),Y)O.subTo(G,O);X.subTo(Q,X)}}if(J.compareTo(Y0.ONE)!=0)return Y0.ZERO;while(X.compareTo($)>=0)X.subTo($,X);while(X.signum()<0)X.addTo($,X);return X}var z1=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],wA=67108864/z1[z1.length-1];function TA($){var Y,q=this.abs();if(q.t==1&&q[0]<=z1[z1.length-1]){for(Y=0;Y<z1.length;++Y)if(q[0]==z1[Y])return!0;return!1}if(q.isEven())return!1;Y=1;while(Y<z1.length){var J=z1[Y],G=Y+1;while(G<z1.length&&J<wA)J*=z1[G++];J=q.modInt(J);while(Y<G)if(J%z1[Y++]==0)return!1}return q.millerRabin($)}function IA($){var Y=this.subtract(Y0.ONE),q=Y.getLowestSetBit();if(q<=0)return!1;var J=Y.shiftRight(q);if($=$+1>>1,$>z1.length)$=z1.length;var G=new Y0(null),Q,O=[];for(var X=0;X<$;++X){for(;;)if(Q=z1[Math.floor(Math.random()*z1.length)],O.indexOf(Q)==-1)break;O.push(Q),G.fromInt(Q);var Z=G.modPow(J,this);if(Z.compareTo(Y0.ONE)!=0&&Z.compareTo(Y)!=0){var Q=1;while(Q++<q&&Z.compareTo(Y)!=0)if(Z=Z.modPowInt(2,this),Z.compareTo(Y0.ONE)==0)return!1;if(Z.compareTo(Y)!=0)return!1}}return!0}t.chunkSize=vR;t.toRadix=SR;t.fromRadix=kR;t.fromNumber=xR;t.bitwiseTo=dR;t.changeBit=eR;t.addTo=JA;t.dMultiply=MA;t.dAddOffset=VA;t.multiplyLowerTo=WA;t.multiplyUpperTo=LA;t.modInt=PA;t.millerRabin=IA;t.clone=BR;t.intValue=wR;t.byteValue=TR;t.shortValue=IR;t.signum=_R;t.toByteArray=fR;t.equals=mR;t.min=gR;t.max=bR;t.and=lR;t.or=hR;t.xor=cR;t.andNot=uR;t.not=oR;t.shiftLeft=pR;t.shiftRight=nR;t.getLowestSetBit=iR;t.bitCount=rR;t.testBit=tR;t.setBit=$A;t.clearBit=YA;t.flipBit=qA;t.add=GA;t.subtract=QA;t.multiply=OA;t.divide=ZA;t.remainder=UA;t.divideAndRemainder=NA;t.modPow=HA;t.modInverse=BA;t.pow=zA;t.gcd=FA;t.isProbablePrime=TA;t.square=XA;Y0.ZERO=F8(0);Y0.ONE=F8(1);Y0.valueOf=F8;MN.exports=Y0});var f7=y(()=>{var{create:vA,defineProperty:_7,getOwnPropertyDescriptor:_A,getOwnPropertyNames:SA,getPrototypeOf:kA}=Object,xA=Object.prototype.hasOwnProperty,fA=($,Y)=>()=>($&&(Y=$($=0)),Y),C0=($,Y)=>()=>(Y||$((Y={exports:{}}).exports,Y),Y.exports),mA=($,Y)=>{for(var q in Y)_7($,q,{get:Y[q],enumerable:!0})},v7=($,Y,q,J)=>{if(Y&&typeof Y=="object"||typeof Y=="function")for(let G of SA(Y))!xA.call($,G)&&G!==q&&_7($,G,{get:()=>Y[G],enumerable:!(J=_A(Y,G))||J.enumerable});return $},VN=($,Y,q)=>(v7($,Y,"default"),q&&v7(q,Y,"default")),jN=($,Y,q)=>(q=$!=null?vA(kA($)):{},v7(Y||!$||!$.__esModule?_7(q,"default",{value:$,enumerable:!0}):q,$)),J6=($)=>v7(_7({},"__esModule",{value:!0}),$),KN=C0(($,Y)=>{Y.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var q={},J=Symbol("test"),G=Object(J);if(typeof J=="string"||Object.prototype.toString.call(J)!=="[object Symbol]"||Object.prototype.toString.call(G)!=="[object Symbol]")return!1;var Q=42;q[J]=Q;for(J in q)return!1;if(typeof Object.keys=="function"&&Object.keys(q).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(q).length!==0)return!1;var O=Object.getOwnPropertySymbols(q);if(O.length!==1||O[0]!==J||!Object.prototype.propertyIsEnumerable.call(q,J))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var X=Object.getOwnPropertyDescriptor(q,J);if(X.value!==Q||X.enumerable!==!0)return!1}return!0}}),S7=C0(($,Y)=>{var q=KN();Y.exports=function(){return q()&&!!Symbol.toStringTag}}),gA=C0(($,Y)=>{var q=typeof Symbol<"u"&&Symbol,J=KN();Y.exports=function(){return typeof q!="function"||typeof Symbol!="function"||typeof q("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:J()}}),bA=C0(($,Y)=>{var q="Function.prototype.bind called on incompatible ",J=Array.prototype.slice,G=Object.prototype.toString,Q="[object Function]";Y.exports=function(O){var X=this;if(typeof X!="function"||G.call(X)!==Q)throw new TypeError(q+X);for(var Z=J.call(arguments,1),U,N=function(){if(this instanceof U){var D=X.apply(this,Z.concat(J.call(arguments)));return Object(D)===D?D:this}else return X.apply(O,Z.concat(J.call(arguments)))},V=Math.max(0,X.length-Z.length),z=[],L=0;L<V;L++)z.push("$"+L);if(U=Function("binder","return function ("+z.join(",")+"){ return binder.apply(this,arguments); }")(N),X.prototype){var j=function(){};j.prototype=X.prototype,U.prototype=new j,j.prototype=null}return U}}),RY=C0(($,Y)=>{var q=bA();Y.exports=Function.prototype.bind||q}),dA=C0(($,Y)=>{var q=RY();Y.exports=q.call(Function.call,Object.prototype.hasOwnProperty)}),k7=C0(($,Y)=>{var q,J=SyntaxError,G=Function,Q=TypeError,O=function(N0){try{return G('"use strict"; return ('+N0+").constructor;")()}catch{}},X=Object.getOwnPropertyDescriptor;if(X)try{X({},"")}catch{X=null}var Z=function(){throw new Q},U=X?function(){try{return arguments.callee,Z}catch{try{return X(arguments,"callee").get}catch{return Z}}}():Z,N=gA()(),V=Object.getPrototypeOf||function(N0){return N0.__proto__},z={},L=typeof Uint8Array>"u"?q:V(Uint8Array),j={"%AggregateError%":typeof AggregateError>"u"?q:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?q:ArrayBuffer,"%ArrayIteratorPrototype%":N?V([][Symbol.iterator]()):q,"%AsyncFromSyncIteratorPrototype%":q,"%AsyncFunction%":z,"%AsyncGenerator%":z,"%AsyncGeneratorFunction%":z,"%AsyncIteratorPrototype%":z,"%Atomics%":typeof Atomics>"u"?q:Atomics,"%BigInt%":typeof BigInt>"u"?q:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?q:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?q:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?q:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?q:Float32Array,"%Float64Array%":typeof Float64Array>"u"?q:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?q:FinalizationRegistry,"%Function%":G,"%GeneratorFunction%":z,"%Int8Array%":typeof Int8Array>"u"?q:Int8Array,"%Int16Array%":typeof Int16Array>"u"?q:Int16Array,"%Int32Array%":typeof Int32Array>"u"?q:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":N?V(V([][Symbol.iterator]())):q,"%JSON%":typeof JSON=="object"?JSON:q,"%Map%":typeof Map>"u"?q:Map,"%MapIteratorPrototype%":typeof Map>"u"||!N?q:V(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?q:Promise,"%Proxy%":typeof Proxy>"u"?q:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?q:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?q:Set,"%SetIteratorPrototype%":typeof Set>"u"||!N?q:V(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?q:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":N?V(""[Symbol.iterator]()):q,"%Symbol%":N?Symbol:q,"%SyntaxError%":J,"%ThrowTypeError%":U,"%TypedArray%":L,"%TypeError%":Q,"%Uint8Array%":typeof Uint8Array>"u"?q:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?q:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?q:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?q:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?q:WeakMap,"%WeakRef%":typeof WeakRef>"u"?q:WeakRef,"%WeakSet%":typeof WeakSet>"u"?q:WeakSet};try{null.error}catch(N0){D=V(V(N0)),j["%Error.prototype%"]=D}var D,B=function N0(Q0){var g;if(Q0==="%AsyncFunction%")g=O("async function () {}");else if(Q0==="%GeneratorFunction%")g=O("function* () {}");else if(Q0==="%AsyncGeneratorFunction%")g=O("async function* () {}");else if(Q0==="%AsyncGenerator%"){var a=N0("%AsyncGeneratorFunction%");a&&(g=a.prototype)}else if(Q0==="%AsyncIteratorPrototype%"){var l=N0("%AsyncGenerator%");l&&(g=V(l.prototype))}return j[Q0]=g,g},R={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},A=RY(),w=dA(),I=A.call(Function.call,Array.prototype.concat),k=A.call(Function.apply,Array.prototype.splice),p=A.call(Function.call,String.prototype.replace),x=A.call(Function.call,String.prototype.slice),G0=A.call(Function.call,RegExp.prototype.exec),e=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$0=/\\(\\)?/g,U0=function(N0){var Q0=x(N0,0,1),g=x(N0,-1);if(Q0==="%"&&g!=="%")throw new J("invalid intrinsic syntax, expected closing `%`");if(g==="%"&&Q0!=="%")throw new J("invalid intrinsic syntax, expected opening `%`");var a=[];return p(N0,e,function(l,f,h,o){a[a.length]=h?p(o,$0,"$1"):f||l}),a},W0=function(N0,Q0){var g=N0,a;if(w(R,g)&&(a=R[g],g="%"+a[0]+"%"),w(j,g)){var l=j[g];if(l===z&&(l=B(g)),typeof l>"u"&&!Q0)throw new Q("intrinsic "+N0+" exists, but is not available. Please file an issue!");return{alias:a,name:g,value:l}}throw new J("intrinsic "+N0+" does not exist!")};Y.exports=function(N0,Q0){if(typeof N0!="string"||N0.length===0)throw new Q("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Q0!="boolean")throw new Q('"allowMissing" argument must be a boolean');if(G0(/^%?[^%]*%?$/,N0)===null)throw new J("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var g=U0(N0),a=g.length>0?g[0]:"",l=W0("%"+a+"%",Q0),f=l.name,h=l.value,o=!1,q0=l.alias;q0&&(a=q0[0],k(g,I([0,1],q0)));for(var P=1,E=!0;P<g.length;P+=1){var H=g[P],v=x(H,0,1),b=x(H,-1);if((v==='"'||v==="'"||v==="`"||b==='"'||b==="'"||b==="`")&&v!==b)throw new J("property names with quotes must have matching quotes");if((H==="constructor"||!E)&&(o=!0),a+="."+H,f="%"+a+"%",w(j,f))h=j[f];else if(h!=null){if(!(H in h)){if(!Q0)throw new Q("base intrinsic for "+N0+" exists, but the property is not available.");return}if(X&&P+1>=g.length){var u=X(h,H);E=!!u,E&&"get"in u&&!("originalValue"in u.get)?h=u.get:h=h[H]}else E=w(h,H),h=h[H];E&&!o&&(j[f]=h)}}return h}}),AY=C0(($,Y)=>{var q=RY(),J=k7(),G=J("%Function.prototype.apply%"),Q=J("%Function.prototype.call%"),O=J("%Reflect.apply%",!0)||q.call(Q,G),X=J("%Object.getOwnPropertyDescriptor%",!0),Z=J("%Object.defineProperty%",!0),U=J("%Math.max%");if(Z)try{Z({},"a",{value:1})}catch{Z=null}Y.exports=function(V){var z=O(q,Q,arguments);if(X&&Z){var L=X(z,"length");L.configurable&&Z(z,"length",{value:1+U(0,V.length-(arguments.length-1))})}return z};var N=function(){return O(q,G,arguments)};Z?Z(Y.exports,"apply",{value:N}):Y.exports.apply=N}),EY=C0(($,Y)=>{var q=k7(),J=AY(),G=J(q("String.prototype.indexOf"));Y.exports=function(Q,O){var X=q(Q,!!O);return typeof X=="function"&&G(Q,".prototype.")>-1?J(X):X}}),yA=C0(($,Y)=>{var q=S7()(),J=EY(),G=J("Object.prototype.toString"),Q=function(Z){return q&&Z&&typeof Z=="object"&&Symbol.toStringTag in Z?!1:G(Z)==="[object Arguments]"},O=function(Z){return Q(Z)?!0:Z!==null&&typeof Z=="object"&&typeof Z.length=="number"&&Z.length>=0&&G(Z)!=="[object Array]"&&G(Z.callee)==="[object Function]"},X=function(){return Q(arguments)}();Q.isLegacyArguments=O,Y.exports=X?Q:O}),lA=C0(($,Y)=>{var q=Object.prototype.toString,J=Function.prototype.toString,G=/^\s*(?:function)?\*/,Q=S7()(),O=Object.getPrototypeOf,X=function(){if(!Q)return!1;try{return Function("return function*() {}")()}catch{}},Z;Y.exports=function(U){if(typeof U!="function")return!1;if(G.test(J.call(U)))return!0;if(!Q){var N=q.call(U);return N==="[object GeneratorFunction]"}if(!O)return!1;if(typeof Z>"u"){var V=X();Z=V?O(V):!1}return O(U)===Z}}),hA=C0(($,Y)=>{var q=Function.prototype.toString,J=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,G,Q;if(typeof J=="function"&&typeof Object.defineProperty=="function")try{G=Object.defineProperty({},"length",{get:function(){throw Q}}),Q={},J(function(){throw 42},null,G)}catch(I){I!==Q&&(J=null)}else J=null;var O=/^\s*class\b/,X=function(I){try{var k=q.call(I);return O.test(k)}catch{return!1}},Z=function(I){try{return X(I)?!1:(q.call(I),!0)}catch{return!1}},U=Object.prototype.toString,N="[object Object]",V="[object Function]",z="[object GeneratorFunction]",L="[object HTMLAllCollection]",j="[object HTML document.all class]",D="[object HTMLCollection]",B=typeof Symbol=="function"&&!!Symbol.toStringTag,R=!(0 in[,]),A=function(){return!1};typeof document=="object"&&(w=document.all,U.call(w)===U.call(document.all)&&(A=function(I){if((R||!I)&&(typeof I>"u"||typeof I=="object"))try{var k=U.call(I);return(k===L||k===j||k===D||k===N)&&I("")==null}catch{}return!1}));var w;Y.exports=J?function(I){if(A(I))return!0;if(!I||typeof I!="function"&&typeof I!="object")return!1;try{J(I,null,G)}catch(k){if(k!==Q)return!1}return!X(I)&&Z(I)}:function(I){if(A(I))return!0;if(!I||typeof I!="function"&&typeof I!="object")return!1;if(B)return Z(I);if(X(I))return!1;var k=U.call(I);return k!==V&&k!==z&&!/^\[object HTML/.test(k)?!1:Z(I)}}),zN=C0(($,Y)=>{var q=hA(),J=Object.prototype.toString,G=Object.prototype.hasOwnProperty,Q=function(U,N,V){for(var z=0,L=U.length;z<L;z++)G.call(U,z)&&(V==null?N(U[z],z,U):N.call(V,U[z],z,U))},O=function(U,N,V){for(var z=0,L=U.length;z<L;z++)V==null?N(U.charAt(z),z,U):N.call(V,U.charAt(z),z,U)},X=function(U,N,V){for(var z in U)G.call(U,z)&&(V==null?N(U[z],z,U):N.call(V,U[z],z,U))},Z=function(U,N,V){if(!q(N))throw new TypeError("iterator must be a function");var z;arguments.length>=3&&(z=V),J.call(U)==="[object Array]"?Q(U,N,z):typeof U=="string"?O(U,N,z):X(U,N,z)};Y.exports=Z}),WN=C0(($,Y)=>{var q=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],J=typeof globalThis>"u"?global:globalThis;Y.exports=function(){for(var G=[],Q=0;Q<q.length;Q++)typeof J[q[Q]]=="function"&&(G[G.length]=q[Q]);return G}}),LN=C0(($,Y)=>{var q=k7(),J=q("%Object.getOwnPropertyDescriptor%",!0);if(J)try{J([],"length")}catch{J=null}Y.exports=J}),CN=C0(($,Y)=>{var q=zN(),J=WN(),G=EY(),Q=G("Object.prototype.toString"),O=S7()(),X=LN(),Z=typeof globalThis>"u"?global:globalThis,U=J(),N=G("Array.prototype.indexOf",!0)||function(D,B){for(var R=0;R<D.length;R+=1)if(D[R]===B)return R;return-1},V=G("String.prototype.slice"),z={},L=Object.getPrototypeOf;O&&X&&L&&q(U,function(D){var B=new Z[D];if(Symbol.toStringTag in B){var R=L(B),A=X(R,Symbol.toStringTag);if(!A){var w=L(R);A=X(w,Symbol.toStringTag)}z[D]=A.get}});var j=function(D){var B=!1;return q(z,function(R,A){if(!B)try{B=R.call(D)===A}catch{}}),B};Y.exports=function(D){if(!D||typeof D!="object")return!1;if(!O||!(Symbol.toStringTag in D)){var B=V(Q(D),8,-1);return N(U,B)>-1}return X?j(D):!1}}),cA=C0(($,Y)=>{var q=zN(),J=WN(),G=EY(),Q=LN(),O=G("Object.prototype.toString"),X=S7()(),Z=typeof globalThis>"u"?global:globalThis,U=J(),N=G("String.prototype.slice"),V={},z=Object.getPrototypeOf;X&&Q&&z&&q(U,function(D){if(typeof Z[D]=="function"){var B=new Z[D];if(Symbol.toStringTag in B){var R=z(B),A=Q(R,Symbol.toStringTag);if(!A){var w=z(R);A=Q(w,Symbol.toStringTag)}V[D]=A.get}}});var L=function(D){var B=!1;return q(V,function(R,A){if(!B)try{var w=R.call(D);w===A&&(B=w)}catch{}}),B},j=CN();Y.exports=function(D){return j(D)?!X||!(Symbol.toStringTag in D)?N(O(D),8,-1):L(D):!1}}),uA=C0(($)=>{var Y=yA(),q=lA(),J=cA(),G=CN();function Q(c){return c.call.bind(c)}var O=typeof BigInt<"u",X=typeof Symbol<"u",Z=Q(Object.prototype.toString),U=Q(Number.prototype.valueOf),N=Q(String.prototype.valueOf),V=Q(Boolean.prototype.valueOf);O&&(z=Q(BigInt.prototype.valueOf));var z;X&&(L=Q(Symbol.prototype.valueOf));var L;function j(c,M0){if(typeof c!="object")return!1;try{return M0(c),!0}catch{return!1}}$.isArgumentsObject=Y,$.isGeneratorFunction=q,$.isTypedArray=G;function D(c){return typeof Promise<"u"&&c instanceof Promise||c!==null&&typeof c=="object"&&typeof c.then=="function"&&typeof c.catch=="function"}$.isPromise=D;function B(c){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(c):G(c)||E(c)}$.isArrayBufferView=B;function R(c){return J(c)==="Uint8Array"}$.isUint8Array=R;function A(c){return J(c)==="Uint8ClampedArray"}$.isUint8ClampedArray=A;function w(c){return J(c)==="Uint16Array"}$.isUint16Array=w;function I(c){return J(c)==="Uint32Array"}$.isUint32Array=I;function k(c){return J(c)==="Int8Array"}$.isInt8Array=k;function p(c){return J(c)==="Int16Array"}$.isInt16Array=p;function x(c){return J(c)==="Int32Array"}$.isInt32Array=x;function G0(c){return J(c)==="Float32Array"}$.isFloat32Array=G0;function e(c){return J(c)==="Float64Array"}$.isFloat64Array=e;function $0(c){return J(c)==="BigInt64Array"}$.isBigInt64Array=$0;function U0(c){return J(c)==="BigUint64Array"}$.isBigUint64Array=U0;function W0(c){return Z(c)==="[object Map]"}W0.working=typeof Map<"u"&&W0(new Map);function N0(c){return typeof Map>"u"?!1:W0.working?W0(c):c instanceof Map}$.isMap=N0;function Q0(c){return Z(c)==="[object Set]"}Q0.working=typeof Set<"u"&&Q0(new Set);function g(c){return typeof Set>"u"?!1:Q0.working?Q0(c):c instanceof Set}$.isSet=g;function a(c){return Z(c)==="[object WeakMap]"}a.working=typeof WeakMap<"u"&&a(new WeakMap);function l(c){return typeof WeakMap>"u"?!1:a.working?a(c):c instanceof WeakMap}$.isWeakMap=l;function f(c){return Z(c)==="[object WeakSet]"}f.working=typeof WeakSet<"u"&&f(new WeakSet);function h(c){return f(c)}$.isWeakSet=h;function o(c){return Z(c)==="[object ArrayBuffer]"}o.working=typeof ArrayBuffer<"u"&&o(new ArrayBuffer);function q0(c){return typeof ArrayBuffer>"u"?!1:o.working?o(c):c instanceof ArrayBuffer}$.isArrayBuffer=q0;function P(c){return Z(c)==="[object DataView]"}P.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&P(new DataView(new ArrayBuffer(1),0,1));function E(c){return typeof DataView>"u"?!1:P.working?P(c):c instanceof DataView}$.isDataView=E;var H=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function v(c){return Z(c)==="[object SharedArrayBuffer]"}function b(c){return typeof H>"u"?!1:(typeof v.working>"u"&&(v.working=v(new H)),v.working?v(c):c instanceof H)}$.isSharedArrayBuffer=b;function u(c){return Z(c)==="[object AsyncFunction]"}$.isAsyncFunction=u;function m(c){return Z(c)==="[object Map Iterator]"}$.isMapIterator=m;function i(c){return Z(c)==="[object Set Iterator]"}$.isSetIterator=i;function O0(c){return Z(c)==="[object Generator]"}$.isGeneratorObject=O0;function P0(c){return Z(c)==="[object WebAssembly.Module]"}$.isWebAssemblyCompiledModule=P0;function V0(c){return j(c,U)}$.isNumberObject=V0;function i0(c){return j(c,N)}$.isStringObject=i0;function g0(c){return j(c,V)}$.isBooleanObject=g0;function $1(c){return O&&j(c,z)}$.isBigIntObject=$1;function b0(c){return X&&j(c,L)}$.isSymbolObject=b0;function j8(c){return V0(c)||i0(c)||g0(c)||$1(c)||b0(c)}$.isBoxedPrimitive=j8;function K8(c){return typeof Uint8Array<"u"&&(q0(c)||b(c))}$.isAnyArrayBuffer=K8,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(c){Object.defineProperty($,c,{enumerable:!1,value:function(){throw new Error(c+" is not supported in userland")}})})}),oA=C0(($,Y)=>{Y.exports=function(q){return q&&typeof q=="object"&&typeof q.copy=="function"&&typeof q.fill=="function"&&typeof q.readUInt8=="function"}}),pA=C0(($,Y)=>{typeof Object.create=="function"?Y.exports=function(q,J){J&&(q.super_=J,q.prototype=Object.create(J.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}))}:Y.exports=function(q,J){if(J){q.super_=J;var G=function(){};G.prototype=J.prototype,q.prototype=new G,q.prototype.constructor=q}}}),nA=C0(($)=>{var Y=Object.getOwnPropertyDescriptors||function(P){for(var E=Object.keys(P),H={},v=0;v<E.length;v++)H[E[v]]=Object.getOwnPropertyDescriptor(P,E[v]);return H},q=/%[sdj%]/g;$.format=function(P){if(!k(P)){for(var E=[],H=0;H<arguments.length;H++)E.push(O(arguments[H]));return E.join(" ")}for(var H=1,v=arguments,b=v.length,u=String(P).replace(q,function(O0){if(O0==="%%")return"%";if(H>=b)return O0;switch(O0){case"%s":return String(v[H++]);case"%d":return Number(v[H++]);case"%j":try{return JSON.stringify(v[H++])}catch{return"[Circular]"}default:return O0}}),m=v[H];H<b;m=v[++H])A(m)||!e(m)?u+=" "+m:u+=" "+O(m);return u},$.deprecate=function(P,E){if(typeof process<"u"&&process.noDeprecation===!0)return P;if(typeof process>"u")return function(){return $.deprecate(P,E).apply(this,arguments)};var H=!1;function v(){if(!H){if(process.throwDeprecation)throw new Error(E);process.traceDeprecation?console.trace(E):console.error(E),H=!0}return P.apply(this,arguments)}return v};var J={},G=/^$/;process.env.NODE_DEBUG&&(Q=process.env.NODE_DEBUG,Q=Q.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),G=new RegExp("^"+Q+"$","i"));var Q;$.debuglog=function(P){if(P=P.toUpperCase(),!J[P])if(G.test(P)){var E=process.pid;J[P]=function(){var H=$.format.apply($,arguments);console.error("%s %d: %s",P,E,H)}}else J[P]=function(){};return J[P]};function O(P,E){var H={seen:[],stylize:Z};return arguments.length>=3&&(H.depth=arguments[2]),arguments.length>=4&&(H.colors=arguments[3]),R(E)?H.showHidden=E:E&&$._extend(H,E),x(H.showHidden)&&(H.showHidden=!1),x(H.depth)&&(H.depth=2),x(H.colors)&&(H.colors=!1),x(H.customInspect)&&(H.customInspect=!0),H.colors&&(H.stylize=X),N(H,P,H.depth)}$.inspect=O,O.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},O.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function X(P,E){var H=O.styles[E];return H?"\x1B["+O.colors[H][0]+"m"+P+"\x1B["+O.colors[H][1]+"m":P}function Z(P,E){return P}function U(P){var E={};return P.forEach(function(H,v){E[H]=!0}),E}function N(P,E,H){if(P.customInspect&&E&&W0(E.inspect)&&E.inspect!==$.inspect&&!(E.constructor&&E.constructor.prototype===E)){var v=E.inspect(H,P);return k(v)||(v=N(P,v,H)),v}var b=V(P,E);if(b)return b;var u=Object.keys(E),m=U(u);if(P.showHidden&&(u=Object.getOwnPropertyNames(E)),U0(E)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return z(E);if(u.length===0){if(W0(E)){var i=E.name?": "+E.name:"";return P.stylize("[Function"+i+"]","special")}if(G0(E))return P.stylize(RegExp.prototype.toString.call(E),"regexp");if($0(E))return P.stylize(Date.prototype.toString.call(E),"date");if(U0(E))return z(E)}var O0="",P0=!1,V0=["{","}"];if(B(E)&&(P0=!0,V0=["[","]"]),W0(E)){var i0=E.name?": "+E.name:"";O0=" [Function"+i0+"]"}if(G0(E)&&(O0=" "+RegExp.prototype.toString.call(E)),$0(E)&&(O0=" "+Date.prototype.toUTCString.call(E)),U0(E)&&(O0=" "+z(E)),u.length===0&&(!P0||E.length==0))return V0[0]+O0+V0[1];if(H<0)return G0(E)?P.stylize(RegExp.prototype.toString.call(E),"regexp"):P.stylize("[Object]","special");P.seen.push(E);var g0;return P0?g0=L(P,E,H,m,u):g0=u.map(function($1){return j(P,E,H,m,$1,P0)}),P.seen.pop(),D(g0,O0,V0)}function V(P,E){if(x(E))return P.stylize("undefined","undefined");if(k(E)){var H="'"+JSON.stringify(E).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return P.stylize(H,"string")}if(I(E))return P.stylize(""+E,"number");if(R(E))return P.stylize(""+E,"boolean");if(A(E))return P.stylize("null","null")}function z(P){return"["+Error.prototype.toString.call(P)+"]"}function L(P,E,H,v,b){for(var u=[],m=0,i=E.length;m<i;++m)f(E,String(m))?u.push(j(P,E,H,v,String(m),!0)):u.push("");return b.forEach(function(O0){O0.match(/^\d+$/)||u.push(j(P,E,H,v,O0,!0))}),u}function j(P,E,H,v,b,u){var m,i,O0;if(O0=Object.getOwnPropertyDescriptor(E,b)||{value:E[b]},O0.get?O0.set?i=P.stylize("[Getter/Setter]","special"):i=P.stylize("[Getter]","special"):O0.set&&(i=P.stylize("[Setter]","special")),f(v,b)||(m="["+b+"]"),i||(P.seen.indexOf(O0.value)<0?(A(H)?i=N(P,O0.value,null):i=N(P,O0.value,H-1),i.indexOf(`
`)>-1&&(u?i=i.split(`
`).map(function(P0){return"  "+P0}).join(`
`).slice(2):i=`
`+i.split(`
`).map(function(P0){return"   "+P0}).join(`
`))):i=P.stylize("[Circular]","special")),x(m)){if(u&&b.match(/^\d+$/))return i;m=JSON.stringify(""+b),m.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(m=m.slice(1,-1),m=P.stylize(m,"name")):(m=m.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),m=P.stylize(m,"string"))}return m+": "+i}function D(P,E,H){var v=0,b=P.reduce(function(u,m){return v++,m.indexOf(`
`)>=0&&v++,u+m.replace(/\u001b\[\d\d?m/g,"").length+1},0);return b>60?H[0]+(E===""?"":E+`
 `)+" "+P.join(`,
  `)+" "+H[1]:H[0]+E+" "+P.join(", ")+" "+H[1]}$.types=uA();function B(P){return Array.isArray(P)}$.isArray=B;function R(P){return typeof P=="boolean"}$.isBoolean=R;function A(P){return P===null}$.isNull=A;function w(P){return P==null}$.isNullOrUndefined=w;function I(P){return typeof P=="number"}$.isNumber=I;function k(P){return typeof P=="string"}$.isString=k;function p(P){return typeof P=="symbol"}$.isSymbol=p;function x(P){return P===void 0}$.isUndefined=x;function G0(P){return e(P)&&Q0(P)==="[object RegExp]"}$.isRegExp=G0,$.types.isRegExp=G0;function e(P){return typeof P=="object"&&P!==null}$.isObject=e;function $0(P){return e(P)&&Q0(P)==="[object Date]"}$.isDate=$0,$.types.isDate=$0;function U0(P){return e(P)&&(Q0(P)==="[object Error]"||P instanceof Error)}$.isError=U0,$.types.isNativeError=U0;function W0(P){return typeof P=="function"}$.isFunction=W0;function N0(P){return P===null||typeof P=="boolean"||typeof P=="number"||typeof P=="string"||typeof P=="symbol"||typeof P>"u"}$.isPrimitive=N0,$.isBuffer=oA();function Q0(P){return Object.prototype.toString.call(P)}function g(P){return P<10?"0"+P.toString(10):P.toString(10)}var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function l(){var P=new Date,E=[g(P.getHours()),g(P.getMinutes()),g(P.getSeconds())].join(":");return[P.getDate(),a[P.getMonth()],E].join(" ")}$.log=function(){console.log("%s - %s",l(),$.format.apply($,arguments))},$.inherits=pA(),$._extend=function(P,E){if(!E||!e(E))return P;for(var H=Object.keys(E),v=H.length;v--;)P[H[v]]=E[H[v]];return P};function f(P,E){return Object.prototype.hasOwnProperty.call(P,E)}var h=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;$.promisify=function(P){if(typeof P!="function")throw new TypeError('The "original" argument must be of type Function');if(h&&P[h]){var E=P[h];if(typeof E!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(E,h,{value:E,enumerable:!1,writable:!1,configurable:!0}),E}function E(){for(var H,v,b=new Promise(function(i,O0){H=i,v=O0}),u=[],m=0;m<arguments.length;m++)u.push(arguments[m]);u.push(function(i,O0){i?v(i):H(O0)});try{P.apply(this,u)}catch(i){v(i)}return b}return Object.setPrototypeOf(E,Object.getPrototypeOf(P)),h&&Object.defineProperty(E,h,{value:E,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(E,Y(P))},$.promisify.custom=h;function o(P,E){if(!P){var H=new Error("Promise was rejected with a falsy value");H.reason=P,P=H}return E(P)}function q0(P){if(typeof P!="function")throw new TypeError('The "original" argument must be of type Function');function E(){for(var H=[],v=0;v<arguments.length;v++)H.push(arguments[v]);var b=H.pop();if(typeof b!="function")throw new TypeError("The last argument must be of type Function");var u=this,m=function(){return b.apply(u,arguments)};P.apply(this,H).then(function(i){process.nextTick(m.bind(null,null,i))},function(i){process.nextTick(o.bind(null,i,m))})}return Object.setPrototypeOf(E,Object.getPrototypeOf(P)),Object.defineProperties(E,Y(P)),E}$.callbackify=q0}),w9={};mA(w9,{TextDecoder:()=>CY,TextEncoder:()=>LY,default:()=>DN});var LY,CY,DN,G6=fA(()=>{VN(w9,jN(nA())),LY=globalThis.TextEncoder,CY=globalThis.TextDecoder,DN={TextEncoder:LY,TextDecoder:CY}}),RN=C0(($,Y)=>{function q(R){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?q=function(A){return typeof A}:q=function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},q(R)}function J(R,A){if(!(R instanceof A))throw new TypeError("Cannot call a class as a function")}function G(R,A){return A&&(q(A)==="object"||typeof A=="function")?A:Q(R)}function Q(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function O(R){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)},O(R)}function X(R,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(A&&A.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),A&&Z(R,A)}function Z(R,A){return Z=Object.setPrototypeOf||function(w,I){return w.__proto__=I,w},Z(R,A)}var U={},N,V;function z(R,A,w){w||(w=Error);function I(p,x,G0){return typeof A=="string"?A:A(p,x,G0)}var k=function(p){X(x,p);function x(G0,e,$0){var U0;return J(this,x),U0=G(this,O(x).call(this,I(G0,e,$0))),U0.code=R,U0}return x}(w);U[R]=k}function L(R,A){if(Array.isArray(R)){var w=R.length;return R=R.map(function(I){return String(I)}),w>2?"one of ".concat(A," ").concat(R.slice(0,w-1).join(", "),", or ")+R[w-1]:w===2?"one of ".concat(A," ").concat(R[0]," or ").concat(R[1]):"of ".concat(A," ").concat(R[0])}else return"of ".concat(A," ").concat(String(R))}function j(R,A,w){return R.substr(!w||w<0?0:+w,A.length)===A}function D(R,A,w){return(w===void 0||w>R.length)&&(w=R.length),R.substring(w-A.length,w)===A}function B(R,A,w){return typeof w!="number"&&(w=0),w+A.length>R.length?!1:R.indexOf(A,w)!==-1}z("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),z("ERR_INVALID_ARG_TYPE",function(R,A,w){N===void 0&&(N=DY()),N(typeof R=="string","'name' must be a string");var I;typeof A=="string"&&j(A,"not ")?(I="must not be",A=A.replace(/^not /,"")):I="must be";var k;if(D(R," argument"))k="The ".concat(R," ").concat(I," ").concat(L(A,"type"));else{var p=B(R,".")?"property":"argument";k='The "'.concat(R,'" ').concat(p," ").concat(I," ").concat(L(A,"type"))}return k+=". Received type ".concat(q(w)),k},TypeError),z("ERR_INVALID_ARG_VALUE",function(R,A){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";V===void 0&&(V=(G6(),J6(w9)));var I=V.inspect(A);return I.length>128&&(I="".concat(I.slice(0,128),"...")),"The argument '".concat(R,"' ").concat(w,". Received ").concat(I)},TypeError,RangeError),z("ERR_INVALID_RETURN_VALUE",function(R,A,w){var I;return w&&w.constructor&&w.constructor.name?I="instance of ".concat(w.constructor.name):I="type ".concat(q(w)),"Expected ".concat(R,' to be returned from the "').concat(A,'"')+" function but got ".concat(I,".")},TypeError),z("ERR_MISSING_ARGS",function(){for(var R=arguments.length,A=new Array(R),w=0;w<R;w++)A[w]=arguments[w];N===void 0&&(N=DY()),N(A.length>0,"At least one arg needs to be specified");var I="The ",k=A.length;switch(A=A.map(function(p){return'"'.concat(p,'"')}),k){case 1:I+="".concat(A[0]," argument");break;case 2:I+="".concat(A[0]," and ").concat(A[1]," arguments");break;default:I+=A.slice(0,k-1).join(", "),I+=", and ".concat(A[k-1]," arguments");break}return"".concat(I," must be specified")},TypeError),Y.exports.codes=U}),aA=C0(($,Y)=>{function q(l){for(var f=1;f<arguments.length;f++){var h=arguments[f]!=null?arguments[f]:{},o=Object.keys(h);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(h).filter(function(q0){return Object.getOwnPropertyDescriptor(h,q0).enumerable}))),o.forEach(function(q0){J(l,q0,h[q0])})}return l}function J(l,f,h){return f in l?Object.defineProperty(l,f,{value:h,enumerable:!0,configurable:!0,writable:!0}):l[f]=h,l}function G(l,f){if(!(l instanceof f))throw new TypeError("Cannot call a class as a function")}function Q(l,f){for(var h=0;h<f.length;h++){var o=f[h];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(l,o.key,o)}}function O(l,f,h){return f&&Q(l.prototype,f),h&&Q(l,h),l}function X(l,f){return f&&(B(f)==="object"||typeof f=="function")?f:Z(l)}function Z(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function U(l,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(f&&f.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),f&&j(l,f)}function N(l){var f=typeof Map=="function"?new Map:void 0;return N=function(h){if(h===null||!L(h))return h;if(typeof h!="function")throw new TypeError("Super expression must either be null or a function");if(typeof f<"u"){if(f.has(h))return f.get(h);f.set(h,o)}function o(){return z(h,arguments,D(this).constructor)}return o.prototype=Object.create(h.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),j(o,h)},N(l)}function V(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function z(l,f,h){return V()?z=Reflect.construct:z=function(o,q0,P){var E=[null];E.push.apply(E,q0);var H=Function.bind.apply(o,E),v=new H;return P&&j(v,P.prototype),v},z.apply(null,arguments)}function L(l){return Function.toString.call(l).indexOf("[native code]")!==-1}function j(l,f){return j=Object.setPrototypeOf||function(h,o){return h.__proto__=o,h},j(l,f)}function D(l){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},D(l)}function B(l){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?B=function(f){return typeof f}:B=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},B(l)}var R=(G6(),J6(w9)),A=R.inspect,w=RN(),I=w.codes.ERR_INVALID_ARG_TYPE;function k(l,f,h){return(h===void 0||h>l.length)&&(h=l.length),l.substring(h-f.length,h)===f}function p(l,f){if(f=Math.floor(f),l.length==0||f==0)return"";var h=l.length*f;for(f=Math.floor(Math.log(f)/Math.log(2));f;)l+=l,f--;return l+=l.substring(0,h-l.length),l}var x="",G0="",e="",$0="",U0={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},W0=10;function N0(l){var f=Object.keys(l),h=Object.create(Object.getPrototypeOf(l));return f.forEach(function(o){h[o]=l[o]}),Object.defineProperty(h,"message",{value:l.message}),h}function Q0(l){return A(l,{compact:!1,customInspect:!1,depth:1000,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function g(l,f,h){var o="",q0="",P=0,E="",H=!1,v=Q0(l),b=v.split(`
`),u=Q0(f).split(`
`),m=0,i="";if(h==="strictEqual"&&B(l)==="object"&&B(f)==="object"&&l!==null&&f!==null&&(h="strictEqualObject"),b.length===1&&u.length===1&&b[0]!==u[0]){var O0=b[0].length+u[0].length;if(O0<=W0){if((B(l)!=="object"||l===null)&&(B(f)!=="object"||f===null)&&(l!==0||f!==0))return"".concat(U0[h],`

`)+"".concat(b[0]," !== ").concat(u[0],`
`)}else if(h!=="strictEqualObject"){var P0=process.stderr&&process.stderr.isTTY?process.stderr.columns:80;if(O0<P0){for(;b[0][m]===u[0][m];)m++;m>2&&(i=`
  `.concat(p(" ",m),"^"),m=0)}}}for(var V0=b[b.length-1],i0=u[u.length-1];V0===i0&&(m++<2?E=`
  `.concat(V0).concat(E):o=V0,b.pop(),u.pop(),!(b.length===0||u.length===0));)V0=b[b.length-1],i0=u[u.length-1];var g0=Math.max(b.length,u.length);if(g0===0){var $1=v.split(`
`);if($1.length>30)for($1[26]="".concat(x,"...").concat($0);$1.length>27;)$1.pop();return"".concat(U0.notIdentical,`

`).concat($1.join(`
`),`
`)}m>3&&(E=`
`.concat(x,"...").concat($0).concat(E),H=!0),o!==""&&(E=`
  `.concat(o).concat(E),o="");var b0=0,j8=U0[h]+`
`.concat(G0,"+ actual").concat($0," ").concat(e,"- expected").concat($0),K8=" ".concat(x,"...").concat($0," Lines skipped");for(m=0;m<g0;m++){var c=m-P;if(b.length<m+1)c>1&&m>2&&(c>4?(q0+=`
`.concat(x,"...").concat($0),H=!0):c>3&&(q0+=`
  `.concat(u[m-2]),b0++),q0+=`
  `.concat(u[m-1]),b0++),P=m,o+=`
`.concat(e,"-").concat($0," ").concat(u[m]),b0++;else if(u.length<m+1)c>1&&m>2&&(c>4?(q0+=`
`.concat(x,"...").concat($0),H=!0):c>3&&(q0+=`
  `.concat(b[m-2]),b0++),q0+=`
  `.concat(b[m-1]),b0++),P=m,q0+=`
`.concat(G0,"+").concat($0," ").concat(b[m]),b0++;else{var M0=u[m],G1=b[m],M=G1!==M0&&(!k(G1,",")||G1.slice(0,-1)!==M0);M&&k(M0,",")&&M0.slice(0,-1)===G1&&(M=!1,G1+=","),M?(c>1&&m>2&&(c>4?(q0+=`
`.concat(x,"...").concat($0),H=!0):c>3&&(q0+=`
  `.concat(b[m-2]),b0++),q0+=`
  `.concat(b[m-1]),b0++),P=m,q0+=`
`.concat(G0,"+").concat($0," ").concat(G1),o+=`
`.concat(e,"-").concat($0," ").concat(M0),b0+=2):(q0+=o,o="",(c===1||m===0)&&(q0+=`
  `.concat(G1),b0++))}if(b0>20&&m<g0-2)return"".concat(j8).concat(K8,`
`).concat(q0,`
`).concat(x,"...").concat($0).concat(o,`
`)+"".concat(x,"...").concat($0)}return"".concat(j8).concat(H?K8:"",`
`).concat(q0).concat(o).concat(E).concat(i)}var a=function(l){U(f,l);function f(h){var o;if(G(this,f),B(h)!=="object"||h===null)throw new I("options","Object",h);var{message:q0,operator:P,stackStartFn:E,actual:H,expected:v}=h,b=Error.stackTraceLimit;if(Error.stackTraceLimit=0,q0!=null)o=X(this,D(f).call(this,String(q0)));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&process.stderr.getColorDepth()!==1?(x="\x1B[34m",G0="\x1B[32m",$0="\x1B[39m",e="\x1B[31m"):(x="",G0="",$0="",e="")),B(H)==="object"&&H!==null&&B(v)==="object"&&v!==null&&"stack"in H&&H instanceof Error&&"stack"in v&&v instanceof Error&&(H=N0(H),v=N0(v)),P==="deepStrictEqual"||P==="strictEqual")o=X(this,D(f).call(this,g(H,v,P)));else if(P==="notDeepStrictEqual"||P==="notStrictEqual"){var u=U0[P],m=Q0(H).split(`
`);if(P==="notStrictEqual"&&B(H)==="object"&&H!==null&&(u=U0.notStrictEqualObject),m.length>30)for(m[26]="".concat(x,"...").concat($0);m.length>27;)m.pop();m.length===1?o=X(this,D(f).call(this,"".concat(u," ").concat(m[0]))):o=X(this,D(f).call(this,"".concat(u,`

`).concat(m.join(`
`),`
`)))}else{var i=Q0(H),O0="",P0=U0[P];P==="notDeepEqual"||P==="notEqual"?(i="".concat(U0[P],`

`).concat(i),i.length>1024&&(i="".concat(i.slice(0,1021),"..."))):(O0="".concat(Q0(v)),i.length>512&&(i="".concat(i.slice(0,509),"...")),O0.length>512&&(O0="".concat(O0.slice(0,509),"...")),P==="deepEqual"||P==="equal"?i="".concat(P0,`

`).concat(i,`

should equal

`):O0=" ".concat(P," ").concat(O0)),o=X(this,D(f).call(this,"".concat(i).concat(O0)))}return Error.stackTraceLimit=b,o.generatedMessage=!q0,Object.defineProperty(Z(o),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),o.code="ERR_ASSERTION",o.actual=H,o.expected=v,o.operator=P,Error.captureStackTrace&&Error.captureStackTrace(Z(o),E),o.stack,o.name="AssertionError",X(o)}return O(f,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:A.custom,value:function(h,o){return A(this,q({},o,{customInspect:!1,depth:0}))}}]),f}(N(Error));Y.exports=a}),iA=C0(($,Y)=>{function q(G,Q){if(G==null)throw new TypeError("Cannot convert first argument to object");for(var O=Object(G),X=1;X<arguments.length;X++){var Z=arguments[X];if(Z!=null)for(var U=Object.keys(Object(Z)),N=0,V=U.length;N<V;N++){var z=U[N],L=Object.getOwnPropertyDescriptor(Z,z);L!==void 0&&L.enumerable&&(O[z]=Z[z])}}return O}function J(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:q})}Y.exports={assign:q,polyfill:J}}),AN=C0(($,Y)=>{var q=Object.prototype.toString;Y.exports=function(J){var G=q.call(J),Q=G==="[object Arguments]";return Q||(Q=G!=="[object Array]"&&J!==null&&typeof J=="object"&&typeof J.length=="number"&&J.length>=0&&q.call(J.callee)==="[object Function]"),Q}}),sA=C0(($,Y)=>{var q;Object.keys||(J=Object.prototype.hasOwnProperty,G=Object.prototype.toString,Q=AN(),O=Object.prototype.propertyIsEnumerable,X=!O.call({toString:null},"toString"),Z=O.call(function(){},"prototype"),U=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],N=function(j){var D=j.constructor;return D&&D.prototype===j},V={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},z=function(){if(typeof window>"u")return!1;for(var j in window)try{if(!V["$"+j]&&J.call(window,j)&&window[j]!==null&&typeof window[j]=="object")try{N(window[j])}catch{return!0}}catch{return!0}return!1}(),L=function(j){if(typeof window>"u"||!z)return N(j);try{return N(j)}catch{return!1}},q=function(j){var D=j!==null&&typeof j=="object",B=G.call(j)==="[object Function]",R=Q(j),A=D&&G.call(j)==="[object String]",w=[];if(!D&&!B&&!R)throw new TypeError("Object.keys called on a non-object");var I=Z&&B;if(A&&j.length>0&&!J.call(j,0))for(var k=0;k<j.length;++k)w.push(String(k));if(R&&j.length>0)for(var p=0;p<j.length;++p)w.push(String(p));else for(var x in j)!(I&&x==="prototype")&&J.call(j,x)&&w.push(String(x));if(X)for(var G0=L(j),e=0;e<U.length;++e)!(G0&&U[e]==="constructor")&&J.call(j,U[e])&&w.push(U[e]);return w});var J,G,Q,O,X,Z,U,N,V,z,L;Y.exports=q}),rA=C0(($,Y)=>{var q=Array.prototype.slice,J=AN(),G=Object.keys,Q=G?function(X){return G(X)}:sA(),O=Object.keys;Q.shim=function(){if(Object.keys){var X=function(){var Z=Object.keys(arguments);return Z&&Z.length===arguments.length}(1,2);X||(Object.keys=function(Z){return J(Z)?O(q.call(Z)):O(Z)})}else Object.keys=Q;return Object.keys||Q},Y.exports=Q}),tA=C0(($,Y)=>{var q=k7(),J=q("%Object.defineProperty%",!0),G=function(){if(J)try{return J({},"a",{value:1}),!0}catch{return!1}return!1};G.hasArrayLengthDefineBug=function(){if(!G())return null;try{return J([],"length",{value:1}).length!==1}catch{return!0}},Y.exports=G}),x7=C0(($,Y)=>{var q=rA(),J=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",G=Object.prototype.toString,Q=Array.prototype.concat,O=Object.defineProperty,X=function(z){return typeof z=="function"&&G.call(z)==="[object Function]"},Z=tA()(),U=O&&Z,N=function(z,L,j,D){if(L in z){if(D===!0){if(z[L]===j)return}else if(!X(D)||!D())return}U?O(z,L,{configurable:!0,enumerable:!1,value:j,writable:!0}):z[L]=j},V=function(z,L){var j=arguments.length>2?arguments[2]:{},D=q(L);J&&(D=Q.call(D,Object.getOwnPropertySymbols(L)));for(var B=0;B<D.length;B+=1)N(z,D[B],L[D[B]],j[D[B]])};V.supportsDescriptors=!!U,Y.exports=V}),EN=C0(($,Y)=>{var q=function(J){return J!==J};Y.exports=function(J,G){return J===0&&G===0?1/J===1/G:!!(J===G||q(J)&&q(G))}}),HN=C0(($,Y)=>{var q=EN();Y.exports=function(){return typeof Object.is=="function"?Object.is:q}}),eA=C0(($,Y)=>{var q=HN(),J=x7();Y.exports=function(){var G=q();return J(Object,{is:G},{is:function(){return Object.is!==G}}),G}}),FN=C0(($,Y)=>{var q=x7(),J=AY(),G=EN(),Q=HN(),O=eA(),X=J(Q(),Object);q(X,{getPolyfill:Q,implementation:G,shim:O}),Y.exports=X}),PN=C0(($,Y)=>{Y.exports=function(q){return q!==q}}),BN=C0(($,Y)=>{var q=PN();Y.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:q}}),$E=C0(($,Y)=>{var q=x7(),J=BN();Y.exports=function(){var G=J();return q(Number,{isNaN:G},{isNaN:function(){return Number.isNaN!==G}}),G}}),YE=C0(($,Y)=>{var q=AY(),J=x7(),G=PN(),Q=BN(),O=$E(),X=q(Q(),Number);J(X,{getPolyfill:Q,implementation:G,shim:O}),Y.exports=X}),qE=C0(($,Y)=>{function q(K,C){return Q(K)||G(K,C)||J()}function J(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function G(K,C){var F=[],_=!0,S=!1,d=void 0;try{for(var n=K[Symbol.iterator](),J0;!(_=(J0=n.next()).done)&&(F.push(J0.value),!(C&&F.length===C));_=!0);}catch(s){S=!0,d=s}finally{try{!_&&n.return!=null&&n.return()}finally{if(S)throw d}}return F}function Q(K){if(Array.isArray(K))return K}function O(K){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?O=function(C){return typeof C}:O=function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},O(K)}var X=/a/g.flags!==void 0,Z=function(K){var C=[];return K.forEach(function(F){return C.push(F)}),C},U=function(K){var C=[];return K.forEach(function(F,_){return C.push([_,F])}),C},N=Object.is?Object.is:FN(),V=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},z=Number.isNaN?Number.isNaN:YE();function L(K){return K.call.bind(K)}var j=L(Object.prototype.hasOwnProperty),D=L(Object.prototype.propertyIsEnumerable),B=L(Object.prototype.toString),R=(G6(),J6(w9)).types,A=R.isAnyArrayBuffer,w=R.isArrayBufferView,I=R.isDate,k=R.isMap,p=R.isRegExp,x=R.isSet,G0=R.isNativeError,e=R.isBoxedPrimitive,$0=R.isNumberObject,U0=R.isStringObject,W0=R.isBooleanObject,N0=R.isBigIntObject,Q0=R.isSymbolObject,g=R.isFloat32Array,a=R.isFloat64Array;function l(K){if(K.length===0||K.length>10)return!0;for(var C=0;C<K.length;C++){var F=K.charCodeAt(C);if(F<48||F>57)return!0}return K.length===10&&K>=Math.pow(2,32)}function f(K){return Object.keys(K).filter(l).concat(V(K).filter(Object.prototype.propertyIsEnumerable.bind(K)))}function h(K,C){if(K===C)return 0;for(var F=K.length,_=C.length,S=0,d=Math.min(F,_);S<d;++S)if(K[S]!==C[S]){F=K[S],_=C[S];break}return F<_?-1:_<F?1:0}var o=void 0,q0=!0,P=!1,E=0,H=1,v=2,b=3;function u(K,C){return X?K.source===C.source&&K.flags===C.flags:RegExp.prototype.toString.call(K)===RegExp.prototype.toString.call(C)}function m(K,C){if(K.byteLength!==C.byteLength)return!1;for(var F=0;F<K.byteLength;F++)if(K[F]!==C[F])return!1;return!0}function i(K,C){return K.byteLength!==C.byteLength?!1:h(new Uint8Array(K.buffer,K.byteOffset,K.byteLength),new Uint8Array(C.buffer,C.byteOffset,C.byteLength))===0}function O0(K,C){return K.byteLength===C.byteLength&&h(new Uint8Array(K),new Uint8Array(C))===0}function P0(K,C){return $0(K)?$0(C)&&N(Number.prototype.valueOf.call(K),Number.prototype.valueOf.call(C)):U0(K)?U0(C)&&String.prototype.valueOf.call(K)===String.prototype.valueOf.call(C):W0(K)?W0(C)&&Boolean.prototype.valueOf.call(K)===Boolean.prototype.valueOf.call(C):N0(K)?N0(C)&&BigInt.prototype.valueOf.call(K)===BigInt.prototype.valueOf.call(C):Q0(C)&&Symbol.prototype.valueOf.call(K)===Symbol.prototype.valueOf.call(C)}function V0(K,C,F,_){if(K===C)return K!==0?!0:F?N(K,C):!0;if(F){if(O(K)!=="object")return typeof K=="number"&&z(K)&&z(C);if(O(C)!=="object"||K===null||C===null||Object.getPrototypeOf(K)!==Object.getPrototypeOf(C))return!1}else{if(K===null||O(K)!=="object")return C===null||O(C)!=="object"?K==C:!1;if(C===null||O(C)!=="object")return!1}var S=B(K),d=B(C);if(S!==d)return!1;if(Array.isArray(K)){if(K.length!==C.length)return!1;var n=f(K,o),J0=f(C,o);return n.length!==J0.length?!1:g0(K,C,F,_,H,n)}if(S==="[object Object]"&&(!k(K)&&k(C)||!x(K)&&x(C)))return!1;if(I(K)){if(!I(C)||Date.prototype.getTime.call(K)!==Date.prototype.getTime.call(C))return!1}else if(p(K)){if(!p(C)||!u(K,C))return!1}else if(G0(K)||K instanceof Error){if(K.message!==C.message||K.name!==C.name)return!1}else if(w(K)){if(!F&&(g(K)||a(K))){if(!m(K,C))return!1}else if(!i(K,C))return!1;var s=f(K,o),j0=f(C,o);return s.length!==j0.length?!1:g0(K,C,F,_,E,s)}else{if(x(K))return!x(C)||K.size!==C.size?!1:g0(K,C,F,_,v);if(k(K))return!k(C)||K.size!==C.size?!1:g0(K,C,F,_,b);if(A(K)){if(!O0(K,C))return!1}else if(e(K)&&!P0(K,C))return!1}return g0(K,C,F,_,E)}function i0(K,C){return C.filter(function(F){return D(K,F)})}function g0(K,C,F,_,S,d){if(arguments.length===5){d=Object.keys(K);var n=Object.keys(C);if(d.length!==n.length)return!1}for(var J0=0;J0<d.length;J0++)if(!j(C,d[J0]))return!1;if(F&&arguments.length===5){var s=V(K);if(s.length!==0){var j0=0;for(J0=0;J0<s.length;J0++){var _0=s[J0];if(D(K,_0)){if(!D(C,_0))return!1;d.push(_0),j0++}else if(D(C,_0))return!1}var h0=V(C);if(s.length!==h0.length&&i0(C,h0).length!==j0)return!1}else{var i1=V(C);if(i1.length!==0&&i0(C,i1).length!==0)return!1}}if(d.length===0&&(S===E||S===H&&K.length===0||K.size===0))return!0;if(_===void 0)_={val1:new Map,val2:new Map,position:0};else{var z8=_.val1.get(K);if(z8!==void 0){var c9=_.val2.get(C);if(c9!==void 0)return z8===c9}_.position++}_.val1.set(K,_.position),_.val2.set(C,_.position);var Oj=M(K,C,F,d,_,S);return _.val1.delete(K),_.val2.delete(C),Oj}function $1(K,C,F,_){for(var S=Z(K),d=0;d<S.length;d++){var n=S[d];if(V0(C,n,F,_))return K.delete(n),!0}return!1}function b0(K){switch(O(K)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":K=+K;case"number":if(z(K))return!1}return!0}function j8(K,C,F){var _=b0(F);return _??(C.has(_)&&!K.has(_))}function K8(K,C,F,_,S){var d=b0(F);if(d!=null)return d;var n=C.get(d);return n===void 0&&!C.has(d)||!V0(_,n,!1,S)?!1:!K.has(d)&&V0(_,n,!1,S)}function c(K,C,F,_){for(var S=null,d=Z(K),n=0;n<d.length;n++){var J0=d[n];if(O(J0)==="object"&&J0!==null)S===null&&(S=new Set),S.add(J0);else if(!C.has(J0)){if(F||!j8(K,C,J0))return!1;S===null&&(S=new Set),S.add(J0)}}if(S!==null){for(var s=Z(C),j0=0;j0<s.length;j0++){var _0=s[j0];if(O(_0)==="object"&&_0!==null){if(!$1(S,_0,F,_))return!1}else if(!F&&!K.has(_0)&&!$1(S,_0,F,_))return!1}return S.size===0}return!0}function M0(K,C,F,_,S,d){for(var n=Z(K),J0=0;J0<n.length;J0++){var s=n[J0];if(V0(F,s,S,d)&&V0(_,C.get(s),S,d))return K.delete(s),!0}return!1}function G1(K,C,F,_){for(var S=null,d=U(K),n=0;n<d.length;n++){var J0=q(d[n],2),s=J0[0],j0=J0[1];if(O(s)==="object"&&s!==null)S===null&&(S=new Set),S.add(s);else{var _0=C.get(s);if(_0===void 0&&!C.has(s)||!V0(j0,_0,F,_)){if(F||!K8(K,C,s,j0,_))return!1;S===null&&(S=new Set),S.add(s)}}}if(S!==null){for(var h0=U(C),i1=0;i1<h0.length;i1++){var z8=q(h0[i1],2),s=z8[0],c9=z8[1];if(O(s)==="object"&&s!==null){if(!M0(S,K,s,c9,F,_))return!1}else if(!F&&(!K.has(s)||!V0(K.get(s),c9,!1,_))&&!M0(S,K,s,c9,!1,_))return!1}return S.size===0}return!0}function M(K,C,F,_,S,d){var n=0;if(d===v){if(!c(K,C,F,S))return!1}else if(d===b){if(!G1(K,C,F,S))return!1}else if(d===H)for(;n<K.length;n++)if(j(K,n)){if(!j(C,n)||!V0(K[n],C[n],F,S))return!1}else{if(j(C,n))return!1;for(var J0=Object.keys(K);n<J0.length;n++){var s=J0[n];if(!j(C,s)||!V0(K[s],C[s],F,S))return!1}return J0.length===Object.keys(C).length}for(n=0;n<_.length;n++){var j0=_[n];if(!V0(K[j0],C[j0],F,S))return!1}return!0}function W(K,C){return V0(K,C,P)}function T(K,C){return V0(K,C,q0)}Y.exports={isDeepEqual:W,isDeepStrictEqual:T}}),DY=C0(($,Y)=>{function q(E){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?q=function(H){return typeof H}:q=function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},q(E)}function J(E,H){if(!(E instanceof H))throw new TypeError("Cannot call a class as a function")}var G=RN(),Q=G.codes,O=Q.ERR_AMBIGUOUS_ARGUMENT,X=Q.ERR_INVALID_ARG_TYPE,Z=Q.ERR_INVALID_ARG_VALUE,U=Q.ERR_INVALID_RETURN_VALUE,N=Q.ERR_MISSING_ARGS,V=aA(),z=(G6(),J6(w9)),L=z.inspect,j=(G6(),J6(w9)).types,D=j.isPromise,B=j.isRegExp,R=Object.assign?Object.assign:iA().assign,A=Object.is?Object.is:FN(),w,I;function k(){var E=qE();w=E.isDeepEqual,I=E.isDeepStrictEqual}var p=!1,x=Y.exports=W0,G0={};function e(E){throw E.message instanceof Error?E.message:new V(E)}function $0(E,H,v,b,u){var m=arguments.length,i;if(m===0)i="Failed";else if(m===1)v=E,E=void 0;else{if(p===!1){p=!0;var O0=process.emitWarning?process.emitWarning:console.warn.bind(console);O0("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}m===2&&(b="!=")}if(v instanceof Error)throw v;var P0={actual:E,expected:H,operator:b===void 0?"fail":b,stackStartFn:u||$0};v!==void 0&&(P0.message=v);var V0=new V(P0);throw i&&(V0.message=i,V0.generatedMessage=!0),V0}x.fail=$0,x.AssertionError=V;function U0(E,H,v,b){if(!v){var u=!1;if(H===0)u=!0,b="No value argument passed to `assert.ok()`";else if(b instanceof Error)throw b;var m=new V({actual:v,expected:!0,message:b,operator:"==",stackStartFn:E});throw m.generatedMessage=u,m}}function W0(){for(var E=arguments.length,H=new Array(E),v=0;v<E;v++)H[v]=arguments[v];U0.apply(void 0,[W0,H.length].concat(H))}x.ok=W0,x.equal=function E(H,v,b){if(arguments.length<2)throw new N("actual","expected");H!=v&&e({actual:H,expected:v,message:b,operator:"==",stackStartFn:E})},x.notEqual=function E(H,v,b){if(arguments.length<2)throw new N("actual","expected");H==v&&e({actual:H,expected:v,message:b,operator:"!=",stackStartFn:E})},x.deepEqual=function E(H,v,b){if(arguments.length<2)throw new N("actual","expected");w===void 0&&k(),w(H,v)||e({actual:H,expected:v,message:b,operator:"deepEqual",stackStartFn:E})},x.notDeepEqual=function E(H,v,b){if(arguments.length<2)throw new N("actual","expected");w===void 0&&k(),w(H,v)&&e({actual:H,expected:v,message:b,operator:"notDeepEqual",stackStartFn:E})},x.deepStrictEqual=function E(H,v,b){if(arguments.length<2)throw new N("actual","expected");w===void 0&&k(),I(H,v)||e({actual:H,expected:v,message:b,operator:"deepStrictEqual",stackStartFn:E})},x.notDeepStrictEqual=N0;function N0(E,H,v){if(arguments.length<2)throw new N("actual","expected");w===void 0&&k(),I(E,H)&&e({actual:E,expected:H,message:v,operator:"notDeepStrictEqual",stackStartFn:N0})}x.strictEqual=function E(H,v,b){if(arguments.length<2)throw new N("actual","expected");A(H,v)||e({actual:H,expected:v,message:b,operator:"strictEqual",stackStartFn:E})},x.notStrictEqual=function E(H,v,b){if(arguments.length<2)throw new N("actual","expected");A(H,v)&&e({actual:H,expected:v,message:b,operator:"notStrictEqual",stackStartFn:E})};var Q0=function E(H,v,b){var u=this;J(this,E),v.forEach(function(m){m in H&&(b!==void 0&&typeof b[m]=="string"&&B(H[m])&&H[m].test(b[m])?u[m]=b[m]:u[m]=H[m])})};function g(E,H,v,b,u,m){if(!(v in E)||!I(E[v],H[v])){if(!b){var i=new Q0(E,u),O0=new Q0(H,u,E),P0=new V({actual:i,expected:O0,operator:"deepStrictEqual",stackStartFn:m});throw P0.actual=E,P0.expected=H,P0.operator=m.name,P0}e({actual:E,expected:H,message:b,operator:m.name,stackStartFn:m})}}function a(E,H,v,b){if(typeof H!="function"){if(B(H))return H.test(E);if(arguments.length===2)throw new X("expected",["Function","RegExp"],H);if(q(E)!=="object"||E===null){var u=new V({actual:E,expected:H,message:v,operator:"deepStrictEqual",stackStartFn:b});throw u.operator=b.name,u}var m=Object.keys(H);if(H instanceof Error)m.push("name","message");else if(m.length===0)throw new Z("error",H,"may not be an empty object");return w===void 0&&k(),m.forEach(function(i){typeof E[i]=="string"&&B(H[i])&&H[i].test(E[i])||g(E,H,i,v,m,b)}),!0}return H.prototype!==void 0&&E instanceof H?!0:Error.isPrototypeOf(H)?!1:H.call({},E)===!0}function l(E){if(typeof E!="function")throw new X("fn","Function",E);try{E()}catch(H){return H}return G0}function f(E){return D(E)||E!==null&&q(E)==="object"&&typeof E.then=="function"&&typeof E.catch=="function"}function h(E){return Promise.resolve().then(function(){var H;if(typeof E=="function"){if(H=E(),!f(H))throw new U("instance of Promise","promiseFn",H)}else if(f(E))H=E;else throw new X("promiseFn",["Function","Promise"],E);return Promise.resolve().then(function(){return H}).then(function(){return G0}).catch(function(v){return v})})}function o(E,H,v,b){if(typeof v=="string"){if(arguments.length===4)throw new X("error",["Object","Error","Function","RegExp"],v);if(q(H)==="object"&&H!==null){if(H.message===v)throw new O("error/message",'The error message "'.concat(H.message,'" is identical to the message.'))}else if(H===v)throw new O("error/message",'The error "'.concat(H,'" is identical to the message.'));b=v,v=void 0}else if(v!=null&&q(v)!=="object"&&typeof v!="function")throw new X("error",["Object","Error","Function","RegExp"],v);if(H===G0){var u="";v&&v.name&&(u+=" (".concat(v.name,")")),u+=b?": ".concat(b):".";var m=E.name==="rejects"?"rejection":"exception";e({actual:void 0,expected:v,operator:E.name,message:"Missing expected ".concat(m).concat(u),stackStartFn:E})}if(v&&!a(H,v,b,E))throw H}function q0(E,H,v,b){if(H!==G0){if(typeof v=="string"&&(b=v,v=void 0),!v||a(H,v)){var u=b?": ".concat(b):".",m=E.name==="doesNotReject"?"rejection":"exception";e({actual:H,expected:v,operator:E.name,message:"Got unwanted ".concat(m).concat(u,`
`)+'Actual message: "'.concat(H&&H.message,'"'),stackStartFn:E})}throw H}}x.throws=function E(H){for(var v=arguments.length,b=new Array(v>1?v-1:0),u=1;u<v;u++)b[u-1]=arguments[u];o.apply(void 0,[E,l(H)].concat(b))},x.rejects=function E(H){for(var v=arguments.length,b=new Array(v>1?v-1:0),u=1;u<v;u++)b[u-1]=arguments[u];return h(H).then(function(m){return o.apply(void 0,[E,m].concat(b))})},x.doesNotThrow=function E(H){for(var v=arguments.length,b=new Array(v>1?v-1:0),u=1;u<v;u++)b[u-1]=arguments[u];q0.apply(void 0,[E,l(H)].concat(b))},x.doesNotReject=function E(H){for(var v=arguments.length,b=new Array(v>1?v-1:0),u=1;u<v;u++)b[u-1]=arguments[u];return h(H).then(function(m){return q0.apply(void 0,[E,m].concat(b))})},x.ifError=function E(H){if(H!=null){var v="ifError got unwanted exception: ";q(H)==="object"&&typeof H.message=="string"?H.message.length===0&&H.constructor?v+=H.constructor.name:v+=H.message:v+=L(H);var b=new V({actual:H,expected:null,operator:"ifError",message:v,stackStartFn:E}),u=H.stack;if(typeof u=="string"){var m=u.split(`
`);m.shift();for(var i=b.stack.split(`
`),O0=0;O0<m.length;O0++){var P0=i.indexOf(m[O0]);if(P0!==-1){i=i.slice(0,P0);break}}b.stack="".concat(i.join(`
`),`
`).concat(m.join(`
`))}throw b}};function P(){for(var E=arguments.length,H=new Array(E),v=0;v<E;v++)H[v]=arguments[v];U0.apply(void 0,[P,H.length].concat(H))}x.strict=R(P,x,{equal:x.strictEqual,deepEqual:x.deepStrictEqual,notEqual:x.notStrictEqual,notDeepEqual:x.notDeepStrictEqual}),x.strict.strict=x.strict}),JE={};VN(JE,jN(DY()));/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */});var TN=y(()=>{var wN=f7(),N1=WY();N1.fromByteArrayUnsigned=function($){if($[0]&128)return new N1([0].concat($));return new N1($)};N1.prototype.toByteArrayUnsigned=function(){var $=this.toByteArray();return $[0]===0?$.slice(1):$};N1.fromDERInteger=function($){return new N1($)};N1.prototype.toDERInteger=N1.prototype.toByteArray;N1.fromBuffer=function($){if($[0]&128){var Y=Array.prototype.slice.call($);return new N1([0].concat(Y))}return new N1($)};N1.fromHex=function($){if($==="")return N1.ZERO;return wN.equal($,$.match(/^[A-Fa-f0-9]+/),"Invalid hex string"),wN.equal($.length%2,0,"Incomplete hex"),new N1($,16)};N1.prototype.toBuffer=function($){var Y=this.toByteArrayUnsigned(),q=[],J=$-Y.length;while(q.length<J)q.push(0);return new Buffer(q.concat(Y))};N1.prototype.toHex=function($){return this.toBuffer($).toString("hex")}});var U8=y((Bw,IN)=>{var GE=WY();TN();IN.exports=GE});var W5=y((ww,_N)=>{var vN=XZ(),HY=T0(),Q6=p0(),m7=U8();function q1($,Y){HY(Q6.tuple(Q6.BigInt,Q6.BigInt),arguments),this.r=$,this.s=Y}q1.ECDSA=0;q1.SCHNORR=1;q1.parseCompact=function($){HY(Q6.BufferN(65),$);var Y=$.readUInt8(0)-27;if(Y!==(Y&7))throw new Error("Invalid signature parameter");var q=!!(Y&4),J=Y&3,G=q1.fromRSBuffer($.slice(1));return{compressed:q,i:J,signature:G}};q1.fromRSBuffer=function($){HY(Q6.BufferN(64),$);var Y=m7.fromBuffer($.slice(0,32)),q=m7.fromBuffer($.slice(32,64));return new q1(Y,q)};q1.fromDER=function($){var Y=vN.decode($),q=m7.fromDERInteger(Y.r),J=m7.fromDERInteger(Y.s);return new q1(q,J)};q1.parseScriptSignature=function($){var Y=$.readUInt8($.length-1),q=Y&-193;if(q<=0||q>=4)throw new Error("Invalid hashType "+Y);return{signature:q1.fromDER($.slice(0,-1)),hashType:Y}};q1.prototype.toCompact=function($,Y){if(Y)$+=4;$+=27;var q=Buffer.alloc(65);return q.writeUInt8($,0),this.toRSBuffer(q,1),q};q1.prototype.toDER=function(){var $=Buffer.from(this.r.toDERInteger()),Y=Buffer.from(this.s.toDERInteger());return vN.encode($,Y)};q1.prototype.toRSBuffer=function($,Y){if(!Y)Y=0;return $=$||Buffer.alloc(64),this.r.toBuffer(32).copy($,Y),this.s.toBuffer(32).copy($,Y+32),$};q1.prototype.toScriptSignature=function($,Y){if(!Y)Y=q1.ECDSA;var q=$&-193;if(q<=0||q>=4)throw new Error("Invalid hashType "+$);var J=Buffer.alloc(1);if(J.writeUInt8($,0),Y===q1.ECDSA)return Buffer.concat([this.toDER(),J]);else if(Y===q1.SCHNORR)return Buffer.concat([this.toRSBuffer(),J]);else throw new Error("Invalid signature Algorithm")};_N.exports=q1});var PY=y((Tw,SN)=>{var g7=f7(),FY=F1().Buffer,b7=U8(),d7=b7.valueOf(3);function t0($,Y,q,J){g7.notStrictEqual(J,void 0,"Missing Z coordinate"),this.curve=$,this.x=Y,this.y=q,this.z=J,this._zInv=null,this.compressed=!0}Object.defineProperty(t0.prototype,"zInv",{get:function(){if(this._zInv===null)this._zInv=this.z.modInverse(this.curve.p);return this._zInv}});Object.defineProperty(t0.prototype,"affineX",{get:function(){return this.x.multiply(this.zInv).mod(this.curve.p)}});Object.defineProperty(t0.prototype,"affineY",{get:function(){return this.y.multiply(this.zInv).mod(this.curve.p)}});t0.fromAffine=function($,Y,q){return new t0($,Y,q,b7.ONE)};t0.prototype.equals=function($){if($===this)return!0;if(this.curve.isInfinity(this))return this.curve.isInfinity($);if(this.curve.isInfinity($))return this.curve.isInfinity(this);var Y=$.y.multiply(this.z).subtract(this.y.multiply($.z)).mod(this.curve.p);if(Y.signum()!==0)return!1;var q=$.x.multiply(this.z).subtract(this.x.multiply($.z)).mod(this.curve.p);return q.signum()===0};t0.prototype.negate=function(){var $=this.curve.p.subtract(this.y);return new t0(this.curve,this.x,$,this.z)};t0.prototype.add=function($){if(this.curve.isInfinity(this))return $;if(this.curve.isInfinity($))return this;var Y=this.x,q=this.y,J=$.x,G=$.y,Q=G.multiply(this.z).subtract(q.multiply($.z)).mod(this.curve.p),O=J.multiply(this.z).subtract(Y.multiply($.z)).mod(this.curve.p);if(O.signum()===0){if(Q.signum()===0)return this.twice();return this.curve.infinity}var X=O.square(),Z=X.multiply(O),U=Y.multiply(X),N=Q.square().multiply(this.z),V=N.subtract(U.shiftLeft(1)).multiply($.z).subtract(Z).multiply(O).mod(this.curve.p),z=U.multiply(d7).multiply(Q).subtract(q.multiply(Z)).subtract(N.multiply(Q)).multiply($.z).add(Q.multiply(Z)).mod(this.curve.p),L=Z.multiply(this.z).multiply($.z).mod(this.curve.p);return new t0(this.curve,V,z,L)};t0.prototype.twice=function(){if(this.curve.isInfinity(this))return this;if(this.y.signum()===0)return this.curve.infinity;var $=this.x,Y=this.y,q=Y.multiply(this.z).mod(this.curve.p),J=q.multiply(Y).mod(this.curve.p),G=this.curve.a,Q=$.square().multiply(d7);if(G.signum()!==0)Q=Q.add(this.z.square().multiply(G));Q=Q.mod(this.curve.p);var O=Q.square().subtract($.shiftLeft(3).multiply(J)).shiftLeft(1).multiply(q).mod(this.curve.p),X=Q.multiply(d7).multiply($).subtract(J.shiftLeft(1)).shiftLeft(2).multiply(J).subtract(Q.pow(3)).mod(this.curve.p),Z=q.pow(3).shiftLeft(3).mod(this.curve.p);return new t0(this.curve,O,X,Z)};t0.prototype.multiply=function($){if(this.curve.isInfinity(this))return this;if($.signum()===0)return this.curve.infinity;var Y=$,q=Y.multiply(d7),J=this.negate(),G=this;for(var Q=q.bitLength()-2;Q>0;--Q){var O=q.testBit(Q),X=Y.testBit(Q);if(G=G.twice(),O!==X)G=G.add(O?this:J)}return G};t0.prototype.multiplyTwo=function($,Y,q){var J=Math.max($.bitLength(),q.bitLength())-1,G=this.curve.infinity,Q=this.add(Y);while(J>=0){var O=$.testBit(J),X=q.testBit(J);if(G=G.twice(),O)if(X)G=G.add(Q);else G=G.add(this);else if(X)G=G.add(Y);--J}return G};t0.prototype.getEncoded=function($){if($==null)$=this.compressed;if(this.curve.isInfinity(this))return FY.alloc(1,0);var Y=this.affineX,q=this.affineY,J=this.curve.pLength,G;if($)G=FY.allocUnsafe(1+J),G.writeUInt8(q.isEven()?2:3,0);else G=FY.allocUnsafe(1+J+J),G.writeUInt8(4,0),q.toBuffer(J).copy(G,1+J);return Y.toBuffer(J).copy(G,1),G};t0.decodeFrom=function($,Y){var q=Y.readUInt8(0),J=q!==4,G=Math.floor(($.p.bitLength()+7)/8),Q=b7.fromBuffer(Y.slice(1,1+G)),O;if(J){g7.equal(Y.length,G+1,"Invalid sequence length"),g7(q===2||q===3,"Invalid sequence tag");var X=q===3;O=$.pointFromX(X,Q)}else{g7.equal(Y.length,1+G+G,"Invalid sequence length");var Z=b7.fromBuffer(Y.slice(1+G));O=t0.fromAffine($,Q,Z)}return O.compressed=J,O};t0.prototype.toString=function(){if(this.curve.isInfinity(this))return"(INFINITY)";return"("+this.affineX.toString()+","+this.affineY.toString()+")"};SN.exports=t0});var TY=y((Iw,xN)=>{var BY=f7(),kN=U8(),wY=PY();function O6($,Y,q,J,G,Q,O){this.p=$,this.a=Y,this.b=q,this.G=wY.fromAffine(this,J,G),this.n=Q,this.h=O,this.infinity=new wY(this,null,null,kN.ZERO),this.pOverFour=$.add(kN.ONE).shiftRight(2),this.pLength=Math.floor((this.p.bitLength()+7)/8)}O6.prototype.pointFromX=function($,Y){var q=Y.pow(3).add(this.a.multiply(Y)).add(this.b).mod(this.p),J=q.modPow(this.pOverFour,this.p),G=J;if(J.isEven()^!$)G=this.p.subtract(G);return wY.fromAffine(this,Y,G)};O6.prototype.isInfinity=function($){if($===this.infinity)return!0;return $.z.signum()===0&&$.y.signum()!==0};O6.prototype.isOnCurve=function($){if(this.isInfinity($))return!0;var{affineX:Y,affineY:q}=$,J=this.a,G=this.b,Q=this.p;if(Y.signum()<0||Y.compareTo(Q)>=0)return!1;if(q.signum()<0||q.compareTo(Q)>=0)return!1;var O=q.square().mod(Q),X=Y.pow(3).add(J.multiply(Y)).add(G).mod(Q);return O.equals(X)};O6.prototype.validate=function($){BY(!this.isInfinity($),"Point is at infinity"),BY(this.isOnCurve($),"Point is not on the curve");var Y=$.multiply(this.n);return BY(this.isInfinity(Y),"Point is not a scalar multiple of G"),!0};xN.exports=O6});var fN=y((vw,QE)=>{QE.exports={secp128r1:{p:"fffffffdffffffffffffffffffffffff",a:"fffffffdfffffffffffffffffffffffc",b:"e87579c11079f43dd824993c2cee5ed3",n:"fffffffe0000000075a30d1b9038a115",h:"01",Gx:"161ff7528b899b2d0c28607ca52c5b86",Gy:"cf5ac8395bafeb13c02da292dded7a83"},secp160k1:{p:"fffffffffffffffffffffffffffffffeffffac73",a:"00",b:"07",n:"0100000000000000000001b8fa16dfab9aca16b6b3",h:"01",Gx:"3b4c382ce37aa192a4019e763036f4f5dd4d7ebb",Gy:"938cf935318fdced6bc28286531733c3f03c4fee"},secp160r1:{p:"ffffffffffffffffffffffffffffffff7fffffff",a:"ffffffffffffffffffffffffffffffff7ffffffc",b:"1c97befc54bd7a8b65acf89f81d4d4adc565fa45",n:"0100000000000000000001f4c8f927aed3ca752257",h:"01",Gx:"4a96b5688ef573284664698968c38bb913cbfc82",Gy:"23a628553168947d59dcc912042351377ac5fb32"},secp192k1:{p:"fffffffffffffffffffffffffffffffffffffffeffffee37",a:"00",b:"03",n:"fffffffffffffffffffffffe26f2fc170f69466a74defd8d",h:"01",Gx:"db4ff10ec057e9ae26b07d0280b7f4341da5d1b1eae06c7d",Gy:"9b2f2f6d9c5628a7844163d015be86344082aa88d95e2f9d"},secp192r1:{p:"fffffffffffffffffffffffffffffffeffffffffffffffff",a:"fffffffffffffffffffffffffffffffefffffffffffffffc",b:"64210519e59c80e70fa7e9ab72243049feb8deecc146b9b1",n:"ffffffffffffffffffffffff99def836146bc9b1b4d22831",h:"01",Gx:"188da80eb03090f67cbf20eb43a18800f4ff0afd82ff1012",Gy:"07192b95ffc8da78631011ed6b24cdd573f977a11e794811"},secp256k1:{p:"fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f",a:"00",b:"07",n:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",h:"01",Gx:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",Gy:"483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"},secp256r1:{p:"ffffffff00000001000000000000000000000000ffffffffffffffffffffffff",a:"ffffffff00000001000000000000000000000000fffffffffffffffffffffffc",b:"5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b",n:"ffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551",h:"01",Gx:"6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296",Gy:"4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"}}});var gN=y((_w,mN)=>{var T9=U8(),OE=fN(),XE=TY();function ZE($){var Y=OE[$];if(!Y)return null;var q=new T9(Y.p,16),J=new T9(Y.a,16),G=new T9(Y.b,16),Q=new T9(Y.n,16),O=new T9(Y.h,16),X=new T9(Y.Gx,16),Z=new T9(Y.Gy,16);return new XE(q,J,G,X,Z,Q,O)}mN.exports=ZE});var L5=y((Sw,bN)=>{var UE=PY(),NE=TY(),ME=gN();bN.exports={Curve:NE,Point:UE,getCurveByName:ME}});var vY=y((kw,hN)=>{var l7=F1().Buffer,s8=lN(),dN=U8(),IY=T0(),y7=p0(),VE=L5(),jE=VE.getCurveByName("secp256k1"),yN=l7.alloc(1,0),KE=l7.alloc(1,1);function zE($,Y,q,J){IY(y7.tuple(y7.Hash256bit,y7.Buffer256bit,y7.Function),arguments);var G=l7.alloc(32,0),Q=l7.alloc(32,1);if(G=s8("sha256",G).update(Q).update(yN).update(Y).update($),J)IY(IY.BufferN(16),J),G.update(J);G=G.digest(),Q=s8("sha256",G).update(Q).digest(),G=s8("sha256",G).update(Q).update(KE).update(Y).update($).digest(),Q=s8("sha256",G).update(Q).digest(),Q=s8("sha256",G).update(Q).digest();var O=dN.fromBuffer(Q);while(O.signum()<=0||O.compareTo(jE.n)>=0||!q(O))G=s8("sha256",G).update(Q).update(yN).digest(),Q=s8("sha256",G).update(Q).digest(),Q=s8("sha256",G).update(Q).digest(),O=dN.fromBuffer(Q);return O}hN.exports={deterministicGenerateK:zE}});var nN=y((xw,pN)=>{var cN=T0(),I9=p0(),uN=U8(),WE=W5(),LE=L5(),r8=LE.getCurveByName("secp256k1"),oN=vY().deterministicGenerateK,CE=r8.n.shiftRight(1);function DE($,Y){cN(I9.tuple(I9.Hash256bit,I9.BigInt),arguments);var q=Y.toBuffer(32),J=uN.fromBuffer($),G=r8.n,Q=r8.G,O,X;if(oN($,q,function(Z){var U=Q.multiply(Z);if(r8.isInfinity(U))return!1;if(O=U.affineX.mod(G),O.signum()===0)return!1;if(X=Z.modInverse(G).multiply(J.add(Y.multiply(O))).mod(G),X.signum()===0)return!1;return!0}),X.compareTo(CE)>0)X=G.subtract(X);return new WE(O,X)}function RE($,Y,q){cN(I9.tuple(I9.Hash256bit,I9.ECSignature,I9.ECPoint),arguments);var{n:J,G}=r8,Q=Y.r,O=Y.s;if(Q.signum()<=0||Q.compareTo(J)>=0)return!1;if(O.signum()<=0||O.compareTo(J)>=0)return!1;var X=uN.fromBuffer($),Z=O.modInverse(J),U=X.multiply(Z).mod(J),N=Q.multiply(Z).mod(J),V=G.multiplyTwo(U,q,N);if(r8.isInfinity(V))return!1;var z=V.affineX,L=z.mod(J);return L.equals(Q)}pN.exports={deterministicGenerateK:oN,sign:DE,verify:RE,__curve:r8}});var rN=y((fw,sN)=>{var h7=T0(),u1=p0(),v9=U8(),AE=W5(),_Y=n8(),EE=L5(),y1=EE.getCurveByName("secp256k1"),aN=vY().deterministicGenerateK,iN=!0;function HE($,Y){h7(u1.tuple(u1.BufferN(32),u1.BigInt),arguments);var{n:q,G:J}=y1;if(Y.compareTo(v9.ZERO)<=0||Y.compareTo(q)>=0)throw new Error("Private key x not in range");var G=J.multiply(Y),Q,O;function X(N){var V=J.multiply(N);if(SY(V.affineY,y1.p)!=1)N=q.subtract(N),V=J.multiply(N);Q=V.affineX.mod(q);var z=kY(G),L=Q.toBuffer(32),j=_Y.sha256(Buffer.concat([L,z,$])),D=v9.fromBuffer(j).mod(q);return O=N.add(D.multiply(Y)).mod(q),!0}if(iN)aN($,Y.toBuffer(32),X,Buffer.from("Schnorr+SHA256  ","ascii"));else{var Z=_Y.sha256(Buffer.concat([Y.toBuffer(32),$])),U=v9.fromBuffer(Z).mod(q);X(U)}return new AE(Q,O)}function FE(U,Y,q){h7(u1.tuple(u1.BufferN(32),u1.ECSignature,u1.ECPoint),arguments);var{n:J,G}=y1,Q=Y.r,O=Y.s;if(!y1.isOnCurve(q))return!1;if(y1.isInfinity(q))return!1;if(Q.compareTo(y1.p)>=0)return!1;if(O.compareTo(J)>=0)return!1;var X=kY(q),Z=Q.toBuffer(32),U=_Y.sha256(Buffer.concat([Z,X,U])),N=v9.fromBuffer(U).mod(J),V=G.multiply(O).add(q.multiply(J.subtract(N)));if(y1.isInfinity(V))return!1;if(V.affineX.compareTo(Q)!=0)return!1;if(SY(V.affineY,y1.p)!=1)return!1;return!0}function SY($,Y){return $.modPow(Y.subtract(v9.ONE).divide(v9.valueOf(2)),Y).intValue()}function kY($){return h7(u1.tuple(u1.ECPoint),arguments),Buffer.concat([Buffer.from([$.affineY.isEven()?2:3]),$.affineX.toBuffer(32)])}function PE($){if(h7(u1.tuple(u1.BufferN(33)),arguments),$.length!==33)throw new Error("Invalid length of buffer");if($[0]!==2&&$[0]!==3)throw new Error("Invalid signum byte");var Y=$[0]===3,q=v9.fromBuffer($.slice(1,33));return y1.pointFromX(Y,q)}sN.exports={deterministicGenerateK:aN,sign:HE,verify:FE,jacobi:SY,toCompressedPoint:kY,fromCompressedPoint:PE,__curve:y1,__useRFC6979:function($){iN=$}}});var u7=y((mw,JM)=>{var BE=w7(),wE=n8(),mY=nN(),TE=rN(),IE=tN(),fY=T0(),_9=p0(),$M=eN(),xY=W5(),YM=V5(),qM=U8(),vE=L5(),c7=mY.__curve;function R1($,Y,q){if(q)fY({compressed:_9.maybe(_9.Boolean),network:_9.maybe(_9.Network)},q);if(q=q||{},$){if($.signum()<=0)throw new Error("Private key must be greater than 0");if($.compareTo(c7.n)>=0)throw new Error("Private key must be less than the curve order");if(Y)throw new TypeError("Unexpected publicKey parameter");this.d=$}else fY(_9.ECPoint,Y),this.__Q=Y;this.compressed=q.compressed===void 0?!0:q.compressed,this.network=q.network||YM.bitcoin}Object.defineProperty(R1.prototype,"Q",{get:function(){if(!this.__Q&&this.d)this.__Q=c7.G.multiply(this.d);return this.__Q}});R1.fromPublicKeyBuffer=function($,Y){var q=vE.Point.decodeFrom(c7,$);return new R1(null,q,{compressed:q.compressed,network:Y})};R1.fromWIF=function($,Y){var q=$M.decode($),J=q.version;if(_9.Array(Y)){if(Y=Y.filter(function(Q){return J===Q.wif}).pop(),!Y)throw new Error("Unknown network version")}else if(Y=Y||YM.bitcoin,J!==Y.wif)throw new Error("Invalid network version");var G=qM.fromBuffer(q.privateKey);return new R1(G,null,{compressed:q.compressed,network:Y})};R1.makeRandom=function($){$=$||{};var Y=$.rng||IE,q;do{var J=Y(32);fY(_9.Buffer256bit,J),q=qM.fromBuffer(J)}while(q.signum()<=0||q.compareTo(c7.n)>=0);return new R1(q,null,$)};R1.prototype.getAddress=function(){return BE.toBase58Check(wE.hash160(this.getPublicKeyBuffer()),this.getNetwork().pubKeyHash)};R1.prototype.getNetwork=function(){return this.network};R1.prototype.getPublicKeyBuffer=function(){return this.Q.getEncoded(this.compressed)};R1.prototype.sign=function($,Y){if(!this.d)throw new Error("Missing private key");if(!Y)Y=xY.ECDSA;if(Y===xY.ECDSA)return mY.sign($,this.d);else if(Y===xY.SCHNORR)return TE.sign($,this.d)};R1.prototype.toWIF=function(){if(!this.d)throw new Error("Missing private key");return $M.encode(this.network.wif,this.d.toBuffer(32),this.compressed)};R1.prototype.verify=function($,Y){return mY.verify($,Y,this.Q)};JM.exports=R1});var ZM=y((gw,XM)=>{var o7=F1().Buffer,GM=tU(),_E=n8(),QM=lN(),p7=T0(),S9=p0(),SE=V5(),gY=U8(),D5=u7(),OM=L5(),C5=OM.getCurveByName("secp256k1");function v0($,Y){if(!$.compressed)throw new TypeError("BIP32 only allows compressed keyPairs");this.keyPair=$,this.chainCode=Y,this.depth=0,this.index=0,this.parentFingerprint=0}v0.HIGHEST_BIT=2147483648;v0.LENGTH=78;v0.MASTER_SECRET=o7.from("Bitcoin seed","utf8");v0.fromSeedBuffer=function($,Y){if(p7(S9.tuple(S9.Buffer,S9.maybe(S9.Network)),arguments),$.length<16)throw new TypeError("Seed should be at least 128 bits");if($.length>64)throw new TypeError("Seed should be at most 512 bits");var q=QM("sha512",v0.MASTER_SECRET).update($).digest(),J=q.slice(0,32),G=q.slice(32),Q=gY.fromBuffer(J),O=new D5(Q,null,{network:Y});return new v0(O,G)};v0.fromSeedHex=function($,Y){return v0.fromSeedBuffer(o7.from($,"hex"),Y)};v0.fromBase58=function($,Y){var q=GM.decode($);if(q.length!==78)throw new Error("Invalid buffer length");var J=q.readUInt32BE(0),G;if(Array.isArray(Y)){if(G=Y.filter(function(L){return J===L.bip32.private||J===L.bip32.public}).pop(),!G)throw new Error("Unknown network version")}else G=Y||SE.bitcoin;if(J!==G.bip32.private&&J!==G.bip32.public)throw new Error("Invalid network version");var Q=q[4],O=q.readUInt32BE(5);if(Q===0){if(O!==0)throw new Error("Invalid parent fingerprint")}var X=q.readUInt32BE(9);if(Q===0&&X!==0)throw new Error("Invalid index");var Z=q.slice(13,45),U;if(J===G.bip32.private){if(q.readUInt8(45)!==0)throw new Error("Invalid private key");var N=gY.fromBuffer(q.slice(46,78));U=new D5(N,null,{network:G})}else{var V=OM.Point.decodeFrom(C5,q.slice(45,78));C5.validate(V),U=new D5(null,V,{network:G})}var z=new v0(U,Z);return z.depth=Q,z.index=X,z.parentFingerprint=O,z};v0.prototype.getAddress=function(){return this.keyPair.getAddress()};v0.prototype.getIdentifier=function(){return _E.hash160(this.keyPair.getPublicKeyBuffer())};v0.prototype.getFingerprint=function(){return this.getIdentifier().slice(0,4)};v0.prototype.getNetwork=function(){return this.keyPair.getNetwork()};v0.prototype.getPublicKeyBuffer=function(){return this.keyPair.getPublicKeyBuffer()};v0.prototype.neutered=function(){var $=new D5(null,this.keyPair.Q,{network:this.keyPair.network}),Y=new v0($,this.chainCode);return Y.depth=this.depth,Y.index=this.index,Y.parentFingerprint=this.parentFingerprint,Y};v0.prototype.sign=function($){return this.keyPair.sign($)};v0.prototype.verify=function($,Y){return this.keyPair.verify($,Y)};v0.prototype.toBase58=function($){if($!==void 0)throw new TypeError("Unsupported argument in 2.0.0");var Y=this.keyPair.network,q=!this.isNeutered()?Y.bip32.private:Y.bip32.public,J=o7.allocUnsafe(78);if(J.writeUInt32BE(q,0),J.writeUInt8(this.depth,4),J.writeUInt32BE(this.parentFingerprint,5),J.writeUInt32BE(this.index,9),this.chainCode.copy(J,13),!this.isNeutered())J.writeUInt8(0,45),this.keyPair.d.toBuffer(32).copy(J,46);else this.keyPair.getPublicKeyBuffer().copy(J,45);return GM.encode(J)};v0.prototype.derive=function($){p7(S9.UInt32,$);var Y=$>=v0.HIGHEST_BIT,q=o7.allocUnsafe(37);if(Y){if(this.isNeutered())throw new TypeError("Could not derive hardened child key");q[0]=0,this.keyPair.d.toBuffer(32).copy(q,1),q.writeUInt32BE($,33)}else this.keyPair.getPublicKeyBuffer().copy(q,0),q.writeUInt32BE($,33);var J=QM("sha512",this.chainCode).update(q).digest(),G=J.slice(0,32),Q=J.slice(32),O=gY.fromBuffer(G);if(O.compareTo(C5.n)>=0)return this.derive($+1);var X;if(!this.isNeutered()){var Z=O.add(this.keyPair.d).mod(C5.n);if(Z.signum()===0)return this.derive($+1);X=new D5(Z,null,{network:this.keyPair.network})}else{var U=C5.G.multiply(O).add(this.keyPair.Q);if(C5.isInfinity(U))return this.derive($+1);X=new D5(null,U,{network:this.keyPair.network})}var N=new v0(X,Q);return N.depth=this.depth+1,N.index=$,N.parentFingerprint=this.getFingerprint().readUInt32BE(0),N};v0.prototype.deriveHardened=function($){return p7(S9.UInt31,$),this.derive($+v0.HIGHEST_BIT)};v0.prototype.isNeutered=function(){return!this.keyPair.d};v0.prototype.derivePath=function($){p7(S9.BIP32Path,$);var Y=$.split("/");if(Y[0]==="m"){if(this.parentFingerprint)throw new Error("Not a master node");Y=Y.slice(1)}return Y.reduce(function(q,J){var G;if(J.slice(-1)==="'")return G=parseInt(J.slice(0,-1),10),q.deriveHardened(G);else return G=parseInt(J,10),q.derive(G)},this)};XM.exports=v0});var WM=y((bw,zM)=>{var a7=F1().Buffer,kE=w7(),o1=n8(),t8=n0(),K0=R7(),xE=V5(),UM=U1(),dY=T0(),yY=p0(),S0=K0.types,MM=[K0.types.P2PKH,K0.types.P2PK,K0.types.MULTISIG],fE=MM.concat([K0.types.P2WPKH,K0.types.P2WSH]),mE=u7(),VM=W5(),e8=E7();function A5($){return MM.indexOf($)!==-1}function jM($){return fE.indexOf($)!==-1}function gE($,Y,q){var J=[],G=[];switch($){case S0.P2PKH:J=Y.slice(1),G=Y.slice(0,1);break;case S0.P2PK:J[0]=q?K0.pubKey.output.decode(q):void 0,G=Y.slice(0,1);break;case S0.MULTISIG:if(q){var Q=K0.multisig.output.decode(q);J=Q.pubKeys}G=Y.slice(1).map(function(O){return O.length===0?void 0:O});break}return{pubKeys:J,signatures:G}}function bE($,Y){if($.length===0&&Y.length===0)return{};var q,J,G,Q,O,X,Z,U,N=!1,V=!1,z=!1,L,j,D=t8.decompile($),B=K0.classifyInput(D,!0);if(B===S0.P2SH)z=!0,O=D[D.length-1],U=K0.classifyOutput(O),q=K0.scriptHash.output.encode(o1.hash160(O)),J=S0.P2SH,Q=O;var R=K0.classifyWitness(Y,!0);if(R===S0.P2WSH){if(X=Y[Y.length-1],Z=K0.classifyOutput(X),V=!0,N=!0,$.length===0){if(q=K0.witnessScriptHash.output.encode(o1.sha256(X)),J=S0.P2WSH,O!==void 0)throw new Error("Redeem script given when unnecessary")}else{if(!O)throw new Error("No redeemScript provided for P2WSH, but scriptSig non-empty");if(L=K0.witnessScriptHash.output.encode(o1.sha256(X)),!O.equals(L))throw new Error("Redeem script didn't match witnessScript")}if(!A5(K0.classifyOutput(X)))throw new Error("unsupported witness script");Q=X,G=Z,j=Y.slice(0,-1)}else if(R===S0.P2WPKH){N=!0;var A=Y[Y.length-1],w=o1.hash160(A);if($.length===0){if(q=K0.witnessPubKeyHash.output.encode(w),J=S0.P2WPKH,typeof O!=="undefined")throw new Error("Redeem script given when unnecessary")}else{if(!O)throw new Error("No redeemScript provided for P2WPKH, but scriptSig wasn't empty");if(L=K0.witnessPubKeyHash.output.encode(w),!O.equals(L))throw new Error("Redeem script did not have the right witness program")}G=S0.P2PKH,j=Y}else if(O){if(!jM(U))throw new Error("Bad redeemscript!");Q=O,G=U,j=D.slice(0,-1)}else J=G=K0.classifyInput($),j=D;var I=gE(G,j,Q),k={pubKeys:I.pubKeys,signatures:I.signatures,prevOutScript:q,prevOutType:J,signType:G,signScript:Q,witness:Boolean(N)};if(z)k.redeemScript=O,k.redeemScriptType=U;if(V)k.witnessScript=X,k.witnessScriptType=Z;return k}function dE($,Y,q,J,G){if($.redeemScriptType!==S0.MULTISIG||!$.redeemScript)return;if($.pubKeys.length===$.signatures.length)return;var Q=$.signatures.concat();$.signatures=$.pubKeys.map(function(O){var X=mE.fromPublicKeyBuffer(O),Z;return Q.some(function(U,N){if(!U)return!1;var V=VM.parseScriptSignature(U),z;if(G)z=Y.hashForCashSignature(q,$.signScript,J,V.hashType);else if($.witness)z=Y.hashForWitnessV0(q,$.signScript,J,V.hashType);else z=Y.hashForSignature(q,$.signScript,V.hashType);if(!X.verify(z,V.signature))return!1;return Q[N]=void 0,Z=U,!0}),Z})}function R5($,Y,q){dY(yY.Buffer,$);var J=t8.decompile($);if(!Y)Y=K0.classifyOutput($);var G=[];switch(Y){case S0.P2PKH:if(!q)break;var Q=J[2],O=o1.hash160(q);if(Q.equals(O))G=[q];break;case S0.P2WPKH:if(!q)break;var X=J[1],Z=o1.hash160(q);if(X.equals(Z))G=[q];break;case S0.P2PK:G=J.slice(0,1);break;case S0.MULTISIG:G=J.slice(1,-2);break;default:return{scriptType:Y}}return{pubKeys:G,scriptType:Y,signatures:G.map(function(){return})}}function NM($,Y){if($.prevOutType){if($.prevOutType!==S0.P2SH)throw new Error("PrevOutScript must be P2SH");var q=t8.decompile($.prevOutScript)[1];if(!q.equals(Y))throw new Error("Inconsistent hash160(RedeemScript)")}}function yE($,Y){if($.prevOutType){if($.prevOutType!==S0.P2WSH)throw new Error("PrevOutScript must be P2WSH");var q=t8.decompile($.prevOutScript)[1];if(!q.equals(Y))throw new Error("Inconsistent sha25(WitnessScript)")}}function lE($,Y,q,J,G){var Q,O,X,Z=!1,U,N,V=!1,z=!1,L,j,D,B;if(q&&G){if(N=o1.hash160(q),j=o1.sha256(G),NM($,N),!q.equals(K0.witnessScriptHash.output.encode(j)))throw new Error("Witness script inconsistent with redeem script");if(Q=R5(G,void 0,Y),!Q.pubKeys)throw new Error('WitnessScript not supported "'+t8.toASM(q)+'"');O=K0.types.P2SH,X=K0.scriptHash.output.encode(N),Z=V=z=!0,U=K0.types.P2WSH,D=L=Q.scriptType,B=G}else if(q){if(N=o1.hash160(q),NM($,N),Q=R5(q,void 0,Y),!Q.pubKeys)throw new Error('RedeemScript not supported "'+t8.toASM(q)+'"');O=K0.types.P2SH,X=K0.scriptHash.output.encode(N),Z=!0,D=U=Q.scriptType,B=q,V=D===K0.types.P2WPKH}else if(G){if(j=o1.sha256(G),yE($,j),Q=R5(G,void 0,Y),!Q.pubKeys)throw new Error('WitnessScript not supported "'+t8.toASM(q)+'"');O=K0.types.P2WSH,X=K0.witnessScriptHash.output.encode(j),V=z=!0,D=L=Q.scriptType,B=G}else if($.prevOutType){if($.prevOutType===S0.P2SH||$.prevOutType===S0.P2WSH)throw new Error("PrevOutScript is "+$.prevOutType+", requires redeemScript");if(O=$.prevOutType,X=$.prevOutScript,Q=R5($.prevOutScript,$.prevOutType,Y),!Q.pubKeys)return;V=$.prevOutType===S0.P2WPKH,D=O,B=X}else X=K0.pubKeyHash.output.encode(o1.hash160(Y)),Q=R5(X,S0.P2PKH,Y),O=S0.P2PKH,V=!1,D=O,B=X;if(D===S0.P2WPKH)B=K0.pubKeyHash.output.encode(K0.witnessPubKeyHash.output.decode(B));if(Z)$.redeemScript=q,$.redeemScriptType=U;if(z)$.witnessScript=G,$.witnessScriptType=L;$.pubKeys=Q.pubKeys,$.signatures=Q.signatures,$.signScript=B,$.signType=D,$.prevOutScript=X,$.prevOutType=O,$.witness=V}function n7($,Y,q,J){if($===S0.P2PKH){if(Y.length===1&&a7.isBuffer(Y[0])&&q.length===1)return K0.pubKeyHash.input.encodeStack(Y[0],q[0])}else if($===S0.P2PK){if(Y.length===1&&a7.isBuffer(Y[0]))return K0.pubKey.input.encodeStack(Y[0])}else if($===S0.MULTISIG){if(Y.length>0){if(Y=Y.map(function(G){return G||UM.OP_0}),!J)Y=Y.filter(function(G){return G!==UM.OP_0});return K0.multisig.input.encodeStack(Y)}}else throw new Error("Not yet supported");if(!J)throw new Error("Not enough signatures provided");return[]}function hE($,Y){var q=$.prevOutType,J=[],G=[];if(A5(q))J=n7(q,$.signatures,$.pubKeys,Y);var Q=!1;if(q===K0.types.P2SH){if(!Y&&!jM($.redeemScriptType))throw new Error("Impossible to sign this type");if(A5($.redeemScriptType))J=n7($.redeemScriptType,$.signatures,$.pubKeys,Y);if($.redeemScriptType)Q=!0,q=$.redeemScriptType}switch(q){case K0.types.P2WPKH:G=n7(K0.types.P2PKH,$.signatures,$.pubKeys,Y);break;case K0.types.P2WSH:if(!Y&&!A5($.witnessScriptType))throw new Error("Impossible to sign this type");if(A5($.witnessScriptType))G=n7($.witnessScriptType,$.signatures,$.pubKeys,Y),G.push($.witnessScript),q=$.witnessScriptType;break}if(Q)J.push($.redeemScript);return{type:q,script:t8.compile(J),witness:G}}function A1($,Y){this.prevTxMap={},this.network=$||xE.bitcoin,this.maximumFeeRate=Y||2500,this.inputs=[],this.bitcoinCash=!0,this.tx=new e8}A1.prototype.setLockTime=function($){if(dY(yY.UInt32,$),this.inputs.some(function(Y){if(!Y.signatures)return!1;return Y.signatures.some(function(q){return q})}))throw new Error("No, this would invalidate signatures");this.tx.locktime=$};A1.fromTransaction=function($,Y,q){var J=new A1(Y);return J.setLockTime($.locktime),$.outs.forEach(function(G){J.addOutput(G.script,G.value)}),$.ins.forEach(function(G){J.__addInputUnsafe(G.hash,G.index,{sequence:G.sequence,script:G.script,witness:G.witness,value:G.value})}),J.inputs.forEach(function(G,Q){dE(G,$,Q,G.value,q)}),J};A1.prototype.addInput=function($,Y,q,J){if(!this.__canModifyInputs())throw new Error("No, this would invalidate signatures");var G;if(typeof $==="string")$=a7.from($,"hex").reverse();else if($ instanceof e8){var Q=$.outs[Y];J=Q.script,G=Q.value,$=$.getHash()}return this.__addInputUnsafe($,Y,{sequence:q,prevOutScript:J,value:G})};A1.prototype.__addInputUnsafe=function($,Y,q){if(e8.isCoinbaseHash($))throw new Error("coinbase inputs not supported");var J=$.toString("hex")+":"+Y;if(this.prevTxMap[J]!==void 0)throw new Error("Duplicate TxOut: "+J);var G={};if(q.script!==void 0)G=bE(q.script,q.witness||[]);if(q.value!==void 0)G.value=q.value;if(!G.prevOutScript&&q.prevOutScript){var Q;if(!G.pubKeys&&!G.signatures){var O=R5(q.prevOutScript);if(O.pubKeys)G.pubKeys=O.pubKeys,G.signatures=O.signatures;Q=O.scriptType}G.prevOutScript=q.prevOutScript,G.prevOutType=Q||K0.classifyOutput(q.prevOutScript)}var X=this.tx.addInput($,Y,q.sequence,q.scriptSig);return this.inputs[X]=G,this.prevTxMap[J]=X,X};A1.prototype.addOutput=function($,Y){if(!this.__canModifyOutputs())throw new Error("No, this would invalidate signatures");if(typeof $==="string")$=kE.toOutputScript($,this.network);return this.tx.addOutput($,Y)};A1.prototype.build=function(){return this.__build(!1)};A1.prototype.buildIncomplete=function(){return this.__build(!0)};A1.prototype.__build=function($){if(!$){if(!this.tx.ins.length)throw new Error("Transaction has no inputs");if(!this.tx.outs.length)throw new Error("Transaction has no outputs")}var Y=this.tx.clone();if(this.inputs.forEach(function(q,J){var G=q.witnessScriptType||q.redeemScriptType||q.prevOutType;if(!G&&!$)throw new Error("Transaction is not complete");var Q=hE(q,$);if(!$){if(!A5(Q.type)&&Q.type!==K0.types.P2WPKH)throw new Error(Q.type+" not supported")}Y.setInputScript(J,Q.script),Y.setWitness(J,Q.witness)}),!$){if(this.__overMaximumFees(Y.virtualSize()))throw new Error("Transaction has absurd fees")}return Y};function bY($){return $.prevOutScript!==void 0&&$.signScript!==void 0&&$.pubKeys!==void 0&&$.signatures!==void 0&&$.signatures.length===$.pubKeys.length&&$.pubKeys.length>0&&($.witness===!1||$.witness===!0&&$.value!==void 0)}A1.prototype.sign=function($,Y,q,J,G,Q,O){if(J=J|e8.SIGHASH_BITCOINCASHBIP143,!this.inputs[$])throw new Error("No input at index: "+$);J=J||e8.SIGHASH_ALL;var X=this.inputs[$];if(X.redeemScript!==void 0&&q&&!X.redeemScript.equals(q))throw new Error("Inconsistent redeemScript");var Z=Y.publicKey||Y.getPublicKeyBuffer();if(!bY(X)){if(G!==void 0){if(X.value!==void 0&&X.value!==G)throw new Error("Input didn't match witnessValue");dY(yY.Satoshi,G),X.value=G}if(!bY(X))lE(X,Z,q,G,Q);if(!bY(X))throw Error(X.prevOutType+" not supported")}var U=this.tx.hashForCashSignature($,X.signScript,G,J),N=X.pubKeys.some(function(V,z){if(!Z.equals(V))return!1;if(X.signatures[z])throw new Error("Signature already exists");if(Z.length!==33&&X.signType===S0.P2WPKH)throw new Error("BIP143 rejects uncompressed public keys in P2WPKH or P2WSH");var L=Y.sign(U,O);if(a7.isBuffer(L))L=VM.fromRSBuffer(L);return X.signatures[z]=L.toScriptSignature(J,O),!0});if(!N)throw new Error("Key pair cannot sign for this input")};function KM($){return $.readUInt8($.length-1)}A1.prototype.__canModifyInputs=function(){return this.inputs.every(function($){if($.signatures===void 0)return!0;return $.signatures.every(function(Y){if(!Y)return!0;var q=KM(Y);return q&e8.SIGHASH_ANYONECANPAY})})};A1.prototype.__canModifyOutputs=function(){var $=this.tx.ins.length,Y=this.tx.outs.length;return this.inputs.every(function(q){if(q.signatures===void 0)return!0;return q.signatures.every(function(J){if(!J)return!0;var G=KM(J),Q=G&31;if(Q===e8.SIGHASH_NONE)return!0;if(Q===e8.SIGHASH_SINGLE)return $<=Y})})};A1.prototype.__overMaximumFees=function($){var Y=this.inputs.reduce(function(Q,O){return Q+(O.value>>>0)},0),q=this.tx.outs.reduce(function(Q,O){return Q+O.value},0),J=Y-q,G=J/$;return G>this.maximumFeeRate};zM.exports=A1});var RM=y((dw,DM)=>{var CM=n0(),LM=R7();for(lY in LM)CM[lY]=LM[lY];var lY;DM.exports={bufferutils:GY(),Block:pU(),ECPair:u7(),ECSignature:W5(),HDNode:ZM(),Transaction:E7(),TransactionBuilder:WM(),address:w7(),crypto:n8(),networks:V5(),opcodes:U1(),script:CM}});var HM=y((AM)=>{Object.defineProperty(AM,"__esModule",{value:!0});AM.testnet=AM.bitcoin=void 0;AM.bitcoin={messagePrefix:`\x18Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};AM.testnet={messagePrefix:`\x18Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var BM=y((FM)=>{Object.defineProperty(FM,"__esModule",{value:!0});FM.maybe=FM.Boolean=FM.Array=FM.Buffer256bit=FM.Network=FM.typeforce=void 0;FM.typeforce=T0();FM.Network=FM.typeforce.compile({messagePrefix:FM.typeforce.oneOf(FM.typeforce.Buffer,FM.typeforce.String),bip32:{public:FM.typeforce.UInt32,private:FM.typeforce.UInt32},pubKeyHash:FM.typeforce.UInt8,scriptHash:FM.typeforce.UInt8,wif:FM.typeforce.UInt8});FM.Buffer256bit=FM.typeforce.BufferN(32);FM.Array=FM.typeforce.Array;FM.Boolean=FM.typeforce.Boolean;FM.maybe=FM.typeforce.maybe});var IM=y((wM)=>{Object.defineProperty(wM,"__esModule",{value:!0});wM.testEcc=void 0;var X0=($)=>Buffer.from($,"hex");function aE($){m0($.isPoint(X0("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),m0(!$.isPoint(X0("030000000000000000000000000000000000000000000000000000000000000005"))),m0($.isPrivate(X0("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),m0($.isPrivate(X0("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),m0(!$.isPrivate(X0("0000000000000000000000000000000000000000000000000000000000000000"))),m0(!$.isPrivate(X0("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"))),m0(!$.isPrivate(X0("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364142"))),m0(Buffer.from($.privateAdd(X0("0000000000000000000000000000000000000000000000000000000000000001"),X0("0000000000000000000000000000000000000000000000000000000000000000"))).equals(X0("0000000000000000000000000000000000000000000000000000000000000001"))),m0($.privateAdd(X0("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"),X0("0000000000000000000000000000000000000000000000000000000000000003"))===null),m0(Buffer.from($.privateAdd(X0("e211078564db65c3ce7704f08262b1f38f1ef412ad15b5ac2d76657a63b2c500"),X0("b51fbb69051255d1becbd683de5848242a89c229348dd72896a87ada94ae8665"))).equals(X0("9730c2ee69edbb958d42db7460bafa18fef9d955325aec99044c81c8282b0a24"))),m0(Buffer.from($.privateNegate(X0("0000000000000000000000000000000000000000000000000000000000000001"))).equals(X0("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),m0(Buffer.from($.privateNegate(X0("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"))).equals(X0("0000000000000000000000000000000000000000000000000000000000000003"))),m0(Buffer.from($.privateNegate(X0("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(X0("4eede1bf775995d70a494f0a7bb6bc11e0b8cccd41cce8009ab1132c8b0a3792"))),m0(Buffer.from($.pointCompress(X0("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!0)).equals(X0("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),m0(Buffer.from($.pointCompress(X0("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!1)).equals(X0("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),m0(Buffer.from($.pointCompress(X0("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!0)).equals(X0("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),m0(Buffer.from($.pointCompress(X0("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!1)).equals(X0("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),m0(Buffer.from($.pointFromScalar(X0("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(X0("02b07ba9dca9523b7ef4bd97703d43d20399eb698e194704791a25ce77a400df99"))),m0($.xOnlyPointAddTweak(X0("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),X0("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))===null);let Y=$.xOnlyPointAddTweak(X0("1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b"),X0("a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac"));if(m0(Buffer.from(Y.xOnlyPubkey).equals(X0("e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"))&&Y.parity===1),Y=$.xOnlyPointAddTweak(X0("2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991"),X0("823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47")),m0(Buffer.from(Y.xOnlyPubkey).equals(X0("9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"))&&Y.parity===0),m0(Buffer.from($.sign(X0("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),X0("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))).equals(X0("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),m0($.verify(X0("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),X0("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),X0("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),$.signSchnorr)m0(Buffer.from($.signSchnorr(X0("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),X0("c90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b14e5c9"),X0("c87aa53824b4d7ae2eb035a2b5bbbccc080e76cdc6d1692c4b0b62d798e6d906"))).equals(X0("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")));if($.verifySchnorr)m0($.verifySchnorr(X0("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),X0("dd308afec5777e13121fa72b9cc1b7cc0139715309b086c960e18fd969774eb8"),X0("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")))}wM.testEcc=aE;function m0($){if(!$)throw new Error("ecc library invalid")}});var kM=y((_M)=>{Object.defineProperty(_M,"__esModule",{value:!0});_M.ECPairFactory=_M.networks=void 0;var cY=HM();_M.networks=cY;var W1=BM(),iE=tN(),vM=eN(),sE=IM(),hY=W1.typeforce.maybe(W1.typeforce.compile({compressed:W1.maybe(W1.Boolean),network:W1.maybe(W1.Network)})),rE=($)=>$.length===32?$:$.slice(1,33);function tE($){sE.testEcc($);function Y(X){return $.isPoint(X)}function q(X,Z){if(W1.typeforce(W1.Buffer256bit,X),!$.isPrivate(X))throw new TypeError("Private key not in range [1, n)");return W1.typeforce(hY,Z),new O(X,void 0,Z)}function J(X,Z){return W1.typeforce($.isPoint,X),W1.typeforce(hY,Z),new O(void 0,X,Z)}function G(X,Z){let U=vM.decode(X),N=U.version;if(W1.Array(Z)){if(Z=Z.filter((V)=>{return N===V.wif}).pop(),!Z)throw new Error("Unknown network version")}else if(Z=Z||cY.bitcoin,N!==Z.wif)throw new Error("Invalid network version");return q(U.privateKey,{compressed:U.compressed,network:Z})}function Q(X){if(W1.typeforce(hY,X),X===void 0)X={};let Z=X.rng||iE,U;do U=Z(32),W1.typeforce(W1.Buffer256bit,U);while(!$.isPrivate(U));return q(U,X)}class O{__D;__Q;compressed;network;lowR;constructor(X,Z,U){if(this.__D=X,this.__Q=Z,this.lowR=!1,U===void 0)U={};if(this.compressed=U.compressed===void 0?!0:U.compressed,this.network=U.network||cY.bitcoin,Z!==void 0)this.__Q=Buffer.from($.pointCompress(Z,this.compressed))}get privateKey(){return this.__D}get publicKey(){if(!this.__Q){let X=$.pointFromScalar(this.__D,this.compressed);this.__Q=Buffer.from(X)}return this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return vM.encode(this.network.wif,this.__D,this.compressed)}tweak(X){if(this.privateKey)return this.tweakFromPrivateKey(X);return this.tweakFromPublicKey(X)}sign(X,Z){if(!this.__D)throw new Error("Missing private key");if(Z===void 0)Z=this.lowR;if(Z===!1)return Buffer.from($.sign(X,this.__D));else{let U=$.sign(X,this.__D),N=Buffer.alloc(32,0),V=0;while(U[0]>127)V++,N.writeUIntLE(V,0,6),U=$.sign(X,this.__D,N);return Buffer.from(U)}}signSchnorr(X){if(!this.privateKey)throw new Error("Missing private key");if(!$.signSchnorr)throw new Error("signSchnorr not supported by ecc library");return Buffer.from($.signSchnorr(X,this.privateKey))}verify(X,Z){return $.verify(X,this.publicKey,Z)}verifySchnorr(X,Z){if(!$.verifySchnorr)throw new Error("verifySchnorr not supported by ecc library");return $.verifySchnorr(X,this.publicKey.subarray(1,33),Z)}tweakFromPublicKey(X){let Z=rE(this.publicKey),U=$.xOnlyPointAddTweak(Z,X);if(!U||U.xOnlyPubkey===null)throw new Error("Cannot tweak public key!");let N=Buffer.from([U.parity===0?2:3]);return J(Buffer.concat([N,U.xOnlyPubkey]),{network:this.network,compressed:this.compressed})}tweakFromPrivateKey(X){let U=this.publicKey[0]===3||this.publicKey[0]===4&&(this.publicKey[64]&1)===1?$.privateNegate(this.privateKey):this.privateKey,N=$.privateAdd(U,X);if(!N)throw new Error("Invalid tweaked private key!");return q(Buffer.from(N),{network:this.network,compressed:this.compressed})}}return{isPoint:Y,fromPrivateKey:q,fromPublicKey:J,fromWIF:G,makeRandom:Q}}_M.ECPairFactory=tE});var oY=y((X6)=>{Object.defineProperty(X6,"__esModule",{value:!0});X6.networks=X6.ECPairFactory=X6.default=void 0;var uY=kM();Object.defineProperty(X6,"default",{enumerable:!0,get:function(){return uY.ECPairFactory}});Object.defineProperty(X6,"ECPairFactory",{enumerable:!0,get:function(){return uY.ECPairFactory}});Object.defineProperty(X6,"networks",{enumerable:!0,get:function(){return uY.networks}})});var s7=y((YT,fM)=>{function iY($){var Y=new Error;this.name=Y.name="ValidationError",this.message=Y.message=$,this.stack=Y.stack}iY.prototype=Object.create(Error.prototype);function GH($,Y){if(!$)throw new iY(Y)}fM.exports={ValidationError:iY,validate:GH}});var bM=y((qT,gM)=>{var r7=s7().validate,QH="qpzry9x8gf2tvdw0s3jn54khce6mua7l",mM={q:0,p:1,z:2,r:3,y:4,"9":5,x:6,"8":7,g:8,f:9,"2":10,t:11,v:12,d:13,w:14,"0":15,s:16,"3":17,j:18,n:19,"5":20,"4":21,k:22,h:23,c:24,e:25,"6":26,m:27,u:28,a:29,"7":30,l:31};function OH($){r7($ instanceof Uint8Array,"Invalid data: "+$+".");var Y="";for(var q=0;q<$.length;++q){var J=$[q];r7(0<=J&&J<32,"Invalid value: "+J+"."),Y+=QH[J]}return Y}function XH($){r7(typeof $==="string","Invalid base32-encoded string: "+$+".");var Y=new Uint8Array($.length);for(var q=0;q<$.length;++q){var J=$[q];r7(J in mM,"Invalid value: "+J+"."),Y[q]=mM[J]}return Y}gM.exports={encode:OH,decode:XH}});var dM=y((JT,t7)=>{var a0=function($){var Y=1e7,q=7,J=9007199254740992,G=N(J),Q=Math.log(J);function O(M,W){if(typeof M==="undefined")return O[0];if(typeof W!=="undefined")return+W===10?M0(M):i0(M,W);return M0(M)}function X(M,W){this.value=M,this.sign=W,this.isSmall=!1}X.prototype=Object.create(O.prototype);function Z(M){this.value=M,this.sign=M<0,this.isSmall=!0}Z.prototype=Object.create(O.prototype);function U(M){return-J<M&&M<J}function N(M){if(M<1e7)return[M];if(M<100000000000000)return[M%1e7,Math.floor(M/1e7)];return[M%1e7,Math.floor(M/1e7)%1e7,Math.floor(M/100000000000000)]}function V(M){z(M);var W=M.length;if(W<4&&a(M,G)<0)switch(W){case 0:return 0;case 1:return M[0];case 2:return M[0]+M[1]*Y;default:return M[0]+(M[1]+M[2]*Y)*Y}return M}function z(M){var W=M.length;while(M[--W]===0);M.length=W+1}function L(M){var W=new Array(M),T=-1;while(++T<M)W[T]=0;return W}function j(M){if(M>0)return Math.floor(M);return Math.ceil(M)}function D(M,W){var T=M.length,K=W.length,C=new Array(T),F=0,_=Y,S,d;for(d=0;d<K;d++)S=M[d]+W[d]+F,F=S>=_?1:0,C[d]=S-F*_;while(d<T)S=M[d]+F,F=S===_?1:0,C[d++]=S-F*_;if(F>0)C.push(F);return C}function B(M,W){if(M.length>=W.length)return D(M,W);return D(W,M)}function R(M,W){var T=M.length,K=new Array(T),C=Y,F,_;for(_=0;_<T;_++)F=M[_]-C+W,W=Math.floor(F/C),K[_]=F-W*C,W+=1;while(W>0)K[_++]=W%C,W=Math.floor(W/C);return K}X.prototype.add=function(M){var W=M0(M);if(this.sign!==W.sign)return this.subtract(W.negate());var T=this.value,K=W.value;if(W.isSmall)return new X(R(T,Math.abs(K)),this.sign);return new X(B(T,K),this.sign)},X.prototype.plus=X.prototype.add,Z.prototype.add=function(M){var W=M0(M),T=this.value;if(T<0!==W.sign)return this.subtract(W.negate());var K=W.value;if(W.isSmall){if(U(T+K))return new Z(T+K);K=N(Math.abs(K))}return new X(R(K,Math.abs(T)),T<0)},Z.prototype.plus=Z.prototype.add;function A(M,W){var T=M.length,K=W.length,C=new Array(T),F=0,_=Y,S,d;for(S=0;S<K;S++){if(d=M[S]-F-W[S],d<0)d+=_,F=1;else F=0;C[S]=d}for(S=K;S<T;S++){if(d=M[S]-F,d<0)d+=_;else{C[S++]=d;break}C[S]=d}for(;S<T;S++)C[S]=M[S];return z(C),C}function w(M,W,T){var K;if(a(M,W)>=0)K=A(M,W);else K=A(W,M),T=!T;if(K=V(K),typeof K==="number"){if(T)K=-K;return new Z(K)}return new X(K,T)}function I(M,W,T){var K=M.length,C=new Array(K),F=-W,_=Y,S,d;for(S=0;S<K;S++)d=M[S]+F,F=Math.floor(d/_),d%=_,C[S]=d<0?d+_:d;if(C=V(C),typeof C==="number"){if(T)C=-C;return new Z(C)}return new X(C,T)}X.prototype.subtract=function(M){var W=M0(M);if(this.sign!==W.sign)return this.add(W.negate());var T=this.value,K=W.value;if(W.isSmall)return I(T,Math.abs(K),this.sign);return w(T,K,this.sign)},X.prototype.minus=X.prototype.subtract,Z.prototype.subtract=function(M){var W=M0(M),T=this.value;if(T<0!==W.sign)return this.add(W.negate());var K=W.value;if(W.isSmall)return new Z(T-K);return I(K,Math.abs(T),T>=0)},Z.prototype.minus=Z.prototype.subtract,X.prototype.negate=function(){return new X(this.value,!this.sign)},Z.prototype.negate=function(){var M=this.sign,W=new Z(-this.value);return W.sign=!M,W},X.prototype.abs=function(){return new X(this.value,!1)},Z.prototype.abs=function(){return new Z(Math.abs(this.value))};function k(M,W){var T=M.length,K=W.length,C=T+K,F=L(C),_=Y,S,d,n,J0,s;for(n=0;n<T;++n){J0=M[n];for(var j0=0;j0<K;++j0)s=W[j0],S=J0*s+F[n+j0],d=Math.floor(S/_),F[n+j0]=S-d*_,F[n+j0+1]+=d}return z(F),F}function p(M,W){var T=M.length,K=new Array(T),C=Y,F=0,_,S;for(S=0;S<T;S++)_=M[S]*W+F,F=Math.floor(_/C),K[S]=_-F*C;while(F>0)K[S++]=F%C,F=Math.floor(F/C);return K}function x(M,W){var T=[];while(W-- >0)T.push(0);return T.concat(M)}function G0(M,W){var T=Math.max(M.length,W.length);if(T<=30)return k(M,W);T=Math.ceil(T/2);var K=M.slice(T),C=M.slice(0,T),F=W.slice(T),_=W.slice(0,T),S=G0(C,_),d=G0(K,F),n=G0(B(C,K),B(_,F)),J0=B(B(S,x(A(A(n,S),d),T)),x(d,2*T));return z(J0),J0}function e(M,W){return-0.012*M-0.012*W+0.000015*M*W>0}X.prototype.multiply=function(M){var W=M0(M),T=this.value,K=W.value,C=this.sign!==W.sign,F;if(W.isSmall){if(K===0)return O[0];if(K===1)return this;if(K===-1)return this.negate();if(F=Math.abs(K),F<Y)return new X(p(T,F),C);K=N(F)}if(e(T.length,K.length))return new X(G0(T,K),C);return new X(k(T,K),C)},X.prototype.times=X.prototype.multiply;function $0(M,W,T){if(M<Y)return new X(p(W,M),T);return new X(k(W,N(M)),T)}Z.prototype._multiplyBySmall=function(M){if(U(M.value*this.value))return new Z(M.value*this.value);return $0(Math.abs(M.value),N(Math.abs(this.value)),this.sign!==M.sign)},X.prototype._multiplyBySmall=function(M){if(M.value===0)return O[0];if(M.value===1)return this;if(M.value===-1)return this.negate();return $0(Math.abs(M.value),this.value,this.sign!==M.sign)},Z.prototype.multiply=function(M){return M0(M)._multiplyBySmall(this)},Z.prototype.times=Z.prototype.multiply;function U0(M){var W=M.length,T=L(W+W),K=Y,C,F,_,S,d;for(_=0;_<W;_++){S=M[_],F=0-S*S;for(var n=_;n<W;n++)d=M[n],C=2*(S*d)+T[_+n]+F,F=Math.floor(C/K),T[_+n]=C-F*K;T[_+W]=F}return z(T),T}X.prototype.square=function(){return new X(U0(this.value),!1)},Z.prototype.square=function(){var M=this.value*this.value;if(U(M))return new Z(M);return new X(U0(N(Math.abs(this.value))),!1)};function W0(M,W){var T=M.length,K=W.length,C=Y,F=L(W.length),_=W[K-1],S=Math.ceil(C/(2*_)),d=p(M,S),n=p(W,S),J0,s,j0,_0,h0,i1,z8;if(d.length<=T)d.push(0);n.push(0),_=n[K-1];for(s=T-K;s>=0;s--){if(J0=C-1,d[s+K]!==_)J0=Math.floor((d[s+K]*C+d[s+K-1])/_);j0=0,_0=0,i1=n.length;for(h0=0;h0<i1;h0++)if(j0+=J0*n[h0],z8=Math.floor(j0/C),_0+=d[s+h0]-(j0-z8*C),j0=z8,_0<0)d[s+h0]=_0+C,_0=-1;else d[s+h0]=_0,_0=0;while(_0!==0){J0-=1,j0=0;for(h0=0;h0<i1;h0++)if(j0+=d[s+h0]-C+n[h0],j0<0)d[s+h0]=j0+C,j0=0;else d[s+h0]=j0,j0=1;_0+=j0}F[s]=J0}return d=Q0(d,S)[0],[V(F),V(d)]}function N0(M,W){var T=M.length,K=W.length,C=[],F=[],_=Y,S,d,n,J0,s;while(T){if(F.unshift(M[--T]),z(F),a(F,W)<0){C.push(0);continue}if(d=F.length,n=F[d-1]*_+F[d-2],J0=W[K-1]*_+W[K-2],d>K)n=(n+1)*_;S=Math.ceil(n/J0);do{if(s=p(W,S),a(s,F)<=0)break;S--}while(S);C.push(S),F=A(F,s)}return C.reverse(),[V(C),V(F)]}function Q0(M,W){var T=M.length,K=L(T),C=Y,F,_,S,d;S=0;for(F=T-1;F>=0;--F)d=S*C+M[F],_=j(d/W),S=d-_*W,K[F]=_|0;return[K,S|0]}function g(M,W){var T,K=M0(W),C=M.value,F=K.value,_;if(F===0)throw new Error("Cannot divide by zero");if(M.isSmall){if(K.isSmall)return[new Z(j(C/F)),new Z(C%F)];return[O[0],M]}if(K.isSmall){if(F===1)return[M,O[0]];if(F==-1)return[M.negate(),O[0]];var S=Math.abs(F);if(S<Y){T=Q0(C,S),_=V(T[0]);var d=T[1];if(M.sign)d=-d;if(typeof _==="number"){if(M.sign!==K.sign)_=-_;return[new Z(_),new Z(d)]}return[new X(_,M.sign!==K.sign),new Z(d)]}F=N(S)}var n=a(C,F);if(n===-1)return[O[0],M];if(n===0)return[O[M.sign===K.sign?1:-1],O[0]];if(C.length+F.length<=200)T=W0(C,F);else T=N0(C,F);_=T[0];var J0=M.sign!==K.sign,s=T[1],j0=M.sign;if(typeof _==="number"){if(J0)_=-_;_=new Z(_)}else _=new X(_,J0);if(typeof s==="number"){if(j0)s=-s;s=new Z(s)}else s=new X(s,j0);return[_,s]}X.prototype.divmod=function(M){var W=g(this,M);return{quotient:W[0],remainder:W[1]}},Z.prototype.divmod=X.prototype.divmod,X.prototype.divide=function(M){return g(this,M)[0]},Z.prototype.over=Z.prototype.divide=X.prototype.over=X.prototype.divide,X.prototype.mod=function(M){return g(this,M)[1]},Z.prototype.remainder=Z.prototype.mod=X.prototype.remainder=X.prototype.mod,X.prototype.pow=function(M){var W=M0(M),T=this.value,K=W.value,C,F,_;if(K===0)return O[1];if(T===0)return O[0];if(T===1)return O[1];if(T===-1)return W.isEven()?O[1]:O[-1];if(W.sign)return O[0];if(!W.isSmall)throw new Error("The exponent "+W.toString()+" is too large.");if(this.isSmall){if(U(C=Math.pow(T,K)))return new Z(j(C))}F=this,_=O[1];while(!0){if(K&!0)_=_.times(F),--K;if(K===0)break;K/=2,F=F.square()}return _},Z.prototype.pow=X.prototype.pow,X.prototype.modPow=function(M,W){if(M=M0(M),W=M0(W),W.isZero())throw new Error("Cannot take modPow with modulus 0");var T=O[1],K=this.mod(W);while(M.isPositive()){if(K.isZero())return O[0];if(M.isOdd())T=T.multiply(K).mod(W);M=M.divide(2),K=K.square().mod(W)}return T},Z.prototype.modPow=X.prototype.modPow;function a(M,W){if(M.length!==W.length)return M.length>W.length?1:-1;for(var T=M.length-1;T>=0;T--)if(M[T]!==W[T])return M[T]>W[T]?1:-1;return 0}X.prototype.compareAbs=function(M){var W=M0(M),T=this.value,K=W.value;if(W.isSmall)return 1;return a(T,K)},Z.prototype.compareAbs=function(M){var W=M0(M),T=Math.abs(this.value),K=W.value;if(W.isSmall)return K=Math.abs(K),T===K?0:T>K?1:-1;return-1},X.prototype.compare=function(M){if(M===1/0)return-1;if(M===-1/0)return 1;var W=M0(M),T=this.value,K=W.value;if(this.sign!==W.sign)return W.sign?1:-1;if(W.isSmall)return this.sign?-1:1;return a(T,K)*(this.sign?-1:1)},X.prototype.compareTo=X.prototype.compare,Z.prototype.compare=function(M){if(M===1/0)return-1;if(M===-1/0)return 1;var W=M0(M),T=this.value,K=W.value;if(W.isSmall)return T==K?0:T>K?1:-1;if(T<0!==W.sign)return T<0?-1:1;return T<0?1:-1},Z.prototype.compareTo=Z.prototype.compare,X.prototype.equals=function(M){return this.compare(M)===0},Z.prototype.eq=Z.prototype.equals=X.prototype.eq=X.prototype.equals,X.prototype.notEquals=function(M){return this.compare(M)!==0},Z.prototype.neq=Z.prototype.notEquals=X.prototype.neq=X.prototype.notEquals,X.prototype.greater=function(M){return this.compare(M)>0},Z.prototype.gt=Z.prototype.greater=X.prototype.gt=X.prototype.greater,X.prototype.lesser=function(M){return this.compare(M)<0},Z.prototype.lt=Z.prototype.lesser=X.prototype.lt=X.prototype.lesser,X.prototype.greaterOrEquals=function(M){return this.compare(M)>=0},Z.prototype.geq=Z.prototype.greaterOrEquals=X.prototype.geq=X.prototype.greaterOrEquals,X.prototype.lesserOrEquals=function(M){return this.compare(M)<=0},Z.prototype.leq=Z.prototype.lesserOrEquals=X.prototype.leq=X.prototype.lesserOrEquals,X.prototype.isEven=function(){return(this.value[0]&1)===0},Z.prototype.isEven=function(){return(this.value&1)===0},X.prototype.isOdd=function(){return(this.value[0]&1)===1},Z.prototype.isOdd=function(){return(this.value&1)===1},X.prototype.isPositive=function(){return!this.sign},Z.prototype.isPositive=function(){return this.value>0},X.prototype.isNegative=function(){return this.sign},Z.prototype.isNegative=function(){return this.value<0},X.prototype.isUnit=function(){return!1},Z.prototype.isUnit=function(){return Math.abs(this.value)===1},X.prototype.isZero=function(){return!1},Z.prototype.isZero=function(){return this.value===0},X.prototype.isDivisibleBy=function(M){var W=M0(M),T=W.value;if(T===0)return!1;if(T===1)return!0;if(T===2)return this.isEven();return this.mod(W).equals(O[0])},Z.prototype.isDivisibleBy=X.prototype.isDivisibleBy;function l(M){var W=M.abs();if(W.isUnit())return!1;if(W.equals(2)||W.equals(3)||W.equals(5))return!0;if(W.isEven()||W.isDivisibleBy(3)||W.isDivisibleBy(5))return!1;if(W.lesser(49))return!0}function f(M,W){var T=M.prev(),K=T,C=0,F,_,S,d;while(K.isEven())K=K.divide(2),C++;$:for(S=0;S<W.length;S++){if(M.lesser(W[S]))continue;if(d=a0(W[S]).modPow(K,M),d.equals(O[1])||d.equals(T))continue;for(F=C-1;F!=0;F--){if(d=d.square().mod(M),d.isUnit())return!1;if(d.equals(T))continue $}return!1}return!0}X.prototype.isPrime=function(M){var W=l(this);if(W!==$)return W;var T=this.abs(),K=T.bitLength();if(K<=64)return f(T,[2,325,9375,28178,450775,9780504,1795265022]);var C=Math.log(2)*K,F=Math.ceil(M===!0?2*Math.pow(C,2):C);for(var _=[],S=0;S<F;S++)_.push(a0(S+2));return f(T,_)},Z.prototype.isPrime=X.prototype.isPrime,X.prototype.isProbablePrime=function(M){var W=l(this);if(W!==$)return W;var T=this.abs(),K=M===$?5:M;for(var C=[],F=0;F<K;F++)C.push(a0.randBetween(2,T.minus(2)));return f(T,C)},Z.prototype.isProbablePrime=X.prototype.isProbablePrime,X.prototype.modInv=function(M){var{zero:W,one:T}=a0,K=M0(M),C=this.abs(),F,_,S;while(!C.equals(a0.zero))F=K.divide(C),_=W,S=K,W=T,K=C,T=_.subtract(F.multiply(T)),C=S.subtract(F.multiply(C));if(!K.equals(1))throw new Error(this.toString()+" and "+M.toString()+" are not co-prime");if(W.compare(0)===-1)W=W.add(M);if(this.isNegative())return W.negate();return W},Z.prototype.modInv=X.prototype.modInv,X.prototype.next=function(){var M=this.value;if(this.sign)return I(M,1,this.sign);return new X(R(M,1),this.sign)},Z.prototype.next=function(){var M=this.value;if(M+1<J)return new Z(M+1);return new X(G,!1)},X.prototype.prev=function(){var M=this.value;if(this.sign)return new X(R(M,1),!0);return I(M,1,this.sign)},Z.prototype.prev=function(){var M=this.value;if(M-1>-J)return new Z(M-1);return new X(G,!0)};var h=[1];while(2*h[h.length-1]<=Y)h.push(2*h[h.length-1]);var o=h.length,q0=h[o-1];function P(M){return(typeof M==="number"||typeof M==="string")&&+Math.abs(M)<=Y||M instanceof X&&M.value.length<=1}X.prototype.shiftLeft=function(M){if(!P(M))throw new Error(String(M)+" is too large for shifting.");if(M=+M,M<0)return this.shiftRight(-M);var W=this;if(W.isZero())return W;while(M>=o)W=W.multiply(q0),M-=o-1;return W.multiply(h[M])},Z.prototype.shiftLeft=X.prototype.shiftLeft,X.prototype.shiftRight=function(M){var W;if(!P(M))throw new Error(String(M)+" is too large for shifting.");if(M=+M,M<0)return this.shiftLeft(-M);var T=this;while(M>=o){if(T.isZero()||T.isNegative()&&T.isUnit())return T;W=g(T,q0),T=W[1].isNegative()?W[0].prev():W[0],M-=o-1}return W=g(T,h[M]),W[1].isNegative()?W[0].prev():W[0]},Z.prototype.shiftRight=X.prototype.shiftRight;function E(M,W,T){W=M0(W);var K=M.isNegative(),C=W.isNegative(),F=K?M.not():M,_=C?W.not():W,S=0,d=0,n=null,J0=null,s=[];while(!F.isZero()||!_.isZero()){if(n=g(F,q0),S=n[1].toJSNumber(),K)S=q0-1-S;if(J0=g(_,q0),d=J0[1].toJSNumber(),C)d=q0-1-d;F=n[0],_=J0[0],s.push(T(S,d))}var j0=T(K?1:0,C?1:0)!==0?a0(-1):a0(0);for(var _0=s.length-1;_0>=0;_0-=1)j0=j0.multiply(q0).add(a0(s[_0]));return j0}X.prototype.not=function(){return this.negate().prev()},Z.prototype.not=X.prototype.not,X.prototype.and=function(M){return E(this,M,function(W,T){return W&T})},Z.prototype.and=X.prototype.and,X.prototype.or=function(M){return E(this,M,function(W,T){return W|T})},Z.prototype.or=X.prototype.or,X.prototype.xor=function(M){return E(this,M,function(W,T){return W^T})},Z.prototype.xor=X.prototype.xor;var H=1073741824,v=(Y&-Y)*(Y&-Y)|H;function b(M){var W=M.value,T=typeof W==="number"?W|H:W[0]+W[1]*Y|v;return T&-T}function u(M,W){if(W.compareTo(M)<=0){var T=u(M,W.square(W)),K=T.p,C=T.e,F=K.multiply(W);return F.compareTo(M)<=0?{p:F,e:C*2+1}:{p:K,e:C*2}}return{p:a0(1),e:0}}X.prototype.bitLength=function(){var M=this;if(M.compareTo(a0(0))<0)M=M.negate().subtract(a0(1));if(M.compareTo(a0(0))===0)return a0(0);return a0(u(M,a0(2)).e).add(a0(1))},Z.prototype.bitLength=X.prototype.bitLength;function m(M,W){return M=M0(M),W=M0(W),M.greater(W)?M:W}function i(M,W){return M=M0(M),W=M0(W),M.lesser(W)?M:W}function O0(M,W){if(M=M0(M).abs(),W=M0(W).abs(),M.equals(W))return M;if(M.isZero())return W;if(W.isZero())return M;var T=O[1],K,C;while(M.isEven()&&W.isEven())K=Math.min(b(M),b(W)),M=M.divide(K),W=W.divide(K),T=T.multiply(K);while(M.isEven())M=M.divide(b(M));do{while(W.isEven())W=W.divide(b(W));if(M.greater(W))C=W,W=M,M=C;W=W.subtract(M)}while(!W.isZero());return T.isUnit()?M:M.multiply(T)}function P0(M,W){return M=M0(M).abs(),W=M0(W).abs(),M.divide(O0(M,W)).multiply(W)}function V0(M,W){M=M0(M),W=M0(W);var T=i(M,W),K=m(M,W),C=K.subtract(T).add(1);if(C.isSmall)return T.add(Math.floor(Math.random()*C));var F=C.value.length-1,_=[],S=!0;for(var d=F;d>=0;d--){var n=S?C.value[d]:Y,J0=j(Math.random()*n);if(_.unshift(J0),J0<n)S=!1}return _=V(_),T.add(typeof _==="number"?new Z(_):new X(_,!1))}var i0=function(M,W){var T=M.length,K,C=Math.abs(W);for(var K=0;K<T;K++){var F=M[K].toLowerCase();if(F==="-")continue;if(/[a-z0-9]/.test(F)){if(/[0-9]/.test(F)&&+F>=C){if(F==="1"&&C===1)continue;throw new Error(F+" is not a valid digit in base "+W+".")}else if(F.charCodeAt(0)-87>=C)throw new Error(F+" is not a valid digit in base "+W+".")}}if(2<=W&&W<=36){if(T<=Q/Math.log(W)){var _=parseInt(M,W);if(isNaN(_))throw new Error(F+" is not a valid digit in base "+W+".");return new Z(parseInt(M,W))}}W=M0(W);var S=[],d=M[0]==="-";for(K=d?1:0;K<M.length;K++){var F=M[K].toLowerCase(),n=F.charCodeAt(0);if(48<=n&&n<=57)S.push(M0(F));else if(97<=n&&n<=122)S.push(M0(F.charCodeAt(0)-87));else if(F==="<"){var J0=K;do K++;while(M[K]!==">");S.push(M0(M.slice(J0+1,K)))}else throw new Error(F+" is not a valid character")}return g0(S,W,d)};function g0(M,W,T){var K=O[0],C=O[1],F;for(F=M.length-1;F>=0;F--)K=K.add(M[F].times(C)),C=C.times(W);return T?K.negate():K}function $1(M){if(M<=35)return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(M);return"<"+M+">"}function b0(M,W){if(W=a0(W),W.isZero()){if(M.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(W.equals(-1)){if(M.isZero())return{value:[0],isNegative:!1};if(M.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-M)).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var T=Array.apply(null,Array(+M-1)).map(Array.prototype.valueOf,[0,1]);return T.unshift([1]),{value:[].concat.apply([],T),isNegative:!1}}var K=!1;if(M.isNegative()&&W.isPositive())K=!0,M=M.abs();if(W.equals(1)){if(M.isZero())return{value:[0],isNegative:!1};return{value:Array.apply(null,Array(+M)).map(Number.prototype.valueOf,1),isNegative:K}}var C=[],F=M,_;while(F.isNegative()||F.compareAbs(W)>=0){_=F.divmod(W),F=_.quotient;var S=_.remainder;if(S.isNegative())S=W.minus(S).abs(),F=F.next();C.push(S.toJSNumber())}return C.push(F.toJSNumber()),{value:C.reverse(),isNegative:K}}function j8(M,W){var T=b0(M,W);return(T.isNegative?"-":"")+T.value.map($1).join("")}X.prototype.toArray=function(M){return b0(this,M)},Z.prototype.toArray=function(M){return b0(this,M)},X.prototype.toString=function(M){if(M===$)M=10;if(M!==10)return j8(this,M);var W=this.value,T=W.length,K=String(W[--T]),C="0000000",F;while(--T>=0)F=String(W[T]),K+=C.slice(F.length)+F;var _=this.sign?"-":"";return _+K},Z.prototype.toString=function(M){if(M===$)M=10;if(M!=10)return j8(this,M);return String(this.value)},X.prototype.toJSON=Z.prototype.toJSON=function(){return this.toString()},X.prototype.valueOf=function(){return parseInt(this.toString(),10)},X.prototype.toJSNumber=X.prototype.valueOf,Z.prototype.valueOf=function(){return this.value},Z.prototype.toJSNumber=Z.prototype.valueOf;function K8(M){if(U(+M)){var W=+M;if(W===j(W))return new Z(W);throw new Error("Invalid integer: "+M)}var T=M[0]==="-";if(T)M=M.slice(1);var K=M.split(/e/i);if(K.length>2)throw new Error("Invalid integer: "+K.join("e"));if(K.length===2){var C=K[1];if(C[0]==="+")C=C.slice(1);if(C=+C,C!==j(C)||!U(C))throw new Error("Invalid integer: "+C+" is not a valid exponent.");var F=K[0],_=F.indexOf(".");if(_>=0)C-=F.length-_-1,F=F.slice(0,_)+F.slice(_+1);if(C<0)throw new Error("Cannot include negative exponent part for integers");F+=new Array(C+1).join("0"),M=F}var S=/^([0-9][0-9]*)$/.test(M);if(!S)throw new Error("Invalid integer: "+M);var d=[],n=M.length,J0=q,s=n-J0;while(n>0){if(d.push(+M.slice(s,n)),s-=J0,s<0)s=0;n-=J0}return z(d),new X(d,T)}function c(M){if(U(M)){if(M!==j(M))throw new Error(M+" is not an integer.");return new Z(M)}return K8(M.toString())}function M0(M){if(typeof M==="number")return c(M);if(typeof M==="string")return K8(M);return M}for(var G1=0;G1<1000;G1++)if(O[G1]=new Z(G1),G1>0)O[-G1]=new Z(-G1);return O.one=O[1],O.zero=O[0],O.minusOne=O[-1],O.max=m,O.min=i,O.gcd=O0,O.lcm=P0,O.isInstance=function(M){return M instanceof X||M instanceof Z},O.randBetween=V0,O.fromArray=function(M,W,T){return g0(M.map(M0),M0(W||10),T)},O}();if(typeof t7!=="undefined"&&t7.hasOwnProperty("exports"))t7.exports=a0;if(typeof define==="function"&&define.amd)define("big-integer",[],function(){return a0})});var hM=y((GT,lM)=>{var yM=s7().validate;lM.exports=function($,Y,q,J){var G=J?Math.floor($.length*Y/q):Math.ceil($.length*Y/q),Q=(1<<q)-1,O=new Uint8Array(G),X=0,Z=0,U=0;for(var N=0;N<$.length;++N){var V=$[N];yM(0<=V&&V>>Y===0,"Invalid value: "+V+"."),Z=Z<<Y|V,U+=Y;while(U>=q)U-=q,O[X]=Z>>U&Q,++X}if(!J){if(U>0)O[X]=Z<<q-U&Q,++X}else yM(U<Y&&(Z<<q-U&Q)===0,"Input cannot be converted to "+q+" bits without padding, but strict mode was used.");return O}});var sM=y((QT,iM)=>{var cM=bM(),ZH=dM(),uM=hM(),oM=s7(),x9=oM.validate;function UH($,Y,q){x9(typeof $==="string"&&VH($),"Invalid prefix: "+$+"."),x9(typeof Y==="string","Invalid type: "+Y+"."),x9(q instanceof Uint8Array,"Invalid hash: "+q+".");var J=k9(pM($),new Uint8Array(1)),G=KH(Y)+WH(q),Q=CH(k9(new Uint8Array([G]),q)),O=k9(k9(J,Q),new Uint8Array(8)),X=k9(Q,jH(nM(O)));return $+":"+cM.encode(X)}function NH($){x9(typeof $==="string"&&aM($),"Invalid address: "+$+".");var Y=$.toLowerCase().split(":");x9(Y.length===2,"Missing prefix: "+$+".");var q=Y[0],J=cM.decode(Y[1]);x9(RH(q,J),"Invalid checksum: "+$+".");var G=DH(J.subarray(0,-8)),Q=G[0],O=G.subarray(1);x9(LH(Q)===O.length*8,"Invalid hash size: "+$+".");var X=zH(Q);return{prefix:q,type:X,hash:O}}var e7=oM.ValidationError,MH=["bitcoincash","bchtest","bchreg"];function VH($){return aM($)&&MH.indexOf($.toLowerCase())!==-1}function pM($){var Y=new Uint8Array($.length);for(var q=0;q<$.length;++q)Y[q]=$[q].charCodeAt(0)&31;return Y}function jH($){var Y=new Uint8Array(8);for(var q=0;q<8;++q)Y[7-q]=$.and(31).toJSNumber(),$=$.shiftRight(5);return Y}function KH($){switch($){case"P2PKH":return 0;case"P2SH":return 8;default:throw new e7("Invalid type: "+$+".")}}function zH($){switch($&120){case 0:return"P2PKH";case 8:return"P2SH";default:throw new e7("Invalid address type in version byte: "+$+".")}}function WH($){switch($.length*8){case 160:return 0;case 192:return 1;case 224:return 2;case 256:return 3;case 320:return 4;case 384:return 5;case 448:return 6;case 512:return 7;default:throw new e7("Invalid hash size: "+$.length+".")}}function LH($){switch($&7){case 0:return 160;case 1:return 192;case 2:return 224;case 3:return 256;case 4:return 320;case 5:return 384;case 6:return 448;case 7:return 512}}function CH($){return uM($,8,5)}function DH($){return uM($,5,8,!0)}function k9($,Y){var q=new Uint8Array($.length+Y.length);return q.set($),q.set(Y,$.length),q}function nM($){var Y=[656907472481,522768456162,1044723512260,748107326120,130178868336],q=ZH(1);for(var J=0;J<$.length;++J){var G=$[J],Q=q.shiftRight(35);q=q.and(34359738367).shiftLeft(5).xor(G);for(var O=0;O<Y.length;++O)if(Q.shiftRight(O).and(1).equals(1))q=q.xor(Y[O])}return q.xor(1)}function RH($,Y){var q=k9(pM($),new Uint8Array(1)),J=k9(q,Y);return nM(J).equals(0)}function aM($){return $===$.toLowerCase()||$===$.toUpperCase()}iM.exports={encode:UH,decode:NH,ValidationError:e7}});var Eq=V8($5(),1);var aV=V8($5(),1),w5=V8(eO(),1);var A9={};EX(A9,{xOnlyPointFromScalar:()=>iX,xOnlyPointFromPoint:()=>aX,xOnlyPointAddTweak:()=>nX,verifySchnorr:()=>pX,verify:()=>oX,signSchnorr:()=>uX,signRecoverable:()=>cX,sign:()=>hX,recover:()=>lX,privateSub:()=>yX,privateNegate:()=>dX,privateAdd:()=>bX,pointMultiply:()=>gX,pointFromScalar:()=>mX,pointCompress:()=>fX,pointAddScalar:()=>xX,pointAdd:()=>kX,isXOnlyPoint:()=>SX,isPrivate:()=>_X,isPointCompressed:()=>vX,isPoint:()=>IX});var FC=RX(),PC=HC(),HX=x4();function BC($){var Y=Object.create(null);if($)Object.keys($).forEach(function(q){if(q!=="default"){var J=Object.getOwnPropertyDescriptor($,q);Object.defineProperty(Y,q,J.get?J:{enumerable:!0,get:function(){return $[q]}})}});return Y.default=$,Object.freeze(Y)}var F0=BC(FC),c8="Expected Private",u8="Expected Point",c5="Expected Tweak",wC="Expected Hash",X7="Expected Signature",z$="Expected Extra Data (32 bytes)",u5="Expected Scalar",TC="Bad Recovery Id";F0.utils.hmacSha256Sync=($,...Y)=>PC.hmac(HX.sha256,$,F0.utils.concatBytes(...Y));F0.utils.sha256Sync=(...$)=>HX.sha256(F0.utils.concatBytes(...$));var W$=F0.utils._normalizePrivateKey,IC=32,vC=32,K$=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65]),_C=32,SC=new Uint8Array(32),kC=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,69,81,35,25,80,183,95,196,64,45,161,114,47,201,186,238]);function xC($){return $ instanceof Uint8Array}function h5($,Y){for(let q=0;q<32;++q)if($[q]!==Y[q])return $[q]<Y[q]?-1:1;return 0}function AX($){return h5($,SC)===0}function o5($){if(!($ instanceof Uint8Array)||$.length!==vC||h5($,K$)>=0)return!1;return!0}function L$($){return $ instanceof Uint8Array&&$.length===64&&h5($.subarray(0,32),K$)<0&&h5($.subarray(32,64),K$)<0}function fC($){return xC($)&&$.length===64&&h5($.subarray(0,32),kC)<0}function mC($){return!(AX($.subarray(0,32))||AX($.subarray(32,64)))}function X5($){return $ instanceof Uint8Array&&$.length===IC}function C$($){return $===void 0||$ instanceof Uint8Array&&$.length===_C}function FX($){if(typeof $!=="string")throw new TypeError("hexToNumber: expected string, got "+typeof $);return BigInt(`0x${$}`)}function gC($){return FX(F0.utils.bytesToHex($))}function D$($){let Y;if(typeof $==="bigint")Y=$;else if(typeof $==="number"&&Number.isSafeInteger($)&&$>=0)Y=BigInt($);else if(typeof $==="string"){if($.length!==64)throw new Error("Expected 32 bytes of private scalar");Y=FX($)}else if($ instanceof Uint8Array){if($.length!==32)throw new Error("Expected 32 bytes of private scalar");Y=gC($)}else throw new TypeError("Expected valid private scalar");if(Y<0)throw new Error("Expected private scalar >= 0");return Y}var bC=($,Y)=>{let q=W$($),J=D$(Y),G=F0.utils._bigintTo32Bytes(F0.utils.mod(q+J,F0.CURVE.n));if(F0.utils.isValidPrivateKey(G))return G;else return null},dC=($,Y)=>{let q=W$($),J=D$(Y),G=F0.utils._bigintTo32Bytes(F0.utils.mod(q-J,F0.CURVE.n));if(F0.utils.isValidPrivateKey(G))return G;else return null},yC=($)=>{let Y=W$($),q=F0.utils._bigintTo32Bytes(F0.CURVE.n-Y);if(F0.utils.isValidPrivateKey(q))return q;else return null},PX=($,Y,q)=>{let J=F0.Point.fromHex($),G=D$(Y),Q=F0.Point.BASE.multiplyAndAddUnsafe(J,G,BigInt(1));if(!Q)throw new Error("Tweaked point at infinity");return Q.toRawBytes(q)},lC=($,Y,q)=>{let J=F0.Point.fromHex($),G=typeof Y==="string"?Y:F0.utils.bytesToHex(Y),Q=BigInt(`0x${G}`);return J.multiply(Q).toRawBytes(q)};function Z5($,Y){if($===void 0)return Y!==void 0?BX(Y):!0;return $?!0:!1}function R9($){try{return $()}catch(Y){return null}}function R$($,Y){if($.length===32!==Y)return!1;try{return!!F0.Point.fromHex($)}catch(q){return!1}}function h8($){return R$($,!1)}function BX($){return R$($,!1)&&$.length===33}function H8($){return F0.utils.isValidPrivateKey($)}function Z7($){return R$($,!0)}function hC($,Y){if(!Z7($))throw new Error(u8);if(!o5(Y))throw new Error(c5);return R9(()=>{let q=PX($,Y,!0);return{parity:q[0]%2===1?1:0,xOnlyPubkey:q.slice(1)}})}function wX($){if(!h8($))throw new Error(u8);return $.slice(1,33)}function TX($,Y){if(!H8($))throw new Error(c8);return R9(()=>F0.getPublicKey($,Z5(Y)))}function cC($){if(!H8($))throw new Error(c8);return wX(TX($))}function uC($,Y){if(!h8($))throw new Error(u8);return F0.Point.fromHex($).toRawBytes(Z5(Y,$))}function oC($,Y,q){if(!h8($))throw new Error(u8);if(!o5(Y))throw new Error(c5);return R9(()=>lC($,Y,Z5(q,$)))}function pC($,Y,q){if(!h8($)||!h8(Y))throw new Error(u8);return R9(()=>{let J=F0.Point.fromHex($),G=F0.Point.fromHex(Y);if(J.equals(G.negate()))return null;else return J.add(G).toRawBytes(Z5(q,$))})}function nC($,Y,q){if(!h8($))throw new Error(u8);if(!o5(Y))throw new Error(c5);return R9(()=>PX($,Y,Z5(q,$)))}function aC($,Y){if(H8($)===!1)throw new Error(c8);if(o5(Y)===!1)throw new Error(c5);return R9(()=>bC($,Y))}function iC($,Y){if(H8($)===!1)throw new Error(c8);if(o5(Y)===!1)throw new Error(c5);return R9(()=>dC($,Y))}function sC($){if(H8($)===!1)throw new Error(c8);return yC($)}function rC($,Y,q){if(!H8(Y))throw new Error(c8);if(!X5($))throw new Error(u5);if(!C$(q))throw new Error(z$);return F0.signSync($,Y,{der:!1,extraEntropy:q})}function tC($,Y,q){if(!H8(Y))throw new Error(c8);if(!X5($))throw new Error(u5);if(!C$(q))throw new Error(z$);let[J,G]=F0.signSync($,Y,{der:!1,extraEntropy:q,recovered:!0});return{signature:J,recoveryId:G}}function eC($,Y,q=Buffer.alloc(32,0)){if(!H8(Y))throw new Error(c8);if(!X5($))throw new Error(u5);if(!C$(q))throw new Error(z$);return F0.schnorr.signSync($,Y,q)}function $D($,Y,q,J){if(!X5($))throw new Error(wC);if(!L$(Y)||!mC(Y))throw new Error(X7);if(q&2){if(!fC(Y))throw new Error(TC)}if(!Z7(Y.subarray(0,32)))throw new Error(X7);return F0.recoverPublicKey($,Y,q,Z5(J))}function YD($,Y,q,J){if(!h8(Y))throw new Error(u8);if(!L$(q))throw new Error(X7);if(!X5($))throw new Error(u5);return F0.verify(q,$,Y,{strict:J})}function qD($,Y,q){if(!Z7(Y))throw new Error(u8);if(!L$(q))throw new Error(X7);if(!X5($))throw new Error(u5);return F0.schnorr.verifySync(q,$,Y)}var IX=h8,vX=BX,_X=H8,SX=Z7,kX=pC,xX=nC,fX=uC,mX=TX,gX=oC,bX=aC,dX=sC,yX=iC,lX=$D,hX=rC,cX=tC,uX=eC,oX=YD,pX=qD,nX=hC,aX=wX,iX=cC;var M9=V8(RM(),1);var sV=V8($5(),1),rV=V8(oY(),1);function YH($){if($.length>=255)throw new TypeError("Alphabet too long");let Y=new Uint8Array(256);for(let U=0;U<Y.length;U++)Y[U]=255;for(let U=0;U<$.length;U++){let N=$.charAt(U),V=N.charCodeAt(0);if(Y[V]!==255)throw new TypeError(N+" is ambiguous");Y[V]=U}let q=$.length,J=$.charAt(0),G=Math.log(q)/Math.log(256),Q=Math.log(256)/Math.log(q);function O(U){if(U instanceof Uint8Array);else if(ArrayBuffer.isView(U))U=new Uint8Array(U.buffer,U.byteOffset,U.byteLength);else if(Array.isArray(U))U=Uint8Array.from(U);if(!(U instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(U.length===0)return"";let N=0,V=0,z=0,L=U.length;while(z!==L&&U[z]===0)z++,N++;let j=(L-z)*Q+1>>>0,D=new Uint8Array(j);while(z!==L){let A=U[z],w=0;for(let I=j-1;(A!==0||w<V)&&I!==-1;I--,w++)A+=256*D[I]>>>0,D[I]=A%q>>>0,A=A/q>>>0;if(A!==0)throw new Error("Non-zero carry");V=w,z++}let B=j-V;while(B!==j&&D[B]===0)B++;let R=J.repeat(N);for(;B<j;++B)R+=$.charAt(D[B]);return R}function X(U){if(typeof U!=="string")throw new TypeError("Expected String");if(U.length===0)return new Uint8Array;let N=0,V=0,z=0;while(U[N]===J)V++,N++;let L=(U.length-N)*G+1>>>0,j=new Uint8Array(L);while(U[N]){let A=Y[U.charCodeAt(N)];if(A===255)return;let w=0;for(let I=L-1;(A!==0||w<z)&&I!==-1;I--,w++)A+=q*j[I]>>>0,j[I]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");z=w,N++}let D=L-z;while(D!==L&&j[D]===0)D++;let B=new Uint8Array(V+(L-D)),R=V;while(D!==L)B[R++]=j[D++];return B}function Z(U){let N=X(U);if(N)return N;throw new Error("Non-base"+q+" character")}return{encode:O,decodeUnsafe:X,decode:Z}}var xM=YH;var qH="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",i7=xM(qH);function pY($){function Y(Q){var O=Uint8Array.from(Q),X=$(O),Z=O.length+4,U=new Uint8Array(Z);return U.set(O,0),U.set(X.subarray(0,4),O.length),i7.encode(U)}function q(Q){var O=Q.slice(0,-4),X=Q.slice(-4),Z=$(O);if(X[0]^Z[0]|X[1]^Z[1]|X[2]^Z[2]|X[3]^Z[3])return;return O}function J(Q){var O=i7.decodeUnsafe(Q);if(O==null)return;return q(O)}function G(Q){var O=i7.decode(Q),X=q(O);if(X==null)throw new Error("Invalid checksum");return X}return{encode:Y,decode:G,decodeUnsafe:J}}function JH($){return nY(nY($))}var aY=pY(JH);var Hq=V8(sM(),1);var D4=V8($5(),1);function rM($){if(!Number.isSafeInteger($)||$<0)throw new Error(`positive integer expected, not ${$}`)}function AH($){return $ instanceof Uint8Array||$!=null&&typeof $==="object"&&$.constructor.name==="Uint8Array"}function w1($,...Y){if(!AH($))throw new Error("Uint8Array expected");if(Y.length>0&&!Y.includes($.length))throw new Error(`Uint8Array expected of length ${Y}, not of length=${$.length}`)}function tM($){if(typeof $!=="function"||typeof $.create!=="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");rM($.outputLen),rM($.blockLen)}function E5($,Y=!0){if($.destroyed)throw new Error("Hash instance has been destroyed");if(Y&&$.finished)throw new Error("Hash#digest() has already been called")}function eM($,Y){w1($);let q=Y.outputLen;if($.length<q)throw new Error(`digestInto() expects output buffer of length at least ${q}`)}var $4=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */var $9=($)=>new DataView($.buffer,$.byteOffset,$.byteLength),p1=($,Y)=>$<<32-Y|$>>>Y,Z6=($,Y)=>$<<Y|$>>>32-Y>>>0,NT=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;var EH=Array.from({length:256},($,Y)=>Y.toString(16).padStart(2,"0"));function YV($){w1($);let Y="";for(let q=0;q<$.length;q++)Y+=EH[$[q]];return Y}var P8={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function $V($){if($>=P8._0&&$<=P8._9)return $-P8._0;if($>=P8._A&&$<=P8._F)return $-(P8._A-10);if($>=P8._a&&$<=P8._f)return $-(P8._a-10);return}function qV($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);let Y=$.length,q=Y/2;if(Y%2)throw new Error("padded hex string expected, got unpadded hex of length "+Y);let J=new Uint8Array(q);for(let G=0,Q=0;G<q;G++,Q+=2){let O=$V($.charCodeAt(Q)),X=$V($.charCodeAt(Q+1));if(O===void 0||X===void 0){let Z=$[Q]+$[Q+1];throw new Error('hex string expected, got non-hex character "'+Z+'" at index '+Q)}J[G]=O*16+X}return J}function sY($){if(typeof $!=="string")throw new Error(`utf8ToBytes expected string, got ${typeof $}`);return new Uint8Array(new TextEncoder().encode($))}function U6($){if(typeof $==="string")$=sY($);return w1($),$}function f9(...$){let Y=0;for(let J=0;J<$.length;J++){let G=$[J];w1(G),Y+=G.length}let q=new Uint8Array(Y);for(let J=0,G=0;J<$.length;J++){let Q=$[J];q.set(Q,G),G+=Q.length}return q}class N6{clone(){return this._cloneInto()}}var MT={}.toString;function H5($){let Y=(J)=>$().update(U6(J)).digest(),q=$();return Y.outputLen=q.outputLen,Y.blockLen=q.blockLen,Y.create=()=>$(),Y}function JV($=32){if($4&&typeof $4.getRandomValues==="function")return $4.getRandomValues(new Uint8Array($));throw new Error("crypto.getRandomValues must be defined")}class rY extends N6{constructor($,Y){super();this.finished=!1,this.destroyed=!1,tM($);let q=U6(Y);if(this.iHash=$.create(),typeof this.iHash.update!=="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let J=this.blockLen,G=new Uint8Array(J);G.set(q.length>J?$.create().update(q).digest():q);for(let Q=0;Q<G.length;Q++)G[Q]^=54;this.iHash.update(G),this.oHash=$.create();for(let Q=0;Q<G.length;Q++)G[Q]^=106;this.oHash.update(G),G.fill(0)}update($){return E5(this),this.iHash.update($),this}digestInto($){E5(this),w1($,this.outputLen),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||($=Object.create(Object.getPrototypeOf(this),{}));let{oHash:Y,iHash:q,finished:J,destroyed:G,blockLen:Q,outputLen:O}=this;return $=$,$.finished=J,$.destroyed=G,$.blockLen=Q,$.outputLen=O,$.oHash=Y._cloneInto($.oHash),$.iHash=q._cloneInto($.iHash),$}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}var F5=($,Y,q)=>new rY($,Y).update(q).digest();F5.create=($,Y)=>new rY($,Y);function HH($,Y,q,J){if(typeof $.setBigUint64==="function")return $.setBigUint64(Y,q,J);let G=BigInt(32),Q=BigInt(4294967295),O=Number(q>>G&Q),X=Number(q&Q),Z=J?4:0,U=J?0:4;$.setUint32(Y+Z,O,J),$.setUint32(Y+U,X,J)}var GV=($,Y,q)=>$&Y^~$&q,QV=($,Y,q)=>$&Y^$&q^Y&q;class m9 extends N6{constructor($,Y,q,J){super();this.blockLen=$,this.outputLen=Y,this.padOffset=q,this.isLE=J,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array($),this.view=$9(this.buffer)}update($){E5(this);let{view:Y,buffer:q,blockLen:J}=this;$=U6($);let G=$.length;for(let Q=0;Q<G;){let O=Math.min(J-this.pos,G-Q);if(O===J){let X=$9($);for(;J<=G-Q;Q+=J)this.process(X,Q);continue}if(q.set($.subarray(Q,Q+O),this.pos),this.pos+=O,Q+=O,this.pos===J)this.process(Y,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){E5(this),eM($,this),this.finished=!0;let{buffer:Y,view:q,blockLen:J,isLE:G}=this,{pos:Q}=this;if(Y[Q++]=128,this.buffer.subarray(Q).fill(0),this.padOffset>J-Q)this.process(q,0),Q=0;for(let N=Q;N<J;N++)Y[N]=0;HH(q,J-8,BigInt(this.length*8),G),this.process(q,0);let O=$9($),X=this.outputLen;if(X%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let Z=X/4,U=this.get();if(Z>U.length)throw new Error("_sha2: outputLen bigger than state");for(let N=0;N<Z;N++)O.setUint32(4*N,U[N],G)}digest(){let{buffer:$,outputLen:Y}=this;this.digestInto($);let q=$.slice(0,Y);return this.destroy(),q}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:Y,buffer:q,length:J,finished:G,destroyed:Q,pos:O}=this;if($.length=J,$.pos=O,$.finished=G,$.destroyed=Q,J%Y)$.buffer.set(q);return $}}var FH=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),XV=new Uint8Array(new Array(16).fill(0).map(($,Y)=>Y)),PH=XV.map(($)=>(9*$+5)%16),tY=[XV],eY=[PH];for(let $=0;$<4;$++)for(let Y of[tY,eY])Y.push(Y[$].map((q)=>FH[q]));var ZV=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(($)=>new Uint8Array($)),BH=tY.map(($,Y)=>$.map((q)=>ZV[Y][q])),wH=eY.map(($,Y)=>$.map((q)=>ZV[Y][q])),TH=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),IH=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function OV($,Y,q,J){if($===0)return Y^q^J;else if($===1)return Y&q|~Y&J;else if($===2)return(Y|~q)^J;else if($===3)return Y&J|q&~J;else return Y^(q|~J)}var Y4=new Uint32Array(16);class UV extends m9{constructor(){super(64,20,8,!0);this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:$,h1:Y,h2:q,h3:J,h4:G}=this;return[$,Y,q,J,G]}set($,Y,q,J,G){this.h0=$|0,this.h1=Y|0,this.h2=q|0,this.h3=J|0,this.h4=G|0}process($,Y){for(let z=0;z<16;z++,Y+=4)Y4[z]=$.getUint32(Y,!0);let q=this.h0|0,J=q,G=this.h1|0,Q=G,O=this.h2|0,X=O,Z=this.h3|0,U=Z,N=this.h4|0,V=N;for(let z=0;z<5;z++){let L=4-z,j=TH[z],D=IH[z],B=tY[z],R=eY[z],A=BH[z],w=wH[z];for(let I=0;I<16;I++){let k=Z6(q+OV(z,G,O,Z)+Y4[B[I]]+j,A[I])+N|0;q=N,N=Z,Z=Z6(O,10)|0,O=G,G=k}for(let I=0;I<16;I++){let k=Z6(J+OV(L,Q,X,U)+Y4[R[I]]+D,w[I])+V|0;J=V,V=U,U=Z6(X,10)|0,X=Q,Q=k}}this.set(this.h1+O+U|0,this.h2+Z+V|0,this.h3+N+J|0,this.h4+q+Q|0,this.h0+G+X|0)}roundClean(){Y4.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}var NV=H5(()=>new UV);var vH=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Y9=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),q9=new Uint32Array(64);class MV extends m9{constructor(){super(64,32,8,!1);this.A=Y9[0]|0,this.B=Y9[1]|0,this.C=Y9[2]|0,this.D=Y9[3]|0,this.E=Y9[4]|0,this.F=Y9[5]|0,this.G=Y9[6]|0,this.H=Y9[7]|0}get(){let{A:$,B:Y,C:q,D:J,E:G,F:Q,G:O,H:X}=this;return[$,Y,q,J,G,Q,O,X]}set($,Y,q,J,G,Q,O,X){this.A=$|0,this.B=Y|0,this.C=q|0,this.D=J|0,this.E=G|0,this.F=Q|0,this.G=O|0,this.H=X|0}process($,Y){for(let N=0;N<16;N++,Y+=4)q9[N]=$.getUint32(Y,!1);for(let N=16;N<64;N++){let V=q9[N-15],z=q9[N-2],L=p1(V,7)^p1(V,18)^V>>>3,j=p1(z,17)^p1(z,19)^z>>>10;q9[N]=j+q9[N-7]+L+q9[N-16]|0}let{A:q,B:J,C:G,D:Q,E:O,F:X,G:Z,H:U}=this;for(let N=0;N<64;N++){let V=p1(O,6)^p1(O,11)^p1(O,25),z=U+V+GV(O,X,Z)+vH[N]+q9[N]|0,j=(p1(q,2)^p1(q,13)^p1(q,22))+QV(q,J,G)|0;U=Z,Z=X,X=O,O=Q+z|0,Q=G,G=J,J=q,q=z+j|0}q=q+this.A|0,J=J+this.B|0,G=G+this.C|0,Q=Q+this.D|0,O=O+this.E|0,X=X+this.F|0,Z=Z+this.G|0,U=U+this.H|0,this.set(q,J,G,Q,O,X,Z,U)}roundClean(){q9.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}var M6=H5(()=>new MV);var q4=BigInt(4294967295),$q=BigInt(32);function VV($,Y=!1){if(Y)return{h:Number($&q4),l:Number($>>$q&q4)};return{h:Number($>>$q&q4)|0,l:Number($&q4)|0}}function _H($,Y=!1){let q=new Uint32Array($.length),J=new Uint32Array($.length);for(let G=0;G<$.length;G++){let{h:Q,l:O}=VV($[G],Y);[q[G],J[G]]=[Q,O]}return[q,J]}var SH=($,Y)=>BigInt($>>>0)<<$q|BigInt(Y>>>0),kH=($,Y,q)=>$>>>q,xH=($,Y,q)=>$<<32-q|Y>>>q,fH=($,Y,q)=>$>>>q|Y<<32-q,mH=($,Y,q)=>$<<32-q|Y>>>q,gH=($,Y,q)=>$<<64-q|Y>>>q-32,bH=($,Y,q)=>$>>>q-32|Y<<64-q,dH=($,Y)=>Y,yH=($,Y)=>$,lH=($,Y,q)=>$<<q|Y>>>32-q,hH=($,Y,q)=>Y<<q|$>>>32-q,cH=($,Y,q)=>Y<<q-32|$>>>64-q,uH=($,Y,q)=>$<<q-32|Y>>>64-q;function oH($,Y,q,J){let G=(Y>>>0)+(J>>>0);return{h:$+q+(G/4294967296|0)|0,l:G|0}}var pH=($,Y,q)=>($>>>0)+(Y>>>0)+(q>>>0),nH=($,Y,q,J)=>Y+q+J+($/4294967296|0)|0,aH=($,Y,q,J)=>($>>>0)+(Y>>>0)+(q>>>0)+(J>>>0),iH=($,Y,q,J,G)=>Y+q+J+G+($/4294967296|0)|0,sH=($,Y,q,J,G)=>($>>>0)+(Y>>>0)+(q>>>0)+(J>>>0)+(G>>>0),rH=($,Y,q,J,G,Q)=>Y+q+J+G+Q+($/4294967296|0)|0;var tH={fromBig:VV,split:_H,toBig:SH,shrSH:kH,shrSL:xH,rotrSH:fH,rotrSL:mH,rotrBH:gH,rotrBL:bH,rotr32H:dH,rotr32L:yH,rotlSH:lH,rotlSL:hH,rotlBH:cH,rotlBL:uH,add:oH,add3L:pH,add3H:nH,add4L:aH,add4H:iH,add5H:rH,add5L:sH},z0=tH;var[eH,$F]=(()=>z0.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(($)=>BigInt($))))(),J9=new Uint32Array(80),G9=new Uint32Array(80);class jV extends m9{constructor(){super(128,64,16,!1);this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:$,Al:Y,Bh:q,Bl:J,Ch:G,Cl:Q,Dh:O,Dl:X,Eh:Z,El:U,Fh:N,Fl:V,Gh:z,Gl:L,Hh:j,Hl:D}=this;return[$,Y,q,J,G,Q,O,X,Z,U,N,V,z,L,j,D]}set($,Y,q,J,G,Q,O,X,Z,U,N,V,z,L,j,D){this.Ah=$|0,this.Al=Y|0,this.Bh=q|0,this.Bl=J|0,this.Ch=G|0,this.Cl=Q|0,this.Dh=O|0,this.Dl=X|0,this.Eh=Z|0,this.El=U|0,this.Fh=N|0,this.Fl=V|0,this.Gh=z|0,this.Gl=L|0,this.Hh=j|0,this.Hl=D|0}process($,Y){for(let A=0;A<16;A++,Y+=4)J9[A]=$.getUint32(Y),G9[A]=$.getUint32(Y+=4);for(let A=16;A<80;A++){let w=J9[A-15]|0,I=G9[A-15]|0,k=z0.rotrSH(w,I,1)^z0.rotrSH(w,I,8)^z0.shrSH(w,I,7),p=z0.rotrSL(w,I,1)^z0.rotrSL(w,I,8)^z0.shrSL(w,I,7),x=J9[A-2]|0,G0=G9[A-2]|0,e=z0.rotrSH(x,G0,19)^z0.rotrBH(x,G0,61)^z0.shrSH(x,G0,6),$0=z0.rotrSL(x,G0,19)^z0.rotrBL(x,G0,61)^z0.shrSL(x,G0,6),U0=z0.add4L(p,$0,G9[A-7],G9[A-16]),W0=z0.add4H(U0,k,e,J9[A-7],J9[A-16]);J9[A]=W0|0,G9[A]=U0|0}let{Ah:q,Al:J,Bh:G,Bl:Q,Ch:O,Cl:X,Dh:Z,Dl:U,Eh:N,El:V,Fh:z,Fl:L,Gh:j,Gl:D,Hh:B,Hl:R}=this;for(let A=0;A<80;A++){let w=z0.rotrSH(N,V,14)^z0.rotrSH(N,V,18)^z0.rotrBH(N,V,41),I=z0.rotrSL(N,V,14)^z0.rotrSL(N,V,18)^z0.rotrBL(N,V,41),k=N&z^~N&j,p=V&L^~V&D,x=z0.add5L(R,I,p,$F[A],G9[A]),G0=z0.add5H(x,B,w,k,eH[A],J9[A]),e=x|0,$0=z0.rotrSH(q,J,28)^z0.rotrBH(q,J,34)^z0.rotrBH(q,J,39),U0=z0.rotrSL(q,J,28)^z0.rotrBL(q,J,34)^z0.rotrBL(q,J,39),W0=q&G^q&O^G&O,N0=J&Q^J&X^Q&X;B=j|0,R=D|0,j=z|0,D=L|0,z=N|0,L=V|0,{h:N,l:V}=z0.add(Z|0,U|0,G0|0,e|0),Z=O|0,U=X|0,O=G|0,X=Q|0,G=q|0,Q=J|0;let Q0=z0.add3L(e,U0,N0);q=z0.add3H(Q0,G0,$0,W0),J=Q0|0}({h:q,l:J}=z0.add(this.Ah|0,this.Al|0,q|0,J|0)),{h:G,l:Q}=z0.add(this.Bh|0,this.Bl|0,G|0,Q|0),{h:O,l:X}=z0.add(this.Ch|0,this.Cl|0,O|0,X|0),{h:Z,l:U}=z0.add(this.Dh|0,this.Dl|0,Z|0,U|0),{h:N,l:V}=z0.add(this.Eh|0,this.El|0,N|0,V|0),{h:z,l:L}=z0.add(this.Fh|0,this.Fl|0,z|0,L|0),{h:j,l:D}=z0.add(this.Gh|0,this.Gl|0,j|0,D|0),{h:B,l:R}=z0.add(this.Hh|0,this.Hl|0,B|0,R|0),this.set(q,J,G,Q,O,X,Z,U,N,V,z,L,j,D,B,R)}roundClean(){J9.fill(0),G9.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}var Yq=H5(()=>new jV);var Qq={};EX(Qq,{validateObject:()=>X9,utf8ToBytes:()=>QF,numberToVarBytesBE:()=>JF,numberToHexUnpadded:()=>LV,numberToBytesLE:()=>Q4,numberToBytesBE:()=>O9,isBytes:()=>Q9,hexToNumber:()=>Jq,hexToBytes:()=>b9,equalBytes:()=>GF,ensureBytes:()=>T1,createHmacDrbg:()=>Gq,concatBytes:()=>B5,bytesToNumberLE:()=>G4,bytesToNumberBE:()=>w8,bytesToHex:()=>g9,bitSet:()=>ZF,bitMask:()=>V6,bitLen:()=>OF,bitGet:()=>XF,abytes:()=>P5});/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var WV=BigInt(0),J4=BigInt(1),YF=BigInt(2);function Q9($){return $ instanceof Uint8Array||$!=null&&typeof $==="object"&&$.constructor.name==="Uint8Array"}function P5($){if(!Q9($))throw new Error("Uint8Array expected")}var qF=Array.from({length:256},($,Y)=>Y.toString(16).padStart(2,"0"));function g9($){P5($);let Y="";for(let q=0;q<$.length;q++)Y+=qF[$[q]];return Y}function LV($){let Y=$.toString(16);return Y.length&1?`0${Y}`:Y}function Jq($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);return BigInt($===""?"0":`0x${$}`)}var B8={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function KV($){if($>=B8._0&&$<=B8._9)return $-B8._0;if($>=B8._A&&$<=B8._F)return $-(B8._A-10);if($>=B8._a&&$<=B8._f)return $-(B8._a-10);return}function b9($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);let Y=$.length,q=Y/2;if(Y%2)throw new Error("padded hex string expected, got unpadded hex of length "+Y);let J=new Uint8Array(q);for(let G=0,Q=0;G<q;G++,Q+=2){let O=KV($.charCodeAt(Q)),X=KV($.charCodeAt(Q+1));if(O===void 0||X===void 0){let Z=$[Q]+$[Q+1];throw new Error('hex string expected, got non-hex character "'+Z+'" at index '+Q)}J[G]=O*16+X}return J}function w8($){return Jq(g9($))}function G4($){return P5($),Jq(g9(Uint8Array.from($).reverse()))}function O9($,Y){return b9($.toString(16).padStart(Y*2,"0"))}function Q4($,Y){return O9($,Y).reverse()}function JF($){return b9(LV($))}function T1($,Y,q){let J;if(typeof Y==="string")try{J=b9(Y)}catch(Q){throw new Error(`${$} must be valid hex string, got "${Y}". Cause: ${Q}`)}else if(Q9(Y))J=Uint8Array.from(Y);else throw new Error(`${$} must be hex string or Uint8Array`);let G=J.length;if(typeof q==="number"&&G!==q)throw new Error(`${$} expected ${q} bytes, got ${G}`);return J}function B5(...$){let Y=0;for(let J=0;J<$.length;J++){let G=$[J];P5(G),Y+=G.length}let q=new Uint8Array(Y);for(let J=0,G=0;J<$.length;J++){let Q=$[J];q.set(Q,G),G+=Q.length}return q}function GF($,Y){if($.length!==Y.length)return!1;let q=0;for(let J=0;J<$.length;J++)q|=$[J]^Y[J];return q===0}function QF($){if(typeof $!=="string")throw new Error(`utf8ToBytes expected string, got ${typeof $}`);return new Uint8Array(new TextEncoder().encode($))}function OF($){let Y;for(Y=0;$>WV;$>>=J4,Y+=1);return Y}function XF($,Y){return $>>BigInt(Y)&J4}function ZF($,Y,q){return $|(q?J4:WV)<<BigInt(Y)}var V6=($)=>(YF<<BigInt($-1))-J4,qq=($)=>new Uint8Array($),zV=($)=>Uint8Array.from($);function Gq($,Y,q){if(typeof $!=="number"||$<2)throw new Error("hashLen must be a number");if(typeof Y!=="number"||Y<2)throw new Error("qByteLen must be a number");if(typeof q!=="function")throw new Error("hmacFn must be a function");let J=qq($),G=qq($),Q=0,O=()=>{J.fill(1),G.fill(0),Q=0},X=(...V)=>q(G,J,...V),Z=(V=qq())=>{if(G=X(zV([0]),V),J=X(),V.length===0)return;G=X(zV([1]),V),J=X()},U=()=>{if(Q++>=1000)throw new Error("drbg: tried 1000 values");let V=0,z=[];while(V<Y){J=X();let L=J.slice();z.push(L),V+=J.length}return B5(...z)};return(V,z)=>{O(),Z(V);let L=void 0;while(!(L=z(U())))Z();return O(),L}}var UF={bigint:($)=>typeof $==="bigint",function:($)=>typeof $==="function",boolean:($)=>typeof $==="boolean",string:($)=>typeof $==="string",stringOrUint8Array:($)=>typeof $==="string"||Q9($),isSafeInteger:($)=>Number.isSafeInteger($),array:($)=>Array.isArray($),field:($,Y)=>Y.Fp.isValid($),hash:($)=>typeof $==="function"&&Number.isSafeInteger($.outputLen)};function X9($,Y,q={}){let J=(G,Q,O)=>{let X=UF[Q];if(typeof X!=="function")throw new Error(`Invalid validator "${Q}", expected function`);let Z=$[G];if(O&&Z===void 0)return;if(!X(Z,$))throw new Error(`Invalid param ${String(G)}=${Z} (${typeof Z}), expected ${Q}`)};for(let[G,Q]of Object.entries(Y))J(G,Q,!1);for(let[G,Q]of Object.entries(q))J(G,Q,!0);return $}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var e0=BigInt(0),y0=BigInt(1),d9=BigInt(2),NF=BigInt(3),Oq=BigInt(4),CV=BigInt(5),DV=BigInt(8),MF=BigInt(9),VF=BigInt(16);function J1($,Y){let q=$%Y;return q>=e0?q:Y+q}function jF($,Y,q){if(q<=e0||Y<e0)throw new Error("Expected power/modulo > 0");if(q===y0)return e0;let J=y0;while(Y>e0){if(Y&y0)J=J*$%q;$=$*$%q,Y>>=y0}return J}function I1($,Y,q){let J=$;while(Y-- >e0)J*=J,J%=q;return J}function O4($,Y){if($===e0||Y<=e0)throw new Error(`invert: expected positive integers, got n=${$} mod=${Y}`);let q=J1($,Y),J=Y,G=e0,Q=y0,O=y0,X=e0;while(q!==e0){let U=J/q,N=J%q,V=G-O*U,z=Q-X*U;J=q,q=N,G=O,Q=X,O=V,X=z}if(J!==y0)throw new Error("invert: does not exist");return J1(G,Y)}function KF($){let Y=($-y0)/d9,q,J,G;for(q=$-y0,J=0;q%d9===e0;q/=d9,J++);for(G=d9;G<$&&jF(G,Y,$)!==$-y0;G++);if(J===1){let O=($+y0)/Oq;return function X(Z,U){let N=Z.pow(U,O);if(!Z.eql(Z.sqr(N),U))throw new Error("Cannot find square root");return N}}let Q=(q+y0)/d9;return function O(X,Z){if(X.pow(Z,Y)===X.neg(X.ONE))throw new Error("Cannot find square root");let U=J,N=X.pow(X.mul(X.ONE,G),q),V=X.pow(Z,Q),z=X.pow(Z,q);while(!X.eql(z,X.ONE)){if(X.eql(z,X.ZERO))return X.ZERO;let L=1;for(let D=X.sqr(z);L<U;L++){if(X.eql(D,X.ONE))break;D=X.sqr(D)}let j=X.pow(N,y0<<BigInt(U-L-1));N=X.sqr(j),V=X.mul(V,j),z=X.mul(z,N),U=L}return V}}function zF($){if($%Oq===NF){let Y=($+y0)/Oq;return function q(J,G){let Q=J.pow(G,Y);if(!J.eql(J.sqr(Q),G))throw new Error("Cannot find square root");return Q}}if($%DV===CV){let Y=($-CV)/DV;return function q(J,G){let Q=J.mul(G,d9),O=J.pow(Q,Y),X=J.mul(G,O),Z=J.mul(J.mul(X,d9),O),U=J.mul(X,J.sub(Z,J.ONE));if(!J.eql(J.sqr(U),G))throw new Error("Cannot find square root");return U}}if($%VF===MF);return KF($)}var WF=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Xq($){let Y={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},q=WF.reduce((J,G)=>{return J[G]="function",J},Y);return X9($,q)}function LF($,Y,q){if(q<e0)throw new Error("Expected power > 0");if(q===e0)return $.ONE;if(q===y0)return Y;let J=$.ONE,G=Y;while(q>e0){if(q&y0)J=$.mul(J,G);G=$.sqr(G),q>>=y0}return J}function CF($,Y){let q=new Array(Y.length),J=Y.reduce((Q,O,X)=>{if($.is0(O))return Q;return q[X]=Q,$.mul(Q,O)},$.ONE),G=$.inv(J);return Y.reduceRight((Q,O,X)=>{if($.is0(O))return Q;return q[X]=$.mul(Q,q[X]),$.mul(Q,O)},G),q}function Zq($,Y){let q=Y!==void 0?Y:$.toString(2).length,J=Math.ceil(q/8);return{nBitLength:q,nByteLength:J}}function RV($,Y,q=!1,J={}){if($<=e0)throw new Error(`Expected Field ORDER > 0, got ${$}`);let{nBitLength:G,nByteLength:Q}=Zq($,Y);if(Q>2048)throw new Error("Field lengths over 2048 bytes are not supported");let O=zF($),X=Object.freeze({ORDER:$,BITS:G,BYTES:Q,MASK:V6(G),ZERO:e0,ONE:y0,create:(Z)=>J1(Z,$),isValid:(Z)=>{if(typeof Z!=="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof Z}`);return e0<=Z&&Z<$},is0:(Z)=>Z===e0,isOdd:(Z)=>(Z&y0)===y0,neg:(Z)=>J1(-Z,$),eql:(Z,U)=>Z===U,sqr:(Z)=>J1(Z*Z,$),add:(Z,U)=>J1(Z+U,$),sub:(Z,U)=>J1(Z-U,$),mul:(Z,U)=>J1(Z*U,$),pow:(Z,U)=>LF(X,Z,U),div:(Z,U)=>J1(Z*O4(U,$),$),sqrN:(Z)=>Z*Z,addN:(Z,U)=>Z+U,subN:(Z,U)=>Z-U,mulN:(Z,U)=>Z*U,inv:(Z)=>O4(Z,$),sqrt:J.sqrt||((Z)=>O(X,Z)),invertBatch:(Z)=>CF(X,Z),cmov:(Z,U,N)=>N?U:Z,toBytes:(Z)=>q?Q4(Z,Q):O9(Z,Q),fromBytes:(Z)=>{if(Z.length!==Q)throw new Error(`Fp.fromBytes: expected ${Q}, got ${Z.length}`);return q?G4(Z):w8(Z)}});return Object.freeze(X)}function AV($){if(typeof $!=="bigint")throw new Error("field order must be bigint");let Y=$.toString(2).length;return Math.ceil(Y/8)}function Uq($){let Y=AV($);return Y+Math.ceil(Y/2)}function EV($,Y,q=!1){let J=$.length,G=AV(Y),Q=Uq(Y);if(J<16||J<Q||J>1024)throw new Error(`expected ${Q}-1024 bytes of input, got ${J}`);let O=q?w8($):G4($),X=J1(O,Y-y0)+y0;return q?Q4(X,G):O9(X,G)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var RF=BigInt(0),Nq=BigInt(1);function HV($,Y){let q=(G,Q)=>{let O=Q.negate();return G?O:Q},J=(G)=>{let Q=Math.ceil(Y/G)+1,O=2**(G-1);return{windows:Q,windowSize:O}};return{constTimeNegate:q,unsafeLadder(G,Q){let O=$.ZERO,X=G;while(Q>RF){if(Q&Nq)O=O.add(X);X=X.double(),Q>>=Nq}return O},precomputeWindow(G,Q){let{windows:O,windowSize:X}=J(Q),Z=[],U=G,N=U;for(let V=0;V<O;V++){N=U,Z.push(N);for(let z=1;z<X;z++)N=N.add(U),Z.push(N);U=N.double()}return Z},wNAF(G,Q,O){let{windows:X,windowSize:Z}=J(G),U=$.ZERO,N=$.BASE,V=BigInt(2**G-1),z=2**G,L=BigInt(G);for(let j=0;j<X;j++){let D=j*Z,B=Number(O&V);if(O>>=L,B>Z)B-=z,O+=Nq;let R=D,A=D+Math.abs(B)-1,w=j%2!==0,I=B<0;if(B===0)N=N.add(q(w,Q[R]));else U=U.add(q(I,Q[A]))}return{p:U,f:N}},wNAFCached(G,Q,O,X){let Z=G._WINDOW_SIZE||1,U=Q.get(G);if(!U){if(U=this.precomputeWindow(G,Z),Z!==1)Q.set(G,X(U))}return this.wNAF(Z,U,O)}}}function Mq($){return Xq($.Fp),X9($,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Zq($.n,$.nBitLength),...$,...{p:$.Fp.ORDER}})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function AF($){let Y=Mq($);X9(Y,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:q,Fp:J,a:G}=Y;if(q){if(!J.eql(G,J.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof q!=="object"||typeof q.beta!=="bigint"||typeof q.splitScalar!=="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...Y})}var{bytesToNumberBE:EF,hexToBytes:HF}=Qq,y9={Err:class $ extends Error{constructor(Y=""){super(Y)}},_parseInt($){let{Err:Y}=y9;if($.length<2||$[0]!==2)throw new Y("Invalid signature integer tag");let q=$[1],J=$.subarray(2,q+2);if(!q||J.length!==q)throw new Y("Invalid signature integer: wrong length");if(J[0]&128)throw new Y("Invalid signature integer: negative");if(J[0]===0&&!(J[1]&128))throw new Y("Invalid signature integer: unnecessary leading zero");return{d:EF(J),l:$.subarray(q+2)}},toSig($){let{Err:Y}=y9,q=typeof $==="string"?HF($):$;P5(q);let J=q.length;if(J<2||q[0]!=48)throw new Y("Invalid signature tag");if(q[1]!==J-2)throw new Y("Invalid signature: incorrect length");let{d:G,l:Q}=y9._parseInt(q.subarray(2)),{d:O,l:X}=y9._parseInt(Q);if(X.length)throw new Y("Invalid signature: left bytes after parsing");return{r:G,s:O}},hexFromSig($){let Y=(U)=>Number.parseInt(U[0],16)&8?"00"+U:U,q=(U)=>{let N=U.toString(16);return N.length&1?`0${N}`:N},J=Y(q($.s)),G=Y(q($.r)),Q=J.length/2,O=G.length/2,X=q(Q),Z=q(O);return`30${q(O+Q+4)}02${Z}${G}02${X}${J}`}},T8=BigInt(0),l1=BigInt(1),mT=BigInt(2),FV=BigInt(3),gT=BigInt(4);function FF($){let Y=AF($),{Fp:q}=Y,J=Y.toBytes||((j,D,B)=>{let R=D.toAffine();return B5(Uint8Array.from([4]),q.toBytes(R.x),q.toBytes(R.y))}),G=Y.fromBytes||((j)=>{let D=j.subarray(1),B=q.fromBytes(D.subarray(0,q.BYTES)),R=q.fromBytes(D.subarray(q.BYTES,2*q.BYTES));return{x:B,y:R}});function Q(j){let{a:D,b:B}=Y,R=q.sqr(j),A=q.mul(R,j);return q.add(q.add(A,q.mul(j,D)),B)}if(!q.eql(q.sqr(Y.Gy),Q(Y.Gx)))throw new Error("bad generator point: equation left != right");function O(j){return typeof j==="bigint"&&T8<j&&j<Y.n}function X(j){if(!O(j))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function Z(j){let{allowedPrivateKeyLengths:D,nByteLength:B,wrapPrivateKey:R,n:A}=Y;if(D&&typeof j!=="bigint"){if(Q9(j))j=g9(j);if(typeof j!=="string"||!D.includes(j.length))throw new Error("Invalid key");j=j.padStart(B*2,"0")}let w;try{w=typeof j==="bigint"?j:w8(T1("private key",j,B))}catch(I){throw new Error(`private key must be ${B} bytes, hex or bigint, not ${typeof j}`)}if(R)w=J1(w,A);return X(w),w}let U=new Map;function N(j){if(!(j instanceof V))throw new Error("ProjectivePoint expected")}class V{constructor(j,D,B){if(this.px=j,this.py=D,this.pz=B,j==null||!q.isValid(j))throw new Error("x required");if(D==null||!q.isValid(D))throw new Error("y required");if(B==null||!q.isValid(B))throw new Error("z required")}static fromAffine(j){let{x:D,y:B}=j||{};if(!j||!q.isValid(D)||!q.isValid(B))throw new Error("invalid affine point");if(j instanceof V)throw new Error("projective point not allowed");let R=(A)=>q.eql(A,q.ZERO);if(R(D)&&R(B))return V.ZERO;return new V(D,B,q.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(j){let D=q.invertBatch(j.map((B)=>B.pz));return j.map((B,R)=>B.toAffine(D[R])).map(V.fromAffine)}static fromHex(j){let D=V.fromAffine(G(T1("pointHex",j)));return D.assertValidity(),D}static fromPrivateKey(j){return V.BASE.multiply(Z(j))}_setWindowSize(j){this._WINDOW_SIZE=j,U.delete(this)}assertValidity(){if(this.is0()){if(Y.allowInfinityPoint&&!q.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:j,y:D}=this.toAffine();if(!q.isValid(j)||!q.isValid(D))throw new Error("bad point: x or y not FE");let B=q.sqr(D),R=Q(j);if(!q.eql(B,R))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:j}=this.toAffine();if(q.isOdd)return!q.isOdd(j);throw new Error("Field doesn't support isOdd")}equals(j){N(j);let{px:D,py:B,pz:R}=this,{px:A,py:w,pz:I}=j,k=q.eql(q.mul(D,I),q.mul(A,R)),p=q.eql(q.mul(B,I),q.mul(w,R));return k&&p}negate(){return new V(this.px,q.neg(this.py),this.pz)}double(){let{a:j,b:D}=Y,B=q.mul(D,FV),{px:R,py:A,pz:w}=this,I=q.ZERO,k=q.ZERO,p=q.ZERO,x=q.mul(R,R),G0=q.mul(A,A),e=q.mul(w,w),$0=q.mul(R,A);return $0=q.add($0,$0),p=q.mul(R,w),p=q.add(p,p),I=q.mul(j,p),k=q.mul(B,e),k=q.add(I,k),I=q.sub(G0,k),k=q.add(G0,k),k=q.mul(I,k),I=q.mul($0,I),p=q.mul(B,p),e=q.mul(j,e),$0=q.sub(x,e),$0=q.mul(j,$0),$0=q.add($0,p),p=q.add(x,x),x=q.add(p,x),x=q.add(x,e),x=q.mul(x,$0),k=q.add(k,x),e=q.mul(A,w),e=q.add(e,e),x=q.mul(e,$0),I=q.sub(I,x),p=q.mul(e,G0),p=q.add(p,p),p=q.add(p,p),new V(I,k,p)}add(j){N(j);let{px:D,py:B,pz:R}=this,{px:A,py:w,pz:I}=j,k=q.ZERO,p=q.ZERO,x=q.ZERO,G0=Y.a,e=q.mul(Y.b,FV),$0=q.mul(D,A),U0=q.mul(B,w),W0=q.mul(R,I),N0=q.add(D,B),Q0=q.add(A,w);N0=q.mul(N0,Q0),Q0=q.add($0,U0),N0=q.sub(N0,Q0),Q0=q.add(D,R);let g=q.add(A,I);return Q0=q.mul(Q0,g),g=q.add($0,W0),Q0=q.sub(Q0,g),g=q.add(B,R),k=q.add(w,I),g=q.mul(g,k),k=q.add(U0,W0),g=q.sub(g,k),x=q.mul(G0,Q0),k=q.mul(e,W0),x=q.add(k,x),k=q.sub(U0,x),x=q.add(U0,x),p=q.mul(k,x),U0=q.add($0,$0),U0=q.add(U0,$0),W0=q.mul(G0,W0),Q0=q.mul(e,Q0),U0=q.add(U0,W0),W0=q.sub($0,W0),W0=q.mul(G0,W0),Q0=q.add(Q0,W0),$0=q.mul(U0,Q0),p=q.add(p,$0),$0=q.mul(g,Q0),k=q.mul(N0,k),k=q.sub(k,$0),$0=q.mul(N0,U0),x=q.mul(g,x),x=q.add(x,$0),new V(k,p,x)}subtract(j){return this.add(j.negate())}is0(){return this.equals(V.ZERO)}wNAF(j){return L.wNAFCached(this,U,j,(D)=>{let B=q.invertBatch(D.map((R)=>R.pz));return D.map((R,A)=>R.toAffine(B[A])).map(V.fromAffine)})}multiplyUnsafe(j){let D=V.ZERO;if(j===T8)return D;if(X(j),j===l1)return this;let{endo:B}=Y;if(!B)return L.unsafeLadder(this,j);let{k1neg:R,k1:A,k2neg:w,k2:I}=B.splitScalar(j),k=D,p=D,x=this;while(A>T8||I>T8){if(A&l1)k=k.add(x);if(I&l1)p=p.add(x);x=x.double(),A>>=l1,I>>=l1}if(R)k=k.negate();if(w)p=p.negate();return p=new V(q.mul(p.px,B.beta),p.py,p.pz),k.add(p)}multiply(j){X(j);let D=j,B,R,{endo:A}=Y;if(A){let{k1neg:w,k1:I,k2neg:k,k2:p}=A.splitScalar(D),{p:x,f:G0}=this.wNAF(I),{p:e,f:$0}=this.wNAF(p);x=L.constTimeNegate(w,x),e=L.constTimeNegate(k,e),e=new V(q.mul(e.px,A.beta),e.py,e.pz),B=x.add(e),R=G0.add($0)}else{let{p:w,f:I}=this.wNAF(D);B=w,R=I}return V.normalizeZ([B,R])[0]}multiplyAndAddUnsafe(j,D,B){let R=V.BASE,A=(I,k)=>k===T8||k===l1||!I.equals(R)?I.multiplyUnsafe(k):I.multiply(k),w=A(this,D).add(A(j,B));return w.is0()?void 0:w}toAffine(j){let{px:D,py:B,pz:R}=this,A=this.is0();if(j==null)j=A?q.ONE:q.inv(R);let w=q.mul(D,j),I=q.mul(B,j),k=q.mul(R,j);if(A)return{x:q.ZERO,y:q.ZERO};if(!q.eql(k,q.ONE))throw new Error("invZ was invalid");return{x:w,y:I}}isTorsionFree(){let{h:j,isTorsionFree:D}=Y;if(j===l1)return!0;if(D)return D(V,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:j,clearCofactor:D}=Y;if(j===l1)return this;if(D)return D(V,this);return this.multiplyUnsafe(Y.h)}toRawBytes(j=!0){return this.assertValidity(),J(V,this,j)}toHex(j=!0){return g9(this.toRawBytes(j))}}V.BASE=new V(Y.Gx,Y.Gy,q.ONE),V.ZERO=new V(q.ZERO,q.ONE,q.ZERO);let z=Y.nBitLength,L=HV(V,Y.endo?Math.ceil(z/2):z);return{CURVE:Y,ProjectivePoint:V,normPrivateKeyToScalar:Z,weierstrassEquation:Q,isWithinCurveOrder:O}}function PF($){let Y=Mq($);return X9(Y,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...Y})}function PV($){let Y=PF($),{Fp:q,n:J}=Y,G=q.BYTES+1,Q=2*q.BYTES+1;function O(g){return T8<g&&g<q.ORDER}function X(g){return J1(g,J)}function Z(g){return O4(g,J)}let{ProjectivePoint:U,normPrivateKeyToScalar:N,weierstrassEquation:V,isWithinCurveOrder:z}=FF({...Y,toBytes(g,a,l){let f=a.toAffine(),h=q.toBytes(f.x),o=B5;if(l)return o(Uint8Array.from([a.hasEvenY()?2:3]),h);else return o(Uint8Array.from([4]),h,q.toBytes(f.y))},fromBytes(g){let a=g.length,l=g[0],f=g.subarray(1);if(a===G&&(l===2||l===3)){let h=w8(f);if(!O(h))throw new Error("Point is not on curve");let o=V(h),q0;try{q0=q.sqrt(o)}catch(H){let v=H instanceof Error?": "+H.message:"";throw new Error("Point is not on curve"+v)}let P=(q0&l1)===l1;if((l&1)===1!==P)q0=q.neg(q0);return{x:h,y:q0}}else if(a===Q&&l===4){let h=q.fromBytes(f.subarray(0,q.BYTES)),o=q.fromBytes(f.subarray(q.BYTES,2*q.BYTES));return{x:h,y:o}}else throw new Error(`Point of length ${a} was invalid. Expected ${G} compressed bytes or ${Q} uncompressed bytes`)}}),L=(g)=>g9(O9(g,Y.nByteLength));function j(g){let a=J>>l1;return g>a}function D(g){return j(g)?X(-g):g}let B=(g,a,l)=>w8(g.slice(a,l));class R{constructor(g,a,l){this.r=g,this.s=a,this.recovery=l,this.assertValidity()}static fromCompact(g){let a=Y.nByteLength;return g=T1("compactSignature",g,a*2),new R(B(g,0,a),B(g,a,2*a))}static fromDER(g){let{r:a,s:l}=y9.toSig(T1("DER",g));return new R(a,l)}assertValidity(){if(!z(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!z(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(g){return new R(this.r,this.s,g)}recoverPublicKey(g){let{r:a,s:l,recovery:f}=this,h=x(T1("msgHash",g));if(f==null||![0,1,2,3].includes(f))throw new Error("recovery id invalid");let o=f===2||f===3?a+Y.n:a;if(o>=q.ORDER)throw new Error("recovery id 2 or 3 invalid");let q0=(f&1)===0?"02":"03",P=U.fromHex(q0+L(o)),E=Z(o),H=X(-h*E),v=X(l*E),b=U.BASE.multiplyAndAddUnsafe(P,H,v);if(!b)throw new Error("point at infinify");return b.assertValidity(),b}hasHighS(){return j(this.s)}normalizeS(){return this.hasHighS()?new R(this.r,X(-this.s),this.recovery):this}toDERRawBytes(){return b9(this.toDERHex())}toDERHex(){return y9.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return b9(this.toCompactHex())}toCompactHex(){return L(this.r)+L(this.s)}}let A={isValidPrivateKey(g){try{return N(g),!0}catch(a){return!1}},normPrivateKeyToScalar:N,randomPrivateKey:()=>{let g=Uq(Y.n);return EV(Y.randomBytes(g),Y.n)},precompute(g=8,a=U.BASE){return a._setWindowSize(g),a.multiply(BigInt(3)),a}};function w(g,a=!0){return U.fromPrivateKey(g).toRawBytes(a)}function I(g){let a=Q9(g),l=typeof g==="string",f=(a||l)&&g.length;if(a)return f===G||f===Q;if(l)return f===2*G||f===2*Q;if(g instanceof U)return!0;return!1}function k(g,a,l=!0){if(I(g))throw new Error("first arg must be private key");if(!I(a))throw new Error("second arg must be public key");return U.fromHex(a).multiply(N(g)).toRawBytes(l)}let p=Y.bits2int||function(g){let a=w8(g),l=g.length*8-Y.nBitLength;return l>0?a>>BigInt(l):a},x=Y.bits2int_modN||function(g){return X(p(g))},G0=V6(Y.nBitLength);function e(g){if(typeof g!=="bigint")throw new Error("bigint expected");if(!(T8<=g&&g<G0))throw new Error(`bigint expected < 2^${Y.nBitLength}`);return O9(g,Y.nByteLength)}function $0(g,a,l=U0){if(["recovered","canonical"].some((i)=>(i in l)))throw new Error("sign() legacy options not supported");let{hash:f,randomBytes:h}=Y,{lowS:o,prehash:q0,extraEntropy:P}=l;if(o==null)o=!0;if(g=T1("msgHash",g),q0)g=T1("prehashed msgHash",f(g));let E=x(g),H=N(a),v=[e(H),e(E)];if(P!=null&&P!==!1){let i=P===!0?h(q.BYTES):P;v.push(T1("extraEntropy",i))}let b=B5(...v),u=E;function m(i){let O0=p(i);if(!z(O0))return;let P0=Z(O0),V0=U.BASE.multiply(O0).toAffine(),i0=X(V0.x);if(i0===T8)return;let g0=X(P0*X(u+i0*H));if(g0===T8)return;let $1=(V0.x===i0?0:2)|Number(V0.y&l1),b0=g0;if(o&&j(g0))b0=D(g0),$1^=1;return new R(i0,b0,$1)}return{seed:b,k2sig:m}}let U0={lowS:Y.lowS,prehash:!1},W0={lowS:Y.lowS,prehash:!1};function N0(g,a,l=U0){let{seed:f,k2sig:h}=$0(g,a,l),o=Y;return Gq(o.hash.outputLen,o.nByteLength,o.hmac)(f,h)}U.BASE._setWindowSize(8);function Q0(g,a,l,f=W0){let h=g;if(a=T1("msgHash",a),l=T1("publicKey",l),"strict"in f)throw new Error("options.strict was renamed to lowS");let{lowS:o,prehash:q0}=f,P=void 0,E;try{if(typeof h==="string"||Q9(h))try{P=R.fromDER(h)}catch(V0){if(!(V0 instanceof y9.Err))throw V0;P=R.fromCompact(h)}else if(typeof h==="object"&&typeof h.r==="bigint"&&typeof h.s==="bigint"){let{r:V0,s:i0}=h;P=new R(V0,i0)}else throw new Error("PARSE");E=U.fromHex(l)}catch(V0){if(V0.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(o&&P.hasHighS())return!1;if(q0)a=Y.hash(a);let{r:H,s:v}=P,b=x(a),u=Z(v),m=X(b*u),i=X(H*u),O0=U.BASE.multiplyAndAddUnsafe(E,m,i)?.toAffine();if(!O0)return!1;return X(O0.x)===H}return{CURVE:Y,getPublicKey:w,getSharedSecret:k,sign:N0,verify:Q0,ProjectivePoint:U,Signature:R,utils:A}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function BF($){return{hash:$,hmac:(Y,...q)=>F5($,Y,f9(...q)),randomBytes:JV}}function BV($,Y){let q=(J)=>PV({...$,...BF(J)});return Object.freeze({...q(Y),create:q})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var IV=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),wV=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),wF=BigInt(1),Vq=BigInt(2),TV=($,Y)=>($+Y/Vq)/Y;function TF($){let Y=IV,q=BigInt(3),J=BigInt(6),G=BigInt(11),Q=BigInt(22),O=BigInt(23),X=BigInt(44),Z=BigInt(88),U=$*$*$%Y,N=U*U*$%Y,V=I1(N,q,Y)*N%Y,z=I1(V,q,Y)*N%Y,L=I1(z,Vq,Y)*U%Y,j=I1(L,G,Y)*L%Y,D=I1(j,Q,Y)*j%Y,B=I1(D,X,Y)*D%Y,R=I1(B,Z,Y)*B%Y,A=I1(R,X,Y)*D%Y,w=I1(A,q,Y)*N%Y,I=I1(w,O,Y)*j%Y,k=I1(I,J,Y)*U%Y,p=I1(k,Vq,Y);if(!jq.eql(jq.sqr(p),$))throw new Error("Cannot find square root");return p}var jq=RV(IV,void 0,void 0,{sqrt:TF}),n1=BV({a:BigInt(0),b:BigInt(7),Fp:jq,n:wV,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:($)=>{let Y=wV,q=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),J=-wF*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),G=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),Q=q,O=BigInt("0x100000000000000000000000000000000"),X=TV(Q*$,Y),Z=TV(-J*$,Y),U=J1($-X*q-Z*G,Y),N=J1(-X*J-Z*Q,Y),V=U>O,z=N>O;if(V)U=Y-U;if(z)N=Y-N;if(U>O||N>O)throw new Error("splitScalar: Endomorphism failed, k="+$);return{k1neg:V,k1:U,k2neg:z,k2:N}}}},M6),pT=BigInt(0);var nT=n1.ProjectivePoint;/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function l9($){if(!Number.isSafeInteger($))throw new Error(`Wrong integer: ${$}`)}function X4($){return $ instanceof Uint8Array||$!=null&&typeof $==="object"&&$.constructor.name==="Uint8Array"}function H1(...$){let Y=(Q)=>Q,q=(Q,O)=>(X)=>Q(O(X)),J=$.map((Q)=>Q.encode).reduceRight(q,Y),G=$.map((Q)=>Q.decode).reduce(q,Y);return{encode:J,decode:G}}function v1($){return{encode:(Y)=>{if(!Array.isArray(Y)||Y.length&&typeof Y[0]!=="number")throw new Error("alphabet.encode input should be an array of numbers");return Y.map((q)=>{if(l9(q),q<0||q>=$.length)throw new Error(`Digit index outside alphabet: ${q} (alphabet: ${$.length})`);return $[q]})},decode:(Y)=>{if(!Array.isArray(Y)||Y.length&&typeof Y[0]!=="string")throw new Error("alphabet.decode input should be array of strings");return Y.map((q)=>{if(typeof q!=="string")throw new Error(`alphabet.decode: not string element=${q}`);let J=$.indexOf(q);if(J===-1)throw new Error(`Unknown letter: "${q}". Allowed: ${$}`);return J})}}}function _1($=""){if(typeof $!=="string")throw new Error("join separator should be string");return{encode:(Y)=>{if(!Array.isArray(Y)||Y.length&&typeof Y[0]!=="string")throw new Error("join.encode input should be array of strings");for(let q of Y)if(typeof q!=="string")throw new Error(`join.encode: non-string input=${q}`);return Y.join($)},decode:(Y)=>{if(typeof Y!=="string")throw new Error("join.decode input should be string");return Y.split($)}}}function U4($,Y="="){if(l9($),typeof Y!=="string")throw new Error("padding chr should be string");return{encode(q){if(!Array.isArray(q)||q.length&&typeof q[0]!=="string")throw new Error("padding.encode input should be array of strings");for(let J of q)if(typeof J!=="string")throw new Error(`padding.encode: non-string input=${J}`);while(q.length*$%8)q.push(Y);return q},decode(q){if(!Array.isArray(q)||q.length&&typeof q[0]!=="string")throw new Error("padding.encode input should be array of strings");for(let G of q)if(typeof G!=="string")throw new Error(`padding.decode: non-string input=${G}`);let J=q.length;if(J*$%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;J>0&&q[J-1]===Y;J--)if(!((J-1)*$%8))throw new Error("Invalid padding: string has too much padding");return q.slice(0,J)}}}function SV($){if(typeof $!=="function")throw new Error("normalize fn should be function");return{encode:(Y)=>Y,decode:(Y)=>$(Y)}}function vV($,Y,q){if(Y<2)throw new Error(`convertRadix: wrong from=${Y}, base cannot be less than 2`);if(q<2)throw new Error(`convertRadix: wrong to=${q}, base cannot be less than 2`);if(!Array.isArray($))throw new Error("convertRadix: data should be array");if(!$.length)return[];let J=0,G=[],Q=Array.from($);Q.forEach((O)=>{if(l9(O),O<0||O>=Y)throw new Error(`Wrong integer: ${O}`)});while(!0){let O=0,X=!0;for(let Z=J;Z<Q.length;Z++){let U=Q[Z],N=Y*O+U;if(!Number.isSafeInteger(N)||Y*O/Y!==O||N-U!==Y*O)throw new Error("convertRadix: carry overflow");O=N%q;let V=Math.floor(N/q);if(Q[Z]=V,!Number.isSafeInteger(V)||V*q+O!==N)throw new Error("convertRadix: carry overflow");if(!X)continue;else if(!V)J=Z;else X=!1}if(G.push(O),X)break}for(let O=0;O<$.length-1&&$[O]===0;O++)G.push(0);return G.reverse()}var kV=($,Y)=>!Y?$:kV(Y,$%Y),Z4=($,Y)=>$+(Y-kV($,Y));function _V($,Y,q,J){if(!Array.isArray($))throw new Error("convertRadix2: data should be array");if(Y<=0||Y>32)throw new Error(`convertRadix2: wrong from=${Y}`);if(q<=0||q>32)throw new Error(`convertRadix2: wrong to=${q}`);if(Z4(Y,q)>32)throw new Error(`convertRadix2: carry overflow from=${Y} to=${q} carryBits=${Z4(Y,q)}`);let G=0,Q=0,O=2**q-1,X=[];for(let Z of $){if(l9(Z),Z>=2**Y)throw new Error(`convertRadix2: invalid data word=${Z} from=${Y}`);if(G=G<<Y|Z,Q+Y>32)throw new Error(`convertRadix2: carry overflow pos=${Q} from=${Y}`);Q+=Y;for(;Q>=q;Q-=q)X.push((G>>Q-q&O)>>>0);G&=2**Q-1}if(G=G<<q-Q&O,!J&&Q>=Y)throw new Error("Excess padding");if(!J&&G)throw new Error(`Non-zero padding: ${G}`);if(J&&Q>0)X.push(G>>>0);return X}function IF($){return l9($),{encode:(Y)=>{if(!X4(Y))throw new Error("radix.encode input should be Uint8Array");return vV(Array.from(Y),256,$)},decode:(Y)=>{if(!Array.isArray(Y)||Y.length&&typeof Y[0]!=="number")throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(vV(Y,$,256))}}}function a1($,Y=!1){if(l9($),$<=0||$>32)throw new Error("radix2: bits should be in (0..32]");if(Z4(8,$)>32||Z4($,8)>32)throw new Error("radix2: carry overflow");return{encode:(q)=>{if(!X4(q))throw new Error("radix2.encode input should be Uint8Array");return _V(Array.from(q),8,$,!Y)},decode:(q)=>{if(!Array.isArray(q)||q.length&&typeof q[0]!=="number")throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(_V(q,$,8,Y))}}}function vF($,Y){if(l9($),typeof Y!=="function")throw new Error("checksum fn should be function");return{encode(q){if(!X4(q))throw new Error("checksum.encode: input should be Uint8Array");let J=Y(q).slice(0,$),G=new Uint8Array(q.length+$);return G.set(q),G.set(J,q.length),G},decode(q){if(!X4(q))throw new Error("checksum.decode: input should be Uint8Array");let J=q.slice(0,-$),G=Y(J).slice(0,$),Q=q.slice(-$);for(let O=0;O<$;O++)if(G[O]!==Q[O])throw new Error("Invalid checksum");return J}}}var iT=H1(a1(4),v1("0123456789ABCDEF"),_1("")),sT=H1(a1(5),v1("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),U4(5),_1("")),rT=H1(a1(5),v1("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),_1("")),tT=H1(a1(5),v1("0123456789ABCDEFGHIJKLMNOPQRSTUV"),U4(5),_1("")),eT=H1(a1(5),v1("0123456789ABCDEFGHIJKLMNOPQRSTUV"),_1("")),$I=H1(a1(5),v1("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),_1(""),SV(($)=>$.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),YI=H1(a1(6),v1("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),U4(6),_1("")),qI=H1(a1(6),v1("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),_1("")),JI=H1(a1(6),v1("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),U4(6),_1("")),GI=H1(a1(6),v1("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),_1("")),_F=($)=>H1(IF(58),v1($),_1("")),SF=_F("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var xV=($)=>H1(vF(4,(Y)=>$($(Y))),SF);var QI=H1(v1("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),_1(""));var OI=H1(a1(4),v1("0123456789abcdef"),_1(""),SV(($)=>{if(typeof $!=="string"||$.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof $} with length ${$.length}`);return $.toLowerCase()}));/*! scure-bip32 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */var N4=n1.ProjectivePoint,Kq=xV(M6);function fV($){return BigInt(`0x${YV($)}`)}function kF($){return qV($.toString(16).padStart(64,"0"))}var xF=sY("Bitcoin seed"),zq={private:76066276,public:76067358},Wq=2147483648,fF=($)=>NV(M6($)),mF=($)=>$9($).getUint32(0,!1),M4=($)=>{if(!Number.isSafeInteger($)||$<0||$>4294967295)throw new Error(`Invalid number=${$}. Should be from 0 to 2 ** 32 - 1`);let Y=new Uint8Array(4);return $9(Y).setUint32(0,$,!1),Y};class Z9{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return mF(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){let $=this.privateKey;if(!$)throw new Error("No private key");return Kq.encode(this.serialize(this.versions.private,f9(new Uint8Array([0]),$)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return Kq.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed($,Y=zq){if(w1($),8*$.length<128||8*$.length>512)throw new Error(`HDKey: wrong seed length=${$.length}. Should be between 128 and 512 bits; 256 bits is advised)`);let q=F5(Yq,xF,$);return new Z9({versions:Y,chainCode:q.slice(32),privateKey:q.slice(0,32)})}static fromExtendedKey($,Y=zq){let q=Kq.decode($),J=$9(q),G=J.getUint32(0,!1),Q={versions:Y,depth:q[4],parentFingerprint:J.getUint32(5,!1),index:J.getUint32(9,!1),chainCode:q.slice(13,45)},O=q.slice(45),X=O[0]===0;if(G!==Y[X?"private":"public"])throw new Error("Version mismatch");if(X)return new Z9({...Q,privateKey:O.slice(1)});else return new Z9({...Q,publicKey:O})}static fromJSON($){return Z9.fromExtendedKey($.xpriv)}constructor($){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!$||typeof $!=="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=$.versions||zq,this.depth=$.depth||0,this.chainCode=$.chainCode||null,this.index=$.index||0,this.parentFingerprint=$.parentFingerprint||0,!this.depth){if(this.parentFingerprint||this.index)throw new Error("HDKey: zero depth with non-zero index/parent fingerprint")}if($.publicKey&&$.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if($.privateKey){if(!n1.utils.isValidPrivateKey($.privateKey))throw new Error("Invalid private key");this.privKey=typeof $.privateKey==="bigint"?$.privateKey:fV($.privateKey),this.privKeyBytes=kF(this.privKey),this.pubKey=n1.getPublicKey($.privateKey,!0)}else if($.publicKey)this.pubKey=N4.fromHex($.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=fF(this.pubKey)}derive($){if(!/^[mM]'?/.test($))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test($))return this;let Y=$.replace(/^[mM]'?\//,"").split("/"),q=this;for(let J of Y){let G=/^(\d+)('?)$/.exec(J),Q=G&&G[1];if(!G||G.length!==3||typeof Q!=="string")throw new Error(`Invalid child index: ${J}`);let O=+Q;if(!Number.isSafeInteger(O)||O>=Wq)throw new Error("Invalid index");if(G[2]==="'")O+=Wq;q=q.deriveChild(O)}return q}deriveChild($){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let Y=M4($);if($>=Wq){let O=this.privateKey;if(!O)throw new Error("Could not derive hardened child key");Y=f9(new Uint8Array([0]),O,Y)}else Y=f9(this.pubKey,Y);let q=F5(Yq,this.chainCode,Y),J=fV(q.slice(0,32)),G=q.slice(32);if(!n1.utils.isValidPrivateKey(J))throw new Error("Tweak bigger than curve order");let Q={versions:this.versions,chainCode:G,depth:this.depth+1,parentFingerprint:this.fingerprint,index:$};try{if(this.privateKey){let O=J1(this.privKey+J,n1.CURVE.n);if(!n1.utils.isValidPrivateKey(O))throw new Error("The tweak was out of range or the resulted private key is invalid");Q.privateKey=O}else{let O=N4.fromHex(this.pubKey).add(N4.fromPrivateKey(J));if(O.equals(N4.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");Q.publicKey=O.toRawBytes(!0)}return new Z9(Q)}catch(O){return this.deriveChild($+1)}}sign($){if(!this.privateKey)throw new Error("No privateKey set!");return w1($,32),n1.sign($,this.privKey).toCompactRawBytes()}verify($,Y){if(w1($,32),w1(Y,64),!this.publicKey)throw new Error("No publicKey set!");let q;try{q=n1.Signature.fromCompact(Y)}catch(J){return!1}return n1.verify(q,$,this.publicKey)}wipePrivateData(){if(this.privKey=void 0,this.privKeyBytes)this.privKeyBytes.fill(0),this.privKeyBytes=void 0;return this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize($,Y){if(!this.chainCode)throw new Error("No chainCode set");return w1(Y,33),f9(M4($),new Uint8Array([this.depth]),M4(this.parentFingerprint),M4(this.index),this.chainCode,Y)}}var M8=V8($5(),1),$j=V8(oY(),1),W4=($)=>`https://api.blockchair.com/${gF($)}`,mV=($)=>{switch($){case L0.Bitcoin:return 5;case L0.Dogecoin:return 1e4;case L0.Litecoin:return 1;default:return 2}},gF=($)=>{switch($){case L0.BitcoinCash:return"bitcoin-cash";case L0.Litecoin:return"litecoin";case L0.Dash:return"dash";case L0.Dogecoin:return"dogecoin";case L0.Polkadot:return"polkadot";default:return"bitcoin"}},bF=async($)=>{try{let{feePerKb:Y}=await T5.get(`https://app.bitgo.com/api/v2/${$.toLowerCase()}/tx/fee`),q=Y/1000;return Math.max(q,mV($))}catch(Y){return mV($)}},L4=async($,Y)=>{try{let q=await T5.get($);if(!q||q.context.code!==200)throw new Error(`failed to query ${$}`);return q.data}catch(q){if(!Y)throw q;let J=await T5.get(`${$}${Y?`&key=${Y}`:""}`);if(!J||J.context.code!==200)throw new Error(`failed to query ${$}`);return J.data}},dF={utxo:[],address:{balance:0,transaction_count:0}},uV=async({address:$,chain:Y,apiKey:q})=>{if(!$)throw new Error("address is required");try{return(await L4(`${W4(Y)}/dashboards/address/${$}?transaction_details=true`,q))[$]}catch(J){return dF}},yF=async({address:$,chain:Y,apiKey:q})=>{return(await uV({address:$,chain:Y,apiKey:q}))?.address.balance},lF=async({chain:$,address:Y,apiKey:q})=>{if(!Y)throw new Error("address is required");try{return(await L4(`${W4($)}/addresses/balances?addresses=${Y}`,q))[Y]||0}catch(J){return 0}},oV=async({chain:$,apiKey:Y,txHash:q})=>{if(!q)throw new Error("txHash is required");try{return(await L4(`${W4($)}/raw/transaction/${q}`,Y))?.[q]?.raw_transaction}catch(J){return console.error(J),""}},hF=async({chain:$,address:Y,apiKey:q,offset:J=0,limit:G=100})=>{return(await L4(`${W4($)}/outputs?q=is_spent(false),recipient(${Y})&limit=${G}&offset=${J}`,q)).filter(({is_spent:Q})=>!Q).map(({script_hex:Q,block_id:O,transaction_hash:X,index:Z,value:U,spending_signature_hex:N})=>({hash:X,index:Z,value:U,txHex:N,script_hex:Q,is_confirmed:O!==-1}))},pV=async({chain:$,address:Y,apiKey:q,offset:J=0,limit:G=100})=>{if(!Y)throw new Error("address is required");try{let Q=await hF({chain:$,address:Y,apiKey:q,offset:J,limit:G});if(Q.length<=G)return Q;let O=await pV({chain:$,address:Y,apiKey:q,offset:J+G,limit:G});return[...Q,...O]}catch(Q){return console.error(Q),[]}},cF=async({address:$,chain:Y,apiKey:q,fetchTxHex:J=!0})=>{let G=await pV({chain:Y,address:$,apiKey:q}),Q=[];for(let{hash:O,index:X,script_hex:Z,value:U}of G){let N;if(J)N=await oV({txHash:O,chain:Y,apiKey:q});Q.push({address:$,hash:O,index:X,txHex:N,value:U,witnessUtxo:{value:U,script:Buffer.from(Z,"hex")}})}return Q},nV=({apiKey:$,chain:Y})=>({getConfirmedBalance:(q)=>lF({chain:Y,address:q,apiKey:$}),getRawTx:(q)=>oV({txHash:q,chain:Y,apiKey:$}),getSuggestedTxFee:()=>bF(Y),getBalance:(q)=>yF({address:q,chain:Y,apiKey:$}),getAddressData:(q)=>uV({address:q,chain:Y,apiKey:$}),scanUTXOs:(q)=>cF({...q,chain:Y,apiKey:$})}),uF=typeof process!=="undefined"&&process.pid?process.pid.toString(36):"",N9=($)=>{switch($){case L0.Bitcoin:return aV.networks.bitcoin;case L0.BitcoinCash:return w5.default.bitcoincash.main.toBitcoinJS();case L0.Dash:return w5.default.dash.main.toBitcoinJS();case L0.Litecoin:return w5.default.litecoin.main.toBitcoinJS();case L0.Dogecoin:{let Y={private:70615956,public:70617039},q=w5.default.dogecoin.test;return q.versions.bip32=Y,w5.default.dogecoin.main.toBitcoinJS()}default:throw new Error("Invalid chain")}},oF=($)=>({[N8.Average]:$,[N8.Fast]:$*1.5,[N8.Fastest]:$*2}),Lq=0,pF=()=>{let $=Date.now(),Y=Lq||$;return Lq=Y,$>Lq?$:Y+1},nF=()=>uF+pF().toString(36),iV=async({txHash:$,rpcUrl:Y})=>{let q=JSON.stringify({jsonrpc:"2.0",method:"sendrawtransaction",params:[$],id:nF()}),J=await T5.post(Y,{headers:{"Content-Type":"application/json"},body:q});if(J.error)throw new Error(`failed to broadcast a transaction: ${J.error?.message}`);if(J.result.includes('"code":-26'))throw new Error("Invalid transaction: the transaction amount was too low");return J.result},aF;(($)=>{$.Mainnet="mainnet",$.Testnet="testnet"})(aF||={});var h9={["legacy"]:{["mainnet"]:{["p2pkh"]:0,["p2sh"]:5},["testnet"]:{["p2pkh"]:111,["p2sh"]:196}},["bitpay"]:{["mainnet"]:{["p2pkh"]:28,["p2sh"]:40},["testnet"]:{["p2pkh"]:111,["p2sh"]:196}}};function iF($){try{return C4($),!0}catch(Y){return!1}}function sF($){return C4($)?.network}function V4($){let Y=C4($);if(Y?.format==="legacy")return $;return eF(Y)}function Fq($){let Y=C4($);return $P(Y)}function C4($){try{return rF($)}catch(Y){}try{return tF($)}catch(Y){}throw Error("Received an invalid Bitcoin Cash address as input.")}function rF($){try{let Y=aY.decode($);if(Y.length!==21)throw Error("Received an invalid Bitcoin Cash address as input.");let q=Y[0],J=Array.prototype.slice.call(Y,1);switch(q){case h9.legacy.mainnet.p2pkh:return{hash:J,format:"legacy",network:"mainnet",type:"p2pkh"};case h9.legacy.mainnet.p2sh:return{hash:J,format:"legacy",network:"mainnet",type:"p2sh"};case h9.legacy.testnet.p2pkh:return{hash:J,format:"legacy",network:"testnet",type:"p2pkh"};case h9.legacy.testnet.p2sh:return{hash:J,format:"legacy",network:"testnet",type:"p2sh"};case h9.bitpay.mainnet.p2pkh:return{hash:J,format:"bitpay",network:"mainnet",type:"p2pkh"};case h9.bitpay.mainnet.p2sh:return{hash:J,format:"bitpay",network:"mainnet",type:"p2sh"};default:throw Error("Received an invalid Bitcoin Cash address as input.")}}catch(Y){throw Error("Received an invalid Bitcoin Cash address as input.")}}function tF($){if($.indexOf(":")!==-1)try{return gV($)}catch(Y){}else{let Y=["bitcoincash","bchtest","bchreg"];for(let q of Y)try{return gV(`${q}:${$}`)}catch(J){}}throw Error("Received an invalid Bitcoin Cash address as input.")}function gV($){try{let{hash:Y,prefix:q,type:J}=Hq.default.decode($);return{format:"cashaddr",hash:Array.prototype.slice.call(Y,0),network:q==="bitcoincash"?"mainnet":"testnet",type:J==="P2PKH"?"p2pkh":"p2sh"}}catch(Y){throw Error("Received an invalid Bitcoin Cash address as input.")}}function eF($){let Y=h9.legacy[$.network][$.type],q=Buffer.alloc(1+$.hash.length);return q[0]=Y,q.set($.hash,1),aY.encode(q)}function $P($){let Y=$.network==="mainnet"?"bitcoincash":"bchtest",q=$.type==="p2pkh"?"P2PKH":"P2SH",J=new Uint8Array($.hash);return Hq.default.encode(Y,q,J)}var tV=($)=>{switch($){case L0.Bitcoin:case L0.BitcoinCash:return 550;case L0.Dash:case L0.Litecoin:return 5500;case L0.Dogecoin:return 1e5;default:throw new Error("Invalid Chain")}},z6=({inputs:$,outputs:Y,feeRate:q=1,chain:J=L0.Bitcoin})=>{let G=Math.ceil(q),Q=$[0]&&"address"in $[0]&&$[0].address?Pq($[0].address):"P2PKH",O=$.filter((z)=>j6(z)*G<=z.value),X=eV+Y.reduce((z,L)=>z+Rq(L,Q),0),Z=Y.reduce((z,L)=>z+L.value,0),U=X*G,N=0,V=[];for(let z of O){let L=j6(z),j=G*L;U+=j,N+=z.value,V.push(z);let D=U+Z;if(N<D)continue;let B=N-D,R=G*Rq({address:"",value:0},Q);if(B>R){let A=R+U,w=N-(Z+A);if(w>Math.max(j6({})*G,tV(J)))return{inputs:V,outputs:Y.concat({value:w,address:""}),fee:A}}return{inputs:V,outputs:Y,fee:U}}return{fee:G*Bq({inputs:$,outputs:Y,feeRate:G})}},BI=1000,eV=10,YP=10,qP=41,JP=107,W6=($)=>{let Y=Buffer.from($,"utf8");return D4.script.compile([D4.opcodes.OP_RETURN,Y])},GP;(($)=>{$.P2PKH="P2PKH",$.P2WPKH="P2WPKH"})(GP||={});var Cq={["P2PKH"]:148,["P2WPKH"]:68},Dq={["P2PKH"]:34,["P2WPKH"]:31},Pq=($)=>{if($.startsWith("bc1")||$.startsWith("ltc1"))return"P2WPKH";if($.startsWith("1")||$.startsWith("3")||$.startsWith("L")||$.startsWith("M")||$.startsWith("X")||$.startsWith("D")||$.startsWith("bitcoincash:q")||$.startsWith("q"))return"P2PKH";throw new Error("Invalid address")},Bq=({inputs:$,outputs:Y,feeRate:q})=>{let J=$[0]&&"address"in $[0]&&$[0].address?Pq($[0].address):"P2PKH",G=$.filter((O)=>O.value>=Cq["type"in O?O.type:"P2PKH"]*Math.ceil(q)).reduce((O,X)=>O+j6(X),0),Q=Y?.reduce((O,X)=>O+Rq(X),0)||Dq[J];return eV+G+Q},j6=($)=>{if("type"in $)return Cq[$.type];if("address"in $&&$.address)return Cq[Pq($.address)];return qP+JP},Rq=($,Y)=>{if($?.script)return YP+$.script.length+($.script.length>=74?2:1);if(Y)return Dq[Y];return Dq.P2PKH},j4=[L0.Dash,L0.Dogecoin],bV=({phrase:$,wif:Y,derivationPath:q,chain:J})=>{if(!(Y||$))throw new Error("Either phrase or wif must be provided");let G=$j.ECPairFactory(A9),Q=N9(J);if(Y)return G.fromWIF(Y,Q);let O=z4($),X=Z9.fromMasterSeed(O,Q).derive(q);if(!X.privateKey)throw new Error("Could not get private key from phrase");return G.fromPrivateKey(Buffer.from(X.privateKey),{network:Q})},Yj=({address:$,chain:Y})=>{try{return M8.initEccLib(A9),M8.address.toOutputScript($,N9(Y)),!0}catch(q){return!1}},QP=({keys:$,chain:Y})=>{if(!$)throw new Error("Keys must be provided");let q=j4.includes(Y)?M8.payments.p2pkh:M8.payments.p2wpkh,{address:J}=q({pubkey:$.publicKey,network:N9(Y)});if(!J)throw new Error("Address not defined");return J},OP=async({signTransaction:$,from:Y,memo:q,recipient:J,chain:G,apiClient:Q,feeOptionKey:O,broadcastTx:X,feeRate:Z,assetValue:U})=>{if(!Y)throw new Error("From address must be provided");if(!J)throw new Error("Recipient address must be provided");let N=Z||(await R4(Q))[O||N8.Fast],{psbt:V}=await Jj({recipient:J,feeRate:N,sender:Y,fetchTxHex:j4.includes(G),chain:G,apiClient:Q,assetValue:U,memo:q}),z=await $(V);return z.finalizeAllInputs(),X(z.extractTransaction().toHex())},XP=async({address:$,chain:Y,apiClient:q})=>{let J=await q.getBalance($)||0,G=Aq.fromBigInt(BigInt(J),yV[Y]).getValue("string");return[await K6.from({asset:`${Y}.${Y}`,value:G})]},R4=async($)=>oF(await $.getSuggestedTxFee()),qj=async({assetValue:$,recipient:Y,memo:q,sender:J,fetchTxHex:G=!1,apiClient:Q})=>{return{inputs:await Q.scanUTXOs({address:J,fetchTxHex:G}),outputs:[{address:Y,value:Number($.bigIntValue)},...q?[{address:"",script:W6(q),value:0}]:[]]}},Jj=async({assetValue:$,recipient:Y,memo:q,feeRate:J,sender:G,fetchTxHex:Q=!1,apiClient:O,chain:X})=>{let Z=q?W6(q):null,U=await qj({assetValue:$,recipient:Y,memo:q,sender:G,fetchTxHex:Q,apiClient:O}),{inputs:N,outputs:V}=z6({...U,feeRate:J,chain:X});if(!(N&&V))throw new Error("Insufficient Balance for transaction");let z=new M8.Psbt({network:N9(X)});if(X===L0.Dogecoin)z.setMaximumFeeRate(650000000);for(let L of N)z.addInput({hash:L.hash,index:L.index,...!!L.witnessUtxo&&!j4.includes(X)&&{witnessUtxo:L.witnessUtxo},...j4.includes(X)&&{nonWitnessUtxo:L.txHex?Buffer.from(L.txHex,"hex"):void 0}});for(let L of V){let j="address"in L&&L.address?L.address:G,D=L.script?Z?{script:Z,value:0}:void 0:{address:j,value:L.value};if(D)M8.initEccLib(A9),z.addOutput(D)}return{psbt:z,utxos:U.inputs,inputs:N}},dV=async({assetValue:$,apiClient:Y,chain:q,feeOptionKey:J=N8.Fast,feeRate:G,fetchTxHex:Q=!1,memo:O,recipient:X,from:Z})=>{let U=await qj({assetValue:$,recipient:X,memo:O,sender:Z,fetchTxHex:Q,apiClient:Y}),N=G?Math.floor(G):(await R4(Y))[J];return z6({...U,feeRate:N,chain:q})},ZP=async({from:$,memo:Y,feeRate:q,feeOptionKey:J=N8.Fast,recipients:G=1,chain:Q,apiClient:O})=>{let X=await O.getAddressData($),Z=q?Math.ceil(q):(await R4(O))[J],U=X?.utxo.map((L)=>({...L,type:"P2PKH",hash:""})).filter((L)=>L.value>Math.max(tV(Q),j6(L)*Z));if(!U?.length)return K6.from({chain:Q});let N=K6.from({chain:Q,value:U.reduce((L,j)=>L+j.value,0)}),V=typeof G==="number"?Array.from({length:G},()=>({address:$,value:0})):G;if(Y){let L=W6(Y);V.push({address:$,script:L,value:0})}let z=Bq({inputs:U,outputs:V,feeRate:Z})*Z;return N.sub(z)},Gj=($)=>({accumulative:z6,apiClient:$.apiClient,broadcastTx:$.broadcastTx,calculateTxSize:Bq,buildTx:(Y)=>Jj({...Y,...$}),getAddressFromKeys:(Y)=>QP({keys:Y,...$}),validateAddress:(Y)=>Yj({address:Y,...$}),createKeysForPath:(Y)=>bV({...Y,...$}),getPrivateKeyFromMnemonic:async(Y)=>bV({...$,...Y}).toWIF(),getBalance:async(Y,q)=>XP({address:Y,...$}),getFeeRates:()=>R4($.apiClient),transfer:(Y)=>OP({...Y,...$}),getInputsOutputsFee:(Y)=>dV({...Y,...$}),estimateTransactionFee:async(Y)=>{return K6.from({chain:$.chain,value:Aq.fromBigInt(BigInt((await dV({...Y,...$})).fee),8).getValue("string")})},estimateMaxSendableAmount:async(Y)=>ZP({...Y,...$})}),vI=({chain:$,address:Y})=>$===L0.BitcoinCash?E4(Y):Yj({address:Y,chain:$}),U9=L0.BitcoinCash,A4=($)=>K4(Fq($)),Qj=async({assetValue:$,recipient:Y,memo:q,feeRate:J,sender:G,apiClient:Q})=>{if(!E4(Y))throw new Error("Invalid address");let O=await Q.scanUTXOs({address:A4(G),fetchTxHex:!0}),X=q?W6(q):null,Z=[];Z.push({address:Y,value:$.getBaseValue("number")});let{inputs:U,outputs:N}=z6({inputs:O,outputs:Z,feeRate:J,chain:U9});if(!(U&&N))throw new Error("Balance insufficient for transaction");let V=new M9.TransactionBuilder(N9(U9));await Promise.all(U.map(async(z)=>{let L=await Q.getRawTx(z.hash);V.addInput(M9.Transaction.fromBuffer(Buffer.from(L,"hex")),z.index)}));for(let z of N){let L="address"in z&&z.address?z.address:V4(G),j=M9.address.toOutputScript(V4(L),N9(U9));V.addOutput(j,z.value)}if(X)V.addOutput(X,0);return{builder:V,utxos:U}},UP=async({signTransaction:$,from:Y,recipient:q,assetValue:J,apiClient:G,broadcastTx:Q,getFeeRates:O,...X})=>{if(!Y)throw new Error("From address must be provided");if(!q)throw new Error("Recipient address must be provided");if(!$)throw new Error("signTransaction must be provided");let Z=X.feeRate||(await O())[N8.Fast],{builder:U,utxos:N}=await Qj({...X,assetValue:J,feeRate:Z,recipient:q,sender:Y,apiClient:G}),V=$({builder:U,utxos:N}).toHex();return Q(V)},NP=async({assetValue:$,recipient:Y,memo:q,feeRate:J,sender:G,apiClient:Q})=>{let O=Fq(Y);if(!E4(O))throw new Error("Invalid address");let X=await Q.scanUTXOs({address:A4(G),fetchTxHex:!0}),Z=Number(J.toFixed(0)),U=q?W6(q):null,N=[];if(N.push({address:V4(Y),value:$.getBaseValue("number")}),U)N.push({script:U,value:0});let{inputs:V,outputs:z}=z6({inputs:X,outputs:N,feeRate:Z,chain:U9});if(!(V&&z))throw new Error("Balance insufficient for transaction");let L=new sV.Psbt({network:N9(U9)});for(let{hash:j,index:D,witnessUtxo:B}of V)L.addInput({hash:j,index:D,witnessUtxo:B});for(let j of z){let D="address"in j&&j.address?j.address:V4(G),B=j.script?U?{script:U,value:0}:void 0:{address:D,value:j.value};if(B)L.addOutput(B)}return{psbt:L,utxos:X,inputs:V}},K4=($)=>$.replace(/(bchtest:|bitcoincash:)/,""),E4=($)=>{let Y=K4($);return iF(Y)&&sF(Y)==="mainnet"},MP=({phrase:$,derivationPath:Y=`${cV.BCH}/0`,wif:q})=>{let J=N9(U9);if(q)return rV.ECPairFactory(A9).fromWIF(q,J);if(!$)throw new Error("No phrase provided");return M9.HDNode.fromSeedBuffer(Buffer.from(z4($)),J).derivePath(Y).keyPair},VP=($)=>{let Y=$.getAddress(0);return A4(Y)},jP=({apiKey:$,rpcUrl:Y=lV(L0.BitcoinCash),apiClient:q})=>{let J=q||nV({apiKey:$,chain:U9}),{getBalance:G,...Q}=Gj({chain:U9,apiClient:J,broadcastTx:(O)=>iV({txHash:O,rpcUrl:Y})});return{...Q,stripPrefix:K4,stripToCashAddress:A4,validateAddress:E4,createKeysForPath:MP,getAddressFromKeys:VP,buildBCHTx:(O)=>Qj({...O,apiClient:J}),getBalance:(O,X)=>G(K4(Fq(O))),buildTx:(O)=>NP({...O,apiClient:J}),transfer:(O)=>UP({...O,getFeeRates:Q.getFeeRates,broadcastTx:Q.broadcastTx,apiClient:J})}},H4=($)=>({apiKey:Y,rpcUrl:q=hV[$],apiClient:J})=>{return Gj({chain:$,broadcastTx:(G)=>iV({txHash:G,rpcUrl:q}),apiClient:J||nV({apiKey:Y,chain:$})})},KP=jP,zP=H4(L0.Bitcoin),WP=H4(L0.Dash),LP=H4(L0.Dogecoin),CP=H4(L0.Litecoin),_I=($)=>{switch($){case L0.BitcoinCash:return KP;case L0.Bitcoin:return zP;case L0.Dogecoin:return LP;case L0.Litecoin:return CP;case L0.Dash:return WP;default:throw new Error(`Chain ${$} is not supported`)}};var export_networks=Eq.networks;var export_Transaction=Eq.Transaction;var export_Psbt=Eq.Psbt;export{E4 as validateAddress,vI as utxoValidateAddress,nF as uniqid,V4 as toLegacyAddress,Fq as toCashAddress,A4 as stripToCashAddress,K4 as stripPrefix,oF as standardFeeRates,j4 as nonSegwitChains,export_networks as networks,iF as isValidAddress,_I as getToolboxByChain,Pq as getScriptTypeForAddress,Rq as getOutputSize,N9 as getNetwork,j6 as getInputSize,tV as getDustThreshold,ZP as estimateMaxSendableAmount,sF as detectAddressNetwork,W6 as compileMemo,Bq as calculateTxSize,nV as blockchairApi,z6 as accumulative,GP as UTXOScriptType,export_Transaction as Transaction,eV as TX_OVERHEAD,export_Psbt as Psbt,Dq as OutputSizes,YP as OP_RETURN_OVERHEAD,aF as Network,BI as MIN_TX_FEE,CP as LTCToolbox,Cq as InputSizes,LP as DOGEToolbox,WP as DASHToolbox,Gj as BaseUTXOToolbox,zP as BTCToolbox,KP as BCHToolbox};

//# debugId=D6EAC3CE21BA454F64756E2164756E21
